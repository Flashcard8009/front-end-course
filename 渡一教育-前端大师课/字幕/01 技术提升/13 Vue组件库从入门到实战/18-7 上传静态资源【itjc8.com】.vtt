WEBVTT

00:01.140 --> 00:08.300
到上一节课为止的话 我们已经把我们的那个NGX 就是我们的前端服务器

00:08.820 --> 00:14.460
已经安装好了 安装好了之后然后接下来的话我们就需要对我们的这个前台和后台

00:15.220 --> 00:20.100
我们要进行一个这个打包 打包之后然后打包成这个静态资源

00:20.340 --> 00:26.500
上传到我们的这个NGX 但是在打包之前有一个地方我要说一下

00:27.260 --> 00:28.540
就是关于代码的地方

00:29.540 --> 00:29.820
这边

00:31.860 --> 00:33.980
把他打开 我们放大一点啊

00:35.460 --> 00:43.980
稍微放大一点 再来 ok 而就这边这边当时我们在做开发的时候啊 这这个是我们的后台是吧

00:44.700 --> 00:49.580
在做开发的时候 当时我带着大家写代码的时候 是不是创建了一个这么一个文件

00:50.660 --> 00:51.860
叫做这个

00:52.860 --> 00:57.380
在哪去啊 这里这里 是不是叫做这个ur airconfig.js

00:57.940 --> 01:01.580
然后在这个位置是否配置了我们的这个就是ip地址

01:02.340 --> 01:06.460
看到没有 就这边的话就是开发阶段 然后配置ip地址 大家这边ip地址

01:07.060 --> 01:13.060
然后接下来我们这个代码里面 就是比如说我们要显示图片的时候 是不是全部都是拼接了这个ip的

01:13.660 --> 01:17.500
比如说我举个例子哈 比如说这个views

01:18.660 --> 01:21.620
views 然后我们找一个这个 banner

01:22.340 --> 01:30.460
banner啊 banner 这边有大图这个预览 是吧 大图预览 然后接下来我们在这边 我们在这边的话 是不是都是拼接了这个

01:31.260 --> 01:40.860
这个前面的这个ip的 对不对 而这个的话在开发阶段的话没有问题 但是你真正认证部署上线的话 其实这样子是很危险的

01:41.580 --> 01:47.980
为什么这么说呢 因为你部署上线的话 然后接下来你如果这边前面写上了你的这个ip地址

01:48.460 --> 01:52.620
那到时候的话 然后别人就可以看得到你这边具体的这个

01:53.540 --> 02:01.380
对应的这个ip 以及这个端口号这些就都看得到啊 所以说我们这边选择什么呢 我们这边选择的话 其实这个的话 其实就可以不要了

02:02.380 --> 02:07.220
这个就可以不要了啊 这个不要的话 然后接下来这边在显示这个大图的时候

02:08.020 --> 02:11.780
大图的时候 这边的话仍然就是什么呢 就直接是这个啊逼个

02:12.460 --> 02:14.260
img 可不可以啊 这边的话就是

02:15.260 --> 02:19.740
上面上面的话就是直接是me都img 我们之前是不是写的是me都img2

02:20.420 --> 02:26.940
对不对me都img2这个这个2的话是前面拼接了那个服务器的那个地址的 那我们现在就不要了

02:27.740 --> 02:31.860
啊就不要了 包括其他地方就都是 比如说这个博客

02:33.220 --> 02:35.700
博客这边啊 你看我这边就都改回来了

02:36.420 --> 02:42.740
这边啊 就都没有用这个拼接了啊 都没有用拼接的话 那他现在的话他拿到的地址是什么

02:43.500 --> 02:45.060
拿到的地址是不是就是这个

02:46.260 --> 02:55.180
拿到的地址是不是就是这个样子的 这边博客啊就就这啊 拿到的地址是不是这个样子的

02:55.980 --> 03:01.900
对不对 是这样子的 这样子怎么办呢 这样子的话其实很简单 这边的话我们可以这样子来做

03:02.620 --> 03:08.060
我们这边的话在这个vueconfig.js里面 我们这边的话做一个这个配置就可以了

03:09.220 --> 03:17.060
看到没有 我们前面是不是做了这个resapi 是不是这个代理服务器的这个配置啊 那这边的话你只需要做这个对应的这个配置

03:18.100 --> 03:25.180
就ok了 明白没有啊 所以说这边的话 首先第一件事情就是需要大家改一下 把这个改一下

03:25.660 --> 03:33.340
这里的话就是统一就是再配一个这个 当然你一会打包的话这个不所谓 这个就没有了 但是这边这里面的代码你要改一下

03:34.100 --> 03:36.860
就这边的代码 我们就不需要前面拼接这个东西了

03:37.660 --> 03:43.420
就刚刚那个跑哪去了 就这个东西 这个东西的话我们就不需要进行一个这个拼接了

03:44.060 --> 03:49.020
明白没啊 你看我这边我是全部改了的 包括比如说这个项目

03:50.060 --> 03:52.780
不要这个项目 项目的话你看这边啊

03:53.260 --> 04:00.860
我都没有要这个了 这边那就是直接 直接然后显示的这个图片的话 直接就是显示

04:01.580 --> 04:02.860
拿到的那个stream

04:04.380 --> 04:09.500
就是我看一下图片在哪 预览图啊 看到没有 直接就显示这个就可以了

04:11.100 --> 04:18.620
啊 把这个首先就是这个问题啊 一定要改一下 改了之后然后接下来下一步 下一步的话我们就要进行一个这个打包

04:19.500 --> 04:24.540
把这个保存一下 保存一下之后 然后接下来的话下一步 下一步的话我们就要进行一个打包

04:26.790 --> 04:32.550
好 来到这边 我们对我们的这个前后台进行一个这个打包啊 重新开一个

04:33.910 --> 04:37.350
这边的话打包前台嘛 cd

04:38.390 --> 04:40.790
这个 然后my site

04:41.830 --> 04:43.510
my site 然后叫client

04:44.470 --> 04:47.670
cd进来 然后接下来这边的话npm

04:48.550 --> 04:49.750
run build

04:50.870 --> 05:00.700
走啊 这边啊是不是就开始打包了 对吧啊 这边的话等他打包 然后接下来这边这边啊 cd 到这个bank

05:01.420 --> 05:02.460
啊 这边已经打包好了

05:04.220 --> 05:10.300
看到没有 已经打包好了啊 它是在哪个目录呢 它是在那个dist目录 你把它打开看一下

05:10.860 --> 05:15.420
你看这边是不是有个dist目录 第四个目录下面的话 你看是不是就是生成了这些

05:15.980 --> 05:16.460
静态文件

05:17.500 --> 05:21.820
可了没有啊 大家这边这边呢是cd这个bankground system

05:22.780 --> 05:29.020
大家这边这边进行打包 这边打包的话命令稍微有一些些不一样啊 这边的话你看它这个命令

05:29.420 --> 05:32.780
它的命令的话是这个build冒号这个

05:33.420 --> 05:36.460
prod 说这边的话我们这边复制这个命令

05:37.420 --> 05:38.540
复制

05:39.420 --> 05:41.580
那这边npm run

05:42.220 --> 05:42.860
ok 走

05:44.060 --> 05:44.860
好 开始打包

05:47.100 --> 05:50.380
好 这边它到时候也会生成一个这个dist目录

05:52.140 --> 05:54.380
啊 等它打包嘛

05:54.940 --> 05:59.100
好 然后接下来这边来到我们这边 这边的话我们把它打开

05:59.900 --> 06:03.900
这边是不是有个这个dist目录啊 对不对 然后接下来我们这边把它复制一份

06:05.100 --> 06:07.100
复制一份啊 我直接拿出来吧

06:07.980 --> 06:14.540
直接拿出来放到这 然后这个改个名字这个的话叫做dist f代表这个前台

06:15.100 --> 06:17.020
然后这样我这边把它压缩一下

06:18.620 --> 06:22.060
压缩啊 然后看那边打包好没有啊 这边是不是也打包好了

06:22.620 --> 06:28.460
可不可以啊 这边the dist directory is ready是吧 好 那接下来到我们这边

06:29.980 --> 06:33.820
来到这边啊 把这个这个的话也直接拿出来

06:34.540 --> 06:35.900
这个的话 然后改个名字

06:38.230 --> 06:42.470
改个名字叫做dist b啊bankground了嘛 大家这边的话

06:44.310 --> 06:51.350
这边要说一下 ok 搞定好 搞定之后大家这边一样的 是不是需要把这个静态资源上传

06:52.310 --> 06:55.270
对不对啊 所以我们这边的话需要把这个静态资源把它

06:55.910 --> 06:59.190
上传一下 上传的话就是之前讲过的啊

07:00.230 --> 07:03.830
这边就是shell 然后新建远程连接

07:04.390 --> 07:10.870
然后啊 这里这里的话选择那个要不要对吧 然后连接

07:11.590 --> 07:19.290
然后输入密码啊输入输入了之后 然后接下来这边的话进行一个这个上传

07:20.090 --> 07:25.620
啊 这边再开一个 ok 然后复制这个路径

07:26.500 --> 07:32.660
啊 这边的话就是put啊这个 然后接下来上传到哪呢 上传到我仍然是就是拿到

07:33.380 --> 07:36.180
呃 user 下面是不是有个local

07:36.820 --> 07:41.700
local 下面是不是有一个ngx ngx 下面是不是有个html

07:42.420 --> 07:46.180
对不对 因为你那个ngx最终显示的就是html 里面的内容

07:46.500 --> 07:51.780
所以我统一上传到这个ngx的html目录下面 好 然后再这边走

07:52.820 --> 07:56.020
是不是上传成功了 上传成功之后 然后接下来第二个

07:57.620 --> 08:01.300
这个是f 然后接下来这边这个b

08:03.140 --> 08:07.780
拿过来 然后啊 我其实每次就是难不想那个敲

08:08.820 --> 08:10.180
啊 大家这边put

08:11.300 --> 08:15.620
然后接下来这边 仍然是user 下面的这个local

08:16.340 --> 08:23.140
下面的ngx 下面的html 走 ok 是不是搞定了

08:23.700 --> 08:27.540
好 搞定之后 然后接下来的话 回到我们这边

08:28.420 --> 08:32.500
回到这边 啊 这边的话 然后接下来我们cd过去 我们来看一下啊

08:33.540 --> 08:35.620
cd到html 走

08:36.340 --> 08:39.700
s4 ok 了 对不对 两个压缩包已经有了

08:40.180 --> 08:44.020
有了之后 然后接下来的话 这边我们把它原本的这些东西 我把它删除掉

08:44.740 --> 08:48.900
rf 一个是这个50

08:49.460 --> 08:52.420
一个是这个 然后一个是index 你可以删除多个

08:52.900 --> 08:56.580
啊 这边的话就直接写空格 然后写多个就可以了啊 走

08:57.460 --> 08:58.820
然后加这边的话ls

08:59.460 --> 09:01.060
所以就只剩这两个压缩包了

09:01.780 --> 09:05.460
只剩这两个压缩包 然后将我们一个一个来 首先的话我们这边解压

09:06.180 --> 09:09.220
先解压前台嘛 这边的话就是dist

09:10.420 --> 09:11.300
dist f

09:12.020 --> 09:16.980
解压这个啊 解压 解压了之后 然后接下来这边是不是会有一个这个dist f

09:17.540 --> 09:19.380
对不对 然后将我们这边cd进去

09:20.340 --> 09:25.060
dist f 进来进来的话是不是就是解压出来是这些文件

09:25.540 --> 09:29.620
那接下来这些文件我需要把它移动到哪呢 我需要把它移动到

09:30.100 --> 09:34.740
是不是HTML目录下面 对不对 所以我这边呢 就是使用什么命令呢 使用mv

09:35.460 --> 09:39.140
啊mv 我看笔记里面给大家 给大家记没有

09:40.100 --> 09:42.020
我看一下 我记得好像是记得的哈

09:43.220 --> 09:48.340
在这边mv啊有是吧 有ok好 这边呢就是mv

09:48.900 --> 09:52.980
mv 现在选择你要移动的 这边的话 仍然是可以写多个

09:53.300 --> 09:57.140
我们要移动css image index

09:57.780 --> 09:58.900
然后js

09:59.940 --> 10:02.260
js 然后加这边 static

10:03.220 --> 10:09.060
是不是要移动这些东西 移动到哪呢 移动到user下面的local

10:09.540 --> 10:13.140
下面的ngx 下面的什么

10:13.540 --> 10:14.340
是不是HTML

10:14.900 --> 10:16.740
是不是移动到这个目录啊 好走

10:17.380 --> 10:22.260
好 然后加没有任何抱错很好 然后加这边lls看一下是不是已经空了

10:22.820 --> 10:26.740
已经空了之后 然后回过去 回到HTML 大家这边来看

10:27.300 --> 10:29.060
啊 你可以看到这边是不是移动过来了

10:29.700 --> 10:35.380
看到没有 移动过来之后 这样你就可以把这个dstf以及压缩包就可以一起删掉了

10:35.940 --> 10:37.860
rm-rf

10:38.500 --> 10:40.500
然后接下来这边的话dst

10:42.180 --> 10:43.860
dstf

10:44.820 --> 10:50.580
以及这个dstf点这个压缩包就一起删了

10:50.980 --> 10:53.220
删了之后 然后现在目录就是这个样子的

10:54.340 --> 10:59.860
然后这是我们的这个前台 前台的话就已经搞定了 搞定之后然后再是后台

11:00.500 --> 11:03.940
后台的话 然后接下来这边仍然是首先需要解压

11:04.500 --> 11:08.500
说我们这边的就是dst 然后这边的话这个

11:09.780 --> 11:10.900
应该是unzip 是吧

11:11.700 --> 11:15.620
unzip 然后接下来dst这个解压

11:16.420 --> 11:19.460
解压之后 然后接下来这边生成一个dstb

11:20.420 --> 11:23.380
然后接下来然后我这边让我需要创建一个这个目录

11:23.940 --> 11:28.180
为什么要创建目录呢 你看我这边 我这边的话比如说我访问这个

11:29.380 --> 11:33.780
访问这个的话是不是我的这个前台 对不对 然后接下来我这边的鞋杠

11:34.500 --> 11:34.980
and命

11:35.700 --> 11:41.860
那这里就是什么呢 这个的话就是我们的这个后台 也就是后台的话这边是不是添加一个这个and命

11:42.660 --> 11:45.140
对不对 说我这边需要创建一个目录

11:46.100 --> 11:51.060
make dir 创建目录的意思 创建一个什么呢 创建一个and命

11:51.780 --> 11:55.140
ok 那你先在这边看一下 是不是多了一个and命的目录

11:55.860 --> 12:00.500
对不对 好 那接下来我们cd 到这个dstb 这个目录下面

12:01.140 --> 12:05.460
好 看一下有这三个东西 这三个东西 然后接下来开始移动

12:05.700 --> 12:14.100
然后第一个 第二个 然后第三个 移动到哪呢 移动到user

12:14.740 --> 12:21.380
下面的local 下面的ngx 下面的html 下面的and命

12:22.740 --> 12:28.100
对不对 移动 移动之后然后加这个就空了 然后加我们回到上一集目录

12:29.220 --> 12:34.420
上一集目录 然后就可以把这个dstb和dstb这个压缩包就可以把它干掉了

12:35.140 --> 12:44.580
干rf 然后dstb 然后这边这个压缩包 把它删掉 删掉之后的现在的话 我们的这个目录就很干净了

12:44.980 --> 12:51.060
看到没有 你cd 到这个and命 你进去 进去的话你这边可以漏一眼 所以已经放进去了

12:51.860 --> 12:54.180
对不对 已经放进去了 okay

12:54.820 --> 13:01.700
好 那接下来的话 这边的话里面上来讲的话就应该已经ok了 那我们这边让我们来看一下 我们这边重新刷新一下

13:02.420 --> 13:09.860
啊 刷新一下 刷新一下之后你可以看到这边 这边的话是不是出道是出来了 对吧 但是有一些

13:10.900 --> 13:12.180
啊 有一些的话他这个

13:13.300 --> 13:22.340
就是这边图片也没出来 下面的这个东西是不是也没出来 为什么呢 就是因为我们这边的话这个ngx还需要进行一个这个配置

13:22.900 --> 13:25.380
啊 怎么进行配置呢 我们来看一下

13:27.640 --> 13:32.280
好 这边的话我们来到这个文档啊 这边的话是打包这个静态资源

13:32.920 --> 13:39.720
这边啊 前面这几个步骤我们是不是已经做了 对吧 打包前台代码 我们打包了 打包后台代码打包了

13:39.960 --> 13:45.880
打包了之后 然后将前台代码放入到ngx的html 目录下面 我们是不是也放了

13:46.200 --> 13:51.560
对不对 后台代码呢 是放到html的and命目录下面 okay 然后我们这边的话插一个步骤

13:52.040 --> 13:58.520
就是怎么呢 我们这边呢 需要修改这个ngx的配置文件 添加一个这个代理的这个设置

13:59.080 --> 14:07.320
啊 这边你就把这一块回到这嘛 回到这 回到这的话你把那个打开 把ngx的那个

14:08.120 --> 14:09.080
配置文件打开

14:09.880 --> 14:14.920
ngx的配置文件啊 这边来把它刷新一下啊 我重新刷新一下

14:16.280 --> 14:21.880
ok 好 然后接下来的话 这边找到它的配置文件 它是在这个康复下面

14:22.760 --> 14:26.360
康复下面有一个ngx.康复把它打开

14:26.760 --> 14:36.040
然后这边给你写一下啊 修改这个这个配置文件 该文件该文件

14:37.880 --> 14:41.800
位于位于哪里呢 位于这个

14:44.040 --> 14:51.480
这个康复目录下面 位于这个康复目录下的什么呢

14:51.960 --> 14:57.720
这个ngx.康复 是吧ngx.康复

14:58.280 --> 15:03.400
啊 然后我们需要添加 就是下面的这个代理 我们先来看一下这个配置文件

15:04.120 --> 15:07.640
在这边 它目前为止的话是不是就只写了一个这个

15:08.360 --> 15:13.160
对不对 这个代表什么意思呢 代表你访问我的这个根目录的时候

15:13.960 --> 15:20.840
啊 然后加这边的话 我这边的话找到这个html 那可以是什么呢 可以是index.html或者index.html

15:21.720 --> 15:28.200
对吧 那接下来我这边 我除了有这个请求 我还有什么请求呀 我还有是不是以这个api开头的

15:29.000 --> 15:33.320
这个的话我是不是要做这个转发的 转发到哪里 转发到是不是就是这个

15:34.200 --> 15:42.120
我本地的这个7001 就是我们那个服务器 对不对 包括这个res开头的和这个static开头的

15:42.440 --> 15:44.600
这些的话我都要做这个请求的转发

15:45.080 --> 15:49.400
这个就类似于什么呢 类似于你的那个voe.confeg.js

15:49.880 --> 15:57.480
我们那边是不是做了那个就是请求的那个代理 对不对 啊 这里就是一样的啊 把这个的话就把它加进去

15:58.600 --> 16:00.760
加到 加到这下面就可以了

16:02.040 --> 16:03.400
啊 把它格式化一下嘛

16:05.560 --> 16:05.960
呃

16:07.400 --> 16:09.240
这个稍微让它缩进一下

16:10.120 --> 16:14.280
ok 好 做一下这个 然后接下来这边的话还有一个 还有一个这个

16:14.760 --> 16:18.040
这个事让什么呢 就是让我们的前台代码的这个历史

16:18.760 --> 16:24.280
就是那个history模式起效果啊 以前的话我们是使用的是load

16:24.600 --> 16:30.360
load的话 它是给我们配置好了的 那在ngx里面的话 你需要做这么一行代码的配置

16:30.760 --> 16:39.400
这样子你的这个历史模式 它才会这个起效果 不然的话 它的那个你采用那个history模式 你刷新之后 它会报404的这个错误

16:40.040 --> 16:42.120
好吧 好 大家这边我们保存一下

16:43.160 --> 16:43.640
好 决定

16:45.670 --> 16:52.310
好 保存完毕 保存完毕之后 然后接下来你这边你注意啊 你现在改动了这个配置文件

16:52.870 --> 16:58.550
改动了配置文件之后 你需要重启这个服务器啊 怎么重启呢 我这边记录了一下

16:59.030 --> 17:03.750
就这边 使用ngx-s然后接下来这边 reload

17:04.310 --> 17:06.470
这个的话就可以进行一个重启

17:06.870 --> 17:07.990
好 那这样我们这边来呗

17:08.630 --> 17:12.470
那这边的话就是你首先还是要去那个s并目录

17:14.700 --> 17:22.540
就这个目录 对吧 然后接下来这边那就是ngx 然后叫这边干s reload 重启

17:23.420 --> 17:28.940
好 这边呢就已经重启成功了 成功之后 然后叫这边的话 我们来看一下 看好不好刷新

17:29.740 --> 17:31.980
你看 这边那是不是就是出来了

17:32.940 --> 17:35.420
看到没有 这边的话就已经就ok了

17:36.300 --> 17:39.180
啊 这边 这边的话这个数据也是ok的

17:40.300 --> 17:42.940
看到没有 然后这边啊 这个是文章

17:44.060 --> 17:47.740
然后这边让我点一下css 啊 这前台前台是不是没有问题

17:49.420 --> 17:56.940
看到没有 前台是不是没有问题啊 对吧 包括你这边的话你现在刷新的话也是没有问题的啊 然后我们来看这个后台

17:57.580 --> 18:00.780
后台的话是and me and me走

18:02.700 --> 18:04.460
好 这边进入到这个后台

18:05.500 --> 18:13.180
后台的话应该一开始的话需要我登录一下啊 这边登录 这边呢 and me 然后123456

18:13.740 --> 18:19.100
然后叫验证码 fb3z 走

18:20.380 --> 18:25.180
是不是进来了 对不对 进来了之后 然后接下来这边 这边也没有任何的问题

18:26.540 --> 18:32.780
对不对 没有任何的问题啊 那我们这边的话 这个整个这个部署的话 其实就已经成功了

18:33.420 --> 18:38.300
啊 就成功了 ok啊 这些课的话就先到这里 大家把这个静态支援

18:38.300 --> 18:45.980
打一个包 打一个包之后 然后接下来放到那个njx服务器里面 好吧 好 这期课先到这

