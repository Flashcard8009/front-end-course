WEBVTT

00:00.110 --> 00:02.110
OK 咱们继续

00:02.110 --> 00:05.110
这节课咱们来看一下微信小程序里面

00:05.110 --> 00:08.110
如何监控这个电量

00:08.110 --> 00:10.110
以及就是如何拨打电话

00:10.110 --> 00:12.110
这个的话其实也很简单

00:12.110 --> 00:14.110
可能就几分钟就把讲完了

00:14.110 --> 00:17.110
好 我这边就已经把这个样式放过来了

00:17.110 --> 00:20.110
OK 这边要用的样式放过来了

00:20.110 --> 00:23.110
我们主要的话写这个WXMIR

00:23.110 --> 00:25.110
以及对应的这个JS

00:25.110 --> 00:28.110
好 这个WXMIR

00:28.110 --> 00:30.110
这边也没有什么好写了

00:30.110 --> 00:32.110
我直接拿过来

00:32.110 --> 00:34.110
没什么好写的

00:34.110 --> 00:35.110
好 直接拿过来

00:35.110 --> 00:38.110
拿过来让我们来看一下就好了

00:38.110 --> 00:40.110
首先最外层最外层一个container

00:40.110 --> 00:41.110
对不对

00:41.110 --> 00:42.110
一个container

00:42.110 --> 00:43.110
然后接下来的话

00:43.110 --> 00:45.110
这边分成了两个部分

00:45.110 --> 00:47.110
第一个pagie section

00:47.110 --> 00:48.110
第二个pagie section

00:48.110 --> 00:49.110
那第一个pagie section

00:49.110 --> 00:50.110
它主要就是什么呢

00:50.110 --> 00:53.110
主要就是监测这个电量

00:53.110 --> 00:57.110
主要就是进行这个

00:57.110 --> 01:00.110
主要就是这个电量的监控

01:00.110 --> 01:02.110
电量的监控

01:02.110 --> 01:04.110
这个你想猜都猜得到

01:04.110 --> 01:06.110
是不是肯定是微信他那边提供了API的

01:06.110 --> 01:07.110
对不对

01:07.110 --> 01:09.110
好 第二个是什么呢

01:09.110 --> 01:11.110
第二个是拨打电话

01:11.110 --> 01:13.110
拨打电话

01:13.110 --> 01:14.110
OK

01:14.110 --> 01:16.110
好 那我们首先来先看第一个

01:16.110 --> 01:17.110
第一个的话

01:17.110 --> 01:19.110
这边有个这个相当于是标题

01:19.110 --> 01:20.110
对吧 电量监控

01:20.110 --> 01:22.110
好 当前的电量值

01:22.110 --> 01:23.110
这边有个这个边量

01:23.110 --> 01:24.110
是否在充电

01:24.110 --> 01:25.110
对不对

01:25.110 --> 01:26.110
好 大家这边有个什么呢

01:26.110 --> 01:28.110
有一个这个类似于进度条的

01:28.110 --> 01:29.110
OK

01:29.110 --> 01:32.110
好 那接下来在我们的这个index.js里面

01:32.110 --> 01:34.110
这边是不是就应该有这些

01:34.110 --> 01:35.110
对不对

01:35.110 --> 01:36.110
就应该有这些

01:36.110 --> 01:38.110
好 所以我们在这个data里面

01:38.110 --> 01:40.110
首先的话这边有个level

01:40.110 --> 01:42.680
一开始的话

01:42.680 --> 01:44.680
这边是一个什么呢

01:44.680 --> 01:45.680
一开始它是个空

01:45.680 --> 01:48.680
这个就是你的电量值

01:48.680 --> 01:52.570
电量

01:52.570 --> 01:53.570
电量值

01:53.570 --> 01:55.570
还有一个easecharging

01:55.570 --> 01:56.570
这个是什么

01:56.570 --> 01:58.570
这个是否正在充电

01:58.570 --> 02:04.740
是否在充电

02:04.740 --> 02:05.740
OK

02:05.740 --> 02:07.740
好 然后接下来回头的话

02:07.740 --> 02:09.740
我们这边就要获取这个

02:09.740 --> 02:11.740
就是它的这个电池的这个信息

02:11.740 --> 02:13.740
好 那接下来这边如何获取呢

02:13.740 --> 02:14.740
很简单

02:14.740 --> 02:17.740
我们这边就在它on show的时候

02:17.740 --> 02:19.740
或者你unload的什么的也可以

02:19.740 --> 02:20.740
OK

02:20.740 --> 02:21.740
我们用on show

02:21.740 --> 02:22.740
因为我们一会打电话的话

02:22.740 --> 02:24.740
它那个会涉及到页面的这个切换

02:24.740 --> 02:26.740
所以我们这边用这个on show

02:26.740 --> 02:27.740
on show这边

02:27.740 --> 02:29.740
这边有一个叫做微信

02:29.740 --> 02:30.740
点

02:30.740 --> 02:33.740
getBattery

02:33.740 --> 02:34.740
BatteryInfo

02:34.740 --> 02:36.740
你看它的API很多

02:36.740 --> 02:37.740
可能没有

02:37.740 --> 02:38.740
是不是很多

02:38.740 --> 02:39.740
对不对

02:39.740 --> 02:41.740
所以这个讲是讲不完的

02:41.740 --> 02:43.740
回头的话找一些这个

02:43.740 --> 02:45.740
就是比较常见的讲

02:45.740 --> 02:47.740
不可能一直在这讲完

02:47.740 --> 02:48.740
走吧

02:48.740 --> 02:49.740
之前就给你们说过

02:49.740 --> 02:51.740
这个是一个长期更新的一个篇章

02:51.740 --> 02:52.740
好

02:52.740 --> 02:55.740
然后接下来这边getBatteryInfo

02:55.740 --> 02:58.740
这边还是老规矩干嘛呀

02:58.740 --> 03:00.740
去文档看一下呀

03:00.740 --> 03:01.740
对不对

03:01.740 --> 03:03.740
到这边来看一下

03:03.740 --> 03:05.740
getBattery

03:05.740 --> 03:06.740
这边出来了

03:06.740 --> 03:07.740
出来我们来看一下

03:07.740 --> 03:09.740
这边它接收一个什么

03:09.740 --> 03:11.740
接收一个参数

03:11.740 --> 03:12.740
是对象

03:12.740 --> 03:13.740
对象这边就是什么

03:13.740 --> 03:15.740
是不是就是sixth sense

03:15.740 --> 03:16.740
fail

03:16.740 --> 03:17.740
complete

03:17.740 --> 03:18.740
对不对

03:18.740 --> 03:21.740
所以我们这边接收一个对象

03:21.740 --> 03:23.740
对象里面有一个sixth sense

03:23.740 --> 03:25.740
我们这边把它写成一个回调函数

03:25.740 --> 03:27.740
写成一个箭头函数

03:27.740 --> 03:28.740
可以吧

03:28.740 --> 03:29.740
好

03:29.740 --> 03:31.740
大家这边这个res里面

03:31.740 --> 03:32.740
里面就这两个

03:32.740 --> 03:33.740
看没有

03:33.740 --> 03:34.740
你设备的电量

03:34.740 --> 03:35.740
它范围是一到一百

03:35.740 --> 03:36.740
然后一是charling

03:36.740 --> 03:37.740
它是个布尔兹

03:37.740 --> 03:39.740
非常的简单

03:39.740 --> 03:41.740
我们这边我们cancel一下

03:41.740 --> 03:43.740
cancel.logres

03:43.740 --> 03:45.740
保存

03:45.740 --> 03:46.740
出来了

03:46.740 --> 03:47.740
对不对

03:47.740 --> 03:48.740
出来了

03:48.740 --> 03:50.740
然后接下来设置谁呀

03:50.740 --> 03:51.740
这些都是写好的

03:51.740 --> 03:52.740
这些都是写好的

03:52.740 --> 03:53.740
样式都写好的

03:53.740 --> 03:55.740
样式就不带着写了

03:55.740 --> 03:56.740
好

03:56.740 --> 04:00.740
这边就是res.setdata

04:00.740 --> 04:02.740
分别设置是不是就完成了

04:02.740 --> 04:03.740
对不对

04:03.740 --> 04:04.740
它应该是什么

04:04.740 --> 04:07.740
res.level

04:07.740 --> 04:08.740
对不对

04:08.740 --> 04:09.740
大家easycharling

04:09.740 --> 04:11.740
它应该是什么

04:11.740 --> 04:14.740
res.easycharling

04:14.740 --> 04:15.740
对不对

04:15.740 --> 04:16.740
好

04:16.740 --> 04:17.740
大家我们这边写一下

04:17.740 --> 04:20.050
OK

04:20.050 --> 04:22.050
当前电量百分之百

04:22.050 --> 04:23.050
这边是否在充电

04:23.050 --> 04:24.050
q

04:24.050 --> 04:25.050
OK

04:25.050 --> 04:26.050
大家这边百分之百

04:26.050 --> 04:27.050
OK

04:27.050 --> 04:28.050
好

04:28.050 --> 04:29.050
然后这个就是

04:29.050 --> 04:31.050
如何获取这个电池的这个信息

04:31.050 --> 04:32.050
好

04:32.050 --> 04:33.050
然后这边

04:33.050 --> 04:34.050
这边是拨打电话

04:34.050 --> 04:35.050
上面这个我们就做完了

04:35.050 --> 04:37.050
这边很简单

04:37.050 --> 04:38.050
把它折起来

04:38.050 --> 04:40.050
下面这个其实也简单

04:40.050 --> 04:41.050
这边我们来看一下

04:41.050 --> 04:42.050
这边首先

04:42.050 --> 04:43.050
这边有一个系统电话

04:43.050 --> 04:45.050
这个就相当于是标题

04:45.050 --> 04:46.050
对不对

04:46.050 --> 04:47.050
好

04:47.050 --> 04:48.050
然后接下来在这边

04:48.050 --> 04:50.050
这边你需要输入你的电话号码

04:50.050 --> 04:51.050
看了没有

04:51.050 --> 04:52.050
输入电话号码

04:52.050 --> 04:53.050
输了之后

04:53.050 --> 04:55.050
大家这边这个button拨打电话

04:55.050 --> 04:56.050
然后回头到你这边

04:56.050 --> 04:58.050
是不是相当于这边有一个这个

04:58.050 --> 04:59.050
这个按钮

04:59.050 --> 05:00.050
对吧

05:00.050 --> 05:01.050
它有个点击事件

05:01.050 --> 05:03.050
所以我们这边把它拿过来

05:04.050 --> 05:06.050
扣这个for

05:06.050 --> 05:07.050
OK

05:07.050 --> 05:09.050
那接下来这边的核心逻辑是什么

05:09.050 --> 05:11.050
这边的核心逻辑就是什么

05:11.050 --> 05:12.050
首先第一步

05:12.050 --> 05:15.050
拿到用户

05:15.050 --> 05:17.050
填写的

05:17.050 --> 05:19.050
电话号码

05:19.050 --> 05:20.050
这是第一步

05:20.050 --> 05:21.050
第二步

05:21.050 --> 05:22.050
调用什么呢

05:22.050 --> 05:24.050
调它有一个叫做微信

05:24.050 --> 05:26.050
点

05:26.050 --> 05:28.050
叫做make phone call

05:32.050 --> 05:33.050
调用这个API

05:33.050 --> 05:34.050
OK

05:34.050 --> 05:35.050
好那这边

05:35.050 --> 05:37.050
这边的话你就可以做一个这个

05:37.050 --> 05:38.050
双向绑定

05:38.050 --> 05:40.050
你这边的话要拿到它的这个值

05:40.050 --> 05:42.050
这边它是一个input

05:42.050 --> 05:44.050
所以你这边的话可以做一个双向绑定

05:44.050 --> 05:46.050
这边咱们就是

05:46.050 --> 05:47.050
model

05:47.050 --> 05:49.050
然后value

05:49.050 --> 05:50.050
等于一个

05:50.050 --> 05:52.620
风

05:52.620 --> 05:53.620
对不对

05:53.620 --> 05:54.620
好

05:54.620 --> 05:56.620
然后接下来在这边

05:56.620 --> 05:58.620
这边的话风

05:58.620 --> 06:01.760
风

06:01.760 --> 06:03.760
这个是电话号码

06:03.760 --> 06:06.760
电话号码

06:06.760 --> 06:07.760
OK

06:07.760 --> 06:08.760
好

06:08.760 --> 06:09.760
然后接下来

06:09.760 --> 06:10.760
这边要拿到用户的电话号码

06:10.760 --> 06:11.760
是不是就很简单了

06:11.760 --> 06:13.760
是不是就z 点data 点fone

06:13.760 --> 06:14.760
是不是就拿到了

06:14.760 --> 06:15.760
第一步其实不用管它了

06:15.760 --> 06:16.760
对

06:16.760 --> 06:17.760
直接调到第二步

06:17.760 --> 06:18.760
那第二步的话

06:18.760 --> 06:19.760
这边就是什么

06:19.760 --> 06:20.760
微信

06:20.760 --> 06:22.760
然后点

06:22.760 --> 06:24.760
你首先其实可以判断一下

06:25.760 --> 06:26.760
if

06:26.760 --> 06:28.760
z 点data

06:28.760 --> 06:29.760
点这个fone

06:29.760 --> 06:30.760
它首先有这个

06:30.760 --> 06:31.760
我们才打

06:31.760 --> 06:32.760
否则的话

06:32.760 --> 06:34.760
这边 else

06:34.760 --> 06:36.760
这边的话就给它一个提示

06:36.760 --> 06:37.760
对吧

06:37.760 --> 06:39.760
微信点show model

06:39.760 --> 06:42.390
show model

06:42.390 --> 06:44.390
这边提示

06:44.390 --> 06:46.830
提示

06:46.830 --> 06:48.830
比较电话号码

06:48.830 --> 06:50.830
电话号码

06:50.830 --> 06:53.830
没有填写

06:53.830 --> 06:54.830
对不对

06:54.830 --> 06:55.830
这边

06:55.830 --> 06:57.830
这个complete就不要了

06:57.830 --> 06:59.830
这边也不需要取消按钮

06:59.830 --> 07:01.830
所以这边show cancel

07:01.830 --> 07:02.830
show cancel

07:02.830 --> 07:05.830
它是一个force

07:05.830 --> 07:08.270
OK

07:08.270 --> 07:09.270
好

07:09.270 --> 07:10.270
然后你当然可以做

07:10.270 --> 07:12.270
其他的比如说格式上的判断

07:12.270 --> 07:13.270
这些都是可以的

07:13.270 --> 07:14.270
我这边就没做了

07:14.270 --> 07:15.270
好

07:15.270 --> 07:16.270
这边我们来看一下

07:16.270 --> 07:17.270
这边主要就是什么

07:17.270 --> 07:19.270
主要就是调用这个API

07:19.270 --> 07:22.710
好 这边我们来看一下这个API

07:22.710 --> 07:24.710
看一下它

07:24.710 --> 07:26.710
make phone call

07:27.710 --> 07:29.710
这边的话接受一个对象

07:29.710 --> 07:30.710
这个对象里面有什么

07:30.710 --> 07:32.710
有这个phone number

07:32.710 --> 07:34.710
大家这边这个成功失败

07:34.710 --> 07:36.710
和结束的这个回调

07:36.710 --> 07:37.710
那也很简单

07:37.710 --> 07:38.710
对吧

07:38.710 --> 07:40.710
这边首先这个phone

07:41.710 --> 07:42.710
phone number

07:42.710 --> 07:44.710
对呢 是什么

07:44.710 --> 07:46.710
是不是就是z

07:46.710 --> 07:48.710
data.phone

07:48.710 --> 07:49.710
对吧

07:49.710 --> 07:51.710
好 然后接下来这边成功

07:51.710 --> 07:52.710
成功回调

07:52.710 --> 07:53.710
看你写不写

07:53.710 --> 07:55.710
你就是剩下的回调不写

07:55.710 --> 07:57.710
可以 保存一下

07:57.710 --> 07:59.710
保存之后重新来

07:59.710 --> 08:01.710
这边拨打电话

08:01.710 --> 08:03.710
电话号码没有填写

08:03.710 --> 08:04.710
再将我写一下

08:04.710 --> 08:06.710
比如说131,1234,1234

08:06.710 --> 08:08.710
拨打电话

08:08.710 --> 08:10.710
拨打是否这边要拨打

08:10.710 --> 08:11.710
确定

08:11.710 --> 08:12.710
ok 你这边

08:12.710 --> 08:13.710
你可以自己拿手机试一下

08:13.710 --> 08:15.710
不用 这边预览

08:16.710 --> 08:17.710
你可以自己试一下

08:17.710 --> 08:18.710
它这边

08:18.710 --> 08:19.710
如果是在手机上的话

08:19.710 --> 08:21.710
它是什么样的效果呢

08:21.710 --> 08:22.710
如果在手机上的话

08:22.710 --> 08:23.710
它就是跳转到

08:23.710 --> 08:25.710
拨电话号码的那个页面

08:25.710 --> 08:27.710
比如我这边输入电话号码

08:27.710 --> 08:29.710
输入完之后再将我这边

08:29.710 --> 08:31.710
我点击这个拨打电话

08:31.710 --> 08:33.710
我们这边模拟器点击拨打电话

08:33.710 --> 08:35.710
它这边是不是弹一个这个框

08:35.710 --> 08:36.710
你如果是手机上的话

08:36.710 --> 08:39.710
这边它就直接就跳转到那个了

08:39.710 --> 08:41.710
直接就跳转到

08:41.710 --> 08:43.710
就是你那个原生的

08:43.710 --> 08:45.710
就手机里面的那个拨打电话的那个

08:45.710 --> 08:46.710
程序里面

08:46.710 --> 08:48.710
ok 这样子的

08:48.710 --> 08:51.710
好 这就是关于这个电量的监控

08:51.710 --> 08:54.710
以及就是如何在小程序里面拨打电话

08:54.710 --> 08:56.710
这点来讲的话也非常的简单

08:56.710 --> 08:57.710
对不对

08:57.710 --> 09:00.710
ok 它下来的话可以自己试一下

09:00.710 --> 09:02.710
好 这节课就到这里

09:02.710 --> 09:03.710
再见

