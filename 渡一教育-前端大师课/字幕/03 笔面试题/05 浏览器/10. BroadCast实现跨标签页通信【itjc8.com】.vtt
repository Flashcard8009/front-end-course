WEBVTT

00:00.750 --> 00:06.630
好 这节课的话我们就来看一下首先第一个 第一个的话是这个bordercast channel

00:06.890 --> 00:09.710
这个的话是什么呢 这边有一段简单的介绍

00:10.470 --> 00:17.130
bordercast channel可以帮助我们创建一个用于广播的通信频道

00:17.650 --> 00:21.230
看到没有bordercast 他这个bordercast本身就是广播的意思

00:21.490 --> 00:22.770
对吧 广播频道

00:23.270 --> 00:26.870
而当所有页面都监听这个同意频道的信息时

00:27.070 --> 00:32.150
其中某一个页面通过他发送信息就会被其他页面接收到

00:32.410 --> 00:38.090
但是有个前提就是是同源的这个页面 OK 好 那我们把这个例子我们把它写一下

00:38.850 --> 00:41.930
好 那我首先的话我这边创建了一个文件家叫做demo

00:42.190 --> 00:46.270
demo下面的话有两个页面 一个是index 一个是index2

00:46.790 --> 00:50.630
好 那页面1和页面2 好 那我们首先我们来写这个页面1

00:51.390 --> 00:53.190
我这边的话我输入一些东西

00:54.150 --> 01:00.150
input.text 这个的话用户可以在这输入东西 然后这边给一个

01:00.670 --> 01:08.230
id content 好 然后接下来这边给一个button 给他一个id叫做btn 这边叫做发送数据

01:09.790 --> 01:14.390
发送数据 OK 好 然后完事之后 然后接下来这边script

01:15.990 --> 01:17.950
首先的话我们这边拿到

01:18.910 --> 01:24.710
拿到用户输入的东西 那这边那就是document.query selector

01:25.910 --> 01:34.270
啊 这边警号content 对吧 获取用户输入的东西 然后把这个按钮也拿到 因为我们要给这个按钮绑定事件

01:34.750 --> 01:39.070
所以我们这边的document.query selector

01:40.510 --> 01:47.150
好 这边那就是警号btn OK 好 那下一步 下一步的话我们就创建一个广播频道

01:48.510 --> 01:57.110
啊 创建 创建一个广播频道 那创建一个广播频道 这边我们就const

01:57.670 --> 01:59.870
const 一个这个border

02:01.470 --> 02:01.670
b

02:02.990 --> 02:03.710
呃b

02:05.230 --> 02:07.870
bro border border cast

02:09.710 --> 02:11.710
然后channel ch

02:13.550 --> 02:16.270
channel 好 然后等于一个什么呢 等于一个这个new

02:16.910 --> 02:18.350
然后border cast

02:19.950 --> 02:22.350
呃 在这里是吧 border cast channel

02:23.070 --> 02:28.510
ok 然后你给你的这个频道取一个名字啊 随便取 有这边的话一个叫做load

02:30.030 --> 02:36.310
好 我们这边呢就创建了一个广播频道 创建了一个广播频道之后 然后接下来我们这边绑定事件

02:36.950 --> 02:40.870
btn.onclick 等于一个function

02:43.620 --> 02:49.420
ok 当用户点击这个按钮的时候 我们要干嘛呢 我们这边通过这个

02:50.140 --> 02:56.980
广播频道就这个 它是个对象 对象上面有一个方法叫做post message

02:58.180 --> 03:07.980
怎么样 通过这个post message 它就可以干嘛呢 它就可以发布这个消息啊 发布消息 然后接下来我们这边就发布一个什么呢 发布一个对象

03:08.460 --> 03:12.940
啊 这边有一个value value对应的就是什么呢 对应的就是content

03:13.420 --> 03:18.780
content是不是拿到这个空间 对不对 然后接下来这边点value 看到没有

03:20.300 --> 03:30.420
好 然后接下来的话来到index2这个页面 页面2 好 页面2的话 我们这边呢就直接在script里面啊 然后接下来这边就要干嘛呢 这边也需要

03:30.820 --> 03:37.620
创建一个广播频道 并且的话这个频道这边 这边传入了制服串啊 要和就是我们这边index

03:37.820 --> 03:40.220
要一样 所以这边的话就直接把这个拿过来就可以了

03:41.700 --> 03:47.620
直接拿过来 创建一个广播频道啊 并且我这边记录一下啊 并且

03:48.820 --> 03:51.140
传入的制服串

03:52.380 --> 03:55.020
要和页面1

03:55.900 --> 03:57.260
页面1的

03:58.380 --> 04:06.460
一样 对吧 也叫做load ok 相当于他们就收听同一个频道 这个应该很好理解吧 对不对 用我收音机的都知道

04:06.940 --> 04:12.220
你那个电波 电波是那个相同的话 是不是就收听同一个频道 对不对

04:12.900 --> 04:21.060
好 然后接下来的话 这边也是调方法 调什么方法呢 这边的话就是这个bordercast channel 调他的这个

04:21.820 --> 04:24.980
message方法 不是方法 这边监听一个世界

04:26.180 --> 04:29.220
message世界 等于一个function

04:30.220 --> 04:38.740
可不可以啊 监听一个message世界 我这边是不是在post message 对不对 我在发布消息 然后这样我这边的话就有一个

04:39.300 --> 04:41.300
可以监听 监听这个message

04:42.420 --> 04:48.980
这边当你有这个消息过来之后 就会触发这个message世界 好 然后接下来的话 我这边通过这个

04:49.580 --> 04:55.340
世界对象来拿到这个值 我们这边log一下 这边的话1.data

04:56.340 --> 05:05.220
可不可以啊 你这边 你这边只要你这个给我post 然后就会触发我这个页面的什么呢 触发我这个页面的message世界

05:05.620 --> 05:13.020
好 让我通过这个1.data就可以拿到你给我发送过来的消息 OK 好 那我们这边呢 我们来看一下

05:13.820 --> 05:19.380
全部保存 保存了之后 然后接下这边把这个页面 这边都是打开了的啊

05:20.460 --> 05:24.300
好 这边是不是出来了 把这边 把这个检查也打开

05:25.980 --> 05:27.500
好 把这个页面我把它拆开吧

05:29.260 --> 05:31.540
我把它拆开 方便大家看一下

05:32.420 --> 05:35.780
啊 把这个稍微说说一下

05:37.060 --> 05:39.940
说小一点 把这个也说小一点

05:42.250 --> 05:47.330
OK啊 这边扛手 好 那接下这边来呗啊 比如这边输入一个Hello

05:48.130 --> 05:51.410
那点发送数据啊 你看这边是不是收到了

05:52.130 --> 05:59.740
对不对啊 比如说这边来一个你好 你好

06:00.740 --> 06:05.380
放送数据 可不可以啊 这边的话是不是实现了跨标签页的通信

06:06.180 --> 06:11.140
对不对啊 这个的话就是我们的第一种方案啊 通过这个bordercast的channel

06:11.620 --> 06:18.660
啊 我再说一遍啊 就是我这边的话不会针对这个bordercast channel 它本身这个知识点本身进行这个介绍了

06:19.380 --> 06:30.100
知道吧 啊 这个的话就是回头啊 你在听其他课程的时候啊 有老师就针对这个知识点本身是有这个介绍的 我这边的话就不针对知识点本身做这个介绍了

06:30.580 --> 06:36.020
这样子的话就太重复了 知道吧 我们这边就是快速的把这个跨标签页通信的这个

06:36.500 --> 06:43.140
这个demo把它写了 就ok了 看没有啊 简简单单挤行代码 是不就搞定了 对不对

06:43.700 --> 06:46.500
ok 好 这期课就先到这里啊 再见

