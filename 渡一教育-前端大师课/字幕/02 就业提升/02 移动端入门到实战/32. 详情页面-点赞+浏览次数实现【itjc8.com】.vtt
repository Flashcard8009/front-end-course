WEBVTT

00:00.430 --> 00:04.270
各位同学大家好 这节课我们把文章点赞

00:04.270 --> 00:07.590
以及我们浏览次数的业务逻辑给实现一下

00:07.590 --> 00:10.670
其实这个文章点赞跟我们这个关注作者

00:10.670 --> 00:13.990
他的这个实现基本上是差不多的

00:13.990 --> 00:17.830
怎么来实现呢 我们首先看一下这个数据表里面

00:17.830 --> 00:22.710
我们这个优点表里面有一个SAMPLESS ARBOR ARTICLE IDS

00:22.710 --> 00:26.790
也就是说我们有没有对这个文章进行点赞呢

00:26.790 --> 00:29.630
其实是在这个数组里面进行一个收藏

00:29.830 --> 00:31.670
如果说我对他进行点赞了

00:31.670 --> 00:37.070
OK 那这个里面会增加当前我们这篇文章的一个ID值

00:37.070 --> 00:41.230
并且我们在处理的时候将这个Article表里面的

00:41.230 --> 00:43.270
这里面有一个SAMPLESS ARBOR ARTICLE IDS

00:43.270 --> 00:46.550
也就是说点赞的数量给他做一个加一操作

00:46.550 --> 00:48.830
那如果说我已经点我赞了怎么办呢

00:48.830 --> 00:50.990
那这时候我还可以取消点赞

00:50.990 --> 00:54.870
因为这种处理就是说场景我们在其他APP里面

00:54.870 --> 00:56.790
也是经常可以看到的

00:56.870 --> 01:00.150
我取消点赞之后首先也是做两件事

01:00.150 --> 01:03.550
第一就是把这个SAMPLESS ARBOR ARTICLE IDS

01:03.550 --> 01:06.310
里面指定的这个文章ID给他干掉

01:06.310 --> 01:10.790
之后我们再把这个Article里面的这个点赞数量

01:10.790 --> 01:12.350
给他做一个减一操作

01:12.350 --> 01:16.070
那这个就是一个完整的实现的业务逻辑

01:16.070 --> 01:19.950
那我们现在就使用代码的形式来完成一下

01:19.950 --> 01:22.390
OK 回到我们的这个编辑器里面

01:22.390 --> 01:24.910
编辑器里面首先第一件事是什么呢

01:24.910 --> 01:28.030
也是对这个UI进行一个展示操作

01:28.030 --> 01:28.590
对不对

01:28.590 --> 01:32.310
那这里面我们也可以使用一个什么的计算属性

01:32.310 --> 01:35.710
computer data这个里面是easefollow also

01:35.710 --> 01:37.870
那这里面我们再定一个

01:37.870 --> 01:39.870
在定意之前跟同学们说一下

01:39.870 --> 01:41.710
处理一个问题是啥问题呢

01:41.710 --> 01:43.510
就是我们这个easefollow also

01:43.510 --> 01:45.790
我们目前看是没有什么问题的

01:45.790 --> 01:48.990
但是假如说我们在这个小程序里看

01:48.990 --> 01:51.190
你会发现这里面是有一点问题的

01:51.190 --> 01:52.550
我刷新界面

01:52.550 --> 01:53.670
刷新界面之后

01:53.670 --> 01:57.510
比如说我点进去这个第一个指定的文章

01:57.510 --> 01:58.310
点进去之后

01:58.310 --> 02:01.310
你会发现这里面报了一个also的一个错误

02:01.310 --> 02:01.870
这个呢

02:01.870 --> 02:06.310
就是我们微信小程序跟我们h5端的一个加载的

02:06.310 --> 02:09.710
执行顺序不一致导致的这个问题

02:09.710 --> 02:11.830
也就是说在这个计算属性里面

02:11.830 --> 02:12.670
其实呢

02:12.670 --> 02:14.350
它一开始直接的

02:14.350 --> 02:17.390
因为我们h5如果说没有这次的优带运报

02:17.390 --> 02:19.510
后面就不进行执行了对不对

02:19.510 --> 02:21.310
但是在这个小程序里面

02:21.310 --> 02:22.830
即使这一块没有

02:22.830 --> 02:24.190
它也去怎么着

02:24.190 --> 02:26.430
强行的去解析后面的内容了

02:26.430 --> 02:28.190
所以说这个里面我们也处理一下

02:28.190 --> 02:29.350
如果来处理呢

02:29.350 --> 02:30.630
跟上面差不多

02:30.630 --> 02:33.190
我们就使用这种trycatch的形式

02:33.190 --> 02:36.390
来进行一个容错处理就ok了

02:36.390 --> 02:37.990
我把这个给它复制过来

02:37.990 --> 02:39.510
复制过来给它粘上

02:39.510 --> 02:39.950
然后呢

02:39.950 --> 02:41.550
这个如果说没有的话

02:41.550 --> 02:42.430
抱错了怎么办

02:42.430 --> 02:44.390
我就给你试一个false就可以了

02:44.390 --> 02:44.990
对吧

02:44.990 --> 02:45.350
这个呢

02:45.350 --> 02:46.910
就是一个处理机制啊

02:46.910 --> 02:47.670
我们来看一下

02:47.670 --> 02:48.870
经过这种处理之后

02:48.870 --> 02:50.230
它是否可行

02:50.230 --> 02:51.270
刷新一下界面

02:51.310 --> 02:51.910
然后呢

02:51.910 --> 02:52.430
点击

02:53.630 --> 02:54.950
康开的读取属性

02:54.950 --> 02:56.030
id

02:56.030 --> 02:57.830
这个是啥意思啊

02:57.830 --> 02:59.870
这个的爆出是在ease lag里面

02:59.870 --> 03:00.710
所以说呢

03:00.710 --> 03:01.990
我们处理完这个之后

03:01.990 --> 03:02.550
其实呢

03:02.550 --> 03:03.830
我们把这个

03:03.830 --> 03:04.830
因为这里面使用

03:04.830 --> 03:05.990
cx的对不对

03:05.990 --> 03:07.390
我们可以看一下

03:07.390 --> 03:09.870
在这个里面是不是有一个cx

03:09.870 --> 03:12.230
我们把cx里面的业务逻辑

03:12.230 --> 03:13.150
也做一个处理

03:13.150 --> 03:14.630
因为这里面也有一个

03:14.630 --> 03:16.750
computing的计算属性对不对

03:16.750 --> 03:17.470
然后呢

03:17.470 --> 03:19.590
try是ritten这个

03:19.630 --> 03:20.150
catch呢

03:20.150 --> 03:21.630
我们ritten一个false

03:21.630 --> 03:21.990
ok

03:21.990 --> 03:23.750
这样就搞定了啊

03:23.750 --> 03:24.430
搞定之后

03:24.430 --> 03:26.310
我们继续来看一下啊

03:26.310 --> 03:27.390
重新回到

03:27.390 --> 03:29.110
这里面是自动刷新

03:29.110 --> 03:30.110
自动刷新之后

03:30.110 --> 03:31.350
我点击

03:31.350 --> 03:31.870
你会发现

03:31.870 --> 03:33.230
此时是不是就没有问题了

03:33.230 --> 03:33.670
这个呢

03:33.670 --> 03:36.030
就是我们一个优化处理啊

03:36.030 --> 03:36.390
好的

03:36.390 --> 03:37.550
那回过头来啊

03:37.550 --> 03:38.990
我们再继续来说

03:38.990 --> 03:40.070
我们要实现的

03:40.070 --> 03:41.510
这个点赞逻辑

03:41.510 --> 03:42.230
点赞逻辑呢

03:42.230 --> 03:44.630
首先在这个ui的部分

03:44.630 --> 03:46.310
要进行一个处理

03:46.310 --> 03:47.950
所以说我在这个里面

03:47.950 --> 03:49.270
要写一下

03:49.390 --> 03:55.240
是否对文章进行点赞

03:55.240 --> 03:57.320
是否对文章进行点赞

03:57.320 --> 03:59.680
我们订一个computments

03:59.680 --> 04:00.440
ok

04:00.440 --> 04:01.920
computments里面

04:01.920 --> 04:03.960
我们同样的使用这种

04:03.960 --> 04:05.760
trycatch的形式啊

04:05.760 --> 04:06.160
但是呢

04:06.160 --> 04:07.320
我们只要把这个

04:07.320 --> 04:08.400
纸给它改一下

04:08.400 --> 04:09.920
是不是就可以了

04:09.920 --> 04:10.440
意思

04:10.440 --> 04:11.400
computments

04:11.400 --> 04:13.000
这一次点user info

04:13.000 --> 04:13.600
然后呢

04:13.600 --> 04:14.120
这里面

04:14.120 --> 04:15.160
这一次点user info

04:15.160 --> 04:17.480
就不是 also like ids了

04:17.480 --> 04:19.200
那它应该是什么纸呢

04:19.240 --> 04:21.840
应该是sams app

04:21.840 --> 04:23.320
article ids

04:23.320 --> 04:25.000
我们这里面可以看一下

04:25.000 --> 04:26.920
到这个vio里面

04:26.920 --> 04:27.520
然后呢

04:27.520 --> 04:28.680
我们找到vchar

04:28.680 --> 04:31.000
vchar里面有一个user info

04:31.000 --> 04:34.400
这里面是不是有一个sams app

04:34.400 --> 04:35.920
article ids

04:35.920 --> 04:39.520
也就是说收藏点赞的这个数组啊

04:39.520 --> 04:39.960
然后呢

04:39.960 --> 04:41.760
判断这个里面

04:41.760 --> 04:44.080
直接的这个里面好像错了啊

04:44.080 --> 04:45.360
把它给改一下

04:45.360 --> 04:46.800
这一次点user info

04:46.800 --> 04:48.120
直概它就可以了

04:48.160 --> 04:51.200
sams apparticle ids

04:51.200 --> 04:55.240
然后看它是否包含article data

04:55.240 --> 04:56.680
这个就不是它的id了

04:56.680 --> 04:58.520
点下滑线 id

04:58.520 --> 05:00.120
也就是说文章的一个id

05:00.120 --> 05:01.360
看它是否包含

05:01.360 --> 05:02.400
如果说包含呢

05:02.400 --> 05:03.280
那这个里面

05:03.280 --> 05:04.480
它就是实写的

05:04.480 --> 05:05.080
对不对

05:05.080 --> 05:05.680
不包含呢

05:05.680 --> 05:06.760
那它就是空气的

05:06.760 --> 05:08.600
所以说我们回到上面

05:08.600 --> 05:09.400
再把这个里面

05:09.400 --> 05:11.000
来处理一下就ok了

05:11.000 --> 05:11.960
那这个怎么写呢

05:11.960 --> 05:13.480
其实这个就是修改

05:13.480 --> 05:14.680
它的这个type值

05:14.680 --> 05:15.680
是不是就可以了

05:15.680 --> 05:16.200
也就是说

05:16.200 --> 05:17.520
把原来的这个静态值

05:17.520 --> 05:19.920
给变成一个动态值

05:19.920 --> 05:20.240
ok

05:20.240 --> 05:21.600
这个加一个字幕创

05:21.600 --> 05:22.880
前面我们来写一下

05:24.040 --> 05:25.760
e as a component

05:25.760 --> 05:26.800
然后直接的

05:26.800 --> 05:29.360
我看这个comments成立吗

05:29.360 --> 05:30.200
成立的话

05:30.200 --> 05:31.840
那我直接的在这个里面

05:31.840 --> 05:34.080
就是和的

05:34.080 --> 05:36.000
刚一个sams

05:36.000 --> 05:39.160
sams app

05:39.160 --> 05:41.520
然后直接在这个里面

05:41.520 --> 05:43.160
给它一个实写的

05:43.160 --> 05:43.720
否则呢

05:43.720 --> 05:45.280
那它就是一个空气的

05:45.280 --> 05:47.080
那这样我们来处理一下

05:47.080 --> 05:48.440
回到这个代码里面

05:48.440 --> 05:49.120
我们看一下

05:49.120 --> 05:49.960
现在肯定

05:49.960 --> 05:51.680
现在这个变成实写的

05:51.680 --> 05:53.920
难道说我们这里面有这个值吗

05:53.920 --> 05:55.160
看一下application

05:55.160 --> 05:56.240
yoderninfo

05:56.240 --> 05:57.440
我可以看一下

05:57.440 --> 05:58.240
这个yoderninfo

05:58.240 --> 06:00.440
刚才我虽然删除了这个

06:00.440 --> 06:01.800
我们数据库里的文件

06:01.800 --> 06:02.760
但是这个里面呢

06:02.760 --> 06:03.840
是包含的

06:03.840 --> 06:04.360
怎么办呢

06:04.360 --> 06:06.120
我们为了统一

06:06.120 --> 06:07.280
我们现在在这里面

06:07.280 --> 06:08.800
先给它清除一下

06:08.800 --> 06:09.680
清除一下之后

06:09.680 --> 06:10.400
在这个里面

06:10.400 --> 06:11.560
再做这个处理

06:11.560 --> 06:12.640
比如说关注的时候

06:12.640 --> 06:15.160
这里面是不是要重新登录了

06:15.200 --> 06:16.320
ln958

06:16.320 --> 06:16.760
然后呢

06:16.760 --> 06:18.240
我重新登录一下

06:18.240 --> 06:18.640
那这样呢

06:18.640 --> 06:20.240
我保持统一

06:20.240 --> 06:20.800
ok

06:20.800 --> 06:21.960
点击进入之后

06:21.960 --> 06:24.240
那我们现在就可以对它的这个事件

06:24.240 --> 06:25.480
做一些相关处理了

06:25.480 --> 06:26.240
也就是说

06:26.240 --> 06:27.320
给它进行一个

06:27.320 --> 06:29.200
点击事件的保定啊

06:29.200 --> 06:31.280
找到它这个unit accounts

06:31.280 --> 06:32.680
type处理完成之后

06:32.680 --> 06:33.360
我在这里面

06:33.360 --> 06:36.840
给它添加一个click事件

06:36.840 --> 06:37.680
那这里面

06:37.680 --> 06:39.800
compt atclick

06:39.800 --> 06:42.400
等于我们的一个销线

06:42.400 --> 06:43.320
update

06:43.320 --> 06:46.040
比如说这个update

06:46.040 --> 06:47.800
complance

06:47.800 --> 06:49.480
complance这个里面

06:49.480 --> 06:49.880
ok

06:49.880 --> 06:51.440
那我直接把这个update

06:51.440 --> 06:54.080
complance给做一个定义

06:54.080 --> 06:56.160
在这个async下面

06:56.160 --> 06:57.280
找到继续往前走

06:57.280 --> 06:58.840
咱们的代码比较多了

06:58.840 --> 07:00.640
如果说你觉得看着比较复杂的话

07:00.640 --> 07:01.040
怎么办

07:01.040 --> 07:01.800
你可以合上

07:01.800 --> 07:04.120
或者是再抽出组件可以啊

07:04.120 --> 07:05.840
这个里面是否关

07:05.840 --> 07:09.120
是否对文章进行点赞啊

07:09.120 --> 07:13.280
是否对文章进行点赞

07:13.440 --> 07:13.800
ok

07:15.280 --> 07:17.360
async accounts

07:17.360 --> 07:18.840
sorry

07:18.840 --> 07:19.800
没有Counts的

07:19.800 --> 07:21.760
这个里面不应该是Counts的

07:21.760 --> 07:22.720
async

07:22.720 --> 07:23.600
hanshu名

07:23.600 --> 07:25.440
然后这里面Counts的

07:25.440 --> 07:27.800
这个肯定也返回msg对吧

07:27.800 --> 07:30.360
那我直接的等于一个什么呢

07:30.360 --> 07:33.240
中号msg等于解构出来

07:33.240 --> 07:35.200
vite

07:35.200 --> 07:35.640
vite

07:35.640 --> 07:38.480
這次点dollerhttp

07:38.480 --> 07:40.600
这次点dollerhttp

07:40.600 --> 07:41.080
然后呢

07:41.080 --> 07:42.920
我这里面使用这个方法

07:42.920 --> 07:43.720
那这个方法

07:43.720 --> 07:44.960
我们一会儿再定义

07:44.960 --> 07:47.880
现代咱们先把这个名字给写上

07:47.880 --> 07:50.240
这个里面我们叫什么updata

07:50.240 --> 07:52.240
然后compments

07:52.240 --> 07:53.280
compments

07:53.280 --> 07:55.480
然后直接这里面给他传参数

07:55.480 --> 07:56.640
参数传啥

07:56.640 --> 07:57.720
其实首先来说

07:57.720 --> 07:58.280
这个参数

07:58.280 --> 08:00.680
U的ID是肯定得传过去的对不对

08:00.680 --> 08:02.280
然后它和这个里面啊

08:02.280 --> 08:02.880
差不多

08:02.880 --> 08:04.920
那我直接把这个给沾过来啊

08:04.920 --> 08:06.280
沾过来我改一下

08:06.280 --> 08:07.520
U的ID没问题

08:07.520 --> 08:08.520
但是这个里面呢

08:08.520 --> 08:09.720
我们这个

08:09.720 --> 08:11.120
alsoID就不传了

08:11.120 --> 08:13.280
我们要传一个什么articleID

08:13.280 --> 08:15.120
也就是说文章的ID啊

08:15.120 --> 08:17.440
这次点article date点

08:17.440 --> 08:19.320
一个什么下滑线ID

08:19.320 --> 08:21.440
就是把这个文章ID给传过去

08:21.440 --> 08:22.480
就可以了

08:22.480 --> 08:23.640
传过去完成之后

08:23.640 --> 08:25.120
如果说你这个里面啊

08:25.120 --> 08:26.720
就是说成功的时候

08:26.720 --> 08:29.000
那我底下再做一个前端操作

08:29.000 --> 08:29.920
是不是就可以了

08:29.920 --> 08:32.520
那这里面先写一个图度啊

08:32.520 --> 08:33.240
咱们先补做

08:33.240 --> 08:33.920
补做干嘛呢

08:33.920 --> 08:35.680
咱们先把这个updata

08:35.680 --> 08:36.480
compments

08:36.480 --> 08:38.680
先给来实现一下啊

08:38.680 --> 08:39.840
实现这个语言还说

08:39.840 --> 08:41.960
那我逐一的来定一下

08:41.960 --> 08:44.560
我们到这个interface里面

08:44.560 --> 08:46.840
找到我们的有点interface

08:46.840 --> 08:48.400
然后这个是什么呢

08:48.400 --> 08:50.760
我们的这个关注一个啊

08:50.760 --> 08:52.200
不对收藏

08:52.200 --> 08:53.320
点赞文章啊

08:53.320 --> 08:55.000
点赞文章

08:55.000 --> 08:55.360
ok

08:55.360 --> 08:55.960
那这里面

08:55.960 --> 08:57.320
expult

08:57.320 --> 08:59.440
我们couns的updata

08:59.440 --> 09:03.360
compments等约data

09:03.360 --> 09:04.400
这里面写一个

09:04.400 --> 09:05.560
arcax

09:05.560 --> 09:06.080
ok

09:06.080 --> 09:07.480
这是name

09:07.480 --> 09:08.920
name是updata

09:08.920 --> 09:10.200
compments

09:10.200 --> 09:12.760
然后在这里面写一个data

09:12.760 --> 09:13.080
好了

09:13.080 --> 09:14.280
那我现在就开始

09:14.280 --> 09:16.760
云含数的一个定义

09:16.760 --> 09:19.240
找到我们unicloudfunctions

09:19.240 --> 09:20.400
然后在这里面

09:20.400 --> 09:23.280
新建云含数updata

09:23.280 --> 09:25.160
compments创建一个

09:25.160 --> 09:26.280
创建一个之后

09:26.280 --> 09:27.400
那咱们在这里面啊

09:27.400 --> 09:28.400
就实现一下

09:28.400 --> 09:30.720
云含数的这个相关业务逻辑

09:30.720 --> 09:32.240
其实它跟这个

09:32.240 --> 09:34.840
我们的对作者关注啊

09:34.840 --> 09:35.360
差不多

09:35.360 --> 09:37.160
那我们直接就来写一下

09:37.200 --> 09:38.400
couns的db

09:38.400 --> 09:39.600
等于我们的这个

09:39.600 --> 09:42.480
unicloud.database

09:42.480 --> 09:42.840
ok

09:42.840 --> 09:43.680
这是一个

09:43.680 --> 09:44.200
然后呢

09:44.200 --> 09:46.320
我们再使用一个什么操作符

09:46.320 --> 09:48.120
变量dbcmd

09:48.120 --> 09:53.140
等于我们db.command

09:53.140 --> 09:55.220
comm

09:55.220 --> 09:56.180
ind

09:56.180 --> 09:57.740
db.command

09:57.740 --> 09:59.100
ok

09:59.100 --> 10:01.460
那这个两个都创建完成之后

10:01.460 --> 10:02.020
第一步

10:02.020 --> 10:03.060
我们要去干什么

10:03.060 --> 10:05.060
获取我们的这个

10:05.060 --> 10:06.580
传过来的这个变量

10:06.580 --> 10:08.340
那这里面是couns的

10:08.340 --> 10:10.220
我接收一下article id

10:10.220 --> 10:11.020
和我们的这个

10:11.020 --> 10:12.100
user id

10:12.100 --> 10:13.940
等于event

10:13.940 --> 10:15.140
ok

10:15.140 --> 10:15.740
第一步

10:15.740 --> 10:17.940
那我们创建获取内容

10:17.940 --> 10:18.220
这个

10:18.220 --> 10:20.460
也就是说前段传递过来的这个

10:20.460 --> 10:20.860
参数

10:20.860 --> 10:21.900
我们获取到了

10:21.900 --> 10:22.780
获取到之后

10:22.780 --> 10:23.620
怎么办呢

10:23.620 --> 10:25.140
我们首先要找到

10:25.140 --> 10:26.260
当前指定这个

10:26.260 --> 10:28.740
用户的一个Samsa app

10:28.740 --> 10:29.860
Samsa app

10:29.860 --> 10:30.900
article ids

10:30.900 --> 10:31.780
也就是说

10:31.780 --> 10:33.020
我们点赞那个输组

10:33.020 --> 10:33.420
对不对

10:33.420 --> 10:34.140
那在这里面

10:34.140 --> 10:36.100
我们写一下这个引用

10:36.100 --> 10:36.940
couns的

10:36.940 --> 10:38.540
我们user list

10:38.540 --> 10:40.340
等于一个event

10:40.340 --> 10:42.820
通过db.collection

10:42.820 --> 10:44.060
然后collection里面

10:44.060 --> 10:45.820
我们获取一个user

10:45.820 --> 10:48.020
user之后.doc

10:48.020 --> 10:48.820
找一下

10:48.820 --> 10:50.220
找一下通过什么找呢

10:50.220 --> 10:51.500
我们就通过这种

10:51.500 --> 10:53.460
user id的形式

10:53.460 --> 10:55.100
来进行一个查找

10:55.100 --> 10:55.940
找到它之后

10:55.940 --> 10:58.220
使用这种guide方法获取一下

10:58.220 --> 11:00.020
因为这个是一个data集合

11:00.020 --> 11:01.660
然后里面是一些数组

11:01.660 --> 11:02.100
所以说呢

11:02.100 --> 11:05.540
我在这里面做一个展开操作

11:05.540 --> 11:06.580
那第一步

11:06.620 --> 11:07.780
我定一个变量

11:07.780 --> 11:09.180
Samsa

11:11.020 --> 11:11.620
Samsa

11:11.620 --> 11:12.140
然后呢

11:12.140 --> 11:15.220
是article

11:15.220 --> 11:16.260
跟它一样名吧

11:16.260 --> 11:17.140
ids

11:17.140 --> 11:19.100
等于我们的一个什么呢

11:19.100 --> 11:20.500
user list

11:20.500 --> 11:21.140
对吧

11:21.140 --> 11:21.700
然后呢

11:21.700 --> 11:22.580
data

11:22.580 --> 11:24.020
data下面的第几项

11:24.020 --> 11:24.940
第零项

11:24.940 --> 11:26.780
然后darsamsa

11:26.780 --> 11:28.820
article ids

11:28.820 --> 11:30.340
它这里面是有这个字段的

11:30.340 --> 11:30.980
对不对

11:30.980 --> 11:32.020
找到它之后

11:32.020 --> 11:32.740
那这一步

11:32.740 --> 11:34.620
我用户是不是获取到了

11:34.620 --> 11:35.500
那用户获取到

11:35.500 --> 11:37.620
其实和我们的这个

11:37.620 --> 11:38.980
当时定义的什么呢

11:38.980 --> 11:40.380
我们的这个关注作者

11:40.380 --> 11:41.460
这个差不多

11:41.460 --> 11:42.700
我们拿过来啊

11:42.700 --> 11:43.780
Samsa

11:43.780 --> 11:46.420
update

11:46.420 --> 11:46.940
这里面

11:46.940 --> 11:48.900
我们这里面也是有一个什么呢

11:50.260 --> 11:51.060
我们这里面

11:51.060 --> 11:53.140
也是有一个条件判断

11:53.140 --> 11:53.700
最后呢

11:53.700 --> 11:54.980
给它做一个处理啊

11:54.980 --> 11:55.700
当然了

11:55.700 --> 11:57.060
这些我都给它复制过来

11:57.060 --> 11:59.340
然后给它做一个调整就可以了

11:59.340 --> 12:00.620
因为是比较像的

12:00.620 --> 12:00.900
对吧

12:02.660 --> 12:03.140
update

12:03.140 --> 12:03.860
follow also

12:03.860 --> 12:04.140
OK

12:04.140 --> 12:05.460
我把那个关了

12:05.460 --> 12:06.900
这里面update

12:06.900 --> 12:08.140
components

12:08.140 --> 12:09.260
打开它

12:09.260 --> 12:10.540
打开它之后

12:10.540 --> 12:11.340
在这个里面

12:11.340 --> 12:12.420
给它做一个粘贴

12:12.420 --> 12:14.900
然后我们调整它一下

12:14.900 --> 12:15.980
调整的时候

12:15.980 --> 12:16.580
在这里面

12:16.580 --> 12:17.340
首先

12:17.340 --> 12:18.460
light

12:18.460 --> 12:19.620
also ids

12:19.620 --> 12:20.460
那这个里面呢

12:20.460 --> 12:22.340
咱就不是 also ids了

12:22.340 --> 12:23.060
我写一个什么

12:23.060 --> 12:24.860
temporate AR

12:24.860 --> 12:27.220
我做一个临时处理啊

12:27.220 --> 12:27.740
然后呢

12:27.740 --> 12:28.900
这里面还会有一个

12:28.900 --> 12:30.260
return MSG

12:30.260 --> 12:31.580
那我这里面再定一个

12:31.580 --> 12:34.020
lightreturn MSG

12:34.020 --> 12:34.860
处置化的时候

12:34.860 --> 12:35.820
给它一个空

12:35.820 --> 12:36.660
是不是就可以了

12:36.660 --> 12:37.180
对吧

12:37.180 --> 12:38.540
这是这几个

12:38.540 --> 12:39.140
然后呢

12:39.140 --> 12:41.500
我们这里面一次来写一下

12:41.500 --> 12:43.100
我们判断的是什么呢

12:43.100 --> 12:45.540
如果说 also like ids

12:45.540 --> 12:46.580
那这个就不是它了

12:46.580 --> 12:47.140
对不对

12:47.140 --> 12:48.380
这个应该变成

12:48.380 --> 12:49.380
sample app

12:49.380 --> 12:50.700
article ids

12:50.700 --> 12:51.740
点因可录的

12:51.740 --> 12:52.620
因可录的

12:52.620 --> 12:53.820
它判断一下

12:53.820 --> 12:55.460
是否包含我们的这个

12:55.460 --> 12:56.700
文章的 id

12:56.700 --> 12:58.340
如果说包含文章 id

12:58.340 --> 13:01.180
那我这里面应该是写一下什么

13:01.180 --> 13:04.890
您取消了点赞啊

13:04.890 --> 13:06.370
您取消了点赞

13:06.370 --> 13:07.010
ok

13:07.010 --> 13:07.570
然后呢

13:07.570 --> 13:08.170
这个里面

13:08.170 --> 13:09.530
我们就一次来写

13:09.530 --> 13:11.330
这里面不是有一个变量吗

13:11.330 --> 13:13.010
那我就用temporate AR

13:13.010 --> 13:15.250
等于一个db.poo

13:15.250 --> 13:16.770
给它追加一个值

13:16.770 --> 13:18.530
那我这里面 db.poo

13:18.530 --> 13:21.410
也应该是铺我们的这个article id

13:21.410 --> 13:21.930
对不对

13:21.930 --> 13:23.450
那这个就可以了啊

13:23.450 --> 13:24.450
然后这里面

13:24.450 --> 13:25.330
处理完成之后

13:25.330 --> 13:26.930
咱们再到ios里面

13:26.930 --> 13:28.130
那这个ios里面

13:28.130 --> 13:29.330
我们给它写一个什么

13:29.330 --> 13:30.970
点赞成功

13:30.970 --> 13:31.290
ok

13:31.290 --> 13:33.210
这个里面给它提示一下

13:33.210 --> 13:34.290
点赞成功之后

13:34.450 --> 13:36.890
的to set的article id

13:36.890 --> 13:38.810
把它给追加进去

13:38.810 --> 13:39.610
追加进去

13:39.610 --> 13:40.450
这就搞定了

13:40.450 --> 13:41.130
搞定之后

13:41.130 --> 13:42.650
avait db user

13:42.650 --> 13:43.210
然后呢

13:43.210 --> 13:44.370
我在这个里面

13:44.370 --> 13:46.610
also like ids

13:46.610 --> 13:47.290
这就不对了

13:47.290 --> 13:47.570
对不对

13:47.570 --> 13:49.530
我们修改的这个字段叫什么

13:49.530 --> 13:52.290
sambos app article ids

13:53.090 --> 13:56.490
然后我们这个处理完成之后

13:56.490 --> 13:58.090
那我们这里面等于一个什么

13:58.090 --> 13:58.410
值呢

13:58.410 --> 14:00.610
等于我们的这个temporate AR

14:00.610 --> 14:03.010
也就是说临时定义好的这个值

14:03.010 --> 14:03.570
对不对

14:03.570 --> 14:04.130
那这一个

14:04.130 --> 14:04.930
就搞定了

14:04.930 --> 14:06.450
搞定之后给它返回值

14:06.450 --> 14:07.210
返回值

14:07.210 --> 14:08.010
那我们这里面

14:08.010 --> 14:09.690
其实和那个一样

14:09.690 --> 14:10.330
没有沾过来

14:10.330 --> 14:10.610
算了

14:10.610 --> 14:11.850
我们自己写一下

14:11.850 --> 14:12.970
code0

14:12.970 --> 14:13.530
然后呢

14:13.530 --> 14:14.570
是data

14:14.570 --> 14:16.450
data就是msg

14:16.450 --> 14:18.410
那这个msg就等于什么

14:18.410 --> 14:20.610
我们的这个return msg

14:20.610 --> 14:21.330
对吧

14:21.330 --> 14:21.570
好的

14:21.570 --> 14:22.530
那这个就处理完了

14:22.530 --> 14:23.370
处理完成之后

14:23.370 --> 14:24.970
这是只不过是对什么

14:24.970 --> 14:27.130
对用户的一个操作处理

14:27.130 --> 14:27.730
对不对

14:27.730 --> 14:29.970
用户的一个操作处理

14:29.970 --> 14:31.850
那现代我们处理完用户之后

14:31.850 --> 14:34.090
其实把这个用户也更改了

14:34.170 --> 14:36.410
这里面还得要做一件什么事呢

14:36.410 --> 14:38.010
我们对这个处理

14:38.010 --> 14:39.130
还得要处理一个什么

14:39.130 --> 14:42.330
处理文章的一个点赞数量

14:42.330 --> 14:42.810
对吧

14:42.810 --> 14:43.250
也就是说

14:43.370 --> 14:45.410
如果说你要是增加一个点赞的话

14:45.410 --> 14:45.690
OK

14:45.690 --> 14:46.490
那这个里面

14:46.490 --> 14:47.690
我数量得加一

14:47.690 --> 14:49.690
假如说你要减少一个点赞的话

14:49.690 --> 14:50.770
那我数量得减一

14:50.770 --> 14:51.850
所以说我这里面

14:51.850 --> 14:53.290
还得获取一个什么

14:53.290 --> 14:56.210
waitdb.collection

14:57.410 --> 15:00.410
我获取一个文章的这个数据表

15:00.410 --> 15:02.970
那我直接的db.collection

15:02.970 --> 15:06.050
那db.collection这里面就是article

15:06.050 --> 15:09.330
然后这里面写一下

15:10.170 --> 15:12.050
引号article之后

15:12.050 --> 15:13.730
我这里面.douse

15:13.730 --> 15:14.970
使用douse的形式

15:14.970 --> 15:16.970
那我通过article id

15:16.970 --> 15:18.530
来进行一个查找

15:18.530 --> 15:19.610
查找到之后

15:19.610 --> 15:22.530
我也是对它进行一个update

15:22.530 --> 15:23.770
这里面通过id

15:23.770 --> 15:25.010
就是找到指定的了

15:25.010 --> 15:25.530
对不对

15:25.530 --> 15:27.050
那找到它之后

15:27.050 --> 15:28.610
我要修改哪一个值

15:28.610 --> 15:30.130
我们可以看一下

15:30.130 --> 15:31.770
到云数据库里面

15:31.770 --> 15:32.770
我们找到article

15:32.770 --> 15:34.610
其实我们刷新一下

15:34.610 --> 15:35.810
我们是不是要修改

15:35.810 --> 15:37.330
samps up count

15:37.330 --> 15:39.050
也就是说把这个点赞

15:39.050 --> 15:40.290
大姆哥的这个数量

15:40.290 --> 15:42.050
给进行一个调整

15:42.050 --> 15:43.490
samps up count

15:43.490 --> 15:46.130
然后我们通过这种操作符

15:46.130 --> 15:47.530
db.一个什么呢

15:47.530 --> 15:50.050
我们直接的dbcmd

15:50.050 --> 15:52.370
点一个 int nc

15:52.370 --> 15:53.490
这个nc是什么呢

15:53.490 --> 15:54.850
在原有的基础上

15:54.850 --> 15:57.770
进行一个加一或者减一的操作

15:57.770 --> 16:00.050
比如说那我现在什么时候加一

16:00.050 --> 16:01.170
假如说取消点赞

16:01.170 --> 16:02.410
肯定是减一对不对

16:02.410 --> 16:04.770
那点赞成功肯定是加一

16:04.770 --> 16:05.610
所以说呢

16:05.610 --> 16:06.450
我这个里面

16:06.450 --> 16:08.330
我们就可以定一个什么呢

16:08.330 --> 16:09.450
samps number

16:09.450 --> 16:11.530
初始化的这么一个变量

16:11.530 --> 16:13.170
至于是加一还减一

16:13.170 --> 16:16.810
我们直接的在这个条件判断里面

16:16.810 --> 16:18.450
是不是就可以来做这个事了

16:18.450 --> 16:19.170
对不对

16:19.170 --> 16:20.930
那也就是说samps number

16:20.930 --> 16:23.690
初始化的时候等于一个闹

16:23.690 --> 16:25.690
如果说你取消了点赞

16:25.690 --> 16:26.650
samps number

16:26.650 --> 16:27.970
那就等于一个负义

16:27.970 --> 16:29.170
那就是减一

16:29.170 --> 16:31.330
假如说你要是点赞成功

16:31.330 --> 16:32.290
samps number

16:32.290 --> 16:34.530
那我们就是等于一个一

16:34.530 --> 16:35.410
那也就是说

16:35.410 --> 16:38.450
他这里面就是做加一的一个操作

16:38.450 --> 16:39.050
最后呢

16:39.050 --> 16:41.970
我们这个修改samps up count的时候

16:41.970 --> 16:43.370
通过我们操作服务

16:43.370 --> 16:45.050
dbcmd.nc

16:45.050 --> 16:45.490
也就是说

16:45.490 --> 16:47.970
int方式来把他这个数字

16:47.970 --> 16:50.210
给进行一个调整就OK了

16:50.210 --> 16:50.650
这里呢

16:50.650 --> 16:51.370
有两个位置

16:51.370 --> 16:52.730
让我们需要调整一下

16:52.730 --> 16:54.450
首先就是说这个

16:54.450 --> 16:56.290
如果说点赞成功的时候

16:56.290 --> 16:56.930
其实呢

16:56.930 --> 17:00.530
它是对这个temporateAR做一个处理

17:00.530 --> 17:02.130
而不是说原来的这个

17:02.130 --> 17:03.170
Auto IDS

17:03.170 --> 17:05.090
因为这个是我们粘贴过来的

17:06.410 --> 17:07.530
把它给复制一下

17:07.530 --> 17:08.530
进行粘贴

17:08.530 --> 17:09.250
这是第一个

17:09.250 --> 17:10.450
第二个呢

17:10.450 --> 17:11.410
处理文章

17:11.410 --> 17:12.930
这里面有一个

17:12.930 --> 17:13.610
豆号

17:13.610 --> 17:15.490
我们这里面使用一个点的形式

17:16.610 --> 17:16.970
OK

17:16.970 --> 17:18.050
处理完成之后呢

17:18.050 --> 17:19.010
我们在这个里面

17:19.010 --> 17:21.810
来查看一下他的这个实现效果

17:21.810 --> 17:23.530
我们来点赞做一下

17:23.530 --> 17:24.530
这个里面点

17:25.450 --> 17:25.730
OK

17:25.730 --> 17:26.250
可以啊

17:26.250 --> 17:26.850
可以呢

17:26.850 --> 17:28.130
现在这个里面显示

17:28.130 --> 17:29.210
您取消了点赞

17:29.210 --> 17:31.010
也就是说刚才里面是有点赞的

17:31.010 --> 17:32.010
这个效果的

17:32.010 --> 17:32.890
我们再来试一下

17:32.890 --> 17:33.810
比如说这个里面

17:33.810 --> 17:35.570
我再进行一个点赞

17:35.570 --> 17:36.730
当我点赞之后

17:36.730 --> 17:39.010
updateComponents这个执行了

17:39.010 --> 17:39.770
点赞成功

17:40.930 --> 17:43.730
我们刷新这个article文章列表里面

17:43.730 --> 17:45.330
此时他应该是

17:45.330 --> 17:47.090
给我做一个加一操作

17:47.090 --> 17:47.370
对吧

17:47.370 --> 17:49.210
Sam'sUpCount做了一个加一

17:50.410 --> 17:50.850
之后呢

17:50.850 --> 17:51.970
我们再看一下这个

17:51.970 --> 17:53.170
优点优点表里面

17:53.170 --> 17:54.930
应该是给我们加了一个

17:54.930 --> 17:56.850
Sam'sUpArticle IDS

17:56.850 --> 17:58.370
加了这个当前文章的

17:58.370 --> 17:59.250
这个ID值

17:59.250 --> 18:01.130
给他插入到这个数组里面

18:01.130 --> 18:01.650
那这个呢

18:01.650 --> 18:05.090
我们整个的这个云寒数就OK了

18:05.090 --> 18:06.410
那云寒数OK之后

18:06.410 --> 18:07.770
那接下来我们要做什么呢

18:07.770 --> 18:09.610
接下来我们要对这个用户

18:09.610 --> 18:11.810
一个数据来实现一个同步更新

18:11.810 --> 18:12.890
就可以了

18:12.890 --> 18:15.050
那为了保证这个数据的清洁度

18:15.050 --> 18:15.930
我们现在啊

18:15.930 --> 18:17.530
先给他做一个取消操作

18:18.850 --> 18:19.210
OK

18:19.210 --> 18:19.810
取消了

18:19.810 --> 18:20.890
取消我们看一下

18:20.930 --> 18:23.010
我们当前的这个UserInfo里面

18:23.890 --> 18:26.050
他的Sam'sUpArticle IDS

18:26.050 --> 18:26.610
是没有的

18:26.610 --> 18:27.210
对吧

18:27.210 --> 18:27.610
好的

18:27.610 --> 18:28.970
那我们现在就开始来做

18:30.290 --> 18:30.650
土豆

18:30.650 --> 18:32.570
首先我们第一件事做什么呢

18:32.570 --> 18:35.170
我们直接的让这个楼顶效果

18:35.170 --> 18:36.170
是不是得显示出来

18:36.170 --> 18:36.810
也就是说

18:36.810 --> 18:38.170
如果说你成功了

18:38.170 --> 18:40.050
那我直接让你展示出来

18:40.050 --> 18:42.850
一个Uni.showToast的

18:42.850 --> 18:43.570
是不是就可以了

18:44.570 --> 18:45.610
那我这里面写一下

18:45.610 --> 18:47.170
Uni.showToast的

18:48.650 --> 18:49.090
Title

18:49.090 --> 18:49.650
Title呢

18:49.650 --> 18:51.330
就是给他一个MSG

18:51.330 --> 18:52.610
返回的这个结果值

18:52.610 --> 18:53.490
OK

18:53.490 --> 18:54.690
这个处理完成之后

18:54.690 --> 18:56.770
我们同样的跟上面差不多

18:56.770 --> 18:58.490
我们要修改他的这个ID

18:58.490 --> 18:59.650
那修改他的ID

18:59.650 --> 19:01.450
首先我们订一下

19:01.450 --> 19:02.530
把这一套拿过来

19:02.530 --> 19:03.450
拿过来之后

19:03.450 --> 19:04.930
我们进行一个调整

19:04.930 --> 19:05.930
就可以了

19:05.930 --> 19:08.770
比如说这个是修改用户的一个

19:08.770 --> 19:09.090
什么

19:10.330 --> 19:13.450
修改用户的一个点赞数量

19:13.450 --> 19:17.570
点赞数组的一个存储

19:18.570 --> 19:19.730
OK

19:19.730 --> 19:21.730
把它给进行一个调整

19:21.730 --> 19:22.570
那这个里面

19:22.570 --> 19:24.290
我们就不要叫这个了

19:24.290 --> 19:24.970
这个叫什么呢

19:24.970 --> 19:26.730
sambus

19:26.730 --> 19:27.010
OK

19:27.010 --> 19:27.730
从你写下

19:29.290 --> 19:31.930
sambusAR等于Z star

19:31.930 --> 19:34.290
yoderninfot.alsolikeids

19:34.290 --> 19:35.290
这个就不对了

19:35.290 --> 19:35.890
对不对

19:35.890 --> 19:38.130
那我们直接把它给调整一个

19:38.130 --> 19:38.610
这个呢

19:38.610 --> 19:40.970
是和我们这个名字是一样的

19:40.970 --> 19:41.490
比较长

19:41.490 --> 19:43.330
我们直接给他做一个什么

19:43.330 --> 19:44.370
粘贴就可以了

19:44.370 --> 19:46.130
到我们的这个里面

19:46.130 --> 19:47.250
他应该是哪一个

19:47.250 --> 19:49.210
就是我们的这个

19:49.210 --> 19:51.970
sambusuparticleids

19:51.970 --> 19:52.970
把它给复制一下

19:52.970 --> 19:53.810
哎

19:53.810 --> 19:54.250
sorry啊

19:54.250 --> 19:55.210
把它给干掉了

19:55.210 --> 19:56.130
那我们直接的

19:56.130 --> 19:57.530
再给他重新打开一下

19:58.970 --> 19:59.290
OK

19:59.290 --> 19:59.890
在这个里面

19:59.890 --> 20:01.770
是否对文章进行点赞

20:01.770 --> 20:05.930
Z staryoderninfot.sambusuparticleids

20:05.930 --> 20:06.410
然后呢

20:06.410 --> 20:07.890
我们直接把它解构出来

20:07.890 --> 20:09.010
我看一下

20:09.010 --> 20:11.690
这个sambusAR是否包含

20:11.690 --> 20:13.210
这个Z stararticle

20:13.210 --> 20:13.810
然后呢

20:13.810 --> 20:14.690
点一个什么呢

20:14.690 --> 20:15.890
下方键ID

20:15.890 --> 20:18.250
看它是否包含这个文章ID

20:18.250 --> 20:19.770
如果说包含的话

20:19.770 --> 20:20.410
我怎么办

20:20.410 --> 20:22.690
我直接的给他过立掉啊

20:22.690 --> 20:25.890
那就是sambusAR等于我们

20:25.890 --> 20:28.690
sambusAR.filteritome

20:28.690 --> 20:31.330
itome不等于Z stararticle

20:31.330 --> 20:33.290
这里面使用一个双等啊

20:34.530 --> 20:37.410
Z stararticle点一个什么

20:37.410 --> 20:39.210
我们的下方键ID

20:39.210 --> 20:40.210
看他把那个

20:40.210 --> 20:42.810
就是过立掉的给显示出来

20:42.810 --> 20:44.410
重新给他复制就可以了

20:44.410 --> 20:45.010
之后呢

20:45.010 --> 20:46.450
如果说你不存在的话

20:46.450 --> 20:47.410
我怎么办

20:47.410 --> 20:48.850
我直接给你铺使一下

20:48.850 --> 20:50.210
Z stararticle

20:50.210 --> 20:50.810
然后呢

20:50.810 --> 20:51.810
就是他的这个

20:53.130 --> 20:54.570
ID纸上点

20:54.570 --> 20:56.050
这里面是下方键ID

20:56.050 --> 20:57.050
OK

20:57.050 --> 20:58.170
之后完成之后

20:58.170 --> 21:00.050
Z starupdateyoderninfot

21:00.050 --> 21:01.410
改一个什么

21:01.410 --> 21:02.930
用户的yoderninfot

21:02.930 --> 21:04.370
那他就是

21:04.370 --> 21:04.770
哎

21:04.770 --> 21:05.330
这里面

21:05.330 --> 21:07.650
把它给粘贴过来就可以啊

21:07.650 --> 21:11.250
是sambusArticleids

21:11.250 --> 21:12.410
把它给拿过来

21:12.410 --> 21:13.650
拿过来之后

21:13.650 --> 21:15.250
就是我们调整之后的

21:15.250 --> 21:17.010
sambusAR就可以了

21:18.130 --> 21:18.410
OK

21:18.410 --> 21:20.330
我们来看一下是否可行

21:20.330 --> 21:20.810
好的

21:20.810 --> 21:21.570
到这个里面

21:21.570 --> 21:24.890
我们直接的来对他进行一个点赞

21:24.890 --> 21:25.130
好的

21:25.130 --> 21:26.730
现在点赞已经成功了

21:26.730 --> 21:27.330
成功之后

21:27.330 --> 21:28.010
我们看一下

21:28.010 --> 21:30.130
Z starage里面存的这个纸

21:30.130 --> 21:30.770
那此时呢

21:30.770 --> 21:33.890
sambusuparticleids里面就一条纸的

21:33.890 --> 21:35.290
如果你有一条纸的时候

21:35.290 --> 21:37.210
当你在自刷新界面的时候

21:37.210 --> 21:39.170
那他会根据yoderninfot里面的

21:39.170 --> 21:43.210
这个sambusuparticleids

21:43.250 --> 21:44.650
做一个重新的匹配

21:44.650 --> 21:46.130
如果说你匹配成功之后

21:46.130 --> 21:47.170
做一个计算

21:47.170 --> 21:49.970
那这里面就会有一个实行的处理啊

21:49.970 --> 21:50.610
当我取消

21:50.610 --> 21:50.970
OK

21:50.970 --> 21:52.290
这是没有问题的

21:52.290 --> 21:52.890
那此时呢

21:52.890 --> 21:54.490
我们还需要做一个什么事

21:54.490 --> 21:56.210
同步上面的这个

21:56.210 --> 21:57.650
我们的这个赞的信息

21:57.650 --> 21:57.970
对不对

21:57.970 --> 21:58.770
那这个里面呢

21:58.770 --> 22:00.010
我们也要调整一下

22:00.010 --> 22:00.770
怎么调整呢

22:00.770 --> 22:01.770
其实我在这里面

22:01.770 --> 22:02.850
就是修改什么呢

22:02.850 --> 22:05.410
修改我们article data里面的

22:05.410 --> 22:06.330
一个什么

22:06.330 --> 22:08.650
一个我们的sambusuparticleids

22:08.650 --> 22:09.730
是不是就可以了

22:09.730 --> 22:11.890
那这里面我就给同学们写一下

22:11.890 --> 22:13.810
这个里面是这一次点

22:13.810 --> 22:14.930
article data

22:14.930 --> 22:16.410
点一个sambus

22:18.130 --> 22:18.930
sambus

22:18.930 --> 22:19.570
然后呢

22:19.570 --> 22:22.450
他的这个值应该是upcount

22:22.450 --> 22:23.050
OK

22:23.050 --> 22:24.530
有这个值等于一个什么

22:24.530 --> 22:26.130
那这个里面如果说

22:26.130 --> 22:27.170
你要是取消

22:27.170 --> 22:28.450
那就是减等于1

22:28.450 --> 22:29.130
对吧

22:29.130 --> 22:30.810
那假如说你不是取消呢

22:30.810 --> 22:31.690
我们这个里面

22:31.690 --> 22:33.690
就是让他做一个

22:33.690 --> 22:35.250
加等于1的操作

22:35.250 --> 22:36.010
是不是就可以了

22:36.010 --> 22:37.490
来我们看一下是否可行

22:38.810 --> 22:39.610
回到这个里面

22:39.610 --> 22:40.810
当前现在有6站

22:40.810 --> 22:41.170
对不对

22:41.210 --> 22:42.450
当我取消的时候

22:42.450 --> 22:43.410
你会发现这里面

22:43.410 --> 22:45.290
是不是变成了5站

22:45.290 --> 22:45.610
对吧

22:45.610 --> 22:46.330
那我们看一下

22:46.330 --> 22:47.490
5站没问题

22:47.490 --> 22:48.810
当我再次点击ok

22:48.810 --> 22:49.410
6站

22:49.410 --> 22:49.850
这个呢

22:49.850 --> 22:51.770
就是整个的一个处理

22:51.770 --> 22:52.050
好的

22:52.050 --> 22:53.330
那我们处理完这个之后

22:53.330 --> 22:55.570
再说一下这个浏览这一块

22:55.570 --> 22:56.450
浏览这一块呢

22:56.450 --> 22:58.250
相对的就比较简单了

22:58.250 --> 22:59.730
怎么办呢

22:59.730 --> 23:00.650
如果说

23:00.650 --> 23:03.530
当你从这个文章列表

23:03.530 --> 23:06.170
点击到我们的这个文章的详情里面

23:06.170 --> 23:07.370
那我就认为你是什么呢

23:07.370 --> 23:08.410
已经浏览了

23:08.410 --> 23:09.570
那如果说你已经浏览了

23:09.570 --> 23:12.530
我就这个浏览的次数给你加一就可以了

23:12.530 --> 23:13.650
那什么时候做加一

23:13.650 --> 23:17.370
其实你点入到这个文章详情之后

23:17.370 --> 23:18.170
我这里面呢

23:18.170 --> 23:20.890
就可以对你进行一个加一操作了

23:20.890 --> 23:21.650
那这个怎么办呢

23:21.650 --> 23:24.010
其实我们直接调整一下

23:24.010 --> 23:25.850
这个云寒数就可以了

23:25.850 --> 23:27.570
我们这里面折叠所有

23:27.570 --> 23:28.130
然后呢

23:28.130 --> 23:30.050
打开uniclode的function

23:30.050 --> 23:32.930
那这个里面有一个guide article detail

23:32.930 --> 23:33.490
对吧

23:33.490 --> 23:35.250
如果说你去访问这个接口

23:35.250 --> 23:37.730
等于你现在是想访问我们

23:37.730 --> 23:39.690
整个的这个文章的详情

23:39.690 --> 23:41.290
那你访问文章详情的时候

23:41.290 --> 23:44.890
我首先在这个给你做返回输出的时候

23:44.890 --> 23:47.530
我这里面先做一个修改操作

23:47.530 --> 23:48.410
那怎么修改呢

23:48.410 --> 23:50.850
await db.collection

23:50.850 --> 23:52.970
然后这个collection里面指定

23:52.970 --> 23:54.330
是我们article表

23:54.330 --> 23:57.570
然后这里面做一个update操作

23:57.570 --> 23:58.610
update的操作

23:58.610 --> 24:02.690
我们把这个里面它的一个纸改一下

24:02.690 --> 24:03.450
哪一个纸呢

24:03.450 --> 24:05.090
我们可以回来看一下

24:05.130 --> 24:08.050
其实这个article里面应该是保存了

24:08.050 --> 24:09.930
一个browards count

24:09.930 --> 24:11.130
是不是有这么一个纸啊

24:11.130 --> 24:13.090
那我就把这个纸给你做一个什么

24:13.090 --> 24:14.690
调整browards count

24:14.690 --> 24:15.850
调整成什么呢

24:15.850 --> 24:17.690
我们直接让你在原来的基础上

24:17.690 --> 24:19.450
进行一个加一操作

24:19.450 --> 24:22.690
那刚才我们使用这个update

24:22.690 --> 24:24.490
comments这个里面

24:24.490 --> 24:25.250
咱们也看到了

24:25.250 --> 24:26.810
我们使用的是一个什么

24:26.810 --> 24:30.050
dbcmd.ins 对不对

24:30.050 --> 24:31.330
.inc方法啊

24:31.330 --> 24:32.130
那在这个里面呢

24:32.130 --> 24:33.570
我们也可以使用

24:33.570 --> 24:35.330
dbcmd.inc方法

24:35.330 --> 24:38.370
直接让你指定进行一个加一就可以了

24:38.370 --> 24:39.770
那我直接在这里面写一下

24:39.770 --> 24:42.330
dbcmd

24:42.330 --> 24:45.210
等于db.commments

24:45.210 --> 24:46.010
ok

24:46.010 --> 24:47.810
那这个里面定一好之后

24:47.810 --> 24:51.890
我这里面就是dbcmd.inc

24:51.890 --> 24:53.130
因此方法这个里面啊

24:53.130 --> 24:54.770
咱们可以看一下

24:54.770 --> 24:56.850
给它打印一下ins

24:56.850 --> 24:58.170
用于指示字段

24:58.170 --> 24:59.650
自增某个指对不对

24:59.650 --> 25:01.650
让它做一个自增操作

25:01.650 --> 25:02.930
那我直接的自增

25:03.170 --> 25:04.330
是不是就可以了

25:04.330 --> 25:05.770
那这样我们再回来

25:05.770 --> 25:07.930
回到我们的这个界面里面

25:07.930 --> 25:10.010
当我现在这个没进行访问的时候

25:10.010 --> 25:11.890
174浏览对吧

25:11.890 --> 25:12.690
当我访问了

25:12.690 --> 25:14.850
你会发现是不是178次

25:14.850 --> 25:16.010
然后刷新

25:16.010 --> 25:17.250
179次

25:17.250 --> 25:19.370
这个是都没有问题的对不对

25:19.370 --> 25:21.490
然后呢直接的180次啊

25:21.490 --> 25:22.290
其实那你看啊

25:22.290 --> 25:23.490
它这个里面直接的

25:23.490 --> 25:24.930
会有一个调整是因为

25:24.930 --> 25:26.490
我们出手话的时候

25:26.490 --> 25:28.290
因为这个是预讯染的对吧

25:28.290 --> 25:29.770
当你预讯染的时候

25:29.770 --> 25:31.250
其实它是取得这个

25:31.250 --> 25:32.570
URL里面的值

25:32.570 --> 25:33.530
URL里面值

25:33.530 --> 25:34.930
我们刚才带过来的时候

25:34.930 --> 25:36.410
虽然现在是180了

25:36.410 --> 25:38.410
我们跳过来的时候呢

25:38.410 --> 25:40.130
上面应该显示的是

25:40.130 --> 25:40.890
是多少

25:40.890 --> 25:42.130
是不是180

25:42.130 --> 25:43.450
180啊对不对

25:43.450 --> 25:44.130
那180

25:44.130 --> 25:45.330
如果说刷新一下

25:45.330 --> 25:47.690
此时应该是从181的基础上

25:47.690 --> 25:49.090
变成什么182

25:49.090 --> 25:50.170
但是出手话的时候

25:50.170 --> 25:51.890
当你没请求完数据

25:51.890 --> 25:54.250
然后重新更新我们的这个

25:54.250 --> 25:55.490
预讯染的这个值的时候

25:55.490 --> 25:58.770
那它应该是从180进行一次跳转

25:58.770 --> 26:00.010
对不对

26:00.010 --> 26:00.890
更新完成之后

26:00.890 --> 26:03.090
那这个里面就是182次浏览

26:03.090 --> 26:05.570
这个倒是没问题的

26:05.570 --> 26:05.890
好的

26:05.890 --> 26:07.010
那到这里面呢

26:07.010 --> 26:09.490
我们的这个文章详情这一部分

26:09.490 --> 26:10.930
基本上就搞定了

26:10.930 --> 26:13.770
我们从文章详情的出手话渲染

26:13.770 --> 26:14.450
到最后呢

26:14.450 --> 26:16.970
我们这个评论的一个关联

26:16.970 --> 26:17.530
之后呢

26:17.530 --> 26:19.810
再把这一些相关的小爱康的按钮

26:19.810 --> 26:21.130
实现了一个同步

26:21.130 --> 26:23.490
那整个的我们的这个文章详情界面

26:23.490 --> 26:24.410
就差不多了

26:24.410 --> 26:25.770
那么接下来的课程里面呢

26:25.770 --> 26:27.090
我们会再做一下这个

26:27.090 --> 26:28.930
评论列表的一个处理啊

26:28.970 --> 26:31.250
那整个的这个文章处理这一部分

26:31.250 --> 26:33.450
基本上就搞定了啊

26:33.450 --> 26:33.770
好的

26:33.770 --> 26:35.610
那我们这几课就暂时到这里

