WEBVTT

00:01.650 --> 00:03.250
各位同学大家好

00:03.250 --> 00:07.050
这期课我们继续用户登录模块的一个学习

00:07.050 --> 00:11.450
那么本期课我们来完成一下通过手机验证码的这个形式

00:11.450 --> 00:13.850
来进行一个用户登录操作

00:13.850 --> 00:14.850
怎么来实现呢

00:14.850 --> 00:16.450
首先我们的这个处发

00:16.450 --> 00:20.650
是由我们验证码组件的一个点击事件作为一个处发点

00:20.650 --> 00:22.050
那这个点击事件里面

00:22.050 --> 00:25.450
我们首先要保证获取到一个正确的手机号码

00:25.450 --> 00:27.650
拿到这个正确的手机号码之后

00:27.650 --> 00:29.850
然后呢我们开启一个定时器

00:29.850 --> 00:33.250
这里面给一个倒计时的这么一个显示状态

00:33.250 --> 00:35.050
有了这个显示状态之后

00:35.050 --> 00:38.550
之后呢我们就向后端发送这个手机号码

00:38.550 --> 00:42.050
后端呢云寒书里面获取到这个手机号码之后

00:42.050 --> 00:45.050
然后生成一个我们的这个验证码

00:45.050 --> 00:46.750
并且呢在这个里面

00:46.750 --> 00:48.950
他将这个验证码发送给我们的手机

00:48.950 --> 00:49.950
以及我们的前端

00:49.950 --> 00:51.950
前端拿到这个验证码之后

00:51.950 --> 00:54.950
进行一下这个验证规则的一个匹配

00:54.950 --> 00:56.250
如果说匹配成功之后

00:56.250 --> 00:57.850
这时候呢我就把这个手机号码

00:57.850 --> 00:59.250
直接发送给后端

00:59.250 --> 01:02.850
ok 这样呢就形成一个完整的闭环

01:02.850 --> 01:06.650
我们可以看一下就是这个完成的这一块

01:06.650 --> 01:07.350
用户登录

01:07.350 --> 01:11.150
那假如说完成的这个用户登录里面是怎么来做的啊

01:11.150 --> 01:13.050
就像我们刚才描述的一样啊

01:13.050 --> 01:13.850
首先什么呢

01:13.850 --> 01:16.750
我这里面得获取一个正确的手机号码对不对

01:16.750 --> 01:19.350
那这个正确的手机号码

01:19.350 --> 01:20.550
这里面我输入一个

01:20.550 --> 01:22.250
输入一个正确的手机号码之后

01:22.250 --> 01:24.650
我这里面就有一个获取验证码操作

01:24.650 --> 01:26.450
获取验证码操作之后

01:26.450 --> 01:27.050
此时呢

01:27.050 --> 01:29.550
你这个手机上就能收到一个验证码

01:29.550 --> 01:30.250
并且呢

01:30.250 --> 01:31.650
我们在这个里面啊

01:31.650 --> 01:33.250
你看这个返回里面

01:33.250 --> 01:35.250
其实我们也能看到这个验证码

01:35.250 --> 01:36.750
我们拿到这个验证码之后

01:36.750 --> 01:38.550
在这里面进行一个填写

01:38.550 --> 01:39.650
那填写完成之后

01:39.650 --> 01:41.550
我这里面点击立即登录

01:41.550 --> 01:41.850
ok

01:43.350 --> 01:44.350
你登录成功之后

01:44.350 --> 01:44.950
这样呢

01:44.950 --> 01:49.050
就是一个整个的通过手机验证码登录的这么一个过程

01:49.050 --> 01:49.650
我们呢

01:49.650 --> 01:50.850
就是以代码的形式

01:50.850 --> 01:54.250
来完成一下整个的流程就可以了啊

01:54.250 --> 01:54.550
好的

01:54.550 --> 01:56.350
回到我们的这个界面里面啊

01:56.350 --> 01:56.850
并且呢

01:56.850 --> 01:58.350
我们打开编辑器

01:58.350 --> 01:58.950
怎么来做

01:58.950 --> 01:59.950
首先第一步呢

01:59.950 --> 02:02.750
我们要为这个sendcode的组加

02:02.750 --> 02:06.350
里面的这个容器给它添加一个点击事件

02:06.350 --> 02:07.750
作为我们的出发点

02:07.750 --> 02:08.650
ad click

02:08.650 --> 02:11.750
比如说这里面有一个sendcode的

02:11.750 --> 02:12.150
ok

02:12.950 --> 02:16.850
我们在这个买色的里面进行一下定义

02:16.850 --> 02:17.650
这个呢

02:17.650 --> 02:19.550
可能是一个异不操作

02:19.550 --> 02:21.250
这里面有一个sendcode的

02:21.250 --> 02:21.850
那第一步

02:21.850 --> 02:24.750
我们要获取form表单对吧

02:24.750 --> 02:25.950
我们得获取form表单

02:25.950 --> 02:26.450
为啥

02:26.450 --> 02:27.950
为啥获取这个form表单呢

02:27.950 --> 02:33.750
我们要对它里面的这个form单独的进行一个验证啊

02:33.750 --> 02:37.650
这个里面就是单独的进行验证

02:37.650 --> 02:39.950
那这时候我们就得怎么来获取

02:39.950 --> 02:41.750
其实最简单的方式

02:41.750 --> 02:44.150
就是我可以在这个里面prox

02:45.450 --> 02:47.050
ok拿到一个什么呢

02:47.050 --> 02:49.350
我们这里面定义一个form

02:49.350 --> 02:50.150
这个form呢

02:50.150 --> 02:54.450
就由我们的这个副组继续来进行一个传递

02:54.550 --> 02:55.350
它的类型呢

02:55.350 --> 02:56.250
就是object

02:57.250 --> 02:57.650
ok

02:57.650 --> 02:59.450
form object

02:59.450 --> 03:00.350
ok

03:00.350 --> 03:00.650
好的

03:00.650 --> 03:01.450
保存一下

03:01.450 --> 03:02.650
保存一下之后

03:02.650 --> 03:03.450
那我这个里面

03:03.450 --> 03:05.350
其实我就可以给它传过去啊

03:05.350 --> 03:08.250
sendcode在这个里面进行一个传递

03:08.250 --> 03:11.750
那就是form等于我们的dollar

03:11.750 --> 03:14.150
refs.form

03:14.150 --> 03:14.350
好的

03:14.350 --> 03:15.450
那你传过去之后

03:15.450 --> 03:15.950
在这里面

03:15.950 --> 03:18.350
我们看能不能正确的拿到

03:18.350 --> 03:20.350
打印一下z.form

03:21.850 --> 03:22.150
ok

03:22.150 --> 03:23.250
我们来看一下

03:23.250 --> 03:24.950
是否可以获取到它

03:24.950 --> 03:27.450
我在这个里面进行一个点击

03:27.450 --> 03:28.150
点击的时候

03:28.150 --> 03:29.650
你会发现拿到它了

03:29.650 --> 03:30.550
拿到它之后

03:30.550 --> 03:34.250
其实我们可以单独的通过它的validate方法

03:34.250 --> 03:37.850
专门的来做这个电话号码的一个验证啊

03:37.850 --> 03:39.050
那单独的做验证

03:39.050 --> 03:40.050
怎么来做验证呢

03:40.050 --> 03:40.850
其实在这里面

03:40.850 --> 03:44.450
我们就可以写couns.form

03:44.450 --> 03:45.050
sorry啊

03:45.050 --> 03:46.850
couns的应该是form

03:46.850 --> 03:48.350
等于什么呢

03:48.350 --> 03:49.750
z.sync啊

03:49.750 --> 03:51.550
这个是个异步操作

03:51.550 --> 03:52.350
wait

03:52.450 --> 03:55.050
couns.form.validate

03:55.050 --> 03:55.850
然后这里面呢

03:55.850 --> 03:58.250
我们就指定给谁做验证

03:58.250 --> 03:59.450
就是我们的这个缝

03:59.450 --> 04:00.050
然后呢

04:00.050 --> 04:02.250
我现在拿到这个缝的结果啊

04:03.450 --> 04:04.650
触发它的这个验证

04:04.650 --> 04:06.050
如果说验证通过了之后

04:06.050 --> 04:06.650
这个时候呢

04:06.650 --> 04:08.650
我就能拿到这个结果质

04:08.650 --> 04:10.650
我们来看一眼是否可行啊

04:10.650 --> 04:11.650
把它关掉

04:11.650 --> 04:15.350
那我在这个里面135527525

04:15.350 --> 04:16.350
这里面少一位

04:16.350 --> 04:16.850
少一位呢

04:16.850 --> 04:18.050
我们看行不行

04:18.050 --> 04:19.250
手机号码格式不正确

04:19.250 --> 04:19.650
对不对

04:19.650 --> 04:20.050
然后呢

04:20.050 --> 04:21.250
如果说正确了

04:21.250 --> 04:22.150
2517

04:22.150 --> 04:22.550
ok

04:22.550 --> 04:23.850
你会发现没什么问题

04:23.850 --> 04:24.850
我能获取到

04:24.850 --> 04:25.550
但是呢

04:25.550 --> 04:26.850
这种做法有一个问题

04:26.850 --> 04:27.750
是啥问题呢

04:27.750 --> 04:30.150
因为我们是做多端的开发试配

04:30.150 --> 04:31.250
在小程序端

04:31.250 --> 04:31.850
这个里面呢

04:31.850 --> 04:33.450
就会出现一些问题

04:33.450 --> 04:35.850
我们可以看一下小程序这个

04:35.850 --> 04:37.250
点击到小程序里面

04:37.250 --> 04:37.850
这时候呢

04:37.850 --> 04:39.650
我做一个手机登录

04:39.650 --> 04:40.350
那此时呢

04:40.350 --> 04:43.450
还是操作刚才的这么一个流程

04:43.450 --> 04:46.850
135527525

04:46.850 --> 04:47.750
那少写一位啊

04:47.750 --> 04:48.250
少写一位

04:48.250 --> 04:49.950
我这里面点击获取验证码

04:49.950 --> 04:50.650
你会发现啊

04:50.650 --> 04:51.550
validated file的

04:51.550 --> 04:52.350
oh no

04:52.350 --> 04:53.750
也就是说小程序

04:53.750 --> 04:56.550
对这种ifs的这个渲染机制

04:56.550 --> 04:58.350
和我们的这个h5渲染机制

04:58.350 --> 04:59.250
是完全不一致的

04:59.250 --> 04:59.650
所以说

04:59.650 --> 05:01.450
你通过这种形式来获取啊

05:01.450 --> 05:01.950
没戏

05:01.950 --> 05:02.750
咋办呢

05:02.750 --> 05:03.450
这个时候

05:03.450 --> 05:05.650
我们就不能在这个组件

05:05.650 --> 05:06.950
出手化使用的时候

05:06.950 --> 05:09.550
通过以pops的形式来获取

05:09.550 --> 05:10.550
这样就不行了

05:10.550 --> 05:11.550
也就是说

05:11.550 --> 05:12.750
这个我们得写一下

05:12.750 --> 05:13.750
这个是什么

05:13.750 --> 05:16.950
不支持小程序

05:16.950 --> 05:18.450
那个不支持小程序打扮呢

05:18.450 --> 05:20.150
这时候我们就可以想一下

05:20.150 --> 05:22.250
能不能用一种同步的形式来获取

05:22.250 --> 05:22.950
也就是说

05:22.950 --> 05:24.450
在点击的时候

05:24.450 --> 05:27.750
我肯定是已经把这个forms旋完了

05:27.750 --> 05:28.250
对不对

05:28.250 --> 05:29.150
其实我们获取不到

05:29.150 --> 05:30.850
主要的原因是什么呢

05:30.850 --> 05:32.250
小程序里面啊

05:32.250 --> 05:33.550
在这个出手化的时候

05:33.550 --> 05:35.750
其实他还没有完完全全的

05:35.750 --> 05:37.650
把这个forms给获取到对不对

05:37.650 --> 05:38.850
那我就在点击的时候

05:38.850 --> 05:40.850
来动态的进行一个获取

05:40.850 --> 05:41.650
怎么来实现呢

05:41.650 --> 05:43.050
我这个也不叫sendcode了

05:43.050 --> 05:44.150
那我叫一个什么

05:44.150 --> 05:45.850
我这个叫getforms

05:45.850 --> 05:47.450
我们可以通过callback

05:47.450 --> 05:48.850
回掉函数的形式

05:48.850 --> 05:50.250
来实现一下啊

05:50.250 --> 05:51.650
这里面是一个什么

05:51.650 --> 05:52.650
getform

05:52.650 --> 05:53.350
ok

05:53.350 --> 05:54.350
那这个getform

05:54.350 --> 05:56.250
我可以发送一个什么

05:56.250 --> 05:57.450
发向附容器啊

05:57.450 --> 05:58.650
发送一个试验

05:58.650 --> 05:59.350
这个试验呢

05:59.350 --> 06:01.050
专门的来进行

06:01.050 --> 06:03.650
我们的这个forms表达的一个获取

06:03.650 --> 06:04.250
那在这个里面

06:04.250 --> 06:05.250
我可以写一个

06:05.250 --> 06:07.450
这次点dollar imat

06:07.450 --> 06:08.150
ok

06:08.150 --> 06:09.050
那这个 imat呢

06:09.050 --> 06:10.650
我就写一个getform

06:12.350 --> 06:12.950
并且呢

06:12.950 --> 06:13.750
我这个里面啊

06:13.750 --> 06:15.050
指定一个参数

06:15.050 --> 06:15.950
这个参数呢

06:15.950 --> 06:18.150
就是我当前组件的这个

06:18.150 --> 06:19.150
我们的这个方法

06:19.150 --> 06:20.950
这次点getcode

06:22.350 --> 06:23.850
这次点sendcode

06:23.850 --> 06:24.350
然后呢

06:24.350 --> 06:25.150
这个里面

06:25.150 --> 06:27.450
如果说我们的这个附组件

06:27.450 --> 06:30.150
因为他已经做好了这个事件的

06:30.150 --> 06:32.150
自定议事件的一个监听

06:32.150 --> 06:32.950
那如果说

06:32.950 --> 06:34.850
他监听到这个事件处罚之后

06:34.850 --> 06:35.650
这个里面呢

06:35.650 --> 06:37.450
他来给我调一下sendcode

06:37.450 --> 06:37.950
并且呢

06:37.950 --> 06:38.950
把这个form

06:38.950 --> 06:40.550
作为我们的这个行参

06:40.550 --> 06:41.650
给我们啊

06:41.650 --> 06:42.550
作为实参

06:42.550 --> 06:43.550
给我们返回一下

06:43.550 --> 06:44.450
就ok了

06:44.450 --> 06:45.350
想法是这样的

06:45.350 --> 06:46.050
那怎么来做

06:46.050 --> 06:48.150
我到这个login view里面啊

06:48.150 --> 06:48.750
此时呢

06:48.750 --> 06:51.050
我们这个sendcode的

06:51.050 --> 06:52.750
这种发送显然不行了

06:52.750 --> 06:53.950
那我就换一种啊

06:53.950 --> 06:55.650
这叫什么的getform

06:55.650 --> 06:56.750
getform的时候

06:56.750 --> 06:59.250
我们要来做这个传递啊

06:59.250 --> 07:01.050
那这个传递咋传递呢

07:01.050 --> 07:02.850
其实我们直接在这个里面

07:02.850 --> 07:06.150
把forms给他传递给他过去

07:06.150 --> 07:06.950
是不是就可以了

07:06.950 --> 07:07.450
对吧

07:07.450 --> 07:09.650
那我们就来写一下啊

07:09.650 --> 07:11.250
这个里面怎么写

07:11.250 --> 07:12.150
我们直接的

07:12.150 --> 07:14.550
先把这个getform

07:14.550 --> 07:15.550
等于一个什么呢

07:15.550 --> 07:16.950
等于一个纸啊

07:16.950 --> 07:18.550
在这个里面getform

07:18.550 --> 07:18.950
ok

07:20.750 --> 07:20.950
好的

07:20.950 --> 07:23.450
那我就定一下这个getform

07:23.450 --> 07:24.950
在这个里面啊

07:25.750 --> 07:26.450
在这吧

07:26.450 --> 07:28.950
直接写一个像一个什么呢

07:28.950 --> 07:31.150
我们的这个验证码

07:31.150 --> 07:35.350
组将发送我们的这个form表单

07:35.350 --> 07:37.950
其实这个主要就是做这件事啊

07:37.950 --> 07:40.150
那我直接在这个getform里面

07:40.150 --> 07:41.850
因为他这个有参数嘛

07:41.850 --> 07:42.350
对吧

07:42.350 --> 07:42.950
参数呢

07:42.950 --> 07:45.050
而且是一个callback回到函数

07:45.050 --> 07:47.050
那我这里面就可以判断一下

07:47.050 --> 07:48.550
如果说callback

07:48.550 --> 07:50.350
callback有值对不对

07:50.350 --> 07:51.650
那也就是说cb

07:51.650 --> 07:52.350
并且呢

07:52.350 --> 07:53.750
我在执行

07:53.750 --> 07:54.650
执行的时候

07:54.650 --> 07:58.150
就把这个dollarrefs.form

07:58.150 --> 07:59.550
给他发送过去啊

07:59.550 --> 08:02.050
这里面写一个this

08:02.050 --> 08:05.950
this.dollarrefs.form

08:05.950 --> 08:06.150
好的

08:06.150 --> 08:06.850
那这样呢

08:06.850 --> 08:08.550
我做一个折衷的接手啊

08:08.550 --> 08:09.650
那我直接的

08:09.650 --> 08:10.550
他一调用

08:10.550 --> 08:11.550
那此时这里面

08:11.550 --> 08:13.850
是不是就应该有一个form对吧

08:13.850 --> 08:15.150
我们可以来看一下

08:15.150 --> 08:17.150
打印一下这个form

08:17.150 --> 08:17.550
然后呢

08:17.550 --> 08:19.950
我给他做一个return处理啊

08:19.950 --> 08:20.650
我们来看一下

08:20.650 --> 08:22.350
这样是不是能正确的获取到

08:23.950 --> 08:24.350
ok

08:24.350 --> 08:25.650
这里面有一个爆错啊

08:25.650 --> 08:28.750
爆错是因为我们没写这个

08:28.750 --> 08:29.650
逗号啊

08:29.650 --> 08:31.750
回到我们的这个loginville里面

08:31.750 --> 08:33.050
87行

08:33.050 --> 08:34.850
在这个里面订一个逗号

08:34.850 --> 08:35.750
好的

08:35.750 --> 08:36.250
回来之后

08:36.250 --> 08:38.050
我们先试这个h5团啊

08:40.650 --> 08:41.050
ok

08:41.050 --> 08:41.850
2511

08:41.850 --> 08:43.350
这个是正确的手机号码

08:43.350 --> 08:44.350
我一点击

08:44.350 --> 08:45.850
你会发现是不是也获取到了

08:45.850 --> 08:46.450
对不对

08:46.450 --> 08:46.850
然后呢

08:46.850 --> 08:48.450
我把底鞋打开啊

08:48.450 --> 08:50.950
咱们看一下是否可以正确的

08:50.950 --> 08:52.750
获取到我们的这个

08:52.750 --> 08:55.050
验证之后的这个缝啊

08:55.050 --> 08:55.350
然后呢

08:55.350 --> 08:56.150
把这个

08:56.150 --> 08:57.650
这次就干掉了啊

08:57.650 --> 09:00.350
直接的我们打印这个缝就ok了啊

09:01.650 --> 09:02.850
来重新试一下

09:02.850 --> 09:05.650
我们点击这个获取验证码

09:05.650 --> 09:07.750
你会发现这个是不是正常了

09:07.750 --> 09:08.650
假如是少一位呢

09:08.650 --> 09:11.050
这个时候他就走的一个验证规则啊

09:11.050 --> 09:12.450
这个是没问题的

09:12.450 --> 09:13.050
然后呢

09:13.050 --> 09:15.550
再回到我们的这个小程序里面

09:15.550 --> 09:16.850
我们看一下小程序

09:16.850 --> 09:20.650
经过我们刚才通过回掉函数获取的形式

09:20.650 --> 09:22.050
他这个是否可行的

09:22.050 --> 09:23.050
我们在这个里面

09:23.050 --> 09:25.150
输入电话号码来试一下

09:25.150 --> 09:28.950
135527521ok

09:28.950 --> 09:30.050
点击获取验证码

09:30.050 --> 09:32.250
你会发现这时候就正确了

09:32.250 --> 09:32.850
那然后呢

09:32.850 --> 09:35.250
我这一个里面少写一位

09:35.250 --> 09:36.250
少写一位之后

09:36.250 --> 09:38.050
再点击获取

09:38.050 --> 09:40.450
你会发现这个时候小程序还是获取了

09:40.450 --> 09:41.250
这是因为啥呢

09:41.250 --> 09:44.050
其实这个我们使用了自定义验验规则

09:44.050 --> 09:46.150
在H5端是没有任何问题的

09:46.150 --> 09:47.050
我们可以看一下

09:48.250 --> 09:49.450
回到这个H5里面

09:49.450 --> 09:52.150
我们到这个H5里面来试一下

09:52.150 --> 09:57.650
比如说在这个135527521

09:57.650 --> 09:58.350
少写一位

09:58.350 --> 10:00.250
我点击获取手机号码可是不正确

10:00.250 --> 10:00.750
对不对

10:00.750 --> 10:01.750
那这个是没问题的

10:01.750 --> 10:03.150
但是在小程序里面啊

10:03.150 --> 10:04.150
这是不行的

10:04.150 --> 10:05.850
因为小程序会过了

10:05.850 --> 10:07.950
uniforms里面的这个验证对象

10:08.350 --> 10:09.350
那这个怎么办呢

10:09.350 --> 10:11.950
我们可以啊使用一种其他的形式来做

10:11.950 --> 10:14.150
比如说这里面调整一下

10:14.150 --> 10:16.950
咱们之前是使用的rules

10:16.950 --> 10:17.450
对不对

10:17.450 --> 10:20.550
我这里面啊就不用这种rules的形式了

10:20.550 --> 10:21.450
那怎么来做呢

10:21.450 --> 10:24.450
我通过他的一个内置的API方法啊

10:24.450 --> 10:27.550
那我首先获取到他什么这个form

10:27.550 --> 10:30.650
并且呢调用他的一个set rulers方法

10:30.650 --> 10:31.450
在哪个里面调

10:31.450 --> 10:34.250
我们准备一个生命周期

10:34.250 --> 10:35.150
那这个里面呢

10:35.150 --> 10:37.350
一个unreader生命周期

10:38.650 --> 10:42.450
在unreader生命周期里面来进行这个调用

10:42.450 --> 10:45.550
也就是说页面首次渲染完成的时候

10:45.550 --> 10:46.450
我来进行调用

10:46.450 --> 10:47.850
那这个里面我使用

10:47.850 --> 10:51.350
這次点dollarrefs.form

10:51.350 --> 10:51.750
然后呢

10:51.750 --> 10:53.950
这个里面有一个set

10:53.950 --> 10:56.650
这个rules方法是这个

10:56.650 --> 10:58.550
那set rulers方法里面

10:58.550 --> 11:02.050
我们就将我们的这个规则给他传递进去

11:02.050 --> 11:03.150
我们的规则是什么呢

11:03.150 --> 11:04.950
这次点UlerRus

11:04.950 --> 11:05.450
那这样呢

11:05.450 --> 11:07.250
就能保证一个什么呢

11:07.250 --> 11:08.950
我们在这个页面渲染完成之后

11:08.950 --> 11:11.850
在手动的进行一个我们自己的

11:11.850 --> 11:13.250
渲染规则的一个添加

11:13.250 --> 11:14.750
那这样就能保证我们小程序

11:14.750 --> 11:16.150
也能正常获取了

11:16.150 --> 11:17.850
我们来看一下是否可行啊

11:17.850 --> 11:18.450
在这个里面

11:18.450 --> 11:19.650
我们先刷新一下

11:19.650 --> 11:20.250
到这个里面

11:20.250 --> 11:21.850
先保证h5可以啊

11:21.850 --> 11:25.550
手机号码135527525

11:25.550 --> 11:26.850
少写几倍啊

11:26.850 --> 11:27.950
手机号码格式不正确

11:27.950 --> 11:28.350
对不对

11:28.350 --> 11:28.950
没问题啊

11:28.950 --> 11:30.950
然后再回到这个小程序里面

11:30.950 --> 11:31.750
小程序里面呢

11:31.750 --> 11:33.950
我们从来重新来看一下

11:33.950 --> 11:34.650
随便说一个

11:34.650 --> 11:36.150
比如说123点击获取

11:36.150 --> 11:37.650
码手机号码格式不正确

11:37.650 --> 11:38.250
对吧

11:38.250 --> 11:41.250
13552752517

11:41.250 --> 11:41.750
ok

11:41.750 --> 11:42.750
这个是正确的

11:42.750 --> 11:44.150
正确的我一点击获取

11:44.150 --> 11:44.650
此时呢

11:44.650 --> 11:45.450
就没有问题了

11:45.450 --> 11:45.850
对吧

11:45.850 --> 11:46.250
这个呢

11:46.250 --> 11:48.850
就是给他做了一个简单的调整啊

11:48.850 --> 11:49.250
ok

11:49.250 --> 11:51.250
再回到我们的这个代码部分

11:51.250 --> 11:52.250
小程序这个问题

11:52.250 --> 11:53.050
我们处理完了

11:53.050 --> 11:54.550
那接下来我们要做什么呢

11:54.550 --> 11:55.450
其实接下来

11:55.450 --> 11:56.650
其实我们现在

11:56.650 --> 11:58.650
是不是开始准备要发送了

11:58.650 --> 11:59.950
在发送之前

11:59.950 --> 12:02.450
也就是说回到我们的这个send code

12:02.550 --> 12:03.950
你在发送这个缝之前

12:03.950 --> 12:05.950
是不是你需要做一个什么

12:05.950 --> 12:07.350
我们定时器的模拟

12:07.350 --> 12:09.550
也就是说开启一个定时器

12:09.550 --> 12:10.050
对吧

12:10.050 --> 12:10.850
那这个时候呢

12:10.850 --> 12:12.050
我们就来模拟一下

12:12.050 --> 12:13.450
那这个怎么来做呢

12:13.450 --> 12:14.550
我这里面可以写一个

12:14.550 --> 12:18.550
这一次点一个time running

12:19.650 --> 12:20.350
ok

12:20.350 --> 12:22.250
定义这么一个方法

12:22.250 --> 12:23.050
那这个方法呢

12:23.050 --> 12:24.450
其实就是开启一个

12:24.450 --> 12:26.550
到底实的这样一个效果啊

12:26.550 --> 12:27.250
我在这个里面

12:27.250 --> 12:29.350
来写一下time running

12:29.350 --> 12:29.950
然后呢

12:29.950 --> 12:31.350
我这里面做一个什么事

12:31.350 --> 12:32.950
我这里面就可以啊

12:32.950 --> 12:33.450
因为呢

12:33.450 --> 12:34.250
我们这个里面啊

12:34.250 --> 12:35.750
可能还会设计到一个什么

12:35.750 --> 12:37.250
定时器的清除

12:37.250 --> 12:38.350
所以说我在这个里面

12:38.350 --> 12:39.550
定一个什么

12:39.550 --> 12:40.950
time ID

12:40.950 --> 12:41.650
time ID呢

12:41.650 --> 12:44.050
专门接收我们当前的

12:44.050 --> 12:45.850
这个定时器的一个指针

12:45.850 --> 12:46.750
出出话的时候

12:46.750 --> 12:48.450
给他一个nook

12:49.850 --> 12:50.550
在这个里面

12:50.550 --> 12:51.650
我给他付一个值

12:51.650 --> 12:52.350
付一个值呢

12:52.350 --> 12:55.450
值就是我们定以好的一个定时器

12:55.450 --> 12:58.450
set interview

12:58.450 --> 12:59.350
在这个里面

12:59.350 --> 13:00.250
那这个函数里面

13:00.250 --> 13:01.450
我们来就来做事

13:01.450 --> 13:02.750
每一秒钟执行一次

13:02.750 --> 13:03.950
我们要做一个什么事呢

13:03.950 --> 13:05.150
我们搞一个值

13:05.150 --> 13:05.550
然后呢

13:05.550 --> 13:06.150
这个值呢

13:06.150 --> 13:08.150
每一秒钟做一个减减操作

13:08.150 --> 13:10.050
那我这里面可以定一个什么呢

13:10.050 --> 13:10.750
time

13:10.750 --> 13:11.250
time呢

13:11.250 --> 13:13.150
比如说我这里面给一个60

13:13.150 --> 13:13.750
之后呢

13:13.750 --> 13:15.850
让这个time减减啊

13:15.850 --> 13:16.850
比如说在这个里面

13:16.850 --> 13:18.550
这一次点time

13:18.550 --> 13:20.450
减减操作就可以了

13:20.450 --> 13:20.850
然后呢

13:20.850 --> 13:22.150
我们现在得确定一下

13:22.150 --> 13:22.650
就是说

13:22.650 --> 13:24.150
上面这个获取验证码

13:24.150 --> 13:25.750
他并不一定完全一直是

13:25.750 --> 13:26.650
显示获取验证码

13:26.650 --> 13:27.150
对不对

13:27.150 --> 13:28.250
当我定时器开启之后

13:28.250 --> 13:29.350
这个就改变了

13:29.450 --> 13:31.350
那我们是不是得有一个标识啊

13:31.350 --> 13:31.750
对吧

13:31.750 --> 13:32.250
所以说呢

13:32.250 --> 13:35.550
那我这里面还可以再做一个标识

13:35.550 --> 13:37.450
这里面就是run time

13:37.450 --> 13:37.950
run time呢

13:37.950 --> 13:38.750
出手话的时候

13:38.750 --> 13:40.150
我给他一个false

13:40.150 --> 13:41.750
什么时候让他变为true

13:41.750 --> 13:43.950
目前来说获取到这个分之后

13:43.950 --> 13:45.050
那我这时候是不是

13:45.050 --> 13:46.650
就可以给他做一个改变了

13:46.650 --> 13:47.950
也就是说这一次点

13:47.950 --> 13:50.450
run time等于一个true

13:50.450 --> 13:50.950
这时候呢

13:50.950 --> 13:52.750
给他做一个改变啊

13:52.750 --> 13:54.250
这个我们复职

13:54.250 --> 13:55.650
那这个过程就简单了

13:55.650 --> 13:56.150
也就是说

13:56.150 --> 13:57.350
这个获取验证码的时候

13:57.350 --> 13:58.550
我们动态的

13:58.550 --> 13:59.950
给他来做一个调整

13:59.950 --> 14:00.550
判断一下

14:00.550 --> 14:01.750
run time成立嘛

14:01.750 --> 14:03.550
如果说run time成立的话

14:03.550 --> 14:05.350
那我这里面刀了

14:05.350 --> 14:05.750
tm

14:05.750 --> 14:06.350
然后呢

14:06.350 --> 14:07.950
后面跟一个秒

14:07.950 --> 14:09.750
后重新获取

14:11.150 --> 14:11.550
获取

14:11.550 --> 14:11.950
ok

14:11.950 --> 14:13.050
这样是不是就可以了

14:13.050 --> 14:13.550
对吧

14:13.550 --> 14:14.050
然后呢

14:14.050 --> 14:15.050
这个完成之后呢

14:15.050 --> 14:15.650
后面呢

14:15.650 --> 14:16.550
如果说

14:16.550 --> 14:17.750
我们这个成立的话

14:17.750 --> 14:18.950
那我就这样否则

14:18.950 --> 14:20.950
那我就使用这个获取验证码

14:20.950 --> 14:22.350
这样是不是就可以了

14:22.350 --> 14:23.350
我们来试一下啊

14:23.350 --> 14:23.750
好的

14:23.750 --> 14:25.450
来看一下我们这个行不行啊

14:25.450 --> 14:26.550
比如说我们这个

14:26.550 --> 14:28.550
13552g

14:28.550 --> 14:29.350
5217

14:29.350 --> 14:29.650
ok

14:31.550 --> 14:31.850
好的

14:31.850 --> 14:33.150
那这个可以了之后

14:33.150 --> 14:34.550
那我现在要做一个啥事

14:34.550 --> 14:35.150
这个里面

14:35.150 --> 14:36.350
就涉及到一个定时期的

14:36.350 --> 14:37.750
一个清除操作

14:37.750 --> 14:39.350
怎么来清除操作呢

14:39.350 --> 14:40.850
这个里面我们看一下

14:40.850 --> 14:41.850
这个tm

14:41.850 --> 14:43.350
现在我们给的时间比较长

14:43.350 --> 14:46.450
那假如说我现在给一个三秒钟啊

14:46.450 --> 14:47.350
三秒钟的话

14:47.350 --> 14:49.250
我在这个里面让他减减操作

14:49.250 --> 14:49.950
然后呢

14:49.950 --> 14:52.350
咱们来看一下他的效果

14:52.350 --> 14:53.750
当我这个里面一点击

14:53.750 --> 14:54.350
3

14:54.350 --> 14:55.150
2

14:55.150 --> 14:55.750
1

14:55.750 --> 14:56.350
0

14:56.350 --> 14:56.950
对不对

14:56.950 --> 14:57.850
那此时0之后

14:57.850 --> 14:59.450
他就是-1秒-2秒的

14:59.450 --> 15:00.450
这个显然不对

15:00.450 --> 15:00.950
对吧

15:00.950 --> 15:02.950
所以说我们还得把这个处理一下

15:02.950 --> 15:04.550
也就是说在这个定时期里面

15:04.550 --> 15:05.650
我们要判断一下

15:05.650 --> 15:06.750
判断一下什么

15:06.750 --> 15:07.150
efo

15:07.150 --> 15:08.550
这一次点tm

15:08.550 --> 15:10.950
假如说他要是等于等于1了

15:10.950 --> 15:13.050
也就是说现在开始要停止了

15:13.050 --> 15:13.750
对不对

15:13.750 --> 15:14.950
那停止咋办呢

15:14.950 --> 15:15.750
我在这个里面

15:15.750 --> 15:17.750
就要清除一下

15:17.750 --> 15:19.550
clear interview

15:21.150 --> 15:22.550
这一次点一个什么

15:22.550 --> 15:24.950
我们把这个tm id给他干掉啊

15:24.950 --> 15:26.350
也就是说给他清除掉

15:26.350 --> 15:27.250
清除掉之后

15:27.250 --> 15:29.350
我让他这一次点tm id

15:29.350 --> 15:31.150
重新的等于一个什么呢

15:31.150 --> 15:31.550
no

15:31.550 --> 15:32.550
我防止他乱

15:32.550 --> 15:33.250
对不对

15:33.250 --> 15:33.750
之后呢

15:33.750 --> 15:35.650
我这个里面处理完成之后

15:35.650 --> 15:36.350
然后呢

15:36.350 --> 15:37.550
我再把这个

15:37.550 --> 15:38.750
这一次点run time

15:38.750 --> 15:39.750
给他调整一下

15:39.750 --> 15:41.150
这一次点run time

15:41.150 --> 15:43.050
让他等于一个false

15:43.050 --> 15:43.750
重新的

15:43.750 --> 15:46.250
对这个60秒做一个处理啊

15:46.250 --> 15:46.750
也就是说

15:46.750 --> 15:47.650
这一次点tm

15:47.650 --> 15:49.150
让他继续等于一个什么

15:49.150 --> 15:49.850
三秒钟

15:49.850 --> 15:50.350
那这样呢

15:50.350 --> 15:52.350
是不是可以进行一个循环操作了

15:52.350 --> 15:52.850
对吧

15:52.850 --> 15:54.250
我们来试一下啊

15:54.250 --> 15:57.650
点击获取验证码321

15:57.650 --> 15:58.450
ok

15:58.450 --> 15:59.450
又是获取验证码

15:59.450 --> 16:01.450
我们再点击210

16:01.450 --> 16:02.550
显然这个里面

16:02.550 --> 16:04.250
每一次都少一个是不是

16:04.250 --> 16:04.650
然后呢

16:04.650 --> 16:05.350
这个是因为啥

16:05.350 --> 16:07.150
是因为我们这个定时器啊

16:07.150 --> 16:08.350
当你清除完成之后

16:08.350 --> 16:09.350
你这个这一次点tm

16:09.350 --> 16:10.550
是不是又执行了一次

16:10.550 --> 16:11.650
所以说我在这里面

16:11.650 --> 16:13.250
给他加了一个return

16:13.250 --> 16:14.150
让他停止之后

16:14.150 --> 16:15.450
就不再执行了

16:15.450 --> 16:16.050
咱们来看一下

16:16.050 --> 16:16.850
现在行不行

16:18.250 --> 16:18.650
ok

16:18.650 --> 16:20.750
当我再次3210

16:20.750 --> 16:21.850
这样是不是就可以了

16:21.850 --> 16:22.450
对吧

16:22.450 --> 16:23.550
然后这个可理呢

16:23.550 --> 16:24.650
其实也有问题啊

16:24.650 --> 16:26.150
我们再暴露一个问题

16:26.150 --> 16:26.750
啥问题呢

16:26.750 --> 16:28.750
就是我们再回到这个三秒

16:28.750 --> 16:30.250
给他调成60

16:30.250 --> 16:30.750
之后呢

16:30.750 --> 16:32.150
我们这个这次点tm

16:32.150 --> 16:33.450
也变成60

16:33.450 --> 16:34.950
你看一下这个问题

16:34.950 --> 16:36.350
比如说现在没有点击状态

16:36.350 --> 16:37.950
当我点击获取验证码之后

16:37.950 --> 16:38.750
你会发现

16:38.750 --> 16:40.550
他是正常显示的对不对

16:40.550 --> 16:42.250
如果说我快速点击

16:42.250 --> 16:43.150
多次点击之后

16:43.150 --> 16:43.950
你会发现

16:43.950 --> 16:47.250
有多个定时器做了一个什么重叠

16:47.250 --> 16:48.650
那这个事就尴尬了

16:48.650 --> 16:50.650
那怎么来解决这个问题呢

16:50.650 --> 16:52.350
其实这个也挺好解决的

16:52.350 --> 16:53.350
就是啥意思呢

16:53.350 --> 16:55.950
如果说你现在已经开启了一个定时器

16:55.950 --> 16:58.850
那我现在就不准许你再进行一个定时器开启了

16:58.850 --> 17:00.350
就是这样的一个过程

17:00.350 --> 17:01.150
是啥意思呢

17:01.150 --> 17:03.250
其实我们在这个发送验证码的时候

17:03.250 --> 17:06.050
我们就可以来处理这个事情对不对

17:06.050 --> 17:07.850
这个怎么来处理这个事情

17:07.850 --> 17:08.550
或者说呢

17:08.550 --> 17:10.350
我们如果说再提前一点

17:10.350 --> 17:12.850
就是你根本就表达都不用获取了

17:12.850 --> 17:13.950
那我们就在这个里面

17:13.950 --> 17:16.150
如果说这次点一个什么

17:16.150 --> 17:17.550
我们有标识对不对

17:17.550 --> 17:20.150
那这个标识是这次点软tm

17:20.150 --> 17:22.050
如果说这次软tm有值

17:22.150 --> 17:24.750
那就说明现在已经开始倒计时技术了

17:24.750 --> 17:28.250
所以说你就根本就没有必要再向后端发送请求

17:28.250 --> 17:30.550
或者是你获取表达这样一个操作了

17:30.550 --> 17:31.050
对吧

17:31.050 --> 17:32.550
那我就给他干掉

17:32.550 --> 17:34.650
然后咱们再回来试一下看行不行

17:34.650 --> 17:38.550
我这里面13552517ok

17:38.550 --> 17:39.550
点击获取验证码

17:39.550 --> 17:42.050
你会发现软tm脑底翻的

17:42.050 --> 17:44.250
这个是这次点

17:44.250 --> 17:45.750
这里面有个写错了

17:47.450 --> 17:47.650
好的

17:47.650 --> 17:48.750
从今天回到之后

17:48.750 --> 17:51.350
我们清风一下控制台点击获取验证码

17:51.350 --> 17:53.350
此时你会发现当你多次

17:53.350 --> 17:55.350
我在这个里面多次点击的时候

17:55.350 --> 17:57.250
那这时候他就没有意义了

17:57.250 --> 17:57.750
对不对

17:57.750 --> 17:59.950
这个就是我们处理的第一个问题

17:59.950 --> 18:01.150
还有第二个问题

18:01.150 --> 18:02.050
第二个问题是什么

18:02.050 --> 18:03.850
比如说我现在这个定时器开启

18:03.850 --> 18:04.450
对吧

18:04.450 --> 18:06.050
那我这里面打印一个值

18:07.650 --> 18:08.550
打印一个什么

18:08.550 --> 18:12.350
tm is running

18:13.750 --> 18:14.250
ok

18:14.250 --> 18:15.450
那就打印这个值

18:15.450 --> 18:16.950
我们看他打印多少次

18:16.950 --> 18:19.150
然后咱们现代开启

18:19.150 --> 18:20.150
tm is running

18:20.150 --> 18:21.050
是不是正在开启

18:21.050 --> 18:21.550
对吧

18:21.550 --> 18:22.150
但是呢

18:22.150 --> 18:25.150
我现在已经回到这个其他的界面了

18:25.150 --> 18:26.850
那你会发现这个定时器

18:26.850 --> 18:27.650
其实是什么

18:27.650 --> 18:28.550
没有被清除

18:28.550 --> 18:29.050
对不对

18:29.050 --> 18:30.350
也就是说他这个里面

18:30.350 --> 18:31.550
是有一个副作用的

18:31.550 --> 18:33.550
假如我再次点击获取验证码

18:33.550 --> 18:33.950
这里面

18:36.050 --> 18:36.450
ok

18:36.450 --> 18:37.550
那我再次点击的时候

18:37.550 --> 18:38.450
你会发现这里面

18:38.450 --> 18:40.250
可能还会有一个什么重点

18:40.250 --> 18:41.150
是不是特别快了

18:41.150 --> 18:41.650
对不对

18:41.650 --> 18:42.250
所以说

18:42.250 --> 18:44.350
当你离开这个界面的时候

18:44.350 --> 18:47.150
你要把这个定时器给做一个清除

18:47.150 --> 18:48.950
因为这里面会涉及到一个什么

18:48.950 --> 18:50.250
组件的异不任务

18:50.250 --> 18:50.750
对吧

18:50.750 --> 18:52.050
那我们怎么清除呢

18:52.050 --> 18:53.050
其实这个

18:53.050 --> 18:54.550
我们在vio里面都学过

18:54.550 --> 18:54.950
对吧

18:54.950 --> 18:56.250
组件销毁之前

18:56.250 --> 18:57.750
before this story

18:57.750 --> 18:59.250
before this story里面

18:59.250 --> 19:00.650
我们来做一个什么事呢

19:00.650 --> 19:01.050
首先

19:01.050 --> 19:03.550
如果说你要是已经准备离开了

19:03.550 --> 19:07.150
那我就是把这次点tm id

19:07.150 --> 19:08.150
给他干掉

19:08.150 --> 19:08.450
对不对

19:08.450 --> 19:09.650
clear interval

19:09.650 --> 19:10.250
并且呢

19:10.250 --> 19:12.650
我这个这次点tm id

19:12.650 --> 19:14.150
我让他等于一个什么呢

19:14.150 --> 19:14.550
no

19:14.550 --> 19:14.950
也就是说

19:14.950 --> 19:16.750
重新给他做一个复职

19:16.750 --> 19:17.250
之后呢

19:17.250 --> 19:18.050
我们这个里面

19:19.050 --> 19:20.050
再往下

19:20.050 --> 19:22.050
这次点run time

19:22.050 --> 19:23.850
都是给他来做个处理吧

19:23.850 --> 19:25.050
这次点run time

19:25.050 --> 19:26.450
等于一个false

19:26.450 --> 19:27.050
并且呢

19:27.050 --> 19:28.450
我让这个这次点time

19:28.450 --> 19:30.050
也做一个回归啊

19:30.050 --> 19:32.250
这次点time等于60

19:32.250 --> 19:32.650
ok

19:32.650 --> 19:33.250
那这样呢

19:33.250 --> 19:33.850
就能保证啊

19:33.850 --> 19:35.650
如果说我们离开这个

19:35.650 --> 19:37.050
当前的页面之后

19:37.050 --> 19:38.850
那我们的副作用的这个

19:38.850 --> 19:39.550
异不定时器

19:39.550 --> 19:40.050
那这样呢

19:40.050 --> 19:41.850
就能保证一个销毁操作了

19:41.850 --> 19:44.650
我们来看一下是否可行啊

19:44.650 --> 19:45.650
点击获取验证码

19:45.650 --> 19:46.650
这时候呢

19:46.850 --> 19:48.450
他应该是time id软件

19:48.450 --> 19:50.350
正确的这个开启

19:50.350 --> 19:51.250
当我推出之后

19:51.250 --> 19:52.650
你会发现在4这块

19:52.650 --> 19:53.450
已经停止了

19:53.450 --> 19:53.950
对吧

19:53.950 --> 19:54.350
然后呢

19:54.350 --> 19:56.150
我再次进入这个里面啊

19:57.950 --> 19:59.250
由于我们离开的时候

19:59.250 --> 20:00.950
已经把所有的这个内容都做了

20:00.950 --> 20:01.650
个处理

20:01.650 --> 20:02.250
这时候呢

20:02.250 --> 20:04.850
他就不会再有任何问题了啊

20:04.850 --> 20:05.250
ok

20:05.250 --> 20:05.850
那这个呢

20:05.850 --> 20:08.650
就是我们定时器的一个优化操作

20:08.650 --> 20:10.150
那定时器处理完了之后

20:10.150 --> 20:10.850
那现在呢

20:10.850 --> 20:13.350
就开始准备我们正式的一个

20:13.350 --> 20:14.250
数据发送了

20:14.250 --> 20:14.750
也就是说

20:14.750 --> 20:17.550
我们开始向后端进行一个

20:17.550 --> 20:18.750
手机号码的发送

20:18.750 --> 20:20.550
那由这个云寒数来处理我们

20:20.550 --> 20:21.350
这个手机号码

20:21.350 --> 20:22.550
给我们返回

20:22.550 --> 20:23.050
验证码

20:23.050 --> 20:23.450
然后呢

20:23.450 --> 20:24.650
返回验证码之后

20:24.650 --> 20:25.750
再给我们进行

20:25.750 --> 20:27.850
向手机发送的这样一个过程

20:27.850 --> 20:28.650
怎么来实现

20:28.650 --> 20:30.550
我们在这个里面啊

20:30.550 --> 20:32.150
找到这次的run time

20:32.150 --> 20:33.150
我这是第一步

20:33.150 --> 20:34.950
我们进行了这个

20:35.550 --> 20:37.550
定时器的一个创建

20:37.550 --> 20:37.850
对吧

20:37.850 --> 20:38.850
这里面给大家写一下

20:38.850 --> 20:40.950
定时器的一个创建

20:40.950 --> 20:43.350
当你定时器创建完成之后

20:43.350 --> 20:44.150
我在这个里面

20:44.150 --> 20:45.350
开始进行什么

20:45.350 --> 20:48.550
发送数据请求云寒数啊

20:48.550 --> 20:52.850
发送数据请求云寒数

20:52.850 --> 20:53.450
ok

20:53.450 --> 20:54.750
那这个里面怎么来做呢

20:54.750 --> 20:56.450
我这里面肯定得接一个什么

20:56.450 --> 20:57.750
接一个返回值对不对

20:57.750 --> 20:58.650
那这个返回值

20:58.650 --> 20:59.550
我接一个

20:59.550 --> 21:01.250
先接一个is

21:01.250 --> 21:03.650
等于我们的这个avate

21:03.650 --> 21:04.850
avate这个里面

21:04.850 --> 21:06.050
就有這次点

21:06.050 --> 21:07.750
dollarhttp

21:09.050 --> 21:09.450
ok

21:09.450 --> 21:10.750
我们一会儿定一个什么呢

21:10.750 --> 21:12.550
getcode的方法

21:12.550 --> 21:13.850
这个getcode的方法里面

21:13.950 --> 21:14.950
我们肯定要把这个

21:14.950 --> 21:16.250
电话号码的给它传过去

21:16.250 --> 21:16.750
对吧

21:16.750 --> 21:18.250
那这里面就定一个缝

21:18.250 --> 21:19.650
因为这个缝我们已经拿到了

21:19.650 --> 21:21.650
所以说直接可以进行使用

21:21.650 --> 21:22.750
好的

21:22.750 --> 21:24.250
找到这个getcode之后

21:24.250 --> 21:25.850
在我们的这个云寒数里面

21:25.850 --> 21:28.350
我们就新建一个getcode的

21:28.350 --> 21:28.750
然后呢

21:28.750 --> 21:30.750
或者说我们从这个阿迦克斯里面

21:30.750 --> 21:32.050
我们先搞一下啊

21:32.050 --> 21:35.450
因为我们的这个User Interface里面

21:35.450 --> 21:36.850
我们再来定一个

21:36.850 --> 21:37.850
这叫什么呢

21:37.850 --> 21:39.650
发送验证码啊

21:42.150 --> 21:42.650
好的

21:42.650 --> 21:43.750
在这里面写一下

21:43.750 --> 21:46.550
expotconst

21:46.550 --> 21:49.350
我们的getcode等于一个data

21:49.350 --> 21:49.950
然后呢

21:49.950 --> 21:51.650
是阿迦克斯

21:51.650 --> 21:53.450
这个里面是内

21:53.450 --> 21:54.750
内幕和我们的这个

21:54.750 --> 21:56.850
刚才的这个名字是一样的

21:56.850 --> 21:57.450
之后呢

21:57.450 --> 21:58.750
写一个data

21:58.750 --> 21:59.750
这个定型完成之后

21:59.750 --> 22:02.350
那现在开始真正的创建云寒数了

22:02.350 --> 22:03.850
创建云寒数的时候

22:03.850 --> 22:05.050
这个叫云寒数叫什么

22:05.050 --> 22:06.850
叫getdata

22:08.050 --> 22:08.550
步骤呢

22:08.550 --> 22:09.550
和我们每一个

22:09.550 --> 22:11.550
其实都是差不多啊

22:11.550 --> 22:13.150
这个叫getcode啊

22:13.150 --> 22:13.850
好的

22:13.850 --> 22:14.850
定义完成之后

22:14.850 --> 22:15.150
ok

22:15.150 --> 22:16.850
在这个里面就要做事了

22:16.850 --> 22:17.250
做事

22:17.250 --> 22:18.050
首先第一步

22:18.050 --> 22:19.350
我们得获取什么呢

22:19.350 --> 22:20.950
一个我们啊

22:20.950 --> 22:22.850
传递过来的这个

22:22.850 --> 22:23.450
电话号码

22:23.450 --> 22:24.050
对不对

22:24.050 --> 22:24.550
也就是说

22:24.550 --> 22:25.450
把这个电话号码

22:25.450 --> 22:27.750
得先来进行一个接收

22:27.750 --> 22:28.650
那这个接收

22:28.650 --> 22:30.850
是我们的这个const

22:30.850 --> 22:34.650
等于我们的这个event里面获取啊

22:34.650 --> 22:35.350
获取之后

22:35.350 --> 22:35.950
那这里面

22:35.950 --> 22:36.550
一会呢

22:36.550 --> 22:38.450
我们可能还要向前端

22:38.450 --> 22:40.450
或者你的手机发送一个

22:40.450 --> 22:41.550
六位的随机数

22:41.550 --> 22:42.050
所以说

22:42.050 --> 22:46.050
这里面要创建一个随机数

22:46.050 --> 22:48.850
作为我们的这个验证码啊

22:48.850 --> 22:50.150
随机数

22:50.150 --> 22:51.250
ok

22:51.250 --> 22:51.950
怎么定义呢

22:51.950 --> 22:56.050
我这里面const

22:56.050 --> 22:59.550
这里面定一个current number

22:59.550 --> 23:02.150
等于我们使用这个数学对象

23:02.150 --> 23:04.850
max.random的形式

23:04.850 --> 23:05.250
然后呢

23:05.250 --> 23:07.050
给它做一个结取啊

23:07.050 --> 23:08.850
del toString

23:08.850 --> 23:09.750
toString方法

23:09.750 --> 23:11.050
然后结取几位呢

23:11.250 --> 23:13.350
sab str

23:13.350 --> 23:14.750
我们结取六个就可以了

23:14.750 --> 23:15.950
从第二位开始

23:15.950 --> 23:16.950
然后结取六个

23:16.950 --> 23:17.350
这样呢

23:17.350 --> 23:19.650
我就能得到一个定义好的

23:19.650 --> 23:20.650
这样一个随机数

23:21.950 --> 23:23.350
定义好随机数之后

23:23.350 --> 23:24.150
那你想

23:24.150 --> 23:26.750
现在我们是不是要进行验证码发送呢

23:26.750 --> 23:28.350
验证码怎么来发送

23:28.350 --> 23:29.450
那在这个里面呢

23:29.450 --> 23:31.150
它就会涉及到一个问题

23:31.150 --> 23:31.850
怎么来发送呢

23:31.850 --> 23:33.550
其实这里面有两个文档啊

23:33.550 --> 23:34.050
首先呢

23:34.050 --> 23:36.750
你要定制我们unicload的

23:36.750 --> 23:39.250
开发中心里面的短信服务

23:39.250 --> 23:39.950
第二个呢

23:39.950 --> 23:42.450
你要根据我们短信的这个

23:42.450 --> 23:45.350
参考配置的一个模板来实现啊

23:45.350 --> 23:46.750
首先我们先来说这个

23:46.750 --> 23:48.650
短信的这个定制服务

23:48.650 --> 23:49.850
怎么来做吧

23:49.850 --> 23:50.850
这个里面

23:50.850 --> 23:51.450
那这个呢

23:51.450 --> 23:54.250
就是它的我们这个开发者中心啊

23:54.250 --> 23:55.350
如果说你没有的话

23:55.350 --> 23:58.050
你要注册一下这个开发者中心

23:58.050 --> 23:59.050
但注册完成之后

23:59.050 --> 24:00.850
这里面会有好多项

24:00.850 --> 24:03.550
首先是你曾经创建的unip

24:03.550 --> 24:06.050
所有的应用都在这个里面了

24:06.050 --> 24:07.150
那在这个里面之后

24:07.150 --> 24:08.050
咱们看哪啊

24:08.050 --> 24:09.650
其实咱也不用看这啊

24:09.650 --> 24:10.250
主要看啥呢

24:10.250 --> 24:12.350
咱们看这个短信骞码这一块

24:12.350 --> 24:13.650
短信骞码这一块

24:13.650 --> 24:15.250
你一次的往前看啊

24:15.250 --> 24:17.650
这里面有一个基础配置

24:17.650 --> 24:19.050
注意首先第一行

24:19.050 --> 24:20.250
你要关注一点

24:20.250 --> 24:21.850
这个是需要马内的

24:21.850 --> 24:23.550
也就是说需要掏钱的

24:23.550 --> 24:24.950
但是呢钱不多

24:24.950 --> 24:26.950
是多少钱一条啊

24:26.950 --> 24:28.450
三分六一条

24:28.450 --> 24:29.850
也就是说你一天啊

24:29.850 --> 24:30.950
搞一百条

24:30.950 --> 24:32.150
才三块六网钱啊

24:32.150 --> 24:33.150
很便宜的啊

24:33.150 --> 24:35.350
然后它这有一些限制规则

24:35.350 --> 24:36.850
比如说同一个手机号

24:36.850 --> 24:38.650
一天最多发送二十

24:38.650 --> 24:39.850
然后相同一个内容

24:39.850 --> 24:40.950
最多发送一条

24:40.950 --> 24:43.150
其实咱们不会涉及到相同内容

24:43.150 --> 24:43.850
因为啥呢

24:43.850 --> 24:45.950
我们这个里面是使用随机数的

24:45.950 --> 24:47.350
是来做的啊

24:47.350 --> 24:48.850
然后如果说你这里面钱

24:48.850 --> 24:49.650
你充值

24:49.650 --> 24:50.850
充值多少钱都行

24:50.850 --> 24:52.650
比如说你充值一块钱都ok啊

24:52.650 --> 24:54.050
充值一毛钱ok的

24:54.050 --> 24:56.050
只不过是这个调数有点少对吧

24:56.050 --> 24:56.750
充值一毛钱

24:56.750 --> 24:58.350
那我们可以搞三次嘛

24:58.350 --> 24:59.650
这个倒无所谓的啊

24:59.650 --> 25:01.650
其实这个对我们来说比较简单

25:01.650 --> 25:03.650
如果说你要这个注册完成之后

25:03.650 --> 25:04.250
开通之后呢

25:04.250 --> 25:06.450
这里面有一个smsk

25:07.450 --> 25:10.350
包括有一个sms security啊

25:10.350 --> 25:11.250
这两个值

25:11.250 --> 25:11.950
那这两个值呢

25:11.950 --> 25:13.850
一会我们会拿来使用的

25:13.850 --> 25:14.250
这个呢

25:14.250 --> 25:16.250
我们要知道在基础模板这一块

25:16.250 --> 25:18.050
首先你关注一下一条多少钱

25:18.050 --> 25:19.650
然后最主要的是什么

25:19.650 --> 25:21.150
就是这两个信息啊

25:21.150 --> 25:22.450
那这两个信息有了之后

25:22.450 --> 25:23.450
那咱们再来看一下

25:23.450 --> 25:25.450
这里面有一个签名配置

25:25.450 --> 25:27.150
这个呢是需要审核的

25:27.150 --> 25:28.450
一般的审核时间啊

25:28.450 --> 25:29.050
它快呢

25:29.050 --> 25:30.350
可能是两个小时

25:30.350 --> 25:30.950
慢一点呢

25:30.950 --> 25:32.150
可能是在一天

25:32.150 --> 25:33.750
一天会给你审核

25:33.750 --> 25:35.850
然后直接的这个审核的时候

25:35.850 --> 25:37.750
你要把你的这个业务

25:37.750 --> 25:38.650
要给他看

25:38.650 --> 25:40.050
也就是说必须得有一个

25:40.050 --> 25:40.850
线上的地址

25:40.850 --> 25:41.850
所以说这个呢

25:41.850 --> 25:42.850
对同学们来讲

25:42.850 --> 25:43.850
是有一些吃力的

25:43.850 --> 25:44.850
不过还好啊

25:44.850 --> 25:45.550
怎么办呢

25:45.550 --> 25:47.450
我们这个产品上线之后

25:47.450 --> 25:49.050
你可以把我们的这个

25:49.050 --> 25:51.350
来给他来进行一个查看

25:51.350 --> 25:52.150
那查看的时候

25:52.150 --> 25:53.150
比如说我在这个里面

25:53.150 --> 25:54.450
下载光岸地址

25:54.450 --> 25:55.750
你这里面写上

25:55.750 --> 25:57.850
比如说这是什么教学演示啊

25:57.850 --> 25:59.050
什么这些啊

25:59.050 --> 26:00.350
写一些描述信息

26:00.350 --> 26:01.450
然后你直接的

26:01.450 --> 26:03.250
就等待审核就ok了

26:03.250 --> 26:04.850
这个里面签名内容

26:04.850 --> 26:06.550
订好了就可以啊

26:06.550 --> 26:07.450
有这个之后

26:07.450 --> 26:08.350
那还有一个什么呢

26:08.350 --> 26:09.150
模板配置

26:09.150 --> 26:10.850
也就是说你这个

26:10.850 --> 26:12.350
我们发送的短信

26:12.350 --> 26:13.450
想在别人手机上

26:13.450 --> 26:14.750
呈现出什么内容

26:14.750 --> 26:15.250
这里面呢

26:15.250 --> 26:16.150
有两个变量

26:16.150 --> 26:16.550
第一个呢

26:16.550 --> 26:17.850
是我们这个扣的

26:17.850 --> 26:18.850
扣的映射的谁

26:18.850 --> 26:20.350
其实扣的映射的就是

26:20.350 --> 26:21.550
我们刚才看到的

26:21.550 --> 26:23.550
定义好的这个counter number

26:23.550 --> 26:24.050
那这个呢

26:24.050 --> 26:25.350
就作为我们的一个

26:25.350 --> 26:26.350
第一个变量

26:26.350 --> 26:26.850
第二个呢

26:26.850 --> 26:29.850
这里面还有一个x-pad minute

26:29.850 --> 26:31.950
也就是说几分钟内有效

26:31.950 --> 26:33.850
因为我们已经设置了

26:33.850 --> 26:35.050
前端设置了60秒

26:35.050 --> 26:35.550
对不对

26:35.550 --> 26:37.750
也就是说我们发送一次

26:37.750 --> 26:38.850
这个验证码呢

26:38.850 --> 26:40.650
我们保证在一分钟之内

26:40.650 --> 26:41.550
有效就ok了

26:41.550 --> 26:42.450
所以说这个呢

26:42.450 --> 26:43.750
一会我填变量的时候

26:43.750 --> 26:45.650
填一个一就ok了

26:45.650 --> 26:46.150
这个呢

26:46.150 --> 26:47.850
就是我们整个的

26:47.850 --> 26:49.650
这个两条最主要的配置啊

26:49.650 --> 26:50.850
如果说你把这两个配置

26:50.850 --> 26:51.850
都搞定之后

26:51.850 --> 26:52.950
那几乎其他的

26:52.950 --> 26:54.250
比如说安全配置

26:54.250 --> 26:54.850
充值记录

26:54.850 --> 26:56.050
这些你不用考虑了

26:56.050 --> 26:56.650
也不是说

26:56.650 --> 26:58.350
我们现在开发所必须的

26:58.350 --> 26:59.350
所以说你最主要的

26:59.350 --> 27:01.350
是搞明白这个签名配置

27:01.350 --> 27:02.750
以及这个模板配置

27:02.750 --> 27:04.950
然后这个签名配置申请的时候

27:04.950 --> 27:06.350
相对是比较复杂

27:06.350 --> 27:07.950
有可能你会被驳回

27:07.950 --> 27:08.650
但是呢

27:08.650 --> 27:09.850
我们这个驳回之后

27:09.850 --> 27:10.350
再怎么办

27:10.350 --> 27:11.450
再重新申请

27:11.450 --> 27:12.350
因为我也不是说

27:12.350 --> 27:14.550
一次就搞定的啊

27:14.550 --> 27:14.850
这个呢

27:14.850 --> 27:17.350
就是我们开发者中心申请短信模板

27:17.350 --> 27:18.750
这一块的内容

27:18.750 --> 27:20.750
最主要的就是这两个地方啊

27:20.750 --> 27:20.950
好的

27:20.950 --> 27:22.150
那说完这个之后

27:22.150 --> 27:24.450
那比如说我们这个申请通货了

27:24.450 --> 27:26.450
我们这个签名和这个模板

27:26.450 --> 27:27.950
都已经配置成功打扮的

27:27.950 --> 27:29.550
当你这个签名和模板

27:29.550 --> 27:31.150
都配置成功之后

27:31.150 --> 27:31.950
那这时候呢

27:31.950 --> 27:33.750
你在看这个第二个文档

27:33.750 --> 27:34.950
第二个文档是什么

27:34.950 --> 27:36.750
短信的一个参考配置

27:36.750 --> 27:38.650
我们可以点进去看一下

27:38.650 --> 27:41.150
这里面有短信发送2.8.1

27:41.150 --> 27:44.350
然后uniclon的内置的一个短信发送一篇

27:44.350 --> 27:45.950
给开发者提供什么方便

27:45.950 --> 27:48.550
他描述了一些他的这个好处

27:48.550 --> 27:49.750
确实很方便

27:49.750 --> 27:50.950
我跟同学们讲

27:50.950 --> 27:52.050
其实这个东西呢

27:52.050 --> 27:52.950
他比这个

27:52.950 --> 27:55.750
我们的那个腾讯员说和这个阿里

27:55.750 --> 27:56.350
sorry啊

27:56.350 --> 27:58.750
跟这个腾讯员和这个阿里员

27:58.750 --> 28:01.050
提供的这种短信服务

28:01.050 --> 28:02.150
要方便的多

28:02.150 --> 28:04.210
首先他这个审核没有那么严

28:04.210 --> 28:05.950
第二个是什么呢

28:05.950 --> 28:08.150
短信这个充值比较灵活

28:08.150 --> 28:10.150
假如说就像我们充值一帽钱

28:10.150 --> 28:11.250
他也是允许的

28:11.250 --> 28:11.750
但是呢

28:11.750 --> 28:14.350
我们这个阿里员和这个腾讯员

28:14.350 --> 28:16.450
如果说你要定制短信模板的时候

28:16.450 --> 28:18.350
那你可能就是走这种

28:18.350 --> 28:20.050
就是鲍月啊的产品

28:20.050 --> 28:21.650
或者是流量包的这种产品

28:21.650 --> 28:22.650
可能会很贵

28:22.650 --> 28:25.650
不适合我们这种练手的这个开发

28:25.650 --> 28:28.250
所以说我们尽量推荐使用这种

28:28.250 --> 28:31.250
云寒树的短信验证的一个服务

28:31.250 --> 28:31.650
这个呢

28:31.650 --> 28:33.050
就是他的一个调试力啊

28:33.050 --> 28:34.550
我们可以把它拿过来啊

28:34.550 --> 28:36.850
因为这个外面最外层是一个什么云寒树

28:36.850 --> 28:39.950
所以说只负责把它里面的粘贴过来

28:39.950 --> 28:41.250
就可以了

28:41.250 --> 28:44.650
好的粘贴这一部分到我们的代码当中

28:44.650 --> 28:46.950
那从这个里面就开始啊

28:46.950 --> 28:48.150
他这里面有返回值

28:48.150 --> 28:50.350
所以说有返回值大半的我这个就不需要了

28:51.650 --> 28:53.350
把后面的那个给干掉

28:53.350 --> 28:54.150
咱们来看一下

28:54.150 --> 28:56.350
依次的给做一下填充

28:56.350 --> 28:56.950
首先呢

28:56.950 --> 28:59.150
这个里面有一个APP ID

28:59.150 --> 29:00.150
我们这个是什么呢

29:00.150 --> 29:02.250
就是我们的这个工程ID啊

29:02.250 --> 29:04.350
工程ID在哪个里面看啊

29:04.350 --> 29:05.050
非常简单啊

29:05.050 --> 29:07.550
我们到这个Manifest的点son里面

29:07.550 --> 29:09.050
这里面是不是有一个

29:09.050 --> 29:11.450
你把它给复制过去就ok了

29:11.450 --> 29:14.950
也就是说第一个参数这个比较好搞定啊

29:14.950 --> 29:17.050
过来然后呢给它复制过去

29:17.050 --> 29:17.550
第二个呢

29:18.650 --> 29:20.050
看着是不是比较面熟啊

29:21.250 --> 29:22.950
因为我们刚才看文档的时候

29:22.950 --> 29:26.250
是不是在这块签名配置基础配置这一块啊

29:26.250 --> 29:27.250
点开基础配置

29:27.250 --> 29:29.450
这里面是不是有一个smok

29:29.450 --> 29:29.950
对吧

29:29.950 --> 29:30.950
把它给复制过去

29:30.950 --> 29:32.750
当然你复制你的就ok啊

29:32.750 --> 29:34.150
你要使我这个呢

29:34.150 --> 29:34.650
可能呢

29:34.650 --> 29:35.950
我这个里面不充值

29:35.950 --> 29:37.550
你也用不了啊

29:37.550 --> 29:37.850
好的

29:37.850 --> 29:38.750
这是第一个

29:38.750 --> 29:39.450
第二个呢

29:39.450 --> 29:40.750
我们再继续来啊

29:40.750 --> 29:42.550
这里面有一个semi-secret

29:43.550 --> 29:45.250
semi-secret

29:45.250 --> 29:48.350
把它也重新做一个粘贴

29:48.350 --> 29:48.650
好的

29:48.650 --> 29:49.650
加一个dou号

29:49.650 --> 29:50.150
之后呢

29:50.150 --> 29:51.250
这里面是有一个

29:51.250 --> 29:52.550
分分代表什么呢

29:52.550 --> 29:55.050
就是我们本次要发送的这个

29:55.050 --> 29:55.750
第二号码

29:55.750 --> 29:56.450
那第二号码

29:56.450 --> 29:58.150
其实我们这里面是不是就获取了

29:58.150 --> 30:00.850
所以说这里面就减写一下就ok了

30:00.850 --> 30:03.150
这里面第三个template id

30:03.150 --> 30:03.950
这个是什么

30:03.950 --> 30:05.850
短信模板的一个id啊

30:07.550 --> 30:10.050
短信模板的这个id从哪获取

30:10.050 --> 30:10.850
我们再回来

30:10.850 --> 30:12.850
从这个模板配置这一块

30:12.850 --> 30:14.450
这里面是不是有一个短信模板

30:14.450 --> 30:15.050
对吧

30:15.050 --> 30:17.650
那我直接在前面这个12333

30:17.650 --> 30:19.250
把它给做一个复制

30:19.250 --> 30:20.250
放在这个里面

30:21.050 --> 30:21.850
就可以了

30:21.850 --> 30:23.150
template id ok

30:23.150 --> 30:24.150
定义完成

30:24.150 --> 30:24.750
这些呢

30:24.750 --> 30:27.750
就是我们要发送的这个信息

30:27.750 --> 30:29.150
那刚才我们看到了

30:29.150 --> 30:30.550
我们这里面有一个什么

30:30.550 --> 30:31.650
有一个code对吧

30:31.650 --> 30:34.550
因为我们这个模板是第一个参数是code的

30:34.550 --> 30:34.850
然后呢

30:34.850 --> 30:36.850
第二个是minute

30:36.850 --> 30:38.550
所以说我们只需要两个就行

30:38.550 --> 30:41.150
至于其他的我们也不需要了

30:41.150 --> 30:41.950
是谁发送

30:41.950 --> 30:43.750
咱不能考虑这个问题是吧

30:43.750 --> 30:44.750
然后第二个呢

30:44.750 --> 30:46.550
这个里面这个action

30:46.550 --> 30:47.750
action咱也不用了

30:47.750 --> 30:50.050
我们只要两个就可以

30:50.050 --> 30:51.050
要两个之后

30:51.050 --> 30:52.350
那我们这个里面呢

30:52.350 --> 30:53.650
code的给他改一下

30:53.650 --> 30:54.850
code的应该是啥

30:54.850 --> 30:57.150
是不是我们这个current number对吧

30:57.150 --> 30:58.550
那我们就把这个定义好的

30:58.550 --> 31:00.450
这个current number放在这个里面

31:00.450 --> 31:01.450
因为我们是一分钟

31:01.450 --> 31:03.850
所以说这里面我就添一个一

31:03.850 --> 31:04.450
ok

31:04.450 --> 31:06.650
这个是如果说当你成功之后

31:06.650 --> 31:09.150
那这个代表着你就发送成功了

31:09.150 --> 31:10.050
发送成功怎么办

31:10.050 --> 31:12.250
我这时候就像前端返回纸了

31:12.250 --> 31:12.750
对吧

31:12.750 --> 31:13.850
那我这里面return

31:13.850 --> 31:14.850
return什么呢

31:14.850 --> 31:16.950
code的首先你成功的话

31:16.950 --> 31:18.650
肯定是零

31:18.650 --> 31:19.050
然后呢

31:19.050 --> 31:20.450
这里面有一个data

31:21.750 --> 31:23.250
给他返回一个data

31:23.250 --> 31:23.950
这个data呢

31:23.950 --> 31:25.450
因为你是短信

31:25.450 --> 31:26.850
比如说发送成功之后

31:26.850 --> 31:29.150
那这个里面由于我们做了一个拦截

31:29.150 --> 31:29.650
前端呢

31:29.650 --> 31:32.550
只能收集到一条信息

31:32.550 --> 31:33.150
那怎么办呢

31:33.150 --> 31:34.450
我这个data返回的时候

31:34.450 --> 31:35.750
是以对象返回

31:35.750 --> 31:36.550
这个对象返回

31:36.550 --> 31:38.350
我这里面给他一个描述信息

31:38.350 --> 31:41.650
因为我在这个sendcode的界面里面

31:41.650 --> 31:45.050
我想把这个用unit.sotose的给他打印出来

31:46.350 --> 31:48.450
所以说我这里面给他一个返回值

31:48.450 --> 31:49.350
返回值怎么做

31:49.350 --> 31:52.150
请在一个手机

31:52.150 --> 31:53.350
注意查收验证码

31:53.350 --> 31:53.750
对不对

31:53.750 --> 31:54.550
手机上

31:55.250 --> 31:57.050
注意查收

31:57.950 --> 31:59.350
验证码

31:59.350 --> 32:00.250
ok

32:00.250 --> 32:00.450
好了

32:00.450 --> 32:01.650
这个完成之后

32:01.650 --> 32:02.550
这是第一个

32:02.550 --> 32:03.350
第一个完成之后呢

32:03.350 --> 32:06.550
我再给他返回一个mobilecode的

32:06.550 --> 32:07.150
mobilecode的

32:07.150 --> 32:10.050
也就是说把我们定义好的这个count number

32:10.050 --> 32:11.150
给他返回去

32:11.150 --> 32:12.050
那这样的方面

32:12.050 --> 32:14.250
我们前端做验证处理

32:14.250 --> 32:14.550
ok

32:14.550 --> 32:16.250
那这两个都返回去之后

32:16.250 --> 32:18.350
这个其实就可以了

32:18.350 --> 32:19.450
如果说你失败了呢

32:19.450 --> 32:20.850
失败咱也不要这些内容

32:20.850 --> 32:21.350
对吧

32:21.350 --> 32:23.150
那失败我们怎么来做呢

32:23.150 --> 32:27.150
我们这个失败就给他一个code的

32:27.150 --> 32:28.950
这里面给他一个e

32:28.950 --> 32:29.250
好了

32:30.550 --> 32:32.550
然后这个msg

32:32.550 --> 32:34.350
我们给前端返回啊

32:34.350 --> 32:34.950
这个呢

32:34.950 --> 32:35.850
失败的时候

32:35.850 --> 32:38.150
我们就不要给他返回这些

32:38.150 --> 32:38.850
比如说钢台

32:38.850 --> 32:40.650
他给我们定义的这些信息了

32:40.650 --> 32:42.650
这些信息里面很有可能是什么呢

32:42.650 --> 32:45.350
你这个钱充值鱼额不足

32:45.350 --> 32:46.250
是不是都有可能

32:46.250 --> 32:46.750
对不对

32:46.750 --> 32:47.250
所以说呢

32:47.250 --> 32:49.650
咱们直接就给前端返回一个什么的

32:49.650 --> 32:51.550
短信验证码发送失败就可以了

32:51.550 --> 32:54.250
你不能告诉人家你这个后台没充没充钱

32:54.250 --> 32:55.050
对不对

32:55.050 --> 32:58.450
短信验证码发送失败就ok了

32:58.450 --> 32:59.750
这样就可以了

32:59.750 --> 32:59.950
好了

32:59.950 --> 33:00.750
定义完成之后

33:00.750 --> 33:01.250
这个呢

33:01.250 --> 33:02.350
其实也没啥内容啊

33:02.350 --> 33:05.150
我们直接的就给他做一个上传就可以了

33:05.150 --> 33:06.550
在这个getcode里面

33:06.550 --> 33:07.950
我们上传部署

33:09.950 --> 33:12.550
打开咱们看一下上传完成对不对

33:12.550 --> 33:13.250
上传完成

33:13.250 --> 33:16.350
其实这时候我们就可以测试发送了

33:16.450 --> 33:17.950
测试发送怎么来

33:17.950 --> 33:20.950
回到我们的这个sendcode里面

33:20.950 --> 33:21.750
到这个里面啊

33:21.750 --> 33:22.950
如果说你发送成功

33:22.950 --> 33:23.750
这时候

33:23.750 --> 33:25.750
我因为我们值的有两个值

33:25.750 --> 33:27.050
分别是哪两个值呢

33:27.050 --> 33:27.850
在这个里面

33:27.850 --> 33:29.550
我们一个是msg

33:29.550 --> 33:31.250
还有一个是mobilecode的

33:31.250 --> 33:32.650
所以说我在这里面

33:32.650 --> 33:34.850
就可以给他做一个什么解构了

33:34.850 --> 33:36.850
那我在这个里面就是mobile

33:38.450 --> 33:40.550
这里面定一下mobilecode的

33:40.550 --> 33:42.150
还有一个msg

33:42.150 --> 33:43.350
如果说你成功了之后呢

33:43.350 --> 33:44.150
这个里面

33:44.150 --> 33:45.950
我就开始进行一个渲染吧

33:45.950 --> 33:46.550
对不对

33:46.550 --> 33:47.050
首先呢

33:47.050 --> 33:47.750
咱们说了

33:47.750 --> 33:50.150
刚才我想为他做一个什么

33:50.150 --> 33:51.550
给这个里面啊

33:51.550 --> 33:52.850
想为这个里面

33:52.850 --> 33:53.950
如果说你成功了

33:53.950 --> 33:55.950
给这个前台展示一个内容

33:55.950 --> 33:57.950
那我这里面就是油腻点瘦

33:59.350 --> 34:00.150
tose的

34:00.150 --> 34:01.050
tose的里面

34:01.050 --> 34:02.750
首先是这个title

34:02.750 --> 34:03.250
title呢

34:03.250 --> 34:04.550
给这个msg

34:04.550 --> 34:05.350
给他传过去

34:05.350 --> 34:06.150
就ok了

34:06.150 --> 34:06.650
然后呢

34:06.650 --> 34:07.450
这个icon

34:07.450 --> 34:08.550
我也不想让他显示

34:08.550 --> 34:09.550
那就是no

34:09.550 --> 34:10.150
ok

34:10.150 --> 34:11.550
这个就定义完成了

34:11.550 --> 34:13.350
也就是说让他弹出一个框

34:13.350 --> 34:14.650
弹出一个框之后

34:14.650 --> 34:17.150
其实现在我们要这个return code的

34:17.150 --> 34:18.750
也就是说这个mobile code的

34:18.750 --> 34:19.350
有没有用

34:19.350 --> 34:20.750
其实我跟同学们说

34:20.750 --> 34:21.150
这个呢

34:21.150 --> 34:21.650
有用

34:21.650 --> 34:22.950
为啥说他有用呢

34:22.950 --> 34:23.750
我们那个验证

34:23.750 --> 34:26.050
其实可以回来看一下

34:26.050 --> 34:28.150
在这个当时做这个验证的时候

34:28.150 --> 34:29.850
data一脑底泛的

34:29.850 --> 34:31.150
看一下是哪里错了

34:31.150 --> 34:33.550
youter interface.js

34:33.550 --> 34:34.050
sorry

34:34.050 --> 34:35.950
我这里面少写了一个箭头

34:35.950 --> 34:36.850
ok

34:36.850 --> 34:37.650
回到我们这个里面

34:37.650 --> 34:39.250
我们继续说这个事啊

34:39.250 --> 34:41.050
其实我们这个手机登录的时候

34:41.050 --> 34:42.150
验证码啊

34:42.150 --> 34:44.250
在前端我们可以做一个验证的

34:44.250 --> 34:44.650
为啥呢

34:44.650 --> 34:46.450
因为现在只有非空验证

34:46.450 --> 34:47.850
我们自定验证规则呢

34:47.850 --> 34:48.650
可以这样判断

34:48.650 --> 34:50.050
比如说我输入的这个

34:50.050 --> 34:51.750
跟我们前端获取的

34:51.750 --> 34:53.950
因为我们这里面肯定一会返回

34:53.950 --> 34:54.850
如果说成功之后

34:54.850 --> 34:57.250
这里面有一个返回给我们的验证码

34:57.250 --> 34:58.650
那我们拿到这个验证码

34:58.650 --> 35:00.550
跟我们输入这个做一个比较

35:00.550 --> 35:01.950
如果说他俩匹配不上的话

35:01.950 --> 35:02.650
那怎么办

35:02.650 --> 35:04.050
那就说明这次

35:04.050 --> 35:05.450
我们的一个验证失败了

35:05.450 --> 35:05.950
对不对

35:05.950 --> 35:07.950
也就是说你输入的验证码有误

35:07.950 --> 35:08.650
那这时候呢

35:08.650 --> 35:10.150
我就不让你登录

35:10.150 --> 35:12.150
我的这个想法就是这样的

35:12.150 --> 35:12.650
所以说呢

35:12.650 --> 35:14.050
那怎么办呢

35:14.050 --> 35:15.550
我们接收到之后

35:15.550 --> 35:16.950
也就是说这个send code

35:16.950 --> 35:19.450
我们接收到这个mobile code之后

35:19.450 --> 35:20.250
在这个里面

35:20.250 --> 35:22.050
我们就给他传递过去

35:22.050 --> 35:23.150
给谁传递过去

35:23.150 --> 35:25.350
给我们的这个

35:25.350 --> 35:26.750
login view传过去

35:26.750 --> 35:28.750
也就是说这一次点

35:28.750 --> 35:30.350
dollar emat

35:30.350 --> 35:32.750
然后呢由login view做一些处理

35:32.750 --> 35:34.850
那这里面我传一个什么呢

35:34.850 --> 35:37.550
这里面set一个return code

35:37.550 --> 35:39.350
或者是set current code

35:40.550 --> 35:42.550
ok 定义好了这个之后

35:42.550 --> 35:44.850
我们就把这个mobile code

35:44.850 --> 35:47.450
给他进行一个传递就可以了

35:47.450 --> 35:48.750
那set current code呢

35:48.750 --> 35:52.250
我在这个login view里面做一个接收

35:52.250 --> 35:53.350
接收的时候

35:53.350 --> 35:56.550
咱们首先要找到这个send code

35:58.350 --> 35:59.550
这里对吧

35:59.550 --> 36:00.050
然后呢

36:00.050 --> 36:02.350
把他这个事件给定一下

36:02.350 --> 36:03.850
set current code

36:03.850 --> 36:04.650
那这个里面

36:04.650 --> 36:06.050
我想存一个值

36:06.050 --> 36:07.350
存一个值是啥值呢

36:07.350 --> 36:08.950
就是我们的这个返回值

36:08.950 --> 36:13.950
那我这里面定一个return code

36:13.950 --> 36:15.150
return code呢

36:15.150 --> 36:16.750
他出指化的时候其实也没有

36:16.750 --> 36:17.050
对吧

36:17.050 --> 36:18.150
那我给他一个闹

36:18.150 --> 36:19.250
什么时候给他复制呢

36:19.250 --> 36:20.350
当你传递过来的时候

36:20.350 --> 36:21.950
你这里面肯定有值的

36:21.950 --> 36:23.950
那我就把他这个return code

36:23.950 --> 36:25.950
等于我们的这个dollar

36:25.950 --> 36:27.550
传递过来的dollar event

36:27.550 --> 36:28.150
ok

36:28.150 --> 36:30.650
那这样是不是就准确的一个接收了

36:30.650 --> 36:31.550
对吧

36:31.550 --> 36:32.550
接收到值之后

36:32.550 --> 36:34.150
那我们再一会啊

36:34.150 --> 36:35.350
再进行这个判断

36:35.350 --> 36:36.950
我们先来测试一遍啊

36:36.950 --> 36:37.950
因为这是第一次

36:37.950 --> 36:38.650
对不对

36:38.650 --> 36:39.650
好的刷新一下

36:39.650 --> 36:40.450
稍微有点紧张

36:40.450 --> 36:41.350
是不是

36:41.350 --> 36:42.050
13

36:42.050 --> 36:44.450
我们用我自己的手机号来做一下测试吧

36:46.550 --> 36:47.250
ok

36:47.250 --> 36:48.950
135 5275 2517

36:48.950 --> 36:50.450
我点击获取验证码

36:50.450 --> 36:52.050
此时该的code

36:52.050 --> 36:54.950
请请在手机上查收验证码

36:54.950 --> 36:55.450
对不对

36:55.450 --> 36:57.050
这个验证码已经返回了

36:57.050 --> 36:58.050
验证码返回

36:58.050 --> 36:59.650
但是这个mobile code

36:59.650 --> 37:00.450
有点长啊

37:00.450 --> 37:01.950
这里面肯定不对

37:01.950 --> 37:02.850
那不对怎么办呢

37:02.850 --> 37:05.550
我们再回到这个云函数里面

37:05.550 --> 37:07.250
因为我们定义的是什么

37:07.250 --> 37:09.650
定义的是6位验证码

37:09.650 --> 37:11.250
它的里面怎么给我返回的

37:11.250 --> 37:12.250
是这样的

37:12.250 --> 37:14.550
max.sabstr

37:14.550 --> 37:14.950
sorry

37:14.950 --> 37:17.050
这个里面多了一个什么

37:17.050 --> 37:18.850
多了一组扩号

37:18.850 --> 37:20.750
应该是一组扩号就对了

37:20.750 --> 37:21.350
对吧

37:21.350 --> 37:21.550
好的

37:21.550 --> 37:22.950
那我再重新上传一次

37:22.950 --> 37:24.150
再来一遍啊

37:24.150 --> 37:25.650
这里面上传部署

37:25.650 --> 37:26.750
上传部署之后

37:26.750 --> 37:28.650
如果说它成功之后

37:28.650 --> 37:29.350
ok

37:29.350 --> 37:29.950
已经成功

37:29.950 --> 37:30.550
已经成功

37:30.550 --> 37:32.050
我再进行一次发送

37:32.050 --> 37:33.250
刷新一下

37:33.250 --> 37:34.950
这里面再写一下

37:34.950 --> 37:35.910
把手机号码

37:36.010 --> 37:37.910
输入一下

37:37.910 --> 37:38.610
ok

37:38.610 --> 37:39.610
输入完成之后

37:39.610 --> 37:41.110
这里面获取验证码

37:41.110 --> 37:42.110
获取验证码之后

37:42.110 --> 37:43.810
那我们再看一下这个返回值

37:43.810 --> 37:45.210
389022

37:45.210 --> 37:46.410
这个是不是对了

37:46.410 --> 37:47.110
对了之后

37:47.110 --> 37:47.610
其实呢

37:47.610 --> 37:50.210
我现在手机也收到了这个

37:50.210 --> 37:51.210
有这个unicload的

37:51.210 --> 37:53.410
给我们发送的这个验证码啊

37:53.410 --> 37:53.810
然后呢

37:53.810 --> 37:56.010
我们看一下这个前台这一块

37:56.010 --> 37:56.610
前台这一块

37:56.610 --> 37:57.310
我们看谁呢

37:57.310 --> 37:58.810
就看这个配置

37:58.810 --> 38:00.410
是youtubeinfologin

38:00.410 --> 38:02.510
因为我们定义了一个return code

38:02.510 --> 38:02.910
对不对

38:02.910 --> 38:03.810
在这个里面啊

38:03.810 --> 38:04.910
这个return code呢

38:04.910 --> 38:06.810
那我们就可以拿来做一个什么

38:06.810 --> 38:07.310
判断了

38:07.310 --> 38:07.810
对不对

38:07.810 --> 38:08.610
咋来判断呢

38:09.810 --> 38:11.310
回到我们的这个代码里

38:11.310 --> 38:14.110
找到common下面有一个user

38:14.110 --> 38:14.510
啊

38:14.510 --> 38:15.210
sorry

38:15.210 --> 38:16.510
应该是我们的这个

38:16.510 --> 38:17.710
common文件夹下面

38:17.710 --> 38:19.110
有一个user rule 米新

38:19.110 --> 38:19.810
对吧

38:19.810 --> 38:22.810
之前是使用了一个非空验证

38:22.810 --> 38:24.610
那除了非空验证之外

38:24.610 --> 38:25.110
其实呢

38:25.110 --> 38:26.810
我们还可以定一个什么

38:26.810 --> 38:28.410
自定义的验证规则

38:28.410 --> 38:29.110
那这个呢

38:29.110 --> 38:30.110
给他改一个名

38:30.110 --> 38:31.510
叫validate

38:31.510 --> 38:33.410
这个叫code

38:33.410 --> 38:34.010
好吧

38:34.010 --> 38:36.110
验证的我们这个验证吗

38:36.110 --> 38:37.210
的这样一个操作啊

38:37.210 --> 38:39.610
validate或者叫mobile code

38:39.610 --> 38:41.410
给他重新起个名

38:41.410 --> 38:45.210
validate mobile code

38:45.210 --> 38:45.510
好的

38:45.510 --> 38:47.410
那这个定义完成之后

38:47.410 --> 38:49.810
我们在这个myser的下面

38:49.810 --> 38:51.910
继续来写到这个里面

38:51.910 --> 38:54.010
这个是我们的验证

38:55.610 --> 38:56.810
验证一个什么

38:56.810 --> 38:57.910
验证吗

38:57.910 --> 38:58.810
手机验证吗

38:58.810 --> 39:00.010
验证

39:00.010 --> 39:01.910
手机验证吗

39:01.910 --> 39:02.310
好的

39:02.310 --> 39:03.310
在这里面定一下

39:03.310 --> 39:03.910
validate

39:03.910 --> 39:05.910
mobile code

39:05.910 --> 39:06.610
同样的

39:06.610 --> 39:07.710
他有这个ruler

39:07.710 --> 39:08.110
validate

39:08.110 --> 39:09.010
虽然我们用不上

39:09.010 --> 39:10.310
但是我们先写什么

39:10.310 --> 39:11.110
这个里面是什么

39:11.110 --> 39:11.910
callback

39:11.910 --> 39:12.910
好了

39:12.910 --> 39:14.510
定义完这些行参之后

39:14.510 --> 39:15.210
那我这里面

39:15.210 --> 39:16.910
把它给粘贴一下吧

39:16.910 --> 39:18.710
switch拿过来

39:18.710 --> 39:20.210
然后但是第一个条件呢

39:20.210 --> 39:21.010
我们不用啊

39:21.010 --> 39:21.810
还有一个什么呢

39:21.810 --> 39:22.710
就是验证吗

39:22.710 --> 39:24.710
输入不正确

39:24.710 --> 39:27.510
我们给他改一下这个内容啊

39:27.510 --> 39:28.110
或者是呢

39:28.110 --> 39:30.710
我们叫他请输入正确的验证吗

39:30.710 --> 39:31.010
ok

39:31.010 --> 39:31.810
来一下

39:31.810 --> 39:32.910
请输入

39:32.910 --> 39:35.610
正确的验证

39:35.610 --> 39:36.210
好的

39:36.210 --> 39:36.910
这也可以

39:36.910 --> 39:38.710
然后这个验证规则是啥呢

39:38.710 --> 39:39.210
其实呢

39:39.210 --> 39:41.510
你看我们现在都已经返回值了

39:41.510 --> 39:41.910
对不对

39:41.910 --> 39:44.110
那我们就可以用刚才这个返回值

39:44.110 --> 39:45.510
来做一个

39:45.510 --> 39:46.710
判断就可以了

39:46.710 --> 39:47.710
如果说value

39:47.710 --> 39:49.710
他要是不等于谁呢

39:49.710 --> 39:51.910
我们这次点return code

39:53.910 --> 39:56.010
刚才咱们是不是定义了一个return code

39:56.010 --> 39:57.210
咱们可以看一下啊

39:57.210 --> 39:57.810
在这个里面

39:57.810 --> 39:59.310
刚才我login view的时候

39:59.310 --> 40:01.310
这里面有一个return code

40:01.310 --> 40:02.410
如果说

40:02.410 --> 40:04.910
他这个里面使用的就是这个value

40:04.910 --> 40:06.510
也就是说你输入的这个value

40:06.510 --> 40:08.310
不等于我们的这个return code

40:08.310 --> 40:09.810
那就说明你验证码输入错误了

40:09.810 --> 40:10.310
对吧

40:10.310 --> 40:12.110
那此时你肯定就不能什么

40:12.110 --> 40:13.210
进行一个

40:13.210 --> 40:15.610
我们数据的发送这样一个操作

40:15.610 --> 40:16.210
对吧

40:16.210 --> 40:16.510
好的

40:16.510 --> 40:19.310
那我们再回到我们的这个

40:19.310 --> 40:20.010
界面里面啊

40:20.010 --> 40:20.810
我们来看一下

40:20.810 --> 40:21.310
那这样呢

40:21.310 --> 40:24.710
我们重新走一次完整的流程啊

40:24.710 --> 40:26.110
到这个手机登录里面

40:26.110 --> 40:28.110
我先输入一个错误的

40:30.410 --> 40:31.310
没输入正确啊

40:31.310 --> 40:32.310
那这里面获取验证码

40:32.310 --> 40:33.410
手机画码可是不正确

40:33.410 --> 40:33.610
对吧

40:33.610 --> 40:35.010
那我重新来一个啊

40:35.010 --> 40:36.010
重新来一个怎么办呢

40:36.010 --> 40:39.710
输入一个正确的1355275217

40:39.710 --> 40:40.310
好的

40:40.310 --> 40:42.710
保证你这个手机能收取到啊

40:42.710 --> 40:44.010
我这里面获取验证码

40:44.010 --> 40:44.810
可以啊

40:44.810 --> 40:45.310
现在呢

40:45.310 --> 40:46.410
这里面已经有了

40:46.410 --> 40:48.310
咱们知道这个验证码是多少

40:48.310 --> 40:50.110
397858对吧

40:50.110 --> 40:51.410
而且我手机也收到了啊

40:51.410 --> 40:52.710
那我这里面少写一位

40:52.710 --> 40:53.710
少写一位之后

40:53.710 --> 40:54.610
我这里面开始

40:54.610 --> 40:56.010
现在就可以做登录了

40:56.010 --> 40:57.610
当我点击登录的时候

40:57.610 --> 40:58.710
那你看这里面

40:58.710 --> 41:00.310
是不是给我提示

41:00.310 --> 41:00.910
请输入啊

41:00.910 --> 41:02.210
正确的验证码对不对

41:02.210 --> 41:04.010
然后如果说我再多写一遍

41:04.010 --> 41:05.910
比如说这个是正确的验证码

41:05.910 --> 41:08.010
那我在这里面点击第击登录

41:08.010 --> 41:08.910
你看一下

41:08.910 --> 41:10.710
他的一个会有什么操作

41:10.710 --> 41:11.410
此时呢

41:11.410 --> 41:12.510
登录成功

41:12.510 --> 41:13.110
那这时候呢

41:13.110 --> 41:15.210
他就会给我进行一个什么

41:15.210 --> 41:16.410
如果说你登录成功之后

41:16.410 --> 41:17.810
这时候就会有一个界面跳转

41:17.810 --> 41:18.310
对不对

41:18.310 --> 41:20.110
但是我们那个为啥没跳转呢

41:20.110 --> 41:22.210
是因为我们这个没有历史基督战啊

41:22.210 --> 41:23.610
那我们可以再试一下

41:23.610 --> 41:24.210
再来一遍

41:24.210 --> 41:27.010
1355275217

41:27.010 --> 41:27.910
如果说成功之后

41:27.910 --> 41:30.510
其实他是会走到我们什么逻辑的

41:30.510 --> 41:31.310
成功之后

41:31.310 --> 41:31.910
这个里面

41:31.910 --> 41:33.310
因为我们已经定义好了

41:33.310 --> 41:34.010
对吧

41:34.010 --> 41:35.010
在这个里面

41:35.010 --> 41:35.810
我们找一下

41:35.810 --> 41:37.210
开始发动数据到后端

41:37.210 --> 41:38.910
是不是隔这个里面

41:38.910 --> 41:40.610
send yoder info

41:40.610 --> 41:42.110
因为我们这个里面

41:42.110 --> 41:43.710
此时要发送的时候

41:43.710 --> 41:46.010
这个里面发送的应该是什么

41:46.010 --> 41:47.610
这次点yoder login

41:47.610 --> 41:50.110
找到他send yoder info

41:50.110 --> 41:51.610
那我们是在这个里面调用

41:51.610 --> 41:52.610
点来点is

41:52.610 --> 41:54.610
此时这个is应该是啥

41:54.610 --> 41:56.610
就是我们当前的这个fm

41:56.610 --> 41:58.410
以及我们的这个vcode

41:58.410 --> 41:59.810
都给后端发送过去

41:59.810 --> 42:00.110
当然了

42:00.110 --> 42:02.410
咱们后端也没验证这个vcode

42:02.410 --> 42:03.010
这不要紧

42:03.010 --> 42:04.410
反正电话号是发过去了

42:04.410 --> 42:04.910
对吧

42:04.910 --> 42:06.110
如果说你电话号匹配了

42:06.110 --> 42:06.610
ok

42:06.610 --> 42:07.310
那这个时候呢

42:07.310 --> 42:08.210
就登入成功

42:08.210 --> 42:09.610
假设你电话号不匹配的话

42:09.610 --> 42:11.910
那这个还有可能登入失败的啊

42:11.910 --> 42:12.210
这个呢

42:12.210 --> 42:13.610
我们要知道一下

42:13.610 --> 42:14.710
获取一下验证码

42:14.710 --> 42:15.510
咱们来试一下

42:15.510 --> 42:17.310
看一下整个流程

42:17.310 --> 42:17.810
好的

42:17.810 --> 42:19.510
那这个验证码来了之后

42:19.510 --> 42:21.810
刚才因为已经做了这个错误验证

42:21.810 --> 42:22.410
那此时呢

42:22.410 --> 42:24.210
我就使用正确的

42:24.210 --> 42:25.210
使用正确的之后

42:25.210 --> 42:25.910
那这时候呢

42:25.910 --> 42:28.310
它应该去向后端发送请求了

42:29.910 --> 42:30.210
ok

42:30.210 --> 42:31.510
这里面有一个登入成功

42:31.510 --> 42:32.710
当你登入成功之后

42:32.710 --> 42:33.310
这时候呢

42:33.310 --> 42:36.110
就给我们跳转到我们的这个

42:36.110 --> 42:37.210
首页面里面了

42:37.210 --> 42:37.710
对不对

42:37.710 --> 42:38.210
那这个呢

42:38.210 --> 42:42.410
就是我们一个完整的通过手机验证码

42:42.410 --> 42:43.210
这种形式

42:43.210 --> 42:45.710
来进行登录的这么一个流程啊

42:45.710 --> 42:47.110
具体流程怎么实现的

42:47.110 --> 42:48.310
我们可以回顾一下

42:48.310 --> 42:49.510
其实大概呢

42:49.510 --> 42:51.210
我们主要经历了几个立场

42:51.210 --> 42:51.910
首先第一呢

42:51.910 --> 42:55.010
我们是想办法弄到一个什么表单啊

42:55.010 --> 42:57.010
我们得把这个表单弄到了

42:57.010 --> 42:58.410
如果说你弄不到表单的话

42:58.410 --> 42:59.010
那这个时候

42:59.010 --> 43:00.710
你没办法验证这个手机号码

43:00.710 --> 43:01.310
对不对

43:01.310 --> 43:02.910
在这个处理表单的时候

43:02.910 --> 43:04.810
我没有做了一个啥事呢

43:04.810 --> 43:05.710
因为挺费劲的

43:05.710 --> 43:08.310
我们还调整了一下什么微信的处理

43:08.310 --> 43:08.710
对不对

43:08.710 --> 43:10.710
因为微信对这个表单呢

43:10.710 --> 43:13.010
如果说你使用probs的这种形式传递

43:13.010 --> 43:13.810
微信不认

43:13.810 --> 43:14.510
因为它默认吧

43:14.510 --> 43:17.110
用uniforms里面的这个对象给过了掉了

43:17.110 --> 43:17.910
并且呢

43:17.910 --> 43:19.310
我们还调整了一下

43:19.310 --> 43:22.210
rules的一个什么验证规则

43:22.210 --> 43:26.610
我们在这个unready里面来进行一个处发了

43:26.610 --> 43:26.910
对不对

43:26.910 --> 43:29.510
也就是说给它form来进行一个挂载

43:29.510 --> 43:30.310
并且呢

43:30.310 --> 43:30.710
其实呢

43:30.710 --> 43:34.110
就是调用它的一个setrules的这么一个方法

43:34.110 --> 43:35.910
当如果说你这个手机号码

43:35.910 --> 43:37.610
这个已经验证完成之后

43:37.610 --> 43:38.510
那我这时候呢

43:38.510 --> 43:39.710
又做了一个啥事

43:39.710 --> 43:41.910
我们是不是开启一个定时器啊

43:41.910 --> 43:42.410
对吧

43:42.410 --> 43:44.210
那这个开启定时器的时候

43:44.210 --> 43:45.710
其实我们可以想一下

43:45.710 --> 43:47.310
当这个定时器开启之后

43:47.310 --> 43:48.910
那我们这里面就要考虑一个问题

43:48.910 --> 43:49.610
是什么呢

43:49.610 --> 43:51.510
因为它是一个异不操作

43:51.510 --> 43:53.210
我们离开组件的时候

43:53.210 --> 43:55.210
要把这个定时器给做一个销贵

43:55.210 --> 43:55.910
并且呢

43:55.910 --> 43:58.810
我们要判定一个定时器的这个临界值

43:58.810 --> 43:59.910
而且根据定时器

43:59.910 --> 44:01.810
显示不同的一个文本内容

44:01.810 --> 44:03.710
这是我们要做的

44:03.710 --> 44:04.110
之后呢

44:04.110 --> 44:06.110
我们是不是就开始发送数据了

44:06.110 --> 44:06.710
对吧

44:06.710 --> 44:07.810
那发送数据的时候

44:07.810 --> 44:09.110
我们又做一个什么事呢

44:09.110 --> 44:10.210
其实这个里面啊

44:10.210 --> 44:12.610
我们定义一个什么随机数

44:12.610 --> 44:13.210
对吧

44:13.210 --> 44:14.410
定义随机数

44:14.410 --> 44:15.310
这随机数干什么

44:15.310 --> 44:17.010
就是作为我们的一个验证码

44:17.010 --> 44:17.610
并且呢

44:17.610 --> 44:18.910
我们这里面又什么

44:18.910 --> 44:21.910
指定了一个短信服务

44:21.910 --> 44:22.510
短信服务

44:22.510 --> 44:23.310
跟同学们说一下

44:23.310 --> 44:24.810
这里面我们最重要的

44:24.810 --> 44:25.710
就是一个什么

44:25.710 --> 44:27.910
签名跟模板申请啊

44:27.910 --> 44:29.710
签名模板的

44:29.710 --> 44:31.110
还有一个申请

44:31.110 --> 44:33.110
那如果说你这个搞定之后

44:33.110 --> 44:34.910
那其实我们调用它这个API

44:34.910 --> 44:36.410
直接非常简单拿过来用

44:36.410 --> 44:37.410
是不是就可以了

44:37.410 --> 44:38.210
是在哪个里面

44:38.210 --> 44:39.210
我们看一下

44:39.210 --> 44:39.910
它这个API

44:39.910 --> 44:40.810
直接的你

44:40.810 --> 44:41.610
就这一套模板

44:41.610 --> 44:43.310
你直接拿过来搞就可以了

44:43.310 --> 44:43.910
非常简单

44:43.910 --> 44:45.710
也没有什么特殊的配置啊

44:45.710 --> 44:46.510
一看就明白

44:46.510 --> 44:47.010
对吧

44:47.010 --> 44:48.410
那这是整个一个过程

44:48.410 --> 44:49.710
如果说这些都搞定之后

44:49.710 --> 44:51.410
那它返回给我们数据

44:51.410 --> 44:52.610
我们直接这个里面

44:52.610 --> 44:53.610
会有一个什么

44:53.610 --> 44:56.510
添加验证码的一个验证规则

44:56.510 --> 44:57.110
对吧

44:57.110 --> 45:01.210
添加验证码的一个验证规则

45:01.210 --> 45:01.710
那这个呢

45:01.710 --> 45:03.010
是我们做的一件事

45:03.010 --> 45:04.310
那经过这几步操作之后

45:04.310 --> 45:05.410
如果说都实现了

45:05.410 --> 45:07.310
那我们这里面真实的一个什么

45:07.310 --> 45:10.010
登陆用户的一个操作

45:10.010 --> 45:10.610
对吧

45:10.610 --> 45:11.110
这些呢

45:11.110 --> 45:12.510
就是我们本节课

45:12.510 --> 45:14.110
实现这个案例的

45:14.110 --> 45:16.010
所有的一个流程

45:16.010 --> 45:16.410
好的

45:16.410 --> 45:17.610
那用户模框呢

45:17.610 --> 45:19.010
经过我们这些操作之后

45:19.010 --> 45:21.110
基本上到这里就ok了

45:21.110 --> 45:22.510
那我们下节课开始呢

45:22.510 --> 45:25.410
就再回到我们的这个首页面里面

45:25.410 --> 45:25.810
然后呢

45:25.810 --> 45:28.810
进行我们的这个收藏的一个处理

45:28.810 --> 45:30.010
我们这节课就到这里

45:30.010 --> 45:30.510
谢谢大家

