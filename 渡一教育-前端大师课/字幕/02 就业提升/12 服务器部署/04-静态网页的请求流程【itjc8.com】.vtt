WEBVTT

00:00.940 --> 00:03.380
好的同学们 那么其实到目前为止

00:03.380 --> 00:08.020
我们对于整个网页请求的前半部分就是预名

00:08.020 --> 00:11.020
然后对应到IP地址这一部分你就非常清晰了

00:11.020 --> 00:12.940
但是问题来了就是

00:12.940 --> 00:18.620
当我的浏览器现在从DNS服务器拿到了预名对应的IP地址

00:18.620 --> 00:22.380
并且把请求发送到了服务器

00:22.380 --> 00:24.300
那这个时候问题来了就是

00:24.300 --> 00:27.580
我的服务器到底做了什么事情呢

00:27.580 --> 00:30.540
里面是谁处理我这个请求的呢

00:30.540 --> 00:33.540
带着这个问题我们来一起看一下

00:33.540 --> 00:36.700
我们的服务器里面究竟做了什么事情

00:36.700 --> 00:38.620
来我们看下一张图

00:38.620 --> 00:43.460
那么在这张图里面我们服务器的内容为大家画了出来

00:43.460 --> 00:46.780
那其实在前一节课里面为大家讲过

00:46.780 --> 00:49.860
服务器其实就是一台普通的电脑

00:49.860 --> 00:51.380
而它为什么叫服务器呢

00:51.380 --> 00:54.580
因为它能提供一些服务

00:54.580 --> 00:56.380
比如说我们的网页服务器

00:56.380 --> 00:57.860
为什么叫网页服务器呢

00:57.860 --> 00:59.700
因为它能提供网页服务

00:59.740 --> 01:01.500
而为什么它能提供网页服务呢

01:01.500 --> 01:05.860
因为它装了一些和我们网页服务相关的软件

01:05.860 --> 01:07.860
就是这个意思

01:07.860 --> 01:12.020
那我们通常用的网页服务的软件有这么几个

01:12.020 --> 01:13.740
第一个就是NJX

01:13.740 --> 01:15.700
NJX大家可能听过

01:15.700 --> 01:16.620
还有什么呢

01:16.620 --> 01:18.140
就是Apache

01:18.140 --> 01:21.140
还有可能就是微软的IAS之类的

01:21.140 --> 01:23.460
这些都能提供网页服务

01:23.460 --> 01:26.060
而这些个软件有一个共同的特点就是什么呢

01:26.060 --> 01:28.900
他们在服务器端运行的时候

01:28.940 --> 01:32.660
都会监听服务器端的网页请求

01:32.660 --> 01:33.540
也就是说呢

01:33.540 --> 01:35.380
当你的浏览器

01:35.380 --> 01:36.660
然后呢拿到域名之后

01:36.660 --> 01:39.220
把请求发送到这个财服务器了

01:39.220 --> 01:40.740
那么这台服务器里面

01:40.740 --> 01:45.540
有一个人就是这个服务器端的这个网页应用软件

01:45.540 --> 01:46.780
就是我们的NJX

01:46.780 --> 01:48.020
我这边给大家取的是NJX

01:48.020 --> 01:49.620
当然可能有其他的

01:49.620 --> 01:51.260
那么这个NJX在做什么事情呢

01:51.260 --> 01:54.060
就是在一直等着有消息来呢

01:54.060 --> 01:54.780
结果呢

01:54.780 --> 01:56.500
你浏览器就来了一条消息

01:56.500 --> 01:58.340
那这个时候我就拿到你消息了

01:58.380 --> 01:59.820
那么拿到消息之后呢

01:59.820 --> 02:01.260
我就去分析一下

02:01.260 --> 02:02.980
你到底要什么东西

02:02.980 --> 02:04.060
那比如说这边

02:04.060 --> 02:06.660
我们就直接请求的是momo.com

02:06.660 --> 02:10.580
这个比如说叫Ilovefe.com这个域名

02:10.580 --> 02:11.460
那请求更路径

02:11.460 --> 02:12.380
那么请求更路径的时候

02:12.380 --> 02:14.060
我们知道他要去请求首页

02:14.060 --> 02:16.780
所以呢NJX知道了

02:16.780 --> 02:19.340
这个请求是要请求首页文件的

02:19.340 --> 02:20.180
那么这时候呢

02:20.180 --> 02:21.900
NJX就会做什么事情呢

02:21.900 --> 02:24.700
他会去我们的网站跟目录

02:24.700 --> 02:26.580
那什么是网站跟目录呢

02:26.580 --> 02:30.180
其实就是我们把自己开发好的项目文件

02:30.180 --> 02:31.900
然后上传到服务器

02:31.900 --> 02:33.780
然后呢有这么一个文件夹

02:33.780 --> 02:36.660
存放我们这个写好的代码

02:36.660 --> 02:40.060
那这个文件夹就叫做网站跟目录

02:40.060 --> 02:41.460
叫网站跟目录

02:41.460 --> 02:44.540
而这个目录里面就会有你的HTML文件也好

02:44.540 --> 02:45.380
CSS也好

02:45.380 --> 02:47.900
还有JS等等的一些资源文件

02:47.900 --> 02:49.660
全在这个网站跟目录里面

02:49.660 --> 02:51.820
那么NJX这个软件啊

02:51.820 --> 02:55.020
他接受到了我们这个用户的请求之后

02:55.020 --> 02:58.540
然后呢接下来就会去我们这个网站的

02:58.540 --> 03:01.860
跟目录里面去找到当前用户

03:01.860 --> 03:04.780
所要请求的这个首页的HTML代码

03:04.780 --> 03:05.700
然后呢

03:06.620 --> 03:08.660
从网站跟目里面拿出来之后呢

03:08.660 --> 03:10.860
NJX再把它进行一定的处理

03:10.860 --> 03:13.700
然后呢转发给直接就返回给

03:13.700 --> 03:14.500
返回给谁呢

03:14.500 --> 03:16.340
返回给我们浏览器了

03:16.340 --> 03:18.860
那浏览器在拿到HTML文件之后呢

03:18.860 --> 03:19.980
他做什么事情呢

03:19.980 --> 03:21.500
那有了HTML文件

03:21.500 --> 03:22.860
他就可以做解析了呀

03:22.860 --> 03:25.500
那就从上至下一次去解析

03:25.500 --> 03:28.060
如果再遇到了CSS文件啊

03:28.060 --> 03:30.060
JS文件图片文件之类的东西呢

03:30.060 --> 03:32.980
他会重新再去向服务器发行的求

03:32.980 --> 03:34.340
那发到服务器之后呢

03:34.340 --> 03:35.460
还是有NJX来处理

03:35.460 --> 03:38.260
比如说我们这个indexHTML里面呢

03:38.260 --> 03:41.260
有一个这个style.css文件要进行处理

03:41.260 --> 03:42.060
那么这时候呢

03:42.060 --> 03:44.620
有软器就把CSS文件请求发给这个服务器

03:44.620 --> 03:47.460
那服务器的呢还是NJX接受到请求

03:47.460 --> 03:48.700
那么接受到请求之后呢

03:48.700 --> 03:52.620
还是去网站跟目录里面去找我们这个文件

03:52.620 --> 03:53.900
找到文件之后呢

03:53.900 --> 03:56.460
拿出来拿出来再返回瀏覽器

03:56.460 --> 03:58.460
那么瀏覽器又拿到一个CSS文件

03:58.460 --> 04:00.620
同样以下的CSS

04:00.620 --> 04:02.340
以及JS还有图片文件

04:02.340 --> 04:04.220
都是这么一个处理流程

04:04.220 --> 04:06.180
所以这是我们一个静态

04:06.180 --> 04:08.580
网页的一个基本求全的一个过程啊

04:08.580 --> 04:09.860
基本情绪的过程

04:09.860 --> 04:11.860
那关于瀏覽器里面怎么处理这个文件的

04:11.860 --> 04:13.020
这边我就不再多讲了

04:13.020 --> 04:15.140
因为之前的技术课里面已经讲过了

04:15.140 --> 04:16.820
而这边我们主要关注的

04:16.820 --> 04:19.580
就是在服务器端到底发生了什么事情

04:19.580 --> 04:21.340
那我们再给大家

04:21.380 --> 04:22.660
整体的来看一下

04:22.660 --> 04:25.180
就是这个流程是什么样子的

04:25.180 --> 04:27.260
算是做一个简单的回顾啊

04:27.260 --> 04:28.140
那现在呢

04:28.140 --> 04:30.820
用户在我们这个瀏覽器里面输入的地址

04:30.820 --> 04:32.900
Ilovefe.com

04:32.900 --> 04:33.660
首先第一步呢

04:33.660 --> 04:36.180
就是我们的这个瀏覽器

04:36.180 --> 04:37.660
会去向DNS服务器

04:37.660 --> 04:39.620
请求这个域名对应的IP地址

04:39.620 --> 04:41.660
那有时候说老师还有货斯文件的

04:41.660 --> 04:43.100
那个东西呢一般用不到

04:43.100 --> 04:44.740
我们暂时先不讲它

04:44.740 --> 04:45.980
然后呢

04:45.980 --> 04:47.580
这个DNS服务器里面呢

04:47.580 --> 04:50.500
就会把这个域名对应的IP地址

04:50.500 --> 04:52.540
通过第二步返回给我们的瀏覽器

04:52.540 --> 04:53.940
那么瀏覽器拿到

04:53.940 --> 04:55.340
域名对应的IP地址之后呢

04:55.340 --> 04:55.740
然后呢

04:55.740 --> 04:56.460
接下来

04:56.460 --> 04:58.900
第三步向这个服务器发请求

04:58.900 --> 04:59.980
那么在服务器端呢

04:59.980 --> 05:02.820
有一个软件叫做NGX

05:02.820 --> 05:03.260
然后呢

05:03.260 --> 05:03.700
它呢

05:03.700 --> 05:05.660
接受到了我们瀏覽器的请求

05:05.660 --> 05:06.020
然后呢

05:06.020 --> 05:07.980
对瀏覽器的请求进行分析之后呢

05:07.980 --> 05:10.580
发现瀏覽器是要这个首页文件

05:10.580 --> 05:11.340
所以呢

05:11.340 --> 05:13.340
它去我们网站跟目录里面

05:13.340 --> 05:15.460
找到了index.hml文件

05:15.460 --> 05:16.220
然后呢

05:16.220 --> 05:17.500
拿回来之后呢

05:17.500 --> 05:20.500
将它通过第六步返回给瀏覽器

05:20.500 --> 05:22.300
那么瀏覽器拿到这个HMB文件之后呢

05:22.300 --> 05:24.180
就可以进行正常的解析

05:24.180 --> 05:25.020
然后呢

05:25.020 --> 05:26.700
如果遇到了CS文件

05:26.700 --> 05:28.460
CS文件图片文件之类的话

05:28.460 --> 05:30.340
它会重新向服务器发请求

05:30.340 --> 05:30.940
然后呢

05:30.940 --> 05:32.020
再由index.hml处理

05:32.020 --> 05:33.260
找到这个文件

05:33.260 --> 05:35.260
再重新返回给我们瀏覽器

05:35.260 --> 05:37.500
那么瀏覽器整个网页资源

05:37.500 --> 05:38.620
拿拿拿的就完整

05:38.620 --> 05:39.300
完整之后呢

05:39.300 --> 05:40.980
整个网页展示出来了

05:40.980 --> 05:41.940
就展示出来了

05:41.940 --> 05:45.020
所以这是我们静态网页请求的全流程

05:45.020 --> 05:45.300
OK

05:45.300 --> 05:46.220
那么这节课呢

05:46.220 --> 05:46.900
就先到这里

