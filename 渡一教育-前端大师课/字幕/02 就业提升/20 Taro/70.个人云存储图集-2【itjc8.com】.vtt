WEBVTT

00:00.000 --> 00:02.800
好 我们继续来讲解我们的这一课程

00:02.800 --> 00:06.000
我们在之前我们讲解了我们上传

00:06.000 --> 00:10.600
我们完成了现在的一个上传并且进行数据库的记录

00:10.600 --> 00:15.400
对吧 我们在Madelist里面把数据已经存储在我们的整个结构中了

00:15.400 --> 00:21.400
同时我们也把当前的这一条数据存储在我们的云存储的结构中了

00:21.400 --> 00:25.400
这样的话我们就可以在这边进行我们的展示

00:25.400 --> 00:29.200
我们之前的操作完成以后现在这一课我们要做的是

00:29.400 --> 00:31.100
我们要把数据展示出来

00:31.100 --> 00:34.200
同时我们要去进行一个删除操作

00:34.200 --> 00:37.200
能把数据进行我们的一个删除

00:37.200 --> 00:40.100
当然我们讲过删除操作它需要完成两步

00:40.100 --> 00:43.100
第一步在云里面我们的数据库里的数据

00:43.100 --> 00:46.200
第二步是在云存储里面的数据结构

00:46.200 --> 00:47.900
OK 那我们来看

00:47.900 --> 00:51.600
首先我们说我们的GetCloudedMadeLister

00:51.600 --> 00:55.700
这个是我们删除我们的一个获取云端数据的方法

00:55.700 --> 00:57.100
它在什么时候执行呢

00:57.100 --> 01:02.030
在我们的生命周期里面

01:02.030 --> 01:04.230
在我们秀的位置上面

01:04.230 --> 01:05.630
我们来做这步操作

01:05.630 --> 01:07.430
我们做执行 执行是什么

01:07.430 --> 01:15.600
我们说获取云端数据库的数据

01:15.600 --> 01:19.600
云端的数据我们在这边已经创建了一个MadeLister的一个对象

01:19.600 --> 01:21.600
叫DBMadeLister

01:21.600 --> 01:22.900
我们直接拿这个来

01:22.900 --> 01:24.600
DBMadeLister点

01:24.600 --> 01:27.800
我们直接是Get获取里面的所有数据

01:27.800 --> 01:28.600
对吧

01:28.600 --> 01:34.110
然后then我们拿到所有的数据出来

01:34.110 --> 01:48.000
把数据全部放置到我们现在的DataList那个State里面去

01:48.000 --> 01:52.020
我们在这边写上

01:52.020 --> 02:00.320
Z点SetStateList

02:00.320 --> 02:03.620
RES里面来的Data拿出来

02:03.620 --> 02:05.020
当你这步做完以后的话呢

02:05.020 --> 02:07.120
那我的数据已经全部在DataList里面了

02:07.120 --> 02:11.120
紧接着我们把DataList的数据需要呈现在页面上面

02:11.120 --> 02:12.320
所以我们到下面来

02:12.320 --> 02:15.120
我们看它的呈现部分

02:15.120 --> 02:16.120
页面部分的话呢

02:16.120 --> 02:20.720
我们DataList数据一定会循环我们现在已经写好的这一块

02:20.720 --> 02:27.270
所以我们做一个

02:27.270 --> 02:32.780
Data表达是

02:32.780 --> 02:37.240
DataList

02:37.240 --> 02:44.140
Map

02:44.140 --> 02:45.840
Item

02:45.840 --> 02:51.810
Index

02:51.810 --> 02:57.030
把整个这一段我们放进去

02:57.030 --> 03:04.130
Key写上

03:04.130 --> 03:10.410
紧接着我们把这里面上传人

03:10.410 --> 03:14.820
Item里面我们有个Name

03:14.820 --> 03:18.060
第二个

03:18.060 --> 03:21.460
上传时间Item里面有个Time

03:21.460 --> 03:23.860
第三个有个图片

03:23.860 --> 03:27.160
这是Item里面的Image URL

03:27.160 --> 03:29.960
这个你可以通过我们的数据过来看

03:29.960 --> 03:35.330
Name、Time、Image URL什么都有

03:35.330 --> 03:42.350
好 现在来看一下页面

03:42.350 --> 03:43.450
出来了吧

03:43.450 --> 03:44.850
这个就出来了

03:44.850 --> 03:50.550
这是我之前刚刚我们之前操作的时候存进去的几张图片

03:50.550 --> 03:51.550
我们有四张

03:51.550 --> 03:54.650
其中这个JC老师是原来我已经有的

03:54.650 --> 04:00.650
然后这两张的JC是我之前刚刚我们在前面通过我们的上传进来的

04:00.650 --> 04:01.150
对吧

04:01.150 --> 04:04.560
我们这边再试一张

04:04.560 --> 04:10.600
进行跳转

04:10.600 --> 04:12.200
我们选一张

04:12.200 --> 04:13.500
其他的照片

04:13.500 --> 04:15.700
比如说小牛

04:15.700 --> 04:16.900
上传成功

04:16.900 --> 04:18.200
看一看

04:18.200 --> 04:19.900
然后过来

04:19.900 --> 04:22.100
往下小牛是不是出来了

04:22.100 --> 04:23.200
OK吧

04:23.200 --> 04:26.800
整个这个操作我们就完成了现在数据的呈现

04:26.800 --> 04:28.700
紧接着我们做第二步

04:28.700 --> 04:34.600
就是我们需要把现在的这个删除图片做它的一个功能

04:34.600 --> 04:36.300
所以我们现在来onclick

04:38.100 --> 04:44.900
删除

04:44.900 --> 04:50.160
this点

04:50.160 --> 04:57.170
我们叫删除

04:57.170 --> 05:06.130
我们就把删除这个写上来

05:06.130 --> 05:12.260
删除

05:12.260 --> 05:16.060
删除本身自己在这边点击的时候我们要带参

05:16.060 --> 05:16.460
所以

05:17.760 --> 05:19.160
以bund的方式来

05:19.160 --> 05:22.160
第二个参数是你现在需要给我的

05:22.160 --> 05:24.560
你现在每次点击这按钮的时候

05:24.560 --> 05:26.460
你现在所需要获得的那个字

05:26.460 --> 05:28.460
所以它应该是什么呢

05:28.460 --> 05:32.860
应该是现在的item里面的那个下杠id

05:32.860 --> 05:34.160
这个下杠id是什么

05:34.160 --> 05:36.760
我们再看一下数据库结构

05:36.760 --> 05:39.060
下杠id的话数据库结构

05:39.060 --> 05:43.660
下杠id的话是每一条数据里面的

05:43.660 --> 05:45.060
这个

05:45.060 --> 05:45.560
是这个

05:45.560 --> 05:48.060
我们要通过它来获取这条数据

05:49.060 --> 05:50.260
获取到数据以后的话

05:50.260 --> 05:52.460
同时我们也要获取到这个内容

05:53.760 --> 05:54.760
那我们来看一下

05:55.660 --> 05:58.660
首先我们要获得这个id

05:58.660 --> 06:00.260
同时我们也可以

06:00.260 --> 06:00.860
逗号

06:00.860 --> 06:02.360
因为已经有这个值

06:02.360 --> 06:03.660
所以我们直接就是

06:04.360 --> 06:06.360
item.img.url

06:06.360 --> 06:08.560
我们可以传这两个数据过去

06:09.360 --> 06:09.860
注意哦

06:09.860 --> 06:11.060
第一个一定要放this

06:11.060 --> 06:12.360
把两个放在后面

06:12.860 --> 06:13.860
然后这样的话呢

06:13.860 --> 06:16.460
我们就可以把这个数据啊传上去

06:17.360 --> 06:18.960
放在上面删除里面

06:19.960 --> 06:20.860
ok

06:20.860 --> 06:22.560
那么放在删除里面的时候呢

06:22.560 --> 06:23.860
我们翻出就要接

06:23.860 --> 06:25.460
接的时候我们一定注意

06:25.460 --> 06:26.760
它需要按顺序来

06:26.760 --> 06:27.860
首先第一个

06:27.860 --> 06:28.960
你接的是id

06:28.960 --> 06:30.260
第二个major

06:30.260 --> 06:31.760
第三个才是我们的

06:31.760 --> 06:33.260
当前的一些参数翼

06:33.860 --> 06:35.060
第一个是id

06:35.660 --> 06:36.860
第二个是major

06:36.860 --> 06:37.860
第三个是翼

06:38.760 --> 06:39.360
这样接

06:40.460 --> 06:40.860
好

06:40.860 --> 06:41.860
我们做删除

06:41.860 --> 06:43.360
删除本身自己来讲的

06:43.360 --> 06:44.860
其实还是比较简单啊

06:44.860 --> 06:46.060
我们说一

06:46.060 --> 06:47.460
删除数据库的数据

06:47.460 --> 06:49.060
二删除云端内容

06:49.660 --> 06:51.160
你可以在刚开始时候

06:51.160 --> 06:52.960
把这两个值接下来啊

06:52.960 --> 06:54.460
这个都是可以的

06:54.460 --> 06:56.360
那么我们现在来做一次

07:01.280 --> 07:02.280
你可以接下来

07:02.280 --> 07:02.780
对吧

07:02.780 --> 07:03.880
我们这称之为

07:04.780 --> 07:05.480
叫做

07:09.730 --> 07:11.830
加个下滑线代表的是

07:11.830 --> 07:13.830
这是接收过来的值

07:14.430 --> 07:16.230
虽然不加系统也能区分

07:16.230 --> 07:17.230
5id

07:17.630 --> 07:18.230
整育

07:19.230 --> 07:20.030
major

07:20.430 --> 07:21.130
url

07:31.680 --> 07:32.280
然后

07:32.880 --> 07:33.880
询问用户

07:39.700 --> 07:40.400
修

07:41.400 --> 07:42.100
model

07:43.100 --> 07:44.000
修model

07:45.500 --> 07:47.600
用模式框来询问用户

07:50.660 --> 07:51.260
title

07:53.560 --> 07:54.160
警告

07:58.050 --> 07:58.850
contenter

08:00.050 --> 08:02.050
确定要删除吗

08:06.810 --> 08:07.410
success

08:07.410 --> 08:08.910
我们得到它的数据

08:09.910 --> 08:12.310
如果你的res是confirm

08:14.820 --> 08:17.320
表示你正确需要得到这个值的话

08:17.820 --> 08:20.920
那么我们现在就可以直接把这个内容给删除

08:20.920 --> 08:22.520
因为confirm本身来讲

08:22.520 --> 08:24.820
一旦为q就是用户确定删除

08:28.110 --> 08:29.910
所以你现在就是删除记录

08:29.910 --> 08:30.510
第一步

08:31.210 --> 08:32.110
删除记录

08:34.470 --> 08:35.170
db

08:35.370 --> 08:37.670
下个imager list点

08:37.770 --> 08:39.270
找到这条记录

08:39.670 --> 08:41.970
这是我刚才读进来的这条

08:42.370 --> 08:43.070
然后呢

08:43.670 --> 08:45.270
remove删除

08:51.790 --> 08:54.190
然后这里面的话就是删除成功

08:54.290 --> 08:54.790
对吧

09:05.280 --> 09:06.780
一旦删除成功以后

09:06.780 --> 09:07.980
后面我们继续

09:08.480 --> 09:08.980
叫做

09:10.680 --> 09:12.180
同步删除

09:13.180 --> 09:15.180
云存除文件

09:21.080 --> 09:22.280
我们写一个

09:23.080 --> 09:23.780
delete

09:24.280 --> 09:25.080
clouder

09:26.080 --> 09:26.580
fi

09:31.530 --> 09:32.730
fi id写出来

09:33.030 --> 09:33.730
然后呢

09:34.330 --> 09:35.330
把它写出来

09:35.330 --> 09:37.230
最后我们要做一个重新绑定

09:39.620 --> 09:40.420
这个待会

09:40.920 --> 09:43.820
我们delete cloud file我们写出来以后的话呢

09:43.820 --> 09:50.120
我们要做一个当前根据你现在的id删除云文件的格式

09:50.720 --> 09:52.320
所以我们把它整个这个

09:52.620 --> 09:53.920
单独在这边写

10:04.820 --> 10:05.620
根据

10:06.620 --> 10:07.620
fi id

10:09.120 --> 10:10.020
删除

10:11.620 --> 10:12.520
云文件

10:15.290 --> 10:15.890
这样子

10:18.660 --> 10:24.760
taro.clouder.deletefi

10:26.580 --> 10:27.480
删除文件

10:29.580 --> 10:30.980
你需要fi

10:31.880 --> 10:32.580
list

10:32.680 --> 10:34.080
你要删哪些文件

10:34.780 --> 10:37.980
那我们把它传进来的这个fi id直接放进去

10:37.980 --> 10:39.480
它是一个速度结构

10:39.980 --> 10:40.580
然后呢

10:40.580 --> 10:41.980
删除成功以后

10:48.140 --> 10:50.240
我们可以在这边提示一下啊

10:50.340 --> 10:51.340
我们看一下

10:51.740 --> 10:59.230
都在我们的delete

11:00.030 --> 11:00.930
clouder

11:00.930 --> 11:01.530
fi

11:02.630 --> 11:03.830
success成功

11:09.930 --> 11:10.630
catch

11:14.750 --> 11:16.950
我们就catch的话呢

11:16.950 --> 11:18.350
我们就er

11:33.790 --> 11:34.490
失败

11:36.880 --> 11:37.980
把这个写出

11:43.120 --> 11:44.620
这样的话我们就完成了

11:44.620 --> 11:48.320
现在调用这个方法的一个删除操作

11:48.620 --> 11:49.220
对吧

11:49.420 --> 11:51.720
然后重新我们再做一次绑定

11:52.620 --> 11:54.720
那么注意绑定的话呢

11:54.720 --> 11:57.720
其实我们就要调取我们前面所写过的

12:03.790 --> 12:05.790
获取云端的数据

12:05.790 --> 12:08.990
我们做一个获取云端数据的这个操作

12:08.990 --> 12:10.190
我们再调它一下

12:10.190 --> 12:12.790
因为一旦删除以后我重新拿一次数据

12:18.290 --> 12:19.390
这样我再调一次

12:22.070 --> 12:22.670
ok吧

12:23.170 --> 12:24.970
同时呢这里面的话呢

12:24.970 --> 12:25.970
我们说一下啊

12:26.270 --> 12:27.770
那么这个值的话呢

12:27.770 --> 12:29.470
还在什么时候我们可以调呢

12:29.770 --> 12:32.170
其实我们在秀的时候

12:32.170 --> 12:33.670
里面还可以进行获取

12:33.670 --> 12:34.570
因为我们想啊

12:35.170 --> 12:36.970
我们页面在这边

12:37.170 --> 12:39.270
我们也可以再做一次这个操作

12:39.970 --> 12:41.670
好得到云端数据

12:41.870 --> 12:42.770
我们看到吗

12:42.770 --> 12:44.470
云端数据做了一次对吧

12:44.770 --> 12:46.170
然后呢每一次

12:46.270 --> 12:49.770
你需要重新从未激活到激活状态

12:49.770 --> 12:52.770
你都可以执行我们现在的这个操作

12:53.170 --> 12:54.270
然后呢他去刷新

12:54.270 --> 12:55.470
然后把数据拿出来

12:55.470 --> 12:58.470
然后你一旦点击这个删除按钮的时候的话呢

12:58.770 --> 13:01.470
那么他首先完成的是问你一下

13:01.470 --> 13:02.470
你是否确认删

13:02.870 --> 13:03.470
删的话呢

13:03.470 --> 13:06.170
他去删掉了我们现在的数据库的数据

13:06.670 --> 13:09.670
然后呢同时数据库删除在成功状态下

13:09.670 --> 13:11.770
然后他去删除我们的云端数据

13:12.070 --> 13:13.670
云端数据用的是clouder

13:13.670 --> 13:15.170
那个delete file

13:15.170 --> 13:16.470
他给他fire list

13:16.970 --> 13:19.070
给出这个值以后删除成功以后

13:19.070 --> 13:20.870
那么他重新再绑定一次

13:21.270 --> 13:22.970
那把数据给呈现出来

13:23.170 --> 13:25.270
ok 我们来看一下整个这个结构

13:25.970 --> 13:27.870
首先呢我们现在看一下啊

13:27.870 --> 13:29.370
现在我们把这个删掉

13:29.670 --> 13:32.070
确认删除吗取消没啥反应对的

13:32.670 --> 13:35.170
点确定啊这条记录没了

13:35.170 --> 13:36.670
咱们看到没有一个飞机没了

13:36.670 --> 13:38.470
咱们再看再把这个飞机删掉

13:42.040 --> 13:42.940
没了对吧

13:42.940 --> 13:44.840
他告诉你success成功了

13:44.840 --> 13:46.440
1234三张图

13:46.840 --> 13:48.940
打开云对他进行刷新

13:49.040 --> 13:50.040
是不是就三张了

13:50.740 --> 13:51.240
对吧

13:51.340 --> 13:52.940
然后同时我们再来看一下啊

13:52.940 --> 13:54.240
我们找到一张图片

13:54.240 --> 13:56.840
然后对他进行一个简单的那个

13:57.340 --> 13:58.840
就这个有JC老师对吧

13:58.840 --> 14:02.040
有一个我们看一下是否会在云端删除

14:02.440 --> 14:04.040
找一个JC老师这张的话

14:04.040 --> 14:04.940
我们找一下啊

14:04.940 --> 14:07.940
他是图片叫做二五点四五四

14:08.440 --> 14:10.240
我们取三位二五点四五四

14:10.740 --> 14:11.940
所以在存储里面

14:11.940 --> 14:13.940
我们来找一下二五点四五四

14:15.860 --> 14:17.160
有这张图片对吧

14:17.360 --> 14:18.360
好我们来删一下

14:18.360 --> 14:19.460
就把这张删掉

14:21.060 --> 14:21.560
没了

14:21.860 --> 14:23.360
此时呢我们来看一下

14:23.860 --> 14:24.660
先刷新

14:25.060 --> 14:27.460
是不是现在二五点四五四在存储里面没有

14:27.560 --> 14:29.160
此时我们回到这刷新

14:29.360 --> 14:30.960
是不是二五点四五四这个也没有了

14:30.960 --> 14:31.660
就两个了

14:32.060 --> 14:32.560
是吧

14:32.660 --> 14:33.760
现在我们就完成了

14:33.760 --> 14:35.260
他的一个删除功能

14:35.560 --> 14:36.360
然后此时呢

14:36.360 --> 14:37.560
我们就把整个功能呢

14:37.560 --> 14:38.760
把他给挥到

14:38.760 --> 14:40.860
回复到我们最初的状态上面来

14:41.160 --> 14:42.860
我们从头做一遍这功能

14:42.860 --> 14:46.560
首先我们现在可以点击上传发布

14:49.140 --> 14:50.940
找一张图片点击上传

14:50.940 --> 14:51.340
对吧

14:51.340 --> 14:53.240
你在手机里其实这事也能干

14:53.640 --> 14:55.740
然后找一张这张图片把火箭发射

14:55.840 --> 14:58.040
然后确定上传成功

14:58.240 --> 14:59.140
看到这张图片了

14:59.140 --> 15:00.340
然后马上跳过来

15:00.640 --> 15:02.840
这边可以看到火箭发射出来了

15:03.140 --> 15:04.140
我觉得这张图片不太好

15:04.140 --> 15:04.740
我要删

15:04.740 --> 15:06.240
所以你对他进行点击

15:06.440 --> 15:06.840
取消

15:06.840 --> 15:07.540
要不删了

15:07.540 --> 15:09.040
但是你确定要删

15:09.340 --> 15:10.240
所以点击一下

15:10.340 --> 15:11.140
这样图片就没了

15:11.440 --> 15:11.740
对吧

15:11.740 --> 15:12.640
图库的存储

15:13.040 --> 15:13.440
ok

15:13.440 --> 15:14.640
那么这样的话

15:14.640 --> 15:16.540
我们就非常简单的完成了

15:16.740 --> 15:18.640
我们既往数据库查数据

15:18.640 --> 15:20.440
又往我们的云存储查数据

15:20.440 --> 15:22.240
并且云存储数据的

15:22.640 --> 15:23.540
删除操作

15:23.540 --> 15:25.340
以及数据库的联动格式

15:25.340 --> 15:26.740
以及我们现在页面的

15:26.740 --> 15:28.340
简单的一个个人图库

15:28.840 --> 15:30.440
这功能我们就做到这了

15:30.740 --> 15:31.340
看到

15:31.440 --> 15:32.640
这个还是比较简单的

15:32.640 --> 15:34.540
你这边再进行上传都可以

15:35.540 --> 15:36.840
那么具体的话

15:36.840 --> 15:39.240
大家可以去完整的去测试一遍

15:39.240 --> 15:41.240
这功能里面的操作

15:41.540 --> 15:43.540
还是希望大家能够有一定的

15:43.540 --> 15:44.940
自己的熟练度

15:45.240 --> 15:48.140
并且如果说你在学习这个过程的时候

15:48.140 --> 15:50.140
你最好的学习方法是什么呢

15:50.340 --> 15:51.040
是这样的

15:51.340 --> 15:51.940
首先

15:52.140 --> 15:54.240
你把整这里面的功能

15:54.240 --> 15:55.240
先脑中搞熟

15:55.340 --> 15:55.940
第一点

15:55.940 --> 15:56.640
第二点

15:56.940 --> 15:59.240
你把这里边每一个里面

15:59.240 --> 16:00.840
要做点什么事

16:00.940 --> 16:02.340
并不是代码要打什么

16:02.340 --> 16:03.640
而是要做点什么事

16:03.640 --> 16:04.640
把这个搞熟

16:04.940 --> 16:05.440
理解吗

16:05.640 --> 16:06.640
比如说这个页面

16:06.840 --> 16:08.340
我们要呈现这个数据

16:08.540 --> 16:09.840
那么这个数据从哪来

16:09.840 --> 16:12.540
应该是在云存储里面的

16:12.540 --> 16:14.640
这个数据应该是在我们的

16:15.040 --> 16:16.340
所谓的数据库里的

16:16.740 --> 16:17.540
那么删除的时候

16:17.540 --> 16:18.540
应该要删两处

16:18.540 --> 16:19.940
等于这种逻辑

16:19.940 --> 16:20.740
你先搞通

16:21.540 --> 16:23.540
如果说你这些都通了

16:23.540 --> 16:24.940
你这时候再去看代码

16:24.940 --> 16:26.540
就是把你的逻辑概念

16:26.540 --> 16:28.540
和你的代码合在一起来看

16:28.740 --> 16:30.240
这时候你会觉得很舒服

16:31.040 --> 16:31.640
并不是

16:31.640 --> 16:32.740
一航一航看代码

16:32.740 --> 16:33.840
一航一航解释

16:34.340 --> 16:34.740
ok吧

16:34.740 --> 16:35.040
好

16:35.040 --> 16:36.140
那么这个案例呢

16:36.140 --> 16:36.540
我们就先

