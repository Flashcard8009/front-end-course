WEBVTT

00:00.180 --> 00:03.780
好 我们继续讲解我们的带修势力课程

00:03.780 --> 00:05.980
继续讲解我们的社交圈

00:05.980 --> 00:07.580
社交圈的内容非常多

00:07.580 --> 00:10.980
并且里面也有一些比较复杂的逻辑

00:10.980 --> 00:12.980
同时还有数据库的操作

00:12.980 --> 00:16.380
以及我们的一些排版格式都会有

00:16.380 --> 00:18.380
那么我们之前的课程呢

00:18.380 --> 00:20.980
回顾一下我们之前的讲解的内容

00:20.980 --> 00:23.580
首先我们做了三个部分

00:23.580 --> 00:25.980
一个广场 一个发布 一个我的

00:25.980 --> 00:27.180
这样一个Tabba

00:27.180 --> 00:28.780
然后在广场上面呢

00:28.780 --> 00:31.180
我们能读到我们所有的记录

00:31.180 --> 00:32.280
在这边有

00:32.280 --> 00:33.780
无论是你现在的人

00:33.780 --> 00:35.980
还是你发表的文本

00:35.980 --> 00:38.180
都可以在这里能够看到

00:38.180 --> 00:39.380
然后我们可以看到的是

00:39.380 --> 00:40.880
我们有三种形式

00:40.880 --> 00:41.580
第一种呢

00:41.580 --> 00:43.880
我们可以呈现单图片

00:43.880 --> 00:44.380
第二种呢

00:44.380 --> 00:45.680
我们呈现单文本

00:45.680 --> 00:47.980
第三种呢 图文

00:47.980 --> 00:50.280
这两种 三种形式都可以有

00:50.280 --> 00:51.480
然后在图文上面呢

00:51.480 --> 00:52.480
我们还存在着

00:52.480 --> 00:55.980
可以横向拖动多张图片的这个操作

00:55.980 --> 00:56.980
紧接着

00:56.980 --> 00:58.480
我们往上可以看到的是

00:58.480 --> 01:01.280
当我们点击这样的一个

01:01.280 --> 01:03.480
我们的每一条消息的时候

01:03.480 --> 01:06.680
我们是去到了我们单页的显示纪录

01:06.680 --> 01:08.680
这是我们上节课做到的

01:08.680 --> 01:09.180
然后呢

01:09.180 --> 01:10.280
前面可以显示出

01:10.280 --> 01:13.880
你现在的人 时间 已经的内容

01:13.880 --> 01:15.680
那么下面我们只是做个布局啊

01:15.680 --> 01:17.180
就是说这边有我喜欢

01:17.180 --> 01:18.680
这边有你喜欢 我也喜欢

01:18.680 --> 01:20.680
和一个回复

01:20.680 --> 01:21.780
那么我们同时呢

01:21.780 --> 01:22.680
还做到的是

01:22.680 --> 01:24.880
我们点了一个发布按钮

01:24.880 --> 01:26.180
在这个发布上面呢

01:26.180 --> 01:30.600
我们这边可以写任何内容

01:30.600 --> 01:37.510
我的第二条社交圈

01:37.510 --> 01:38.010
同时呢

01:38.010 --> 01:39.510
我们可以选择图片啊

01:39.510 --> 01:42.410
你可以选择你要的任何一张图片啊

01:42.410 --> 01:43.510
图片选择好以后

01:43.510 --> 01:44.110
这边呢

01:44.110 --> 01:45.710
你可以做预览

01:45.710 --> 01:46.810
预览好以后的话呢

01:46.810 --> 01:49.910
我们可以进行社交圈发布

01:49.910 --> 01:50.710
发布成功以后

01:50.710 --> 01:52.210
你再回到广场

01:52.210 --> 01:55.110
你就能看到你刚才发布的这条了

01:55.110 --> 01:56.010
然后点进去以后

01:56.010 --> 01:59.110
你里面也能看到你刚才发布的这条

01:59.110 --> 02:01.010
这是我们刚刚之前做过的

02:01.010 --> 02:02.610
之后呢 我的

02:02.610 --> 02:05.010
我的里面这边做了一个简单的排版

02:05.010 --> 02:09.510
首先我们上面拿到你现在当前所在的一个城市

02:09.510 --> 02:11.010
微信的一个

02:11.010 --> 02:14.810
我们获称之为开放接口 OpenType

02:14.810 --> 02:16.110
拿到了你现在的逆称

02:16.110 --> 02:18.810
拿到你现在的头像和我这个一样

02:18.810 --> 02:20.410
然后这边是你现在所在城市

02:20.410 --> 02:22.710
以及我们做了一个排版

02:22.710 --> 02:24.510
这是我们之前所做到的

02:24.510 --> 02:25.110
同时呢

02:25.110 --> 02:27.210
我们也设计到了云库

02:27.210 --> 02:28.410
云库里面的话呢

02:28.510 --> 02:29.810
我们看到的是

02:29.810 --> 02:30.610
我们有几个

02:30.610 --> 02:31.210
比如说

02:35.950 --> 02:37.350
我们在这里面

02:37.350 --> 02:41.290
我们有一个

02:41.290 --> 02:41.990
会就是

02:41.990 --> 02:43.090
这是他所用到的

02:43.090 --> 02:44.490
我们后面会设计到一个

02:44.490 --> 02:46.290
觉得回复列表

02:46.290 --> 02:48.690
这是历史的列表

02:48.690 --> 02:49.590
然后呢

02:49.590 --> 02:51.690
那个收收集列表

02:51.690 --> 02:54.090
这里面都有这个事

02:54.090 --> 02:55.790
那么这是我的图库

02:55.790 --> 02:57.990
这是我们从代码中也能看到

02:59.490 --> 03:00.590
topic demo

03:00.590 --> 03:04.860
他还有一个topic demo

03:04.860 --> 03:05.860
在这

03:05.860 --> 03:09.060
这里面是你现在的话题内容

03:09.060 --> 03:11.860
这里是你现在的一个

03:11.860 --> 03:13.860
我们的话题

03:13.860 --> 03:14.560
这些

03:14.560 --> 03:15.960
那么这都是我们之前

03:15.960 --> 03:17.960
所设计到的一个表

03:17.960 --> 03:18.660
那么有些呢

03:18.660 --> 03:20.660
这节课我们会讲到

03:20.660 --> 03:21.360
好

03:21.360 --> 03:22.160
那么这节课呢

03:22.160 --> 03:23.560
我们将从哪里开始呢

03:23.560 --> 03:25.860
我们将是接着上节课

03:25.860 --> 03:26.660
首先

03:26.660 --> 03:29.560
这一边我们把数据读出来了

03:29.560 --> 03:30.460
接下去

03:30.460 --> 03:32.460
我们要做的是回复

03:32.460 --> 03:33.960
以及是否喜欢

03:33.960 --> 03:35.960
以及显示这块内容

03:35.960 --> 03:36.660
好

03:36.660 --> 03:37.560
看

03:37.560 --> 03:39.560
首先到这个页面以后的话呢

03:39.560 --> 03:41.760
我们先要去读取一下

03:41.760 --> 03:43.760
当前这条信息

03:43.760 --> 03:49.960
是否已经被我编辑为喜欢和那个不喜欢

03:49.960 --> 03:51.460
这样一个状态

03:51.460 --> 03:51.960
那么

03:51.960 --> 03:53.760
如果现在已经喜欢

03:53.760 --> 03:55.660
那么就应该呈现出

03:55.660 --> 03:57.160
这上面有一个心啊

03:57.160 --> 04:01.040
我们看一下样式

04:01.040 --> 04:02.740
我们看一下

04:02.740 --> 04:04.540
在这里应该是一颗心

04:04.540 --> 04:07.920
也就是是一张图片

04:07.920 --> 04:09.720
在这边

04:09.720 --> 04:15.120
它的格式应该是like icon

04:15.120 --> 04:19.090
like icon

04:19.090 --> 04:20.090
我们看一下啊

04:20.090 --> 04:22.690
我们把它高度加大一点

04:22.690 --> 04:24.590
它有个400吧

04:24.590 --> 04:26.890
490啊

04:26.890 --> 04:28.390
它受到上面的display

04:28.390 --> 04:29.890
那个flex的影响

04:29.890 --> 04:31.790
所以它的高度会往下收

04:31.790 --> 04:33.290
所以我们写大一点

04:33.290 --> 04:34.790
它应该就能称出来

04:34.790 --> 04:36.790
这个界面应该能看到

04:36.790 --> 04:39.790
我们看一下界面的结构

04:39.790 --> 04:40.990
打开了

04:40.990 --> 04:47.180
进来

04:47.180 --> 04:48.580
就有这样一个的

04:48.580 --> 04:49.180
OK

04:49.180 --> 04:51.280
就把它作为放在这吧

04:51.280 --> 04:52.180
然后呢

04:52.180 --> 04:54.180
我们需要做的是

04:54.180 --> 04:56.380
它是否已经保存

04:56.380 --> 04:58.780
如果它已经属于那个

04:58.780 --> 05:00.580
我点击过喜欢了

05:00.580 --> 05:02.580
那么就应该显示这个内容

05:02.580 --> 05:04.080
如果我现在没有喜欢

05:04.080 --> 05:04.980
应该显示这个

05:04.980 --> 05:06.280
允许我进行点击

05:06.280 --> 05:07.980
变成以喜欢

05:07.980 --> 05:09.480
那我们现在来看一下

05:09.480 --> 05:11.780
它是怎么样的一个操作呢

05:11.780 --> 05:13.780
首先这条数据是没有问题

05:13.780 --> 05:15.880
我们可以正常地读取

05:15.880 --> 05:18.280
那么喜欢与不喜欢呢

05:18.280 --> 05:19.980
我们有一个表

05:19.980 --> 05:21.580
我们有一个

05:21.580 --> 05:24.280
这个叫做collector demo

05:24.280 --> 05:26.080
怎么样叫做喜欢呢

05:26.080 --> 05:28.580
喜欢是你个人的行为

05:28.580 --> 05:30.280
同样我看到这个

05:30.280 --> 05:31.180
可能我不喜欢

05:31.180 --> 05:32.280
你看到这个可能喜欢

05:32.280 --> 05:34.980
所以下面这块的显示是不一样的

05:34.980 --> 05:36.980
那么这就应该在这个表里面

05:36.980 --> 05:38.980
我们存住两个字

05:38.980 --> 05:40.280
你看啊

05:40.280 --> 05:40.980
这表里面

05:40.980 --> 05:43.680
首先它有个id

05:43.680 --> 05:47.080
这个id其实就是我们现在

05:47.080 --> 05:49.780
我们到这来看

05:49.780 --> 05:53.380
我们去打开它一下

05:53.380 --> 05:55.680
我们有一个collection demo

05:55.680 --> 05:57.080
这里面的这个id

05:57.080 --> 06:01.080
其实是我们现在这条记录的id

06:01.080 --> 06:03.280
是这条记录的id

06:03.280 --> 06:05.380
它不是自动生成的

06:05.380 --> 06:06.580
第二条呢

06:06.580 --> 06:09.580
是我们这边有一个open id

06:09.580 --> 06:12.080
这个open id是谁

06:12.080 --> 06:13.580
那就意味着

06:13.580 --> 06:15.080
如果是我

06:15.080 --> 06:16.980
我喜欢了这条记录

06:16.980 --> 06:19.280
那应该是在这个表里

06:19.280 --> 06:20.580
有我的open id

06:20.580 --> 06:22.880
还有这条记录的id

06:22.880 --> 06:24.380
理解吧

06:24.380 --> 06:27.180
那我如果喜欢了五个贴子

06:27.180 --> 06:28.780
就应该这张表中

06:28.780 --> 06:31.680
有五条记录是我的open id

06:31.680 --> 06:37.780
有五个id是我们的topic话题id

06:37.780 --> 06:39.480
那么这张表随便你有多少记录

06:39.480 --> 06:41.480
凡是我要看我的

06:41.480 --> 06:45.080
那都是以open id和id的方式取

06:45.080 --> 06:45.880
对吧

06:45.880 --> 06:48.780
那么取出来如果说我们说

06:48.780 --> 06:50.780
这条记录存在

06:50.780 --> 06:52.680
这条记录存在的话

06:52.680 --> 06:55.480
那我们就把这个颜色改变一下

06:55.480 --> 06:57.080
改变颜色的方式

06:57.080 --> 06:59.080
其实就是在界面中

06:59.080 --> 07:03.180
我们有一个做一个列表渲染

07:03.180 --> 07:06.080
到底呈现这一块还是这一块

07:06.080 --> 07:07.480
对吧

07:07.480 --> 07:08.980
这个思路如果理通了

07:08.980 --> 07:11.380
那我们现在回过头来

07:11.380 --> 07:14.380
我们得回到界面中

07:14.380 --> 07:16.680
整个这一块喜欢于不喜欢

07:16.680 --> 07:17.680
为喜欢

07:17.680 --> 07:20.180
它其实是在哪里做呢

07:20.180 --> 07:22.480
它甚至我现在需要进入到

07:22.480 --> 07:23.780
我现在需要进入到

07:23.780 --> 07:26.280
当前的整页面中的时候

07:26.280 --> 07:27.080
那就是说

07:27.080 --> 07:32.580
它应该也是在我们的生命周期里面

07:32.580 --> 07:36.480
生命周期我们是查找到了这条记录

07:36.480 --> 07:37.280
对吧

07:37.280 --> 07:39.080
只要记录我们是ok拿到了

07:39.080 --> 07:40.080
紧接着

07:40.080 --> 07:41.680
我们应该在这里

07:41.680 --> 07:43.780
在它记录拿到以后

07:43.780 --> 07:48.490
我们继续往下走

07:48.490 --> 07:49.490
记录拿到以后

07:49.490 --> 07:50.790
我们继续往下走

07:50.790 --> 07:55.060
就是获取

07:55.060 --> 07:56.460
收藏

07:56.460 --> 08:02.950
或者称之为喜欢的状态

08:02.950 --> 08:05.150
db

08:05.150 --> 08:10.480
collection

08:10.480 --> 08:16.460
collection demo

08:16.460 --> 08:18.760
我们拿where

08:18.760 --> 08:21.760
里面首先我们有一个

08:21.760 --> 08:22.860
OpenID

08:22.860 --> 08:23.860
它拿哪个呢

08:23.860 --> 08:25.960
我们前面已经记录下来了

08:25.960 --> 08:28.960
是不是在State里面的OpenID

08:28.960 --> 08:34.240
所以应该是

08:34.240 --> 08:42.040
this.state.openID

08:42.040 --> 08:42.840
第二

08:42.840 --> 08:44.740
它有一个下桿ID

08:44.740 --> 08:47.740
这是哪条记录

08:47.740 --> 08:49.840
所以

08:49.840 --> 08:57.340
this.state.id

08:57.340 --> 08:59.140
我们拿到这两个数据

08:59.140 --> 09:04.600
然后我们直接做get

09:04.600 --> 09:07.300
直接做get

09:07.300 --> 09:16.730
我们把数据拿下来

09:16.730 --> 09:19.430
用返回参数

09:19.430 --> 09:21.830
返回函数的res

09:21.830 --> 09:24.630
来得到这个值

09:24.630 --> 09:26.130
我们来看一下

09:26.130 --> 09:27.630
这个res的返回

09:27.630 --> 09:29.830
它的结构

09:29.830 --> 09:31.830
我这边得写一下

09:31.830 --> 09:37.440
这边我们称之为selector

09:37.440 --> 09:46.850
不是selection

09:46.850 --> 09:49.850
我们的select demo result返回结果

09:49.850 --> 09:56.760
我们来看一下

09:56.760 --> 09:57.960
点击这条记录

09:57.960 --> 10:02.100
因为这条记录我肯定是没有存过

10:02.100 --> 10:03.300
所以我们看它的返回

10:03.300 --> 10:05.700
究竟是一个什么结构

10:05.700 --> 10:07.700
这来了

10:07.700 --> 10:08.600
它返回给我

10:08.600 --> 10:11.100
现在这个data里面是0

10:11.100 --> 10:12.400
data里面代表的是

10:12.400 --> 10:14.700
现在我没有查到记录

10:14.700 --> 10:15.600
是吧

10:15.600 --> 10:16.900
我没有查到记录

10:16.900 --> 10:18.000
它真的是

10:18.000 --> 10:19.500
那么一旦有数据的话

10:19.500 --> 10:20.800
那就代表着这条记录

10:20.800 --> 10:23.300
现在应该是1

10:23.300 --> 10:25.700
是这个意思

10:25.700 --> 10:27.800
那我们现在回来

10:27.800 --> 10:30.100
它是在data里面的数值

10:30.100 --> 10:31.600
我们不需要拿出来

10:31.600 --> 10:32.900
我们只需要知道

10:32.900 --> 10:36.830
有没有这个值存在

10:36.830 --> 10:40.530
res.data.length

10:40.530 --> 10:42.930
如果它大于0

10:42.930 --> 10:46.130
那么我们这边写的是that点

10:46.130 --> 10:47.230
然后我们这样

10:47.230 --> 10:48.230
如果它大于0

10:48.230 --> 10:51.030
那就代表着

10:51.030 --> 10:59.080
有保存此数据

10:59.080 --> 11:02.780
不然

11:02.780 --> 11:05.800
5

11:05.800 --> 11:06.600
它不叫保存

11:06.600 --> 11:10.500
它叫喜欢

11:10.500 --> 11:16.900
为喜欢此数据

11:16.900 --> 11:19.300
那么无论有喜欢和为喜欢

11:19.300 --> 11:21.900
我们都可以单独的

11:21.900 --> 11:23.800
再调起一个方法

11:23.800 --> 11:27.900
我们叫refresh

11:28.100 --> 11:33.590
like icon

11:33.590 --> 11:35.890
refresh like icon

11:35.890 --> 11:37.590
然后我们在这边

11:37.590 --> 11:38.890
我们直接去data

11:38.890 --> 11:43.330
它会接收一个参数的

11:43.330 --> 11:45.130
我们如果正常的情况下

11:45.130 --> 11:47.230
我们应该是

11:47.230 --> 11:50.840
我们这边写个that

11:50.840 --> 12:00.210
拿它的refresh like icon

12:00.210 --> 12:04.240
给它一个true

12:04.240 --> 12:06.940
refresh like icon

12:06.940 --> 12:09.440
给它一个force

12:09.440 --> 12:12.040
那么它在接收这个参数的时候

12:12.040 --> 12:14.040
我们需要做一个事

12:14.040 --> 12:29.380
你到底是否是喜欢的一个is like

12:29.380 --> 12:31.680
然后把它我们说一下

12:31.680 --> 12:39.260
直接把这个true跟force存到我们的

12:39.260 --> 12:42.160
存储到哪里呢

12:42.160 --> 12:44.160
data里面

12:44.160 --> 12:45.960
我们要拿这个值

12:45.960 --> 12:48.960
到待会儿的在循环页面的时候

12:48.960 --> 12:49.860
来看

12:49.860 --> 12:51.760
来循环到底判断

12:51.860 --> 12:53.960
哪个显示的

12:53.960 --> 12:54.960
所以

12:54.960 --> 12:59.470
this.state

12:59.470 --> 13:01.870
然后

13:01.870 --> 13:03.970
里面有一个is like

13:03.970 --> 13:06.270
我们就写成当前的这个

13:06.270 --> 13:09.240
is like

13:09.240 --> 13:25.650
我们直接写下了

13:25.650 --> 13:29.350
那么这边就是这个is like

13:29.350 --> 13:31.050
我们传进来true跟force

13:31.050 --> 13:35.170
所以我们这边直接给它改变了

13:35.170 --> 13:39.770
紧接着我们现在要去到页面中

13:39.770 --> 13:42.670
我们把这个is like作为我的判断条件

13:42.670 --> 13:45.670
因为这边会传true跟force进来

13:45.670 --> 13:46.970
在判断条件的时候

13:46.970 --> 13:48.270
我们可以做

13:48.270 --> 13:49.970
到底你是显示上面一个

13:49.970 --> 13:51.570
还是喜欢下面一个

13:51.570 --> 13:53.070
我们有两个对吧

13:53.070 --> 14:01.160
所以我们在这边要做

14:01.160 --> 14:02.560
我们这边可以这样写

14:02.560 --> 14:04.960
你看着我

14:04.960 --> 14:11.160
this.state.is like

14:11.160 --> 14:12.260
我们这样写

14:12.260 --> 14:15.660
如果true的话

14:15.760 --> 14:17.560
如果true的话

14:17.560 --> 14:18.960
那我们就应该显示

14:18.960 --> 14:27.390
以喜欢

14:27.390 --> 14:31.780
不然我们显示

14:31.780 --> 14:35.780
不然在这

14:35.780 --> 14:36.680
不然我们显示

14:36.680 --> 14:43.300
为喜欢

14:43.300 --> 14:49.760
以这样的结构来

14:49.760 --> 14:51.760
我们用三目的方式

14:51.760 --> 14:54.260
把两个jaxxr表达是

14:54.260 --> 14:57.260
欠在两个显示结构中

14:57.260 --> 14:58.060
那这样的话

14:58.060 --> 15:00.360
我根据前面is like的环境

15:00.360 --> 15:03.060
我们来对它进行显示结构

15:03.060 --> 15:10.400
我们来看一下页面

15:10.400 --> 15:16.300
点进来

15:16.400 --> 15:17.900
是不是就一个

15:17.900 --> 15:19.800
是不是就一个显示出来了

15:19.800 --> 15:20.400
对吧

15:20.400 --> 15:22.300
然后如果这条纪录

15:22.300 --> 15:25.000
它的确存在着我们这个里面

15:25.000 --> 15:27.300
那我们打开看一下

15:27.300 --> 15:30.400
我们把这个

15:30.400 --> 15:32.300
这个数据

15:32.300 --> 15:34.200
这个数据里面

15:34.200 --> 15:34.900
但是没有

15:34.900 --> 15:35.700
如果有的话

15:35.700 --> 15:37.400
我们就可以拿到这个数据出来

15:37.400 --> 15:38.400
是吧

15:38.400 --> 15:39.000
好

15:39.000 --> 15:40.100
那么这样的话

15:40.100 --> 15:42.300
我们就可以对它进行

15:42.300 --> 15:44.000
如果点喜欢和非喜欢

15:44.000 --> 15:47.600
我们对它进行修改和保存

15:47.600 --> 15:48.200
好

15:48.200 --> 15:51.000
那么首先至少这个页面这边出来了

15:51.000 --> 15:55.100
这个喜欢与非喜欢的整个显示

15:55.100 --> 15:57.100
然后我们紧接着

15:57.100 --> 15:59.000
我们现在觉得它我觉得挺不好

15:59.000 --> 15:59.700
我要喜欢

15:59.700 --> 16:01.400
那么就点一下这个喜欢

16:01.400 --> 16:03.200
需要使

16:03.200 --> 16:03.700
对吧

16:03.700 --> 16:07.500
我们意味着我们需要对整个这个数据

16:07.500 --> 16:11.100
进行有一个点击操作

16:11.100 --> 16:12.400
不喜欢也是要点击

16:12.400 --> 16:13.600
首先我们在喜欢上

16:13.600 --> 16:19.040
我们来做一个

16:19.040 --> 16:19.740
喜欢

16:19.740 --> 16:25.740
我上面我就是想点一个on click

16:25.740 --> 16:33.410
当前的on like click

16:33.410 --> 16:42.180
我们把它放上去

16:42.180 --> 16:50.480
这叫做喜欢

16:50.480 --> 16:50.780
好

16:50.780 --> 16:52.980
那我们接下来我们要做一下

16:52.980 --> 16:54.480
当我觉得这个不错

16:54.480 --> 16:56.280
我要点喜欢的时候

16:56.280 --> 16:59.870
那么这应该怎么样

16:59.870 --> 17:01.570
那么我们首先

17:01.570 --> 17:04.470
我们需要去接收一个参数

17:04.470 --> 17:07.470
就是你如果点喜欢的话

17:07.570 --> 17:09.270
那么我们说一下

17:09.270 --> 17:10.370
喜欢的话

17:10.370 --> 17:14.770
我需要知道你当前是对哪一篇的喜欢

17:14.770 --> 17:15.370
对吧

17:15.370 --> 17:17.770
我需要知道你对哪一篇的喜欢

17:17.770 --> 17:19.570
我需要拿一个参数

17:19.570 --> 17:21.770
这个参数是你是否喜欢

17:21.770 --> 17:22.770
有两种做法

17:22.770 --> 17:23.670
我们说

17:23.670 --> 17:24.470
第一种的话

17:24.470 --> 17:27.170
你在这边直接再传一个

17:27.170 --> 17:28.970
我们的 is like 进去

17:28.970 --> 17:30.070
你在这边

17:30.070 --> 17:31.170
我们说

17:31.170 --> 17:35.370
这个位置其实和我们在上面这边做

17:35.370 --> 17:37.670
这两个操作是一样的

17:37.670 --> 17:40.470
我们这边可以传这个 is like 进去

17:40.470 --> 17:41.970
那么第二种

17:41.970 --> 17:43.970
由于他们在本页面中

17:43.970 --> 17:45.770
所以要不你传参

17:45.770 --> 17:48.870
要不你直接到这个 is like

17:48.870 --> 17:53.070
这个 on like 里面去获参

17:53.070 --> 17:54.070
获参呢

17:54.070 --> 18:01.170
就是说你是直接从 state 里面拿

18:01.170 --> 18:04.370
这个叫做 is like

18:04.370 --> 18:05.970
你去拿出来

18:05.970 --> 18:08.870
所以我们在这里面你是可以拿到的话

18:08.870 --> 18:11.170
我们就可以不传那个参进来了

18:11.170 --> 18:13.070
但是同样这个

18:13.070 --> 18:14.970
函数或者说这个事件

18:14.970 --> 18:18.470
他需要这个参数使用

18:18.470 --> 18:26.970
this.stater.is like

18:26.970 --> 18:36.110
你来看啊

18:36.110 --> 18:40.310
先进到这个页面位置

18:40.310 --> 18:41.810
然后呢

18:41.810 --> 18:43.110
我们对他进点击

18:43.110 --> 18:45.310
是不是他可以拿到这个字

18:45.310 --> 18:47.910
那这样我就可以不传了

18:47.910 --> 18:49.110
他可以拿到的话

18:49.110 --> 18:51.110
我们就做判别了

18:51.110 --> 18:53.010
我们可以做判别了

18:53.010 --> 18:54.710
我们有两个方法

18:54.710 --> 19:00.210
如果 this.stater.is like

19:00.210 --> 19:02.010
他为 true 的话

19:02.010 --> 19:04.110
那代表已经喜欢

19:04.110 --> 19:06.010
已喜欢

19:06.010 --> 19:09.710
所以我们要做的是取消

19:09.710 --> 19:12.640
收藏

19:12.640 --> 19:14.940
不然

19:15.040 --> 19:16.740
这边我们要说的是

19:16.740 --> 19:19.240
添加收藏

19:19.240 --> 19:25.970
对吧

19:25.970 --> 19:28.810
那么这边来

19:28.810 --> 19:30.610
that.stater.is like

19:30.610 --> 19:34.910
我们这边可以直接用 this 来写一个

19:34.910 --> 19:44.690
remove from server

19:44.690 --> 19:46.590
this.stater.is like

19:46.590 --> 19:52.360
save to server

19:52.360 --> 20:05.730
我们写两个方法出来

20:05.730 --> 20:17.670
这是取消收藏

20:17.670 --> 20:22.900
添加收藏

20:22.900 --> 20:23.900
我们就判断

20:23.900 --> 20:25.900
如果你现在是属于

20:25.900 --> 20:28.500
这样的一个状态下注

20:28.500 --> 20:29.600
取消

20:29.600 --> 20:32.100
然后 false 添加

20:32.100 --> 20:33.000
是吧

20:33.000 --> 20:35.300
这个还是比较简单吧

20:35.300 --> 20:37.100
那么首先我们来说

20:37.100 --> 20:39.100
我现在是

20:39.100 --> 20:40.300
添加收藏

20:40.300 --> 20:42.300
因为我现在是黑的嘛

20:42.300 --> 20:43.300
黑的表示

20:43.300 --> 20:45.400
我没有喜欢需要添加

20:45.400 --> 20:50.540
所以我们在 save 里面写

20:50.540 --> 20:52.440
db

20:52.440 --> 20:55.480
点

20:55.480 --> 21:04.170
collection

21:04.170 --> 21:05.470
collect demo

21:05.470 --> 21:10.760
我们做 add 添加

21:10.760 --> 21:13.160
添加里面的一个数据

21:13.160 --> 21:15.060
首先下滑线

21:15.060 --> 21:17.060
我们要加的是什么呢

21:17.060 --> 21:19.260
加的是当前

21:19.260 --> 21:21.760
在 stater 里面所存着的

21:21.760 --> 21:23.360
这个 id

21:23.360 --> 21:24.860
你是哪一条记录

21:24.860 --> 21:26.260
是吧

21:26.260 --> 21:28.360
所以我们在这边写上

21:28.360 --> 21:34.460
this.stater 下面的 id

21:34.460 --> 21:37.460
由于我的 open id 是自动生成的

21:37.460 --> 21:39.560
所以我不需要去关心它

21:39.560 --> 21:45.140
我只要把现在的时间写上去就可以了

21:45.140 --> 21:46.640
这样写

21:46.640 --> 21:47.740
对吧

21:47.740 --> 21:50.140
我需要这样写就可以了

21:50.140 --> 21:50.840
记住哦

21:50.840 --> 21:52.240
open id 不是你这边

21:52.240 --> 21:54.640
你自己往上写的

21:54.640 --> 21:56.140
你需要的是

21:56.140 --> 21:58.140
你把这两个加好以后

21:58.140 --> 22:02.600
open id 自动生成的

22:02.600 --> 22:05.500
success

22:05.500 --> 22:08.600
res

22:08.600 --> 22:10.000
conceler log

22:10.000 --> 22:11.200
res

22:11.200 --> 22:12.000
我们来看一下

22:12.000 --> 22:13.300
一旦插入成功以后

22:13.300 --> 22:14.900
我们应该获知

22:14.900 --> 22:21.940
这个返回新记录

22:21.940 --> 22:24.140
id

22:24.140 --> 22:26.640
然后一旦你这边成功了

22:26.640 --> 22:28.840
代表我数据已经加入了

22:28.840 --> 22:30.340
那我界面中

22:30.340 --> 22:32.140
应该把那个

22:32.140 --> 22:34.540
喜欢变成已喜欢

22:34.540 --> 22:38.140
并且把那个新变成红色

22:38.140 --> 22:40.340
所以我需要

22:40.340 --> 22:41.640
重新

22:41.640 --> 22:43.440
去刷新

22:43.440 --> 22:44.740
切换

22:44.740 --> 22:48.520
我的喜欢图标

22:48.520 --> 22:48.920
对吧

22:48.920 --> 22:50.620
应该是这个逻辑

22:50.720 --> 22:54.620
那么喜欢图标的切换是在哪里

22:54.620 --> 22:56.820
是不是我们现在的

22:56.820 --> 22:59.620
那个refresh是他

22:59.620 --> 23:00.220
对吧

23:00.220 --> 23:01.020
我现在给他穿

23:01.020 --> 23:01.320
tru

23:01.320 --> 23:02.420
那么他就是tru

23:02.420 --> 23:03.220
他说force

23:03.220 --> 23:04.420
他就是force

23:04.420 --> 23:06.120
而传完这个以后呢

23:06.120 --> 23:08.020
那我界面就会根据这个

23:08.020 --> 23:09.720
来展示

23:09.720 --> 23:11.520
所以我重新调用一下

23:11.520 --> 23:16.670
refresh like icon

23:16.670 --> 23:26.000
我们这边写一个

23:26.000 --> 23:28.700
refresh like icon

23:28.700 --> 23:29.900
tru

23:29.900 --> 23:33.340
这样写

23:33.340 --> 23:41.690
好我们来先来看看效果

23:41.690 --> 23:48.510
这篇内容点进去

23:48.510 --> 23:49.810
先不用关心其他

23:49.810 --> 23:51.310
这边有这个

23:51.310 --> 23:54.110
同时先看一下数据库

23:54.110 --> 23:55.010
我们select里面

23:55.010 --> 23:58.210
这三条记录我先删掉

23:58.210 --> 24:01.840
这是我们以前的

24:01.840 --> 24:03.240
以前测试手用的

24:03.240 --> 24:04.340
然后我们现在你看

24:04.340 --> 24:05.340
这表里没有数据

24:05.340 --> 24:06.940
ok

24:06.940 --> 24:08.140
紧接着

24:08.140 --> 24:09.540
点一下

24:09.540 --> 24:10.140
看

24:10.140 --> 24:12.640
他马上变成已喜欢了

24:12.640 --> 24:15.940
同时这条记录也被记录好了

24:15.940 --> 24:17.040
我们到数据库里看一下

24:17.040 --> 24:20.160
刚才我已经删完了

24:20.160 --> 24:22.360
是不是这边有一条了

24:22.360 --> 24:22.960
对吧

24:22.960 --> 24:24.460
然后这里面的id

24:24.460 --> 24:27.860
其实就是我现在这条信息的id

24:27.860 --> 24:29.060
这个overid

24:29.060 --> 24:32.760
是我自己在添加这条记录手系统给我增加的

24:32.760 --> 24:35.160
这是我现在的一个时间

24:35.160 --> 24:36.160
这样导致的是

24:36.160 --> 24:38.260
我们就能够很容易的

24:38.260 --> 24:40.660
把你现在的这个变成

24:40.660 --> 24:41.960
已喜欢状态

24:41.960 --> 24:43.360
而已喜欢状态

24:43.360 --> 24:45.160
它是什么样的显示呢

24:45.160 --> 24:47.060
我们经过重新刷新

24:47.060 --> 24:48.860
把里面的as like

24:48.860 --> 24:52.060
我们变成了我们现在的true

24:52.060 --> 24:54.060
而它变true的特点是

24:54.060 --> 24:55.960
我在下面做判别

24:55.960 --> 24:58.760
我们做js表达式的输出的时候

24:58.760 --> 24:59.560
为true

24:59.560 --> 25:02.260
那么前面这个被渲染

25:02.260 --> 25:03.460
那么前面这个

25:03.460 --> 25:06.960
就是已喜欢的红色星

25:06.960 --> 25:08.360
是这个逻辑

25:08.360 --> 25:09.360
但是你看到吗

25:09.360 --> 25:11.260
我这边还做了一个

25:11.260 --> 25:14.560
我们做了一继续是同样的这个世界

25:14.560 --> 25:15.860
怎么样这个世界里面呢

25:15.860 --> 25:17.560
我们不是做了第二套吗

25:17.560 --> 25:19.460
就是你觉得你喜欢

25:19.460 --> 25:20.360
那么你就ok

25:20.360 --> 25:21.360
可以读取

25:21.360 --> 25:22.560
但是你不喜欢的话

25:22.560 --> 25:24.860
你可以通过取消

25:24.860 --> 25:25.560
是吧

25:25.560 --> 25:28.860
那我们现在把取消这个代码也做一下

25:28.860 --> 25:30.060
取消在这

25:30.060 --> 25:36.970
我们写出

25:36.970 --> 25:38.970
你需要去连接到数据库

25:38.970 --> 25:40.070
对吧

25:40.070 --> 25:47.900
collection demo

25:48.000 --> 25:49.000
此时

25:49.000 --> 25:52.700
你需要去找到这条数据

25:52.700 --> 25:54.700
那么doc

25:54.700 --> 26:00.660
我们用doc去找

26:00.660 --> 26:01.860
这条数据呢

26:01.860 --> 26:05.060
它是在当前的

26:05.060 --> 26:10.250
stater里面的这个id

26:10.250 --> 26:12.450
然后找到它以后的话呢

26:12.450 --> 26:13.250
remove

26:13.250 --> 26:19.840
移除掉它

26:19.840 --> 26:21.040
移除掉以后的话

26:21.040 --> 26:22.040
我们用这个来写

26:22.040 --> 26:29.100
res

26:29.100 --> 26:31.900
我们在这里面就可以告诉它

26:31.900 --> 26:38.930
我们可以写上移除

26:38.930 --> 26:47.140
移除

26:47.140 --> 26:48.740
然后

26:48.740 --> 26:56.440
res

26:56.440 --> 27:01.980
重新刷新

27:01.980 --> 27:06.760
is like

27:06.760 --> 27:09.960
that点

27:09.960 --> 27:13.660
那个方法就是refresh

27:13.660 --> 27:15.260
icon

27:15.260 --> 27:17.060
给它应该是

27:17.060 --> 27:19.560
force

27:19.560 --> 27:21.460
因为我们下面这边给的是true

27:21.460 --> 27:24.460
所以这边给的是force

27:24.460 --> 27:26.060
然后这样就是让它

27:26.060 --> 27:27.960
不再是我现在的

27:27.960 --> 27:30.960
一个

27:30.960 --> 27:34.600
喜欢状态

27:34.600 --> 27:39.680
再来看一下

27:39.680 --> 27:46.970
先刷新一下

27:46.970 --> 27:48.870
现在我进去以后的话

27:48.870 --> 27:50.670
你看到的应该是

27:50.670 --> 27:52.670
红色的那一块

27:52.670 --> 27:54.470
因为我前面已经点过了

27:54.470 --> 27:54.970
对吧

27:54.970 --> 27:55.970
你喜欢

27:55.970 --> 27:57.870
我前面已经点过了

27:57.870 --> 27:58.570
然后的话呢

27:58.570 --> 28:00.070
它现在就是以喜欢的

28:00.070 --> 28:02.770
也就数据库查出来数据是一个

28:02.770 --> 28:04.470
那个true

28:04.470 --> 28:07.070
但我现在再次点击它的时候的话

28:07.070 --> 28:08.870
那么它就会自己变回来

28:08.870 --> 28:10.170
看到吗

28:10.170 --> 28:11.170
变回来的时候

28:11.170 --> 28:13.670
我们再去到云端查一下

28:13.670 --> 28:17.370
变回就意味着这条数据没有了

28:17.370 --> 28:18.670
再喜欢

28:18.670 --> 28:20.070
又变过去了

28:20.070 --> 28:21.070
这时候

28:21.070 --> 28:22.870
你的数据又被添加了

28:22.870 --> 28:23.670
是吧

28:23.670 --> 28:25.470
整个这条纪录其实是

28:25.470 --> 28:26.670
比较简单在这边

28:26.670 --> 28:27.870
我们可以很简单的

28:27.870 --> 28:28.970
去这么样的

28:28.970 --> 28:30.370
一个操作

28:30.370 --> 28:31.270
我们使其

28:31.270 --> 28:32.170
能够看到

28:32.170 --> 28:33.970
喜欢和未喜欢

28:33.970 --> 28:34.770
OK

28:34.770 --> 28:35.770
这是我们现在的

28:35.770 --> 28:36.370
那么你说老师

28:36.370 --> 28:38.670
我喜欢以后能够干吗

28:38.770 --> 28:41.170
喜欢以后其实是我们之后

28:41.170 --> 28:42.670
会在哪里呢

28:42.670 --> 28:44.970
会在我的收藏列表里面

28:44.970 --> 28:48.170
我们能看到你所有喜欢的纪录

28:48.170 --> 28:49.170
理解吧

28:49.170 --> 28:50.970
这边如果又非常多的数据

28:50.970 --> 28:52.870
那到底哪条是你喜欢过的

28:52.870 --> 28:53.770
没喜欢过呢

28:53.770 --> 28:55.370
就是在我的的

28:55.370 --> 28:57.170
收藏列表里看到

28:57.170 --> 28:57.970
对吧

28:57.970 --> 28:58.870
那么你同时

28:58.870 --> 29:00.370
你点击任何一条纪录

29:00.370 --> 29:01.270
如果不喜欢

29:01.270 --> 29:02.970
就是这样的情况

29:02.970 --> 29:04.270
如果你现在喜欢

29:04.270 --> 29:05.070
那么进去以后

29:05.070 --> 29:07.470
它就形成这样的一个结构

29:07.470 --> 29:08.070
理解吧

29:08.070 --> 29:08.770
OK

29:08.770 --> 29:10.370
那么这是我们这边

29:10.370 --> 29:12.370
大家看到的一个情况

29:12.370 --> 29:13.170
同时呢

29:13.170 --> 29:14.670
我们在这个界面中

29:14.670 --> 29:16.170
我们还有第二个部分

29:16.170 --> 29:17.570
就是回复

29:18.470 --> 29:19.070
回复

29:20.070 --> 29:21.470
我们来看一下

29:21.470 --> 29:22.970
所谓的回复

29:22.970 --> 29:23.870
其实

29:23.870 --> 29:26.170
它也是做一个界面

29:26.170 --> 29:27.270
只不过呢

29:27.270 --> 29:28.970
这个界面相对而言

29:28.970 --> 29:30.570
比较简单

29:30.570 --> 29:33.570
就是一个简单的

29:33.570 --> 29:34.470
输入框

29:34.470 --> 29:37.370
加上一个发表评论

29:37.370 --> 29:38.970
那么它可以添加到

29:38.970 --> 29:40.270
我们现在的

29:40.270 --> 29:41.170
所谓的

29:41.170 --> 29:44.270
一个当前这条纪录里面去

29:44.270 --> 29:46.170
是这个逻辑

29:46.170 --> 29:47.370
首先我们找到

29:47.370 --> 29:50.170
我们回复放在了最后

29:50.170 --> 29:51.210
回复上面有个

29:51.210 --> 29:54.370
unreply click

29:54.370 --> 29:56.370
我们直接到上面来

29:56.370 --> 29:58.770
unreply click

29:58.770 --> 30:00.270
unreply click里面

30:00.270 --> 30:02.570
我们需要做的在这里

30:02.570 --> 30:04.670
并不是unreply click

30:04.670 --> 30:06.570
所要做的最多的事情

30:06.570 --> 30:07.570
而是

30:07.570 --> 30:08.570
我们需要

30:08.570 --> 30:11.470
用到的是让它能够

30:11.470 --> 30:13.270
呃

30:13.270 --> 30:23.970
进行帮助我们跳转

30:23.970 --> 30:25.870
跳转

30:25.870 --> 30:28.370
跳转到我们的一个新页面

30:28.370 --> 30:29.270
那个页面

30:29.270 --> 30:31.670
专门是做

30:31.670 --> 30:33.770
那个所谓的

30:33.770 --> 30:35.870
评论的

30:35.870 --> 30:38.070
我们称之为回复

30:38.070 --> 30:42.680
never get true

30:42.680 --> 30:47.860
url

30:47.860 --> 30:49.160
我们来

30:49.160 --> 30:51.360
我们在当前目录下

30:51.360 --> 30:52.960
我们去找一个

30:52.960 --> 30:59.580
叫做reply

30:59.580 --> 31:00.780
这个文件

31:00.780 --> 31:01.280
然后呢

31:01.280 --> 31:02.580
我们给它传参

31:02.580 --> 31:09.530
id等于

31:09.530 --> 31:11.230
当前的

31:11.230 --> 31:15.030
stater里面的id

31:15.030 --> 31:17.800
语上

31:17.800 --> 31:23.790
open id等于

31:23.790 --> 31:26.600
当前的

31:26.600 --> 31:28.800
stater下面的

31:28.800 --> 31:31.640
open id

31:31.640 --> 31:32.840
你通过这个方式

31:32.840 --> 31:34.740
把它传送过去

31:34.740 --> 31:36.440
那我们在当前页面下面

31:36.440 --> 31:53.200
我们就建一个reply

31:53.200 --> 31:54.200
reply

31:54.200 --> 31:58.810
jsxreply css

31:58.810 --> 31:59.210
好

31:59.210 --> 32:20.090
把界面咱们定义一下

32:20.090 --> 32:22.490
import

32:22.490 --> 32:24.690
view

32:24.690 --> 32:36.680
component

32:36.680 --> 32:37.480
expert

32:37.480 --> 32:38.380
default

32:38.380 --> 32:41.220
class

32:41.220 --> 32:42.420
terror

32:42.420 --> 32:42.820
呃

32:42.820 --> 32:45.220
我们做的是

32:45.220 --> 32:47.620
reply

32:47.620 --> 32:56.060
extends

32:56.060 --> 33:01.700
我们计成component

33:01.700 --> 33:03.700
然后在这个环节上面

33:03.700 --> 33:09.220
我们本身这边就可以给它执行的是

33:09.220 --> 33:09.820
random

33:09.820 --> 33:21.540
把框架打完

33:21.540 --> 33:35.420
constructure

33:35.420 --> 33:44.370
configure

33:44.370 --> 33:48.100
state

33:48.100 --> 33:49.300
component

33:49.300 --> 33:54.990
did a show

33:54.990 --> 33:55.590
好

33:55.590 --> 33:56.690
首先把

33:56.690 --> 33:58.790
configure里面的内容

33:58.790 --> 34:09.580
我们从其他一个页面拿过来

34:09.580 --> 34:11.380
社交圈

34:11.380 --> 34:12.580
第二部分

34:12.580 --> 34:15.280
我们现在在当前页面中

34:15.280 --> 34:18.280
你需要做一些简单的布局

34:18.280 --> 34:19.580
我们首先第一步

34:19.580 --> 34:21.680
我们先让它跳转过来

34:21.680 --> 34:24.080
看是否能到这个界面

34:24.080 --> 34:26.580
我们让当前

34:26.580 --> 34:27.980
保存一下

34:27.980 --> 34:29.980
但是由于我们没有在

34:29.980 --> 34:33.580
app.gxx里面进行注册

34:33.580 --> 34:35.780
所以它没法进行获取

34:35.780 --> 34:40.440
我们在这里注册一下

34:40.440 --> 34:41.240
friend

34:41.240 --> 34:44.870
下面的reply

34:44.870 --> 34:45.870
注册一下

34:45.870 --> 34:46.670
注册好以后

34:46.670 --> 34:47.970
它就直接可以通过

34:47.970 --> 34:50.370
刚才我们的前面的跳转

34:50.370 --> 34:53.070
跑到这个页面来

34:53.070 --> 34:56.070
直接应该可以过来了

34:56.070 --> 34:57.370
那么当它过来以后的话

34:57.370 --> 34:59.370
我们后面再往下

34:59.370 --> 35:04.080
先让它编译一下

35:04.080 --> 35:04.880
编译好了

35:04.880 --> 35:05.080
好

35:05.080 --> 35:11.160
我们来打开我们的页面

35:11.160 --> 35:21.310
重新刷新一下

35:21.310 --> 35:23.010
打开了

35:23.010 --> 35:24.210
点击

35:24.210 --> 35:29.520
任何一条记录

35:29.520 --> 35:31.920
点击回复按钮

35:31.920 --> 35:32.720
看到吗

35:32.720 --> 35:35.020
现在是正常跳到reply

35:35.020 --> 35:36.320
表示这个可以做了

35:36.320 --> 35:38.420
接下去我们就来

35:38.420 --> 35:39.420
在reply页面

35:39.420 --> 35:41.520
我们做的内容相当简单

35:41.520 --> 35:43.220
我们做一个输入框

35:43.220 --> 35:45.320
然后下面写一个按钮

35:45.320 --> 35:52.570
就可以了

35:52.570 --> 35:56.630
content

35:56.630 --> 36:03.610
view

36:03.610 --> 36:07.280
text

36:07.280 --> 36:16.040
content

36:16.040 --> 36:19.070
class name

36:19.070 --> 36:21.170
import

36:21.170 --> 36:29.040
content

36:29.040 --> 36:39.180
import

36:39.180 --> 36:45.020
然后

36:45.020 --> 36:46.920
import我们是单标签

36:46.920 --> 36:51.940
所以我们在单独后面写

36:51.940 --> 37:02.450
click

37:02.450 --> 37:03.850
我们做的是

37:03.850 --> 37:04.950
不是import

37:04.950 --> 37:06.250
我们不是因为click

37:06.250 --> 37:08.450
我们做的应该是import

37:08.450 --> 37:09.950
我们看到的是

37:09.950 --> 37:11.550
它会得到你的职

37:11.550 --> 37:12.150
这样的话

37:12.150 --> 37:14.150
我们写this点

37:14.150 --> 37:23.650
bound key import

37:23.650 --> 37:29.080
place holder

37:29.080 --> 37:32.710
开始你的表演

37:32.710 --> 37:33.810
写上这样一句话

37:33.810 --> 37:35.810
随便写啥

37:35.810 --> 37:38.220
然后

37:38.220 --> 37:42.260
在当前事件中

37:42.260 --> 37:45.930
写上

37:45.930 --> 37:47.230
再次强调

37:47.230 --> 37:49.130
如果你在reactor里面的话

37:49.130 --> 37:51.930
你要这样写

37:51.930 --> 37:53.630
这样写去调用

37:53.630 --> 37:55.130
但是在我们的微信中

37:55.130 --> 37:56.630
你把贪入中的话

37:56.630 --> 37:58.730
这个可以不用

37:58.730 --> 37:59.930
这个称之为

37:59.930 --> 38:02.230
我们的获取

38:02.230 --> 38:03.730
用户

38:03.730 --> 38:07.640
输入信息

38:07.640 --> 38:09.440
待会再来

38:09.440 --> 38:16.220
继续往下

38:16.220 --> 38:19.740
view

38:19.740 --> 38:20.940
class name

38:20.940 --> 38:27.300
btn

38:27.300 --> 38:32.250
button

38:32.250 --> 38:41.020
声明注册一下

38:41.020 --> 38:43.420
class name

38:43.420 --> 38:45.420
btn

38:45.420 --> 38:50.260
bound tab

38:50.260 --> 38:52.460
save

38:52.460 --> 38:55.620
reply

38:55.620 --> 38:58.520
不能这么写

38:58.520 --> 39:01.520
这是微信直接给久了

39:01.520 --> 39:04.520
我们用unclick来写

39:04.520 --> 39:08.860
this点

39:08.860 --> 39:11.960
save reply

39:11.960 --> 39:19.620
OK吧

39:19.620 --> 39:19.920
好

39:19.920 --> 39:21.820
我们紧接着继续

39:21.820 --> 39:34.340
我们把save reply写出来

39:34.340 --> 39:35.940
它是发布评论

39:35.940 --> 39:36.740
把这按钮

39:36.740 --> 39:38.640
我们这边写上一个

39:38.640 --> 39:40.140
按钮上的字体

39:40.140 --> 39:43.730
发布评论

39:43.730 --> 39:44.930
发布回复

39:44.930 --> 39:45.530
可以

39:45.530 --> 39:47.830
这个都是可以的

39:47.830 --> 39:48.130
好

39:48.130 --> 39:49.930
我们这样写好以后

39:49.930 --> 39:52.330
我们把这个页面上面的

39:52.330 --> 39:54.230
简单几个样式过一下

39:54.230 --> 40:03.300
它也没几个东西

40:03.300 --> 40:07.160
content

40:07.160 --> 40:08.560
100%

40:08.560 --> 40:10.060
hide

40:10.060 --> 40:15.880
100%

40:15.880 --> 40:17.480
text

40:17.480 --> 40:20.740
content

40:20.740 --> 40:21.540
0

40:21.540 --> 40:25.460
25rpx

40:25.460 --> 40:27.160
import

40:27.160 --> 40:29.960
content

40:29.960 --> 40:31.260
display

40:31.260 --> 40:33.160
flex

40:33.160 --> 40:34.160
flex

40:34.160 --> 40:35.860
direction

40:35.860 --> 40:37.860
行

40:37.860 --> 40:40.960
light items

40:40.960 --> 40:43.460
center

40:43.460 --> 40:46.670
wise

40:46.670 --> 40:51.400
100%

40:51.400 --> 40:56.210
宽度

40:56.210 --> 41:03.160
light height

41:03.160 --> 41:05.870
border

41:05.870 --> 41:08.370
ridius

41:08.370 --> 41:11.760
10rpx

41:11.760 --> 41:22.070
background color

41:22.070 --> 41:24.800
package

41:24.800 --> 41:28.610
我们做一个10rpx

41:28.610 --> 41:31.180
merge

41:31.180 --> 41:32.480
40rpx

41:32.480 --> 41:38.540
0

41:38.540 --> 41:41.540
然后呢我们有个

41:41.540 --> 41:42.140
btn

41:42.140 --> 41:51.370
我们有一个btn function

41:51.370 --> 41:52.570
display

41:52.570 --> 41:54.570
flex

41:54.570 --> 41:57.710
flex direction

41:57.710 --> 42:00.010
column

42:00.010 --> 42:03.790
align content

42:03.790 --> 42:05.790
center

42:05.790 --> 42:07.090
宽度

42:07.090 --> 42:10.880
100%

42:10.880 --> 42:13.080
position

42:13.080 --> 42:18.390
absolute

42:18.390 --> 42:19.290
button

42:19.290 --> 42:21.980
0

42:21.980 --> 42:23.580
merge

42:23.580 --> 42:24.780
0

42:24.780 --> 42:29.120
o2

42:29.120 --> 42:30.120
所以还有一个

42:30.120 --> 42:40.410
就是我们的button

42:40.410 --> 42:41.910
宽度

42:41.910 --> 42:44.410
400rpx

42:44.410 --> 42:45.410
高度

42:45.410 --> 42:48.310
90rpx

42:48.310 --> 42:49.410
light

42:49.410 --> 42:51.010
height

42:51.010 --> 42:53.610
90rpx

42:53.610 --> 42:59.870
background color

42:59.870 --> 43:01.670
d50

43:01.670 --> 43:05.940
310

43:05.940 --> 43:07.840
color

43:07.840 --> 43:10.040
fff

43:10.040 --> 43:12.680
border

43:12.680 --> 43:14.180
ridius

43:14.180 --> 43:16.980
100rpx

43:16.980 --> 43:19.280
merge

43:19.280 --> 43:20.880
button

43:20.880 --> 43:23.480
40rpx

43:23.480 --> 43:25.580
好基本上我们就写到这

43:25.580 --> 43:40.200
然后呢我们来看一下页面

43:40.200 --> 43:55.610
页面重新刷新一下

43:55.610 --> 43:57.510
它页面我们先看程序

43:57.510 --> 43:58.910
程序上有问题吗

43:58.910 --> 44:01.720
生成下面

44:01.720 --> 44:02.420
没有问题

44:02.420 --> 44:05.120
那就是页面它自己又卡住了

44:05.120 --> 44:06.520
这种方式的话

44:06.520 --> 44:09.520
我们最常见的做法就是关着它

44:09.520 --> 44:18.480
重新开一下

44:18.480 --> 44:20.680
它重新开以后就会直接

44:20.680 --> 44:22.280
把之前的那些

44:22.280 --> 44:24.380
编译过程重新来一遍

44:24.380 --> 44:25.380
这样的话呢

44:25.380 --> 44:40.880
它就可以加载出来了

44:40.880 --> 44:42.680
你看是吧

44:42.680 --> 44:44.380
好首先点击第一条

44:44.380 --> 44:46.680
进到我们的详细显示

44:46.680 --> 44:48.780
这条信息的页面

44:48.780 --> 44:50.180
然后它已经有喜欢

44:50.180 --> 44:51.480
我喜欢的选择了

44:51.480 --> 44:53.380
接下来我们到回复

44:53.380 --> 44:55.380
看就是这样一个简单的

44:55.380 --> 44:57.180
我们上面做一个

44:57.180 --> 44:57.880
你的输入

44:57.880 --> 45:01.880
然后这边做一个发布回复

45:01.880 --> 45:04.380
这样一个功能就可以了

45:04.380 --> 45:07.280
那么紧接着我们来做一下

45:07.280 --> 45:12.280
首先我需要获取到现在所有的值

45:12.280 --> 45:13.080
你的操作

45:13.080 --> 45:16.580
所以key bound in part

45:16.580 --> 45:18.680
在这里面

45:18.680 --> 45:21.680
bound key in part

45:21.680 --> 45:25.580
那么我们在我们的stater里面

45:25.580 --> 45:28.880
咱们去定义一下

45:28.980 --> 45:30.180
定几个东西

45:30.180 --> 45:31.080
第一个

45:31.080 --> 45:33.480
我们的id拿过来

45:33.480 --> 45:34.880
第二个

45:34.880 --> 45:39.410
open id拿过来

45:39.410 --> 45:41.310
第三个

45:41.310 --> 45:45.990
content拿过来

45:45.990 --> 45:49.090
id open id content

45:49.090 --> 45:51.390
那么在这个过程中呢

45:51.390 --> 45:52.390
我们这两个

45:52.390 --> 45:55.190
我们其实是可以通过参数来获取的

45:55.190 --> 45:57.790
那么我们要通过这个值

45:57.790 --> 46:00.790
拿到你现在用户的输入

46:00.790 --> 46:03.190
那么就是我们刚才说的

46:03.190 --> 46:06.390
在用户输入里面

46:06.390 --> 46:10.490
this.setStater

46:10.490 --> 46:11.790
拿一下

46:11.790 --> 46:14.190
this.setStater

46:14.190 --> 46:15.390
这个拿的话呢

46:15.390 --> 46:17.090
我们里面就写上

46:17.090 --> 46:19.290
把前面的那个复制下来

46:19.290 --> 46:23.190
content往这放

46:23.190 --> 46:23.790
然后呢

46:23.790 --> 46:28.770
这后面写出的是

46:28.770 --> 46:32.260
这边有个e

46:33.260 --> 46:36.260
this.detail.value

46:36.260 --> 46:38.260
所有的值都通过这边过来

46:38.260 --> 46:44.980
我们所有的import元素的值

46:44.980 --> 46:46.980
都可以通过这个e参数的

46:46.980 --> 46:49.480
detail.value的方式拿过来

46:49.480 --> 46:51.920
这样的话呢

46:51.920 --> 46:54.420
我们这边就可以很容易的拿到了

46:54.420 --> 46:55.420
再往下

46:55.420 --> 46:56.420
再往下

46:56.420 --> 46:59.420
那么我们在unload里面

46:59.420 --> 47:00.420
或者称之为

47:00.420 --> 47:02.420
我们的component show

47:02.420 --> 47:03.420
这个结构中

47:03.420 --> 47:10.480
我们去获取用户

47:10.480 --> 47:14.820
传送过来的值

47:14.820 --> 47:32.800
router.params

47:32.800 --> 47:34.800
所以

47:34.800 --> 47:38.800
this.setStater

47:38.800 --> 47:42.780
从里面拿

47:42.780 --> 47:43.780
那么我们里面

47:43.780 --> 47:45.780
第一个id

47:45.780 --> 47:52.160
就是params.id

47:52.160 --> 47:54.160
第二个

47:54.160 --> 48:01.280
openid.params.id

48:01.280 --> 48:03.280
点

48:03.280 --> 48:05.280
openid

48:05.280 --> 48:07.280
这样

48:07.280 --> 48:09.280
当你这个值复完以后

48:09.280 --> 48:10.280
我们在这

48:10.280 --> 48:13.280
我们可以通过它的

48:13.280 --> 48:15.280
最后的这个回调

48:15.280 --> 48:16.280
来查看一下

48:16.280 --> 48:18.280
这个小库号

48:18.280 --> 48:19.280
来查看一下

48:19.280 --> 48:22.280
当前的Stater里面的状态

48:22.280 --> 48:45.460
看一下

48:45.460 --> 48:46.460
继续

48:46.460 --> 48:47.460
回到页面

48:47.460 --> 49:01.460
回复

49:01.460 --> 49:04.460
输内容

49:04.460 --> 49:07.840
123

49:07.840 --> 49:08.840
此时你看到

49:08.840 --> 49:10.840
我们现在出3的时候

49:10.840 --> 49:12.840
我们的Stater里面

49:12.840 --> 49:13.840
openid已经放好了

49:13.840 --> 49:14.840
id已经放好了

49:14.840 --> 49:16.840
content内容是123

49:16.840 --> 49:17.840
是不是

49:17.840 --> 49:18.840
那表示

49:18.840 --> 49:19.840
这些已经OK了

49:19.840 --> 49:20.840
全部弄好了

49:20.840 --> 49:22.840
我们就可以接下去

49:22.840 --> 49:24.840
我们来做后续的操作了

49:24.840 --> 49:25.840
点击回复

49:25.840 --> 49:26.840
点击回复的时候

49:26.840 --> 49:28.840
谁

49:28.840 --> 49:30.840
对哪条记录

49:30.840 --> 49:33.840
做了什么样的一个评论

49:33.840 --> 49:41.240
是不是这三者都有了

49:41.240 --> 49:42.240
已经全了

49:42.240 --> 49:43.240
谁

49:43.240 --> 49:44.240
对哪条记录

49:44.240 --> 49:46.240
做了什么样的评论

49:46.240 --> 49:48.240
所以我们只需要做的是

49:48.240 --> 49:50.240
我们把这个情况

49:50.240 --> 49:53.240
放到我们的数据库里去

49:53.240 --> 49:56.240
我们数据库有一个叫replay

49:56.240 --> 50:02.440
replay demo

50:02.440 --> 50:03.440
在这

50:03.440 --> 50:04.440
数据库有一个replay

50:04.440 --> 50:06.440
意味着是什么呢

50:06.440 --> 50:08.440
谁在什么时候

50:08.440 --> 50:09.440
你看到吗

50:09.440 --> 50:10.440
这边都会有

50:10.440 --> 50:13.440
上面的一个简单的一个格式

50:13.440 --> 50:15.440
那么说一下

50:15.440 --> 50:17.440
这个id是自动生成的

50:17.440 --> 50:20.440
这是我现在所听的记录人

50:20.440 --> 50:24.440
这个是你现在发布的内容

50:24.440 --> 50:27.440
时间是自动生成的

50:27.440 --> 50:29.440
然后rid

50:29.440 --> 50:30.440
这个r的话

50:30.440 --> 50:33.440
就是我们现在对着哪条记录

50:33.440 --> 50:35.440
就是我们现在说的

50:35.440 --> 50:37.440
当前这条记录

50:37.440 --> 50:39.440
这个t的话

50:39.440 --> 50:41.440
记也和我们现在这个记录是一样

50:41.440 --> 50:42.440
只不过

50:42.440 --> 50:43.440
我们有个u的话

50:43.440 --> 50:46.440
就是你现在是

50:46.440 --> 50:47.440
谁

50:47.440 --> 50:50.440
这条记录是谁的

50:50.440 --> 50:52.440
记录是谁的

50:52.440 --> 50:54.440
是这个逻辑

50:54.440 --> 50:56.440
这是topic跟replay

50:56.440 --> 50:58.440
这两个情况

50:58.440 --> 50:59.440
我们现在来

50:59.440 --> 51:05.540
把这个记录往里存储一下

51:05.540 --> 51:08.560
db

51:08.560 --> 51:14.210
这页面还没有做数据库的

51:14.210 --> 51:15.210
conster

51:15.210 --> 51:16.210
db

51:16.210 --> 51:29.450
taro.cloud.database

51:29.450 --> 51:32.720
这样的话

51:32.720 --> 51:34.720
我们就可以把这个db

51:34.720 --> 51:37.720
使用到我们下面来

51:37.720 --> 51:49.240
db.collection

51:49.240 --> 51:53.890
添加记录

51:53.890 --> 51:54.890
data

51:54.890 --> 51:56.890
数据这里面

51:56.890 --> 51:58.890
第一个

51:58.890 --> 52:00.890
content内容

52:00.890 --> 52:02.890
就是我们现在

52:02.890 --> 52:04.890
dis.data里面的

52:04.890 --> 52:07.890
content

52:07.890 --> 52:11.100
第二个

52:11.100 --> 52:13.100
data

52:13.100 --> 52:17.240
当前时间

52:17.240 --> 52:19.240
rid

52:19.240 --> 52:23.620
dis.data里面的

52:23.620 --> 52:25.620
id

52:25.620 --> 52:27.620
uid

52:27.620 --> 52:34.060
dis.data.openid

52:34.060 --> 52:38.400
tid

52:38.400 --> 52:45.660
dis.data里面的id

52:45.660 --> 52:47.660
用户id

52:47.660 --> 52:49.660
回复id

52:49.660 --> 52:51.660
和topic

52:51.660 --> 53:00.220
话题id

53:00.220 --> 53:11.180
res

53:11.180 --> 53:13.180
成功

53:13.180 --> 53:15.180
添加后

53:15.180 --> 53:17.180
给用户的

53:17.180 --> 53:20.620
提示

53:20.620 --> 53:29.450
taro.showtoast

53:29.450 --> 53:32.790
title

53:32.790 --> 53:33.790
发表成功

53:33.790 --> 53:38.890
settimeout

53:38.890 --> 53:43.930
我们得过一个时间

53:43.930 --> 53:44.930
多久呢

53:44.930 --> 53:46.930
过

53:46.930 --> 53:48.930
1秒5

53:48.930 --> 53:50.930
就是1500毫秒

53:50.930 --> 53:53.930
让它做一个跳转

53:53.930 --> 53:56.930
跳回到我们原来的这样的一个

53:56.930 --> 53:58.930
home detailed界面

53:58.930 --> 54:00.930
这个界面是发表数据

54:00.930 --> 54:02.930
发表完成以后

54:02.930 --> 54:04.930
可以

54:04.930 --> 54:06.930
这边我们可以看一下

54:06.930 --> 54:09.930
它在成功添加以后的数据返回

54:09.930 --> 54:15.100
我们称之为

54:15.100 --> 54:30.150
demo

54:30.150 --> 54:32.150
settimeout

54:32.150 --> 54:34.150
1500毫秒以后

54:34.150 --> 54:36.150
做一个返回

54:36.150 --> 54:48.000
taro.negative2url

54:48.000 --> 54:51.370
我们得回去

54:51.370 --> 54:53.370
找到我们现在的

54:53.370 --> 54:56.680
home detail

54:56.680 --> 54:58.680
当然

54:58.680 --> 55:00.680
我们还是用我们的es6的那个

55:00.680 --> 55:11.290
表达式

55:11.290 --> 55:12.290
id

55:12.290 --> 55:22.400
等于dis.data.id

55:22.400 --> 55:29.950
这样跟上

55:29.950 --> 55:37.910
为什么要过1500秒呢

55:37.910 --> 55:39.910
我想让用户看一下这个内容

55:39.910 --> 55:41.910
因为对于showtoast来讲

55:41.910 --> 55:43.910
它是1500秒的操作

55:43.910 --> 55:45.910
它让它直接回这个页面来

55:45.910 --> 55:47.910
那么回这个页面以后的话

55:47.910 --> 55:49.910
我们后面会在这个页面

55:49.910 --> 55:51.910
把那个回复

55:51.910 --> 55:53.910
那个直接给它显示出来

55:53.910 --> 55:55.910
我们可以看到

55:55.910 --> 55:57.910
这个页面

55:57.910 --> 55:59.910
我们可以看到

55:59.910 --> 56:01.910
那个直接给它显示出来

56:01.910 --> 56:03.910
所以我们现在先跳回

56:03.910 --> 56:05.910
好 我们来看一下

56:05.910 --> 56:07.910
现在成功的操作应该是

56:07.910 --> 56:09.910
当我现在点击

56:09.910 --> 56:11.910
发表评论以后

56:11.910 --> 56:13.910
我们会再reply

56:13.910 --> 56:15.910
那个demo

56:15.910 --> 56:17.910
这样一个数据库里面

56:17.910 --> 56:19.910
存主一条记录

56:19.910 --> 56:21.910
这条记录存主完成以后的话

56:21.910 --> 56:23.910
立马会显示发表成功

56:23.910 --> 56:24.910
然后

56:24.910 --> 56:26.910
在1500秒以后

56:26.910 --> 56:28.910
跳回home detail

56:28.910 --> 56:30.910
这样一个结构

56:30.910 --> 56:32.910
那么这条数据

56:32.910 --> 56:34.910
它会除了我们现在的基本的

56:34.910 --> 56:36.910
它默认会有一个自定义的ID

56:36.910 --> 56:38.910
和一个我们的

56:38.910 --> 56:39.910
OpenID以外

56:39.910 --> 56:41.910
我们还要存住这些

56:41.910 --> 56:43.910
这是你现在所写的内容

56:43.910 --> 56:45.910
这是现在的时间

56:45.910 --> 56:46.910
那么现在

56:46.910 --> 56:48.910
我们的回复人的

56:48.910 --> 56:49.910
那个ID

56:49.910 --> 56:50.910
OpenID和我们的

56:50.910 --> 56:52.910
就主题ID

56:52.910 --> 56:54.910
这些都可以存进去

56:54.910 --> 56:55.910
好了 来看一下

56:55.910 --> 56:57.910
现在的一个效果

56:57.910 --> 56:59.910
首先打开语音

56:59.910 --> 57:01.910
我们找到reply demo

57:01.910 --> 57:03.910
这里面

57:03.910 --> 57:05.910
我们有三条记录对吧

57:05.910 --> 57:06.910
这之前的

57:06.910 --> 57:16.560
我们把它先给删了

57:16.560 --> 57:17.560
好

57:17.560 --> 57:19.560
在reply demo中是没有数据了

57:19.560 --> 57:23.920
对吧

57:23.920 --> 57:24.920
那么紧接着

57:24.920 --> 57:25.920
我们来操作一下

57:25.920 --> 57:27.920
现在把它给

57:27.920 --> 57:28.920
1

57:28.920 --> 57:30.920
点击某一个贴子

57:30.920 --> 57:32.920
查看具体信息

57:32.920 --> 57:34.920
这时候在当前页面

57:34.920 --> 57:36.920
我们会有OpenID和ID

57:36.920 --> 57:37.920
回复

57:37.920 --> 57:39.920
跳到我们现在所需要的

57:39.920 --> 57:40.920
回复页面

57:40.920 --> 57:41.920
所以这时候

57:41.920 --> 57:42.920
我们写上

57:42.920 --> 57:44.920
我的评论

57:45.920 --> 57:46.920
点击

57:46.920 --> 57:47.920
我们来

57:47.920 --> 57:49.920
点击发布

57:49.920 --> 57:51.920
我们看到有一个错

57:51.920 --> 57:52.920
它说

57:52.920 --> 57:54.920
数据库不存在

57:57.740 --> 57:59.740
是数据库的名称

57:59.740 --> 58:00.740
我们那时候起了一个

58:00.740 --> 58:02.740
reply

58:02.740 --> 58:04.740
所以我们就直接

58:04.740 --> 58:05.740
不改两边了

58:05.740 --> 58:07.740
这边就写reply

58:07.740 --> 58:11.400
再来一下吧

58:11.400 --> 58:19.350
点击

58:19.350 --> 58:20.350
去到

58:21.350 --> 58:22.350
回复

58:22.350 --> 58:25.170
我的

58:25.170 --> 58:26.170
评论

58:26.170 --> 58:28.550
回复

58:28.550 --> 58:29.550
发表成功

58:29.550 --> 58:30.550
是吧

58:30.550 --> 58:31.550
过一会

58:31.550 --> 58:36.080
它报一个就是

58:36.080 --> 58:38.080
ID是吗

58:38.080 --> 58:40.080
就是发表是成功了

58:40.080 --> 58:41.080
我们来到这边看一下

58:41.080 --> 58:43.080
记录已经被记录好了

58:43.080 --> 58:45.080
只是它回跳的这过程

58:45.080 --> 58:47.080
就是跳转过程有一个

58:47.080 --> 58:48.080
这个

58:48.080 --> 58:50.080
我们写上state

58:50.080 --> 58:55.080
好

58:55.080 --> 58:56.080
再来一次

58:56.080 --> 58:57.080
看一下

58:57.080 --> 58:58.080
这个是否应该OK了

58:58.080 --> 59:06.060
就对这条记录

59:06.060 --> 59:10.420
回复

59:10.420 --> 59:16.100
又一个评论

59:16.100 --> 59:24.530
它说这个页面不存在

59:24.530 --> 59:26.530
Home Detail

59:26.530 --> 59:27.530
我们来看一下

59:27.530 --> 59:33.980
Home Detail

59:33.980 --> 59:35.980
但至少现在我们能看到

59:35.980 --> 59:37.980
它后面所给到我们的

59:37.980 --> 59:39.980
那个数据结构

59:39.980 --> 59:40.980
是一个正常的

59:40.980 --> 59:42.980
能够得到这条数据的了

59:42.980 --> 59:43.980
现在里面

59:43.980 --> 59:44.980
应该有两条数据

59:44.980 --> 59:49.250
都是针对于这个

59:49.250 --> 59:50.250
记录的

59:50.250 --> 59:55.970
还有一条评论

59:55.970 --> 01:00:02.550
回来了吧

01:00:02.550 --> 01:00:03.550
回来以后

01:00:03.550 --> 01:00:04.550
应该在这边咱们就能看到

01:00:04.550 --> 01:00:06.550
我们现在只是这块没写

01:00:06.550 --> 01:00:08.550
我们看一下数据库

01:00:08.550 --> 01:00:09.550
这时候的3条数据

01:00:09.550 --> 01:00:11.550
已经全部进来了

01:00:11.550 --> 01:00:12.550
OK

01:00:12.550 --> 01:00:13.550
这是我们说到的

01:00:13.550 --> 01:00:14.550
我们点击

01:00:14.550 --> 01:00:16.550
回复按钮以后

01:00:16.550 --> 01:00:17.550
对这个数据

01:00:17.550 --> 01:00:18.550
进行操作

01:00:18.550 --> 01:00:20.550
并且对于数据库的格式

01:00:20.550 --> 01:00:21.550
保存的

01:00:21.550 --> 01:00:23.550
特别是对ID

01:00:23.550 --> 01:00:24.550
ID和overID的一些操作

01:00:24.550 --> 01:00:25.550
接着

01:00:25.550 --> 01:00:26.550
我们接下来

01:00:26.550 --> 01:00:27.550
待会儿我们再来

01:00:27.550 --> 01:00:29.550
做一下我们的这一块

01:00:29.550 --> 01:00:31.550
喜欢与否

01:00:31.550 --> 01:00:32.550
喜欢与否的显示

01:00:32.550 --> 01:00:33.550
我们先休息一下

