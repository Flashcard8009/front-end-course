WEBVTT

00:00.050 --> 00:03.050
好 我们继续讲解我们的天气查询

00:03.050 --> 00:08.050
天气查询呢 其实我们刚才已经完成了我们现在的当前

00:08.050 --> 00:12.050
你只要打开以后当前城市的一个天气情况

00:12.050 --> 00:17.050
包括是 这个是通过我们微信的getlocation来得到经伪度

00:17.050 --> 00:21.050
然后经伪度呢 我们可以拿到你现在的一个城市的中文名称

00:21.050 --> 00:27.050
同时呢 我们根据当前的时间 在得出后面的这样的一个时间

00:27.050 --> 00:31.050
然后经伪度得到以后呢 我们再根据第二个我们的接口

00:31.050 --> 00:36.050
去查找你现在的一个温度 以及简单的有一句话

00:36.050 --> 00:40.050
然后再得出的是 我们可以有昨天的一个信息

00:40.050 --> 00:44.050
以及我们可以得出五天的一个信息情况

00:44.050 --> 00:48.050
然后这些呢 都是属于页面打开的时候 我们去获取到的

00:48.050 --> 00:51.050
那么接下去呢 我们获取我们现在的查询

00:51.050 --> 00:54.050
首先 我们在输入这个内容的时候

00:54.050 --> 00:57.050
我们一定会需要得到你当前的这个值

00:57.050 --> 01:01.050
所以呢 我们上面 我们已经做了一个impart 你记得吗

01:01.050 --> 01:06.050
imparting 所以我们在imparting里面把这个值先拿好

01:06.050 --> 01:20.720
imparting 注释一下 这叫做获取用户

01:20.720 --> 01:23.720
输入的城市

01:23.720 --> 01:29.930
那在我们界面上面 我们有一个this点

01:30.930 --> 01:41.400
impart city 等于 写个e

01:41.400 --> 01:46.400
e.detail.value 应该是这个值

01:46.400 --> 01:51.400
当你拿到这个值以后 我们现在就点我们的

01:51.400 --> 01:55.400
输入 就是search 我们search

01:55.400 --> 01:59.400
我们有一个search bound search

01:59.400 --> 02:15.910
接下去 我们在这里边 再建立一个bound search

02:15.910 --> 02:22.910
查找用户的指定城市的天气

02:22.910 --> 02:29.060
它可以得到这个值呢 已经在我们的impart city里面了

02:29.060 --> 02:32.060
那么它的查找 咱们想一下

02:32.060 --> 02:36.060
刚才我们在我们下面的过程中 我们其实分成两步

02:36.060 --> 02:39.060
第一步的话呢 我们是要去获取到

02:39.060 --> 02:42.060
当前的一个时间 包括是我们利用了一个接口

02:42.060 --> 02:46.060
就是这个百度接口 我们获得了你现在的

02:47.060 --> 02:50.060
精度和纬度 然后利用精度纬度的方式

02:50.060 --> 02:54.060
我们通过这个接口去完成查找

02:54.060 --> 02:57.060
咱们看一下 这个接口它需要什么

02:57.060 --> 03:00.060
它需要的就是一个我们的指定的城市名称

03:00.060 --> 03:03.060
所以我们在这个环节上面

03:03.060 --> 03:07.060
我们其实只要调取search weather这个方法

03:07.060 --> 03:10.060
然后给它我们现在输入的一个名称 是不是

03:10.060 --> 03:12.060
应该就可以了 来看一下

03:12.060 --> 03:16.650
search weather

03:17.650 --> 03:20.650
然后呢 这边我们给出this点

03:20.650 --> 03:22.650
impart city

03:22.650 --> 03:24.650
给出这个名称

03:24.650 --> 03:33.630
保存 我们来看一下效果

03:33.630 --> 03:36.630
前面是 现在所在城市 打一个北京

03:36.630 --> 03:41.160
好 这边有个value

03:41.160 --> 03:43.160
我们来看一下 它获取的时候

03:43.160 --> 03:46.160
我们通过这儿 直接来看一下

03:46.160 --> 03:58.820
一 把这个隐藏了

03:58.820 --> 04:06.060
这个箭头表示它在获取你现在的一个坐标位

04:06.060 --> 04:08.060
北京

04:08.060 --> 04:13.060
咱们看一下 北京应该出现在target.value

04:13.060 --> 04:16.060
target.value 在这下面

04:16.060 --> 04:18.060
对吧 target.value

04:18.060 --> 04:20.060
所以我们这边改一改就可以了

04:20.060 --> 04:32.900
获得target value以后

04:32.900 --> 04:39.710
通过我们这个字 再去做一次查找

04:39.710 --> 04:41.710
北京 点击

04:41.710 --> 04:43.710
看上面 是不是现在是北京了

04:43.710 --> 04:45.710
因为这个接口里面

04:45.710 --> 04:48.710
这些数据都是通过同一接口获取到的

04:48.710 --> 04:50.710
所以我直接拿北京就能看到

04:50.710 --> 04:51.710
现在北京是25度

04:51.710 --> 04:57.500
哈尔滨 是不是出来了

04:57.500 --> 05:00.500
这样的话 我们就完成了

05:00.500 --> 05:03.500
现在的我们的一个时间

05:03.500 --> 05:05.500
或者称之为

05:05.500 --> 05:08.500
加上我们现在当地的时间日期

05:08.500 --> 05:11.500
包括是温度的一个查找

05:11.500 --> 05:12.500
温度的查找

05:12.500 --> 05:13.500
这样是不是我们现在

05:13.500 --> 05:15.500
这功能就比较全了

05:15.500 --> 05:18.500
我们把里面的console可以清一下

05:18.500 --> 05:28.170
可以是

05:28.170 --> 05:29.170
我们来看一下

05:29.170 --> 05:39.910
哈尔滨 是不是就出来了

05:39.910 --> 05:42.910
我们的一个微天气

05:42.910 --> 05:44.910
是就这样完成了

05:44.910 --> 05:46.910
那么在这个里面我们总结一下

05:46.910 --> 05:48.910
就是整个这个实例里面

05:48.910 --> 05:50.910
我们有几个注意点

05:50.910 --> 05:52.910
第一的话 这些是初始值

05:52.910 --> 05:55.910
应该讲 在我后期操作过程中

05:55.910 --> 06:00.120
这个完全可以删掉了

06:00.120 --> 06:03.120
你看 我把它全部删除以后的话

06:03.120 --> 06:05.120
因为页面在加载的过程中

06:05.120 --> 06:07.120
我们看一下 是没有问题的

06:07.120 --> 06:13.860
是不是 它直接就出这一数据了

06:13.860 --> 06:15.860
那么这个我们把它

06:15.860 --> 06:17.860
要不要weather

06:17.860 --> 06:18.860
这个weather的话

06:18.860 --> 06:20.860
如果你不要它 你再来看一下

06:20.860 --> 06:27.760
我们把它保存一下

06:27.760 --> 06:28.760
然后编一下

06:28.760 --> 06:38.020
我们把它刷一下

06:38.020 --> 06:40.020
你看 它默认情况下

06:40.020 --> 06:42.020
会有一个18的简单的显示

06:42.020 --> 06:43.020
然后后面立马跳出来

06:43.020 --> 06:44.020
所以这个的话

06:44.020 --> 06:46.020
我们其实也可以不要

06:46.020 --> 06:50.230
对吧

06:50.230 --> 06:53.230
好 那么初始化的状态就变成这样了

06:53.230 --> 06:59.980
那么让我们通过我们的

06:59.980 --> 07:01.980
那个生命周期

07:01.980 --> 07:04.980
生命周期完成了我们的两个操作

07:04.980 --> 07:06.980
首先我们看一下

07:06.980 --> 07:08.980
时间日期格式上面的话

07:08.980 --> 07:09.980
我们做了一个操作

07:09.980 --> 07:11.980
获取到当前的年月日

07:11.980 --> 07:13.980
在年月日上面的时候

07:13.980 --> 07:15.980
这边我们用个map

07:15.980 --> 07:17.980
注意这里边的一个写法

07:17.980 --> 07:19.980
这里边 我们拿出

07:19.980 --> 07:21.980
十分秒 年月日

07:21.980 --> 07:22.980
先看年月日吧

07:22.980 --> 07:24.980
年月日拿出以后用map

07:24.980 --> 07:26.980
每次循环里面

07:26.980 --> 07:27.980
一个数据的时候

07:27.980 --> 07:28.980
我们转成一个字幅串

07:28.980 --> 07:30.980
然后完成你现在

07:30.980 --> 07:32.980
如果前面没有0的话

07:32.980 --> 07:33.980
我们补一个0

07:33.980 --> 07:34.980
这个结构

07:34.980 --> 07:36.980
包括十分秒也是一样

07:36.980 --> 07:37.980
然后紧接的话

07:37.980 --> 07:39.980
我们后面用一个join的方式

07:39.980 --> 07:41.980
给它进行一个时间的连接

07:41.980 --> 07:42.980
然后我们在

07:42.980 --> 07:44.980
勾到函数里面的时候

07:44.980 --> 07:45.980
那么我们调取了

07:45.980 --> 07:47.980
首先调取的是getlocation

07:47.980 --> 07:50.980
完成你现在的一个

07:50.980 --> 07:51.980
经纬度的获取

07:51.980 --> 07:52.980
利用经纬度

07:52.980 --> 07:54.980
调取百度API接口

07:54.980 --> 07:55.980
百度API接口

07:55.980 --> 07:56.980
我们传直方式

07:56.980 --> 07:57.980
咱们注意一下

07:57.980 --> 07:58.980
它只要在

07:58.980 --> 08:00.980
我们的crash string

08:00.980 --> 08:02.980
也就是问号后面

08:02.980 --> 08:03.980
带上一个location

08:03.980 --> 08:04.980
一二这两个值

08:04.980 --> 08:06.980
注意中间用逗号抖开

08:06.980 --> 08:08.980
然后它就能返回

08:08.980 --> 08:10.980
我们现在所谓的一个

08:10.980 --> 08:12.980
中文显示的当前程式

08:12.980 --> 08:14.980
当你获得这个值以后的话

08:14.980 --> 08:16.980
那么我们可以把后面

08:16.980 --> 08:17.980
释去掉

08:17.980 --> 08:18.980
为什么要去掉呢

08:18.980 --> 08:19.980
因为我们要去通过

08:19.980 --> 08:20.980
这个名字

08:20.980 --> 08:21.980
调取我们的

08:21.980 --> 08:23.980
当前程式信息

08:23.980 --> 08:24.980
而这个程式

08:24.980 --> 08:25.980
它是不能带试的

08:25.980 --> 08:27.980
那么这样获得以后

08:27.980 --> 08:28.980
我们再回到上面

08:28.980 --> 08:29.980
注意

08:29.980 --> 08:30.980
为什么我们把它

08:30.980 --> 08:31.980
单独要写出来

08:31.980 --> 08:32.980
原因就在于

08:32.980 --> 08:34.980
当我们在搜索的时候

08:34.980 --> 08:35.980
其实我们只要

08:35.980 --> 08:36.980
给出一个程式

08:36.980 --> 08:37.980
名称

08:37.980 --> 08:38.980
它就完成了

08:38.980 --> 08:39.980
一个搜索

08:39.980 --> 08:40.980
所以只要调取

08:40.980 --> 08:41.980
这一步就行

08:41.980 --> 08:42.980
然后我们通过

08:42.980 --> 08:44.980
我们的另一个接口

08:44.980 --> 08:45.980
通过我们的

08:45.980 --> 08:47.980
就是当前的

08:47.980 --> 08:49.980
一个天气的查找

08:49.980 --> 08:51.980
来获取你现在的一个数据

08:51.980 --> 08:52.980
这样的话

08:52.980 --> 08:53.980
我们就得到了

08:53.980 --> 08:55.980
你现在完整的一个

08:55.980 --> 08:57.980
当天的程式信息

08:57.980 --> 08:59.980
以及我们还有一个

08:59.980 --> 09:00.980
五天的程式信息

09:00.980 --> 09:01.980
都可以得到

09:01.980 --> 09:02.980
那我们就可以

09:02.980 --> 09:03.980
把它查出来

09:03.980 --> 09:04.980
查出来以后

09:04.980 --> 09:05.980
注意这一步

09:05.980 --> 09:06.980
因为它查出的时候

09:06.980 --> 09:07.980
它的锋利

09:07.980 --> 09:09.980
是一个Cdata格式

09:09.980 --> 09:10.980
所以我们这边

09:10.980 --> 09:12.980
给它做了一个结取

09:12.980 --> 09:14.980
然后重新放到

09:14.980 --> 09:15.980
我们的锋利里面去

09:15.980 --> 09:17.980
最后让它呈现一下

09:17.980 --> 09:18.980
这就是完成了

09:18.980 --> 09:19.980
这个功能

09:19.980 --> 09:20.980
对吧

09:20.980 --> 09:21.980
我们完成这个功能

09:21.980 --> 09:22.980
我们再看一下

09:22.980 --> 09:23.980
我们刷新一下

09:23.980 --> 09:30.260
出来了

09:30.260 --> 09:33.260
然后打入北京

09:33.260 --> 09:35.260
北京就有了

09:35.260 --> 09:36.260
对吧

09:36.260 --> 09:37.260
OK

09:37.260 --> 09:38.260
那么这个就是我们现在

09:38.260 --> 09:39.260
给大家讲解的

09:39.260 --> 09:40.260
一个威天气的

09:40.260 --> 09:41.260
完整实际代

09:41.260 --> 09:42.260
好

09:42.260 --> 09:43.260
那么这节课

09:43.260 --> 09:44.260
就先上到这里

