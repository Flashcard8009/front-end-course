WEBVTT

00:00.180 --> 00:05.180
好 从这个开始呢 给大家讲解一下 我们罗盘的使用

00:05.180 --> 00:10.180
那么罗盘呢 本身来讲 它并非是微信小程序所有的一个功能

00:10.180 --> 00:13.180
它应该讲的是我们手机的

00:13.180 --> 00:17.180
那么微信小程序 在对于MPV来讲的话呢

00:17.180 --> 00:20.180
它只能去开发到我们微信小程序的界面

00:20.180 --> 00:24.180
但是怎么样去用到我们的一些特殊接口呢

00:24.180 --> 00:27.180
这其实就是微信小程序特殊的一个点

00:27.180 --> 00:32.180
它其实是可以去调取微信的Air Apps的一些功能

00:32.180 --> 00:38.180
而微信本身自己又能够完成我们所谓的手机硬件的一些操作

00:38.180 --> 00:41.180
那么这个呢 无论是LOS还是安卓

00:41.180 --> 00:44.180
它都可以有这些的一个调用规则

00:44.180 --> 00:48.180
所以呢 我们在MPV中给大家演示一下

00:48.180 --> 00:54.180
怎么样利用这个语法去完成微信的一个罗盘的调用操作

00:54.180 --> 00:59.180
还是一样 我们现在打开一个新的项目

00:59.180 --> 01:02.180
我们现在打开一个新的项目

01:02.180 --> 01:04.180
然后呢 在这个新项目中呢

01:04.180 --> 01:07.180
我们首先依然先启动一下

01:07.180 --> 01:12.180
看一下这个项目是不是属于框架正常能够进行运行

01:12.180 --> 01:17.020
可以 对吧

01:17.020 --> 01:19.020
然后的话呢 我们现在就开始

01:19.020 --> 01:21.020
首先 我们说 就是微方向

01:21.020 --> 01:24.020
因为罗盘本身就会定位方向

01:24.020 --> 01:30.060
我们这里面写上微方向

01:30.060 --> 01:32.060
这是属于现在的一个主名称

01:32.060 --> 01:37.060
然后呢 我们把现有的代码给清除一下

01:37.060 --> 01:54.260
DIV主框架 不用导入Component 删掉

01:54.260 --> 02:14.040
删掉 样式 删除

02:15.040 --> 02:18.040
好 形成了一个空文件

02:18.040 --> 02:22.040
那么接下去呢 我们首先注意一下罗盘的使用

02:22.040 --> 02:25.040
你一定要去做一个给用户的提示

02:25.040 --> 02:28.040
给用户的一个提示 我们来写一下

02:28.040 --> 02:32.040
可以用一下我们的container

02:32.040 --> 02:36.930
我们把里面这些全删掉

02:36.930 --> 02:42.930
设定了一个container为高度为那个Height100%

02:42.930 --> 02:45.930
然后我们回到我们的程序中

02:45.930 --> 02:52.300
在程序中呢 我们开始设定一下container

02:53.300 --> 02:58.320
给它一个DIV 简单的一个样式

02:58.320 --> 03:08.230
告诉它 有一个智能提示

03:08.230 --> 03:14.230
您 远离 磁场 干扰

03:14.230 --> 03:25.380
第二个提示 并安 下图

03:25.380 --> 03:38.940
所示 校准 指南针

03:38.940 --> 03:40.940
这边我们给出一个图示来

03:40.940 --> 03:51.410
class IMG major

03:51.410 --> 03:54.410
那么这个图片呢 在这儿

03:54.410 --> 03:58.410
我们这里面已经放上了这个tip

03:58.410 --> 04:00.410
所以我们这边写上

04:00.410 --> 04:10.280
static img major

04:10.280 --> 04:18.860
给它订一个图片的样式

04:18.860 --> 04:20.860
当你这些全做好了

04:20.860 --> 04:23.860
那么我们就可以让你进入我们的方向判别了

04:23.860 --> 04:39.020
订class tip click jump

04:39.020 --> 04:44.210
我知道了

04:44.210 --> 04:49.800
简单把几个样式设定一下

04:49.800 --> 04:58.810
container

04:58.810 --> 05:00.810
我们设定一下字体

05:00.810 --> 05:12.120
设定一个雅黑

05:12.120 --> 05:15.010
tester

05:15.010 --> 05:18.010
cala我们写上

05:18.010 --> 05:20.010
白色字体

05:20.010 --> 05:23.010
font size我们给出

05:23.010 --> 05:25.010
26rpx

05:25.010 --> 05:26.010
tester

05:27.010 --> 05:29.010
align我们给出

05:29.010 --> 05:30.010
center

05:30.010 --> 05:32.320
padding

05:32.320 --> 05:34.320
top我们给出

05:34.320 --> 05:37.320
这边我们可以给出

05:37.320 --> 05:39.320
这样的单位

05:39.320 --> 05:49.100
vh

05:49.100 --> 05:53.820
紧接着我们来看一下

05:53.820 --> 06:04.660
tester里面的span我们写上

06:04.660 --> 06:06.660
display

06:06.660 --> 06:08.660
flex

06:08.660 --> 06:09.660
flex

06:09.660 --> 06:11.660
direction

06:11.660 --> 06:13.660
column

06:13.660 --> 06:14.660
height

06:14.660 --> 06:18.030
40rpx

06:18.030 --> 06:22.750
live black

06:22.750 --> 06:23.750
40rpx

06:23.750 --> 06:33.910
我们有个图片

06:33.910 --> 06:36.910
叫tip pc

06:36.910 --> 06:46.050
我们来过一下

06:46.050 --> 06:48.050
宽度我们给的是

06:48.050 --> 06:50.050
750

06:50.050 --> 06:52.050
高度我们给的是

06:52.050 --> 06:56.640
375rpx

06:56.640 --> 06:57.640
img major

06:57.640 --> 07:08.250
display

07:08.250 --> 07:10.250
flex

07:10.250 --> 07:11.250
flex

07:11.250 --> 07:12.250
direction

07:12.250 --> 07:14.690
column

07:14.690 --> 07:16.690
tester contenter

07:16.690 --> 07:19.060
center

07:19.060 --> 07:22.570
align item

07:22.570 --> 07:24.570
center

07:24.570 --> 07:26.570
先定了这样一个内容

07:26.570 --> 07:28.570
然后我们现在可以运行一下

07:28.570 --> 07:30.570
看一下现在这个的一个效果

07:30.570 --> 07:34.570
我们打开我们的项目

07:34.570 --> 07:36.570
我们去进行导入

07:36.570 --> 08:00.870
微方向

08:00.870 --> 08:02.870
我们把下面的

08:02.870 --> 08:03.870
这个去掉它

08:03.870 --> 08:05.870
我们把下面的

08:05.870 --> 08:07.870
这个两个按钮

08:07.870 --> 08:12.460
就是我们的tabber bar给去掉

08:12.460 --> 08:14.460
我们去到app.json

08:14.460 --> 08:32.210
去掉它

08:32.210 --> 08:34.210
现在我们来看一下

08:34.210 --> 08:38.740
基本上就是这个结构

08:38.740 --> 08:40.740
上面的文字

08:40.740 --> 08:42.740
主要是底色的问题

08:42.740 --> 08:54.420
我们就把它写在app.view里面

08:54.420 --> 08:56.420
在这写

08:56.420 --> 09:00.500
pager

09:00.500 --> 09:02.500
wise

09:02.500 --> 09:04.500
100%

09:04.500 --> 09:06.500
高度100%

09:06.500 --> 09:12.900
background color

09:12.900 --> 09:13.900
给一个底色

09:13.900 --> 09:21.240
再来看一下页面

09:21.240 --> 09:24.740
出来了吧

09:24.740 --> 09:26.740
就这样一个结构可以了

09:26.740 --> 09:27.740
我们主要的

09:27.740 --> 09:28.740
是告诉你

09:28.740 --> 09:30.740
你首先必须要先远离此场

09:30.740 --> 09:31.740
第二步

09:31.740 --> 09:32.740
我们手机

09:32.740 --> 09:34.740
你需要去这样进行滑动

09:34.740 --> 09:35.740
让它里面的锣盘

09:35.740 --> 09:38.740
进行一定的矫准

09:38.740 --> 09:39.740
当你点知道的时候

09:39.740 --> 09:40.740
我们就可以跳转到

09:40.740 --> 09:43.740
我们所需要的第二个页面去了

09:43.740 --> 09:44.740
此时第二个页面

09:44.740 --> 09:45.740
我们就做logs

09:45.740 --> 09:46.740
然后我们把里面的代码

09:46.740 --> 09:48.740
也清一下

09:48.740 --> 09:50.740
这个不用动

09:50.740 --> 09:52.740
然后我们到这个来

09:52.740 --> 09:54.740
我们把这个名称改一下

09:54.740 --> 09:56.740
它叫做

09:56.740 --> 09:57.740
微

09:57.740 --> 10:06.850
方向

10:06.850 --> 10:08.850
然后把它的这个方向

10:08.850 --> 10:10.850
在这里面我们做一下

10:10.850 --> 10:19.310
我们就叫logs

10:19.310 --> 10:20.310
指定的名称

10:20.310 --> 10:22.310
和我们的component

10:22.310 --> 10:28.660
闪掉

10:28.660 --> 10:30.660
这里边的这个也闪掉

10:30.660 --> 10:33.660
create里面暂时没有数据

10:33.660 --> 10:41.280
ok

10:41.280 --> 10:42.280
那接下来呢

10:42.280 --> 10:44.280
我们利用现在的

10:44.280 --> 10:46.280
整个这一块代码来编写

10:46.280 --> 10:48.280
然后我们前台

10:48.280 --> 10:50.280
我们需要的是做什么

10:50.280 --> 10:51.280
我们需要的是

10:51.280 --> 10:53.280
通过你前面的那个按钮

10:53.280 --> 10:55.280
跳转到当前这个页面来

10:55.280 --> 11:02.180
所以我们做一个jump

11:02.180 --> 11:14.380
我们在这做一个jump

11:14.380 --> 11:18.490
跳转

11:18.490 --> 11:19.490
mpview

11:19.490 --> 11:20.490
点

11:20.490 --> 11:22.490
navigate

11:22.490 --> 11:26.760
true

11:26.760 --> 11:28.760
url

11:28.760 --> 11:30.760
跳转到

11:30.760 --> 11:31.760
pages

11:31.760 --> 11:32.760
logs

11:32.760 --> 11:33.760
man

11:33.760 --> 11:40.270
去到我们pageslogsman

11:40.270 --> 11:42.270
然后在它里面

11:42.270 --> 11:44.270
我们做一个简单的小布局

11:45.270 --> 11:47.270
class

11:47.270 --> 11:51.420
container

11:51.420 --> 11:52.420
div

11:52.420 --> 11:53.420
class

11:53.420 --> 11:54.420
text

11:54.420 --> 11:58.940
下面里面

11:58.940 --> 12:00.940
我们依然去做一下

12:00.940 --> 12:01.940
现在的一个

12:01.940 --> 12:02.940
显示

12:02.940 --> 12:04.940
比如说你现在的方向

12:04.940 --> 12:12.950
direction

12:12.950 --> 12:16.420
span

12:16.420 --> 12:21.970
angle

12:21.970 --> 12:22.970
角度

12:22.970 --> 12:26.500
div

12:26.500 --> 12:28.500
class

12:28.500 --> 12:29.500
pisc

12:29.500 --> 12:33.450
我们给一个图片

12:33.450 --> 12:36.080
这张图片呢

12:36.080 --> 12:38.080
我们给的是

12:38.080 --> 12:40.080
static 下面的

12:41.080 --> 12:43.080
images 里面的

12:44.080 --> 12:46.080
我们有一张叫compers

12:46.080 --> 12:51.790
我们给出这张图片

12:51.790 --> 12:52.790
imager

12:52.790 --> 12:57.100
我们同时给它一个简单的样式

12:57.100 --> 12:59.670
但是这样式呢

12:59.670 --> 13:01.670
我们要让它进行旋转

13:01.670 --> 13:02.670
所以呢

13:02.670 --> 13:06.430
我们需要的是

13:06.430 --> 13:08.430
给它做一个

13:08.430 --> 13:13.150
简单的强解析

13:13.150 --> 13:18.380
transform

13:18.380 --> 13:22.100
rotator

13:22.100 --> 13:23.100
digit

13:23.100 --> 13:25.100
rotator digit

13:25.100 --> 13:27.670
我们里面写

13:27.670 --> 13:31.820
这个digit里面的值

13:31.820 --> 13:34.640
做连接

13:34.640 --> 13:39.320
rotator

13:39.320 --> 13:40.320
好了

13:40.320 --> 13:41.320
页面结构

13:41.320 --> 13:42.320
基本这样

13:42.320 --> 13:44.320
简单定一下它的样式

13:44.320 --> 13:50.960
首先文本

13:50.960 --> 13:52.960
有一个tester

13:52.960 --> 13:57.320
这个

13:57.320 --> 13:58.320
textonline

13:58.320 --> 14:00.320
让它所有的途径中

14:00.320 --> 14:03.890
字体依然一白色显示

14:03.890 --> 14:07.970
字体大小大一点

14:07.970 --> 14:12.070
packing top

14:12.070 --> 14:14.070
离顶部距离

14:14.070 --> 14:15.070
离开一点

14:15.070 --> 14:18.150
display

14:18.150 --> 14:20.150
给它的是一个flex

14:20.150 --> 14:23.660
flex

14:23.660 --> 14:24.660
direction

14:25.660 --> 14:28.220
column

14:28.220 --> 14:29.220
调

14:30.220 --> 14:31.220
pisc

14:32.220 --> 14:33.220
wise

14:34.220 --> 14:36.220
650rpx

14:37.220 --> 14:38.220
height

14:38.220 --> 14:39.220
650rpx

14:39.220 --> 14:40.220
这张图片

14:41.220 --> 14:42.220
绝对定位

14:43.220 --> 14:44.220
absolute

14:45.220 --> 14:46.220
top

14:46.220 --> 14:47.220
50%

14:50.430 --> 14:51.430
left

14:51.430 --> 14:54.580
以及

14:54.580 --> 14:55.580
离顶部离开一点

14:59.680 --> 15:00.680
我们顶部的话

15:00.680 --> 15:02.680
我们给一个-300rpx

15:02.680 --> 15:07.020
在pisc

15:07.020 --> 15:09.020
在pisc里面有一个img

15:09.020 --> 15:27.330
高度

15:27.330 --> 15:31.370
依然做100%

15:32.370 --> 15:33.370
好了

15:33.370 --> 15:35.370
这个样式就好了

15:36.370 --> 15:37.370
那么现在我们要定义

15:37.370 --> 15:38.370
里面的这些值了

15:40.370 --> 15:41.370
首先先给这些值

15:41.370 --> 15:48.070
做一些初始操作

15:48.070 --> 15:50.070
先给它一个-代表

15:50.070 --> 15:51.070
没有显示

15:52.070 --> 15:53.070
第二个

15:54.070 --> 15:55.070
方向

15:55.070 --> 15:58.730
没有显示

15:58.730 --> 16:03.830
rotator为空

16:03.830 --> 16:10.890
来看一下效果

16:10.890 --> 16:11.890
调整过来

16:11.890 --> 16:14.780
啥都没有

16:14.780 --> 16:15.780
空

16:16.780 --> 16:17.780
那么接下去

16:17.780 --> 16:20.780
我们就应该要去调用逻盘了

16:20.780 --> 16:22.780
在我们的初始

16:22.780 --> 16:23.780
在我们的构造函数中

16:26.540 --> 16:27.540
咱们来看一下

16:27.540 --> 16:28.540
微信的逻盘

16:28.540 --> 16:32.620
我们搜索一下

16:33.620 --> 16:35.620
逻盘它的整个名称

16:35.620 --> 16:37.620
就compress

16:37.620 --> 16:39.620
逻盘是compress

16:39.620 --> 16:40.620
所以我们直接打

16:41.620 --> 16:42.620
com

16:42.620 --> 16:45.380
pass

16:45.380 --> 16:50.100
它没有显示

16:50.100 --> 16:51.100
我们看一下

16:51.100 --> 16:52.100
我们打上

16:53.100 --> 16:54.100
on

16:54.100 --> 16:55.100
com

16:55.100 --> 17:00.070
那我们直接拿一下

17:00.070 --> 17:02.070
在我们的API里面

17:02.070 --> 17:06.020
在我们的

17:06.020 --> 17:07.020
接口里面

17:07.020 --> 17:12.960
我们去找一下逻盘

17:12.960 --> 17:18.280
在这

17:19.280 --> 17:20.280
在这

17:20.280 --> 17:22.280
逻盘的

17:22.280 --> 17:23.280
on

17:23.280 --> 17:24.280
compress

17:24.280 --> 17:25.280
changer

17:25.280 --> 17:26.280
启动

17:26.280 --> 17:27.280
start

17:27.280 --> 17:28.280
逻盘有这几个

17:28.280 --> 17:30.280
那么其实我们呢

17:30.280 --> 17:31.280
直接可以完成

17:31.280 --> 17:32.280
我们的

17:32.280 --> 17:33.280
一个on

17:33.280 --> 17:34.280
compress

17:34.280 --> 17:35.280
changer

17:35.280 --> 17:37.280
它是指监听逻盘数据的变化

17:37.280 --> 17:38.280
以每秒

17:38.280 --> 17:40.280
五次的监听

17:40.280 --> 17:42.280
接口始终会开启

17:42.280 --> 17:43.280
然后呢

17:43.280 --> 17:45.280
你可以使用这个进行停止

17:46.280 --> 17:47.280
那么我们做法就是

17:47.280 --> 17:48.280
直接用on

17:48.280 --> 17:49.280
compress

17:49.280 --> 17:50.280
changer

17:50.280 --> 17:51.280
来完成

17:51.280 --> 17:53.280
它呢是只要在我们的

17:53.280 --> 17:54.280
那个微信的

17:54.280 --> 17:55.280
可使用的范围内

17:55.280 --> 17:56.280
你都行

17:56.280 --> 17:57.280
因为我们讲

17:57.280 --> 17:58.280
我们的npview

17:58.280 --> 18:00.280
本身自己又可以用view的语法

18:00.280 --> 18:02.280
又可以写微信小程序的结构

18:02.280 --> 18:03.280
所以呢

18:03.280 --> 18:04.280
它完全是可以去

18:04.280 --> 18:06.280
执行这一段内容的

18:06.280 --> 18:07.280
OK我们来看

18:07.280 --> 18:12.150
使用

18:12.150 --> 18:13.150
逻盘

18:13.150 --> 18:21.230
定义

18:21.230 --> 18:23.230
我们从这开始

18:23.230 --> 18:24.230
利用微信的

18:24.230 --> 18:25.230
on

18:25.230 --> 18:26.230
com

18:26.230 --> 18:27.230
press

18:27.230 --> 18:28.230
changer

18:28.230 --> 18:36.730
我们会得到数据

18:36.730 --> 18:37.730
我们来看一下

18:37.730 --> 18:41.770
我们直接拿

18:41.770 --> 18:42.770
改变的时候

18:42.770 --> 18:43.770
changer

18:43.770 --> 18:55.810
这边的话呢

18:55.810 --> 18:57.810
那么要说明的是

18:57.810 --> 18:59.810
因为我们现在的

18:59.810 --> 19:00.810
整个操作

19:00.810 --> 19:02.810
因为是模拟器

19:02.810 --> 19:04.810
模拟器上面的话呢

19:04.810 --> 19:06.810
这边它不会有数据

19:06.810 --> 19:07.810
这要说明一下

19:07.810 --> 19:08.810
嗯

19:08.810 --> 19:09.810
不会在这显示

19:09.810 --> 19:10.810
但是我们可以把代码

19:10.810 --> 19:11.810
我们给它学好

19:11.810 --> 19:12.810
然后后面的话呢

19:12.810 --> 19:13.810
我们可以放到

19:13.810 --> 19:15.810
啊你写在onlau的上面

19:15.810 --> 19:16.810
跟你放在

19:16.810 --> 19:17.810
这crate上面是一样的

19:17.810 --> 19:19.810
我们就绑在crate上面

19:19.810 --> 19:24.020
好在这边是我们

19:24.020 --> 19:26.020
先使用这个逻盘

19:26.020 --> 19:27.020
我们用的是on

19:27.020 --> 19:28.020
compress

19:28.020 --> 19:29.020
changer

19:29.020 --> 19:30.020
只要它改变的时候

19:30.020 --> 19:31.020
它就会触发

19:31.020 --> 19:32.020
然后呢

19:32.020 --> 19:33.020
它触发的时候

19:33.020 --> 19:35.020
它会接收到两个值

19:35.020 --> 19:36.020
我们这边来看一下

19:36.020 --> 19:38.020
我们打开我们的

19:38.020 --> 19:39.020
逻盘

19:39.020 --> 19:40.020
我们来看

19:40.020 --> 19:41.020
它里面的返回结果

19:41.020 --> 19:43.020
它会返回这个

19:43.020 --> 19:44.020
direction

19:44.020 --> 19:46.020
它会返回个direction

19:46.020 --> 19:48.020
direction是你现在的一个

19:48.020 --> 19:49.020
我们看到

19:49.020 --> 19:51.020
面对的方向度数

19:51.020 --> 19:52.020
它会有一个

19:52.020 --> 19:54.020
度数的direction的返回

19:54.020 --> 19:56.020
是这样一个值

19:56.020 --> 19:58.020
那我们就可以利用这个值

19:58.020 --> 20:00.020
来做一些事情了

20:00.020 --> 20:02.020
我们来

20:02.020 --> 20:04.020
首先记录住这个值

20:04.020 --> 20:10.440
rs.direction

20:10.440 --> 20:13.440
我们把它保留两位小数

20:13.440 --> 20:18.700
同时呢

20:18.700 --> 20:19.700
这个可以呈现

20:19.700 --> 20:21.700
但是我们还要做个计算

20:21.700 --> 20:27.100
所以rs.direction

20:27.100 --> 20:29.100
我们直接让它保留多少呢

20:29.100 --> 20:32.920
就0

20:32.920 --> 20:33.920
没有小数位

20:33.920 --> 20:37.230
那么我们在页面中

20:37.230 --> 20:40.540
我们就要做的事情是

20:40.540 --> 20:41.540
注意我们这边

20:41.540 --> 20:43.540
给它一个let that

20:43.540 --> 20:53.340
that.angular

20:53.340 --> 20:54.340
anger

20:54.340 --> 20:58.340
等于我们上面的direction

20:58.340 --> 20:59.340
第二步

21:00.340 --> 21:02.340
把它写成rotor

21:02.340 --> 21:03.340
等于

21:03.340 --> 21:05.340
它给的是个度数的话呢

21:05.340 --> 21:06.340
你注意这边

21:06.340 --> 21:07.340
我们要做一个360

21:07.340 --> 21:13.140
去减掉这个度数

21:13.140 --> 21:15.140
是要这样做

21:15.140 --> 21:17.140
direction的方向

21:17.140 --> 21:19.140
中文显示的方向

21:19.140 --> 21:21.140
direction

21:21.140 --> 21:23.140
这个方向应该返回什么值呢

21:23.140 --> 21:24.140
那么这边

21:24.140 --> 21:26.140
我们会调起一个方法

21:26.140 --> 21:28.140
check来

21:28.140 --> 21:29.140
我们去把这个

21:29.140 --> 21:32.780
度数给它

21:32.780 --> 21:37.050
好

21:37.050 --> 21:38.050
我们来写一下

21:38.050 --> 21:40.050
到我们的

21:40.050 --> 21:42.050
message里面去

21:42.050 --> 21:44.050
message

21:44.050 --> 21:45.050
我们写

21:45.050 --> 21:47.050
我们这边写一个message出来

21:47.050 --> 22:00.220
这边咱们写个message

22:00.220 --> 22:05.510
我们把整个这个check

22:05.510 --> 22:07.510
整个写法在message

22:07.510 --> 22:08.510
进行判别

22:08.510 --> 22:14.960
传入一个参数

22:14.960 --> 22:20.130
我们来看一下

22:20.130 --> 22:22.130
如果这个数值

22:22.130 --> 22:24.130
小于i

22:24.130 --> 22:26.130
并且呢

22:26.130 --> 22:28.130
这个数值

22:28.130 --> 22:32.780
小于等于75

22:32.780 --> 22:34.780
那么我们就告诉它

22:34.780 --> 22:36.780
你的方向是针对于

22:36.780 --> 22:42.400
东北

22:42.400 --> 22:44.400
如果if

22:44.400 --> 22:45.400
你现在呢

22:45.400 --> 22:46.400
这个值

22:46.400 --> 22:49.400
是在75范围内

22:49.400 --> 22:50.400
并且

22:50.400 --> 22:51.400
这个值

22:51.400 --> 22:55.540
它小于105

22:55.540 --> 22:57.540
那么你现在的方向

22:57.540 --> 22:58.540
就是

22:58.540 --> 23:07.260
震动

23:07.260 --> 23:08.260
再来

23:08.260 --> 23:10.260
如果你现在方向

23:10.260 --> 23:12.260
在105

23:12.260 --> 23:15.340
到

23:15.340 --> 23:17.340
165之间

23:17.340 --> 23:19.340
那么

23:19.340 --> 23:20.340
你应该你的方向

23:20.340 --> 23:21.340
应该是

23:21.340 --> 23:22.340
东南

23:22.340 --> 23:27.410
再来

23:27.410 --> 23:29.410
如果你现在的方向

23:29.410 --> 23:31.410
是在

23:31.410 --> 23:33.410
165

23:33.410 --> 23:34.410
到

23:34.410 --> 23:37.910
195之间

23:37.910 --> 23:43.530
那么你现在应该是

23:43.530 --> 23:48.720
震难

23:48.720 --> 23:50.720
如果你现在的方向

23:50.720 --> 23:52.720
是在195

23:52.720 --> 23:58.020
到

23:58.020 --> 23:59.020
200

23:59.020 --> 24:01.020
255之间

24:01.020 --> 24:05.610
那你现在返回的

24:05.610 --> 24:06.610
应该是

24:06.610 --> 24:07.610
西南

24:07.610 --> 24:13.480
如果你现在的方向

24:13.480 --> 24:14.480
是在

24:14.480 --> 24:16.480
255

24:16.480 --> 24:18.480
到

24:18.480 --> 24:20.480
285之间

24:20.480 --> 24:24.050
那你现在应该拿到的是

24:24.050 --> 24:25.050
震C

24:25.050 --> 24:32.610
震

24:32.610 --> 24:34.610
C

24:34.610 --> 24:39.800
如果你现在

24:39.800 --> 24:41.800
是在285

24:41.800 --> 24:42.800
到

24:42.800 --> 24:47.970
这没有等于啊

24:47.970 --> 24:48.970
因为这个值

24:48.970 --> 24:52.600
也算在这个范围内

24:52.600 --> 24:53.600
那么它的整个

24:53.600 --> 24:55.600
到345之间

24:55.600 --> 24:57.600
它应该就是一个

24:57.600 --> 25:00.230
西北

25:00.230 --> 25:07.090
不然

25:07.090 --> 25:09.090
其他的剩下的

25:09.090 --> 25:11.090
在245

25:11.090 --> 25:12.090
到我们的

25:12.090 --> 25:13.090
后期的其他的一个

25:13.090 --> 25:14.090
剩余方向

25:14.090 --> 25:15.090
都是属于

25:15.090 --> 25:16.090
震北

25:16.090 --> 25:24.480
好

25:24.480 --> 25:26.480
给出这几个值

25:26.480 --> 25:27.480
那么这样的话呢

25:27.480 --> 25:28.480
我们在这里

25:28.480 --> 25:30.480
进行计算的时候

25:30.480 --> 25:31.480
进行我们的

25:31.480 --> 25:33.480
compers的操作的时候

25:33.480 --> 25:34.480
就直接这边

25:34.480 --> 25:35.480
能够返回出

25:35.480 --> 25:36.480
你现在

25:36.480 --> 25:38.480
正对的那个方向

25:38.480 --> 25:39.480
对吧

25:39.480 --> 25:40.480
它会做就

25:40.480 --> 25:44.620
正对的那个方向

25:44.620 --> 25:45.620
本上代码打完

25:45.620 --> 25:46.620
但是这里面

25:46.620 --> 25:48.620
有几点是要说明的是

25:48.620 --> 25:49.620
那么如果你手机

25:49.620 --> 25:50.620
现在

25:50.620 --> 25:52.620
是没有

25:52.620 --> 25:54.620
罗盘的

25:54.620 --> 25:56.620
那么这种情况下呢

25:56.620 --> 25:57.620
就会导致

25:57.620 --> 25:59.620
这个方法无法进入

25:59.620 --> 26:00.620
这边写一下

26:00.620 --> 26:01.620
如果

26:01.620 --> 26:02.620
手机

26:02.620 --> 26:03.620
没有

26:03.620 --> 26:04.620
罗盘

26:07.000 --> 26:08.000
on

26:08.000 --> 26:10.000
compers

26:10.000 --> 26:11.000
changer

26:11.000 --> 26:14.700
无法进入

26:14.700 --> 26:15.700
此时呢

26:15.700 --> 26:16.700
我们就得

26:16.700 --> 26:17.700
得提示用户

26:17.700 --> 26:18.700
做这个事

26:18.700 --> 26:19.700
得提示用户

26:19.700 --> 26:20.700
去做一个事

26:20.700 --> 26:21.700
就是我们在

26:21.700 --> 26:23.700
做完这个代码以后

26:23.700 --> 26:25.700
我们下面应该

26:25.700 --> 26:26.700
给用户过一段

26:26.700 --> 26:27.700
时间提示

26:27.700 --> 26:28.700
比如说

26:28.700 --> 26:29.700
让它执行一下

26:29.700 --> 26:30.700
这个代码

26:30.700 --> 26:31.700
因为罗盘的

26:31.700 --> 26:32.700
显示

26:32.700 --> 26:33.700
一般性进去以后

26:33.700 --> 26:34.700
三秒之内

26:34.700 --> 26:35.700
它肯定会出来了

26:35.700 --> 26:36.700
如果我

26:36.700 --> 26:37.700
三秒以后

26:37.700 --> 26:41.010
它显示的

26:41.010 --> 26:42.010
我们做一下

26:42.010 --> 26:43.010
如果你

26:43.010 --> 26:44.010
三秒以后

26:44.010 --> 26:45.010
你还是

26:45.010 --> 26:46.010
显示的是空

26:46.010 --> 26:47.010
那我就告诉

26:47.010 --> 26:48.010
你用户

26:48.010 --> 26:49.010
你现在

26:49.010 --> 26:50.010
没有罗盘

26:50.010 --> 26:51.010
是这个逻辑

26:51.010 --> 26:52.010
好

26:52.010 --> 26:53.010
我们来看一下

26:53.010 --> 26:54.010
我们在这边

26:54.010 --> 26:55.010
写一方法

26:58.220 --> 26:59.220
如果

26:59.220 --> 27:00.220
三秒以后

27:01.220 --> 27:02.220
that

27:02.220 --> 27:03.220
点

27:03.220 --> 27:04.220
direction

27:06.220 --> 27:07.220
依然等于空

27:07.220 --> 27:09.720
并且

27:09.720 --> 27:10.720
点

27:13.100 --> 27:14.100
Angle

27:14.100 --> 27:15.100
它依然

27:15.100 --> 27:16.100
也等于

27:17.100 --> 27:18.100
空

27:18.100 --> 27:20.540
那么这时候

27:20.540 --> 27:23.910
我们就提示用户了

27:23.910 --> 27:28.980
toaster

27:28.980 --> 27:32.120
title

27:34.120 --> 27:35.120
您的手机

27:36.120 --> 27:37.120
没有带

27:38.120 --> 27:39.120
电子罗盘

27:40.120 --> 27:41.120
就这一句话

27:41.120 --> 27:46.820
我们

27:47.820 --> 27:48.820
给用户做一个

27:48.820 --> 27:50.820
loading的操作

27:50.820 --> 27:58.230
持续时间多久

27:58.230 --> 28:00.860
三秒钟

28:00.860 --> 28:01.860
两秒钟吧

28:02.860 --> 28:03.860
提示完就可以了

28:03.860 --> 28:07.140
好

28:07.140 --> 28:08.140
我们来看一下

28:08.140 --> 28:09.140
三秒以后

28:09.140 --> 28:10.140
它肯定会有显示了

28:10.140 --> 28:11.140
如果没有的话

28:12.140 --> 28:13.140
看我现在

28:13.140 --> 28:17.110
过来

28:17.110 --> 28:23.200
看这边

28:27.880 --> 28:28.880
我们刷新一下

28:28.880 --> 28:29.880
我们来看一下

28:29.880 --> 28:30.880
首先

28:30.880 --> 28:32.880
打开的是我们的手页

28:32.880 --> 28:36.410
您手机没有带

28:36.410 --> 28:37.410
它在这边

28:37.410 --> 28:38.410
直接爆出来了

28:38.410 --> 28:39.410
对吧

28:39.410 --> 28:40.410
您手机没有带

28:40.410 --> 28:42.410
我们把这个字

28:42.410 --> 28:43.410
再写的

28:44.410 --> 28:45.410
那个

28:45.410 --> 28:46.410
小一点

28:47.410 --> 28:48.410
您手机

28:48.410 --> 28:52.740
或者直接写

28:52.740 --> 28:53.740
手机

28:53.740 --> 28:54.740
没有

28:55.740 --> 28:56.740
罗盘

28:56.740 --> 28:59.760
直接在这儿

28:59.760 --> 29:00.760
爆出来了

29:00.760 --> 29:06.780
对吧

29:06.780 --> 29:07.780
手机没有罗盘

29:07.780 --> 29:08.780
这时候

29:08.780 --> 29:09.780
你再往下的话

29:09.780 --> 29:10.780
也没用

29:10.780 --> 29:13.670
那么同样说

29:13.670 --> 29:14.670
为什么在第1个演员

29:14.670 --> 29:15.670
爆

29:15.670 --> 29:16.670
这时候

29:16.670 --> 29:17.670
你能回答我们

29:17.670 --> 29:18.670
这个其实

29:18.670 --> 29:19.670
就是小程序

29:19.670 --> 29:20.670
和

29:20.670 --> 29:21.670
我们现在

29:21.670 --> 29:22.670
mpv的一个区别

29:22.670 --> 29:23.670
小程序

29:23.670 --> 29:24.670
本身自己

29:24.670 --> 29:25.670
它每一个生命周期

29:25.670 --> 29:26.670
都针对于

29:26.670 --> 29:27.670
它现在的

29:27.670 --> 29:28.670
当前页面里面

29:28.670 --> 29:29.670
做

29:29.670 --> 29:30.670
即使你写在当前页面

29:30.670 --> 29:31.670
也没有关系

29:31.670 --> 29:32.670
它直接会运行

29:32.670 --> 29:33.670
但是如果对于

29:33.670 --> 29:34.670
mpv来讲

29:34.670 --> 29:35.670
它的生命周期

29:35.670 --> 29:37.670
它会优先于

29:37.670 --> 29:38.670
你的页面进行

29:38.670 --> 29:39.670
所以我们这时候

29:39.670 --> 29:40.670
你可以观察一下

29:40.670 --> 29:41.670
比如说我在这儿

29:41.670 --> 29:44.880
我们写一个

29:44.880 --> 29:45.880
这叫做

29:45.880 --> 29:46.880
我们哪里呢

29:46.880 --> 29:47.880
logs的

29:47.880 --> 29:52.020
created

29:52.020 --> 29:53.020
logs的

29:53.020 --> 29:54.020
created

29:54.020 --> 29:56.020
created出来

29:56.020 --> 29:57.020
然后

29:57.020 --> 29:59.020
我们再到手页

29:59.020 --> 30:00.020
这边

30:00.020 --> 30:01.020
再来做created

30:01.020 --> 30:02.020
你看一下

30:02.020 --> 30:04.020
console.log

30:04.020 --> 30:05.020
我们里面也写上

30:05.020 --> 30:09.020
这个是我们的index的

30:09.020 --> 30:11.020
created

30:11.020 --> 30:12.020
好

30:12.020 --> 30:14.720
来看一下页面

30:14.720 --> 30:15.720
你看到了吗

30:15.720 --> 30:17.720
这两个文件

30:17.720 --> 30:18.720
在没有进入到

30:18.720 --> 30:19.720
后面页面的时候

30:19.720 --> 30:21.720
它都会被执行了

30:21.720 --> 30:22.720
对吧

30:22.720 --> 30:23.720
它都会被执行了

30:23.720 --> 30:24.720
那么这个

30:24.720 --> 30:25.720
就是我们说到的

30:25.720 --> 30:26.720
为什么在这个页面上

30:26.720 --> 30:27.720
你会出现

30:27.720 --> 30:29.720
刚才提示框的内容

30:29.720 --> 30:30.720
就是我们在

30:30.720 --> 30:31.720
第二个页面的时候

30:31.720 --> 30:33.720
我们这边做了一堆

30:33.720 --> 30:34.720
和第二个页面

30:34.720 --> 30:36.720
罗盘有关的事情

30:36.720 --> 30:37.720
在我矫阵的时候

30:37.720 --> 30:38.720
我们并不希望

30:38.720 --> 30:40.720
去执行后面的

30:40.720 --> 30:41.720
那么这样做法

30:41.720 --> 30:43.720
就涉及到的是

30:43.720 --> 30:45.720
生命周期的一个概念

30:45.720 --> 30:46.720
created

30:46.720 --> 30:47.720
它一定会在

30:47.720 --> 30:48.720
我们所有页面

30:48.720 --> 30:49.720
在执行之前

30:49.720 --> 30:50.720
都会被执行到

30:50.720 --> 30:52.720
那我们要改它

30:52.720 --> 30:53.720
改成什么

30:53.720 --> 30:55.720
改成当前页面的

30:55.720 --> 30:56.720
unloader

30:56.720 --> 30:57.720
unloader

30:57.720 --> 30:58.720
只有在当前页面

30:58.720 --> 30:59.720
被加载的那一刻

30:59.720 --> 31:01.720
它才会被执行

31:01.720 --> 31:03.720
所以一旦改这个以后

31:03.720 --> 31:04.720
首先你看

31:04.720 --> 31:05.720
打开这个页面时

31:05.720 --> 31:07.720
它只执行了index created

31:07.720 --> 31:10.720
在我对象它点击以后

31:10.720 --> 31:11.720
你会发现这边

31:11.720 --> 31:13.720
我们的logs的unloader

31:13.720 --> 31:14.720
才会起作用

31:14.720 --> 31:15.720
那么三秒以后

31:15.720 --> 31:16.720
这个才会出现

31:16.720 --> 31:18.720
OK了吧

31:18.720 --> 31:19.720
所以在做这个

31:19.720 --> 31:20.720
和小程序的

31:20.720 --> 31:21.720
最大的区别是在于

31:21.720 --> 31:24.720
它的生命周期的问题

31:24.720 --> 31:25.720
它的生命周期

31:25.720 --> 31:26.720
是哪个

31:26.720 --> 31:27.720
你可以做

31:27.720 --> 31:29.720
因为我们现在这里边

31:29.720 --> 31:30.720
你暂时还没有启动

31:30.720 --> 31:31.720
就是说

31:31.720 --> 31:32.720
这边还没有

31:32.720 --> 31:34.720
更多的一些复杂代码

31:34.720 --> 31:35.720
如果你把它

31:35.720 --> 31:37.720
你认为你写在logs里面了

31:37.720 --> 31:39.720
但是它其实是在你

31:39.720 --> 31:40.720
页面夹载的时候就开始做

31:40.720 --> 31:41.720
这个就是

31:41.720 --> 31:43.720
不合理的一个点出来了

31:43.720 --> 31:44.720
记住

31:44.720 --> 31:45.720
如果说

31:45.720 --> 31:47.720
你需要在当前页面

31:47.720 --> 31:48.720
运行的时候

31:48.720 --> 31:50.720
才执行的那些代码的话

31:50.720 --> 31:52.720
你就必须放在

31:52.720 --> 31:54.720
当前页面的小程序的

31:54.720 --> 31:55.720
类似于unloader

31:55.720 --> 31:57.720
这样的生命周期中

31:57.720 --> 31:59.720
而如果你希望

31:59.720 --> 32:00.720
所有文件

32:00.720 --> 32:01.720
在页面

32:01.720 --> 32:03.720
打开的那一刻

32:03.720 --> 32:05.720
不管你在哪一个的

32:05.720 --> 32:06.720
页面中

32:06.720 --> 32:08.720
都会被先执行掉

32:08.720 --> 32:10.720
你就放在creative里面

32:10.720 --> 32:11.720
OK吧

32:11.720 --> 32:13.720
那么这个的很简单

32:13.720 --> 32:15.720
大家可以直接用扫码的方式

32:15.720 --> 32:17.720
直接去你自己手机上面

32:17.720 --> 32:19.720
进行测试

32:19.720 --> 32:20.720
我们手机上面

32:20.720 --> 32:21.720
用我们的

32:21.720 --> 32:22.720
你登录

32:22.720 --> 32:23.720
请记住

32:23.720 --> 32:25.720
你用你登录的这个来做

32:26.720 --> 32:27.720
就是

32:27.720 --> 32:29.720
我们在获取这个值的时候

32:29.720 --> 32:31.720
这边称之为叫direction

32:31.720 --> 32:33.720
我们在存它的时候

32:33.720 --> 32:35.720
我们可以起成directions

32:35.720 --> 32:36.720
获取值的时候

32:36.720 --> 32:38.720
也是direction

32:38.720 --> 32:40.720
注意一下这个就可以了

32:40.720 --> 32:42.720
因为在手机上面的时候

32:42.720 --> 32:43.720
我们看到

32:43.720 --> 32:44.720
在它的官网上面

32:44.720 --> 32:46.720
会有这样一个

32:46.720 --> 32:48.720
在它官网上面

32:48.720 --> 32:49.720
会有这样的一个要求

32:49.720 --> 32:51.720
就是用direction来获取

32:51.720 --> 32:53.720
那么其他的话

32:53.720 --> 32:54.720
这个页面就没有特别多的了

32:54.720 --> 32:56.720
那么主要的方式是

32:56.720 --> 32:57.720
这个

32:57.720 --> 32:59.720
我们把它理解成

32:59.720 --> 33:00.720
就是

33:00.720 --> 33:02.720
我们通过我们的微信MPView

33:02.720 --> 33:03.720
我们去调取

33:03.720 --> 33:05.720
我们的一个移动端的

33:05.720 --> 33:07.720
一个手机的一个组件

33:07.720 --> 33:09.720
但是它本身自己

33:09.720 --> 33:11.720
又没有办法在页面中

33:11.720 --> 33:13.720
进行所谓的开发

33:13.720 --> 33:15.720
所以我们只能说是

33:15.720 --> 33:16.720
利用MPView的格式

33:16.720 --> 33:18.720
把微信的这段代码放在这

33:18.720 --> 33:20.720
那么你如果忘记同学

33:20.720 --> 33:21.720
你要去查一下

33:21.720 --> 33:23.720
它的一个

33:23.720 --> 33:24.720
API文档

33:24.720 --> 33:26.720
就是我们的微信的官方文档

33:26.720 --> 33:27.720
查到以后的话

33:27.720 --> 33:29.720
你再来进行这方面的制作

33:29.720 --> 33:30.720
OK吧

33:30.720 --> 33:31.720
好

33:31.720 --> 33:32.720
那么这个就是

33:32.720 --> 33:34.720
我们这边所需要讲到的

33:34.720 --> 33:37.720
怎么通过我们MPView的结构

33:37.720 --> 33:39.720
去调取微信小程序

33:39.720 --> 33:41.720
调用手机组件的

33:41.720 --> 33:42.720
一个小应用

33:42.720 --> 33:43.720
好

33:43.720 --> 33:44.720
那么先讲到这儿

