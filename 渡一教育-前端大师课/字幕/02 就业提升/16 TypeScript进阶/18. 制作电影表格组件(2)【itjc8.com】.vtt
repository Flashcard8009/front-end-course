WEBVTT

00:00.560 --> 00:03.880
好了 那咱们继续来开发这个表格

00:04.660 --> 00:08.500
这个表格里边还有两列还没有做 对吧 还有

00:08.760 --> 00:13.620
就还有一列啊 这一列呢要显示可以操作的东西 就是可以编辑

00:13.880 --> 00:15.160
可以删除

00:15.420 --> 00:16.940
可以编辑可以删除

00:17.460 --> 00:18.220
好 来呗

00:19.000 --> 00:23.600
这里呢 我们在这里再加一列 加一列就是操作

00:24.620 --> 00:25.640
我们这里加一列

00:26.680 --> 00:27.960
就是操作

00:28.960 --> 00:31.800
这个data index我们就没有必要写了啊

00:32.060 --> 00:35.640
还写啥呢 它没有什么数据需要显示 不显示任何数据

00:35.900 --> 00:37.180
所以这个没有必要写了

00:37.680 --> 00:43.580
然后Render这里呢 Render这里呢 我们就是给它返回一个组件 返回一个组件

00:43.840 --> 00:50.240
那么第1个呢就流空 第1个流空 或者我们这个data index写ID也行 对吧 我们可以写ID

00:52.020 --> 00:53.300
下滑线ID 你看

00:53.560 --> 00:55.360
如果你写错了 它会爆错的

00:55.820 --> 00:58.640
好 我们写个ID啊 那这里我们得到ID

00:58.900 --> 01:02.480
这里呢 我们先把这个ID返回吧 我们看一下能不能得到啊

01:02.740 --> 01:04.520
这个record我就不要了

01:04.780 --> 01:10.680
因为我们编辑也好 删除也好 可能设计到的也只有ID了 也没有其他的了 跟它约束一下吧

01:10.940 --> 01:11.960
它是一个字幕串

01:12.980 --> 01:14.260
这里是一个字幕串

01:15.280 --> 01:16.060
保存

01:16.300 --> 01:17.580
来呗 看一下啊

01:18.620 --> 01:21.420
嗯 可以 不错啊 ID可以显示出来了

01:22.000 --> 01:29.400
得到ID之后呢 我们这里呢 要显示两个东西啊 一个两个按钮 一个编辑 一个删除

01:29.920 --> 01:32.080
那么这里呢 我们就返回啊

01:32.840 --> 01:39.440
返回两个按钮啊 两个按钮 写个DIV吧 这里面加两个按钮 那么我们看一下啊 在

01:40.320 --> 01:44.240
ind里边按钮了就是个就是个button 那就是个button

01:45.220 --> 01:52.900
我们编辑的话就用一个普通按钮吧 就用个普通按钮得了 对吧 就用普通按钮 我们这里

01:53.820 --> 01:56.860
看一下啊 就用普通按钮 type 的primary

01:58.140 --> 01:59.580
ok 把这个复制一下啊

02:01.060 --> 02:03.780
好 复制一下 粘过来 这里

02:05.140 --> 02:06.140
导入啊 导入

02:07.140 --> 02:08.660
好 这里编辑

02:10.700 --> 02:11.260
编辑

02:13.790 --> 02:15.590
然后button

02:17.910 --> 02:27.710
也是type 删除的话 我们用等线吧啊 你看他这里用的是用的是啥呢 用的是字面量啊 联合类型的字面量约束 所以说我们这里可以有智能提示

02:28.270 --> 02:30.230
等线 这里是删除

02:31.430 --> 02:40.270
实际上啊 我们做这个项目 哪怕我讲这个项目 我不用特别去用什么TS的类型约束 啥类型约束都不用 其实也

02:40.690 --> 02:45.130
已经方便了很多了 真的已经方便了非常非常多了 好 这里我们

02:46.010 --> 02:47.490
保存啊 看一下

02:49.290 --> 02:54.330
好 编辑删除都有了啊 尺寸调整一下吧 调整一下尺寸

02:55.330 --> 02:59.490
啊 这里比而我们调整一下这个size 应该是这个属性啊 size

03:00.970 --> 03:02.130
尺寸啊 smore

03:03.090 --> 03:03.570
小按钮

03:06.000 --> 03:11.960
好 保存一下 嗯 差不多了啊 有编辑 有删除

03:12.940 --> 03:18.860
好 然后点编辑的话 我们要调转页面对吧 调转到编辑电影的页面

03:19.380 --> 03:21.900
好 调转页面的话 我们这里可以用live link

03:22.300 --> 03:27.980
啊 new live link 来进行调转 我们导入一个啊 导入从那个rotor里边导入这个live link

03:30.190 --> 03:30.630
from

03:31.270 --> 03:31.830
react

03:32.630 --> 03:33.750
re-rotor

03:34.470 --> 03:36.190
动啊 导入这个live link

03:36.870 --> 03:42.190
然后我们通过这个链接来进行调转啊 把这个第一个按钮包含在live link里边

03:43.530 --> 03:49.130
live link 包含在这里边 把这个按钮放进来 啊 其实那个玩意就是一个A元素 对吧

03:49.330 --> 03:53.530
A元素里边是不是可以放按钮 对不对 好 我们包含进来啊 然后2

03:54.330 --> 03:56.730
调转到哪呢 调转到啊

03:58.330 --> 03:59.050
调转到

04:00.610 --> 04:09.930
哪个位置啊 调转到movie edit 后面要跟个电影的id对吧 id的话 我们就把这个id拼接进来啊 于是我这里可以写个解释表达是

04:10.730 --> 04:16.370
一个制服创 拼一个id啊 这些都是很简单的 没什么好说的啊 保存一下啊 咱们来看一下

04:17.930 --> 04:26.250
好 点击编辑啊 你看 跳过来了 跳了修改电影也啊 这里点击编辑好 id换了啊 跳过来了

04:26.890 --> 04:35.250
再点一次啊 ok 没问题 好编辑这里我们搞定了啊 编辑这里我们搞定了 然后三处啊 点击三处

04:35.810 --> 04:38.050
三处点击的话啊 我该做这个事件

04:38.850 --> 04:39.210
叫做啊

04:40.490 --> 04:47.490
click啊 他都有提示的啊 点击的时候呢 我们要运行一个事件啊 要运行一个事件

04:47.970 --> 04:53.170
这个事件里面我们要做啥呢 其实怎么删除 我们也删除不了 对吧 我们其实也删除不了

04:53.570 --> 05:04.210
因此呢 我要把这个事件扔出去啊 要把这个事件扔出去 所以说呢 我这里应该咋做呢 我这里呢 可以再写一个啊 在属性里边 你再给我一个事件 我删除的时候要做什么

05:04.370 --> 05:07.490
啊 你把这个事件给我啊 这里on the net

05:08.530 --> 05:15.330
他也是一个事件啊 也是个事件 我会到时候呢 会把这个id给你啊 我会把你要删除的id给你

05:16.370 --> 05:19.570
id给你 然后呢 你去完成三处啊 你去完成三处

05:20.450 --> 05:22.850
啊 就完事了啊 写这么一个

05:23.490 --> 05:31.810
写这么一个on the net 函数啊 写这么一个函数啊 这个函数呢 其实可以把做成一步的 对不对 对对 把它做成一步的啊 我到时候会提示一下三处成功

05:32.450 --> 05:38.130
啊 也就说这个函数呢 他三处肯定要经过一个过程啊 你可以 我可以把它做成一个一步的 反回一个promise

05:39.330 --> 05:45.650
反回个promise对象 ok 我们这样子来处这样子来处理啊 我们这里找不到名称是吧 怎么名称

05:46.210 --> 05:50.290
哎 这里为什么会找不到名称呢 promise 哦 这写错了啊 promise

05:51.410 --> 05:57.250
好 我们写好这么一个属性 好 写好这个这么一个属性之后呢 我这里呢 就可以这样来处理了啊

05:57.650 --> 06:05.090
啊 三处点击三处的时候呢 我让我去调用 res props 调用一下 on the net

06:06.210 --> 06:12.050
把id给你传进去啊 你去完成三处啊 你去完成三处 好吧 好我这样子写

06:13.170 --> 06:20.290
嗯 这样子写了之后呢 我们看一下页面这里就爆错了啊 因为他这里少了一个属性 对不对 少了一个属性 ok 那么该写上这个属性

06:20.850 --> 06:26.450
on the net 他会把id给我啊 我要反回一个promise 因此呢这个函数呢 是一个一步函数

06:27.330 --> 06:29.730
sync 是一个一步的

06:30.290 --> 06:39.250
好 完成三处的时候呢 我们还是通过dispatch 因为我们之前也做过三处的对吧 movie action 然后呢denet action

06:40.210 --> 06:48.370
denet action 三处我看一下啊 三哦 denet movie 啊应该是这个啊 denet movie 把id传进去啊

06:48.930 --> 06:53.170
把这个id传进去 id的话就是这里id传进去

06:53.890 --> 07:05.810
好 这个玩意呢 我们啊 等待一下他啊 等待一下他 而位置 等待一下他 因为他删除了需要一个时间啊 需要一个过程啊 因为这是一个一步操作嘛 对不对

07:06.050 --> 07:13.250
我们可以等待一下他啊 好 等他删除完 删除完之后呢 我们来看一下啊 看一下现在能不能删除了

07:14.210 --> 07:23.730
嗯 我们先把这个电影1和电影2给删了 电影1 好 删了啊 电影2删了 好 界面上已经没有了 对吧 你看到 界面上其实已经没有了

07:24.130 --> 07:28.610
那么数据库里面还在不在呢 我们刷新看一下就知道数据库在不在了 刷新

07:30.210 --> 07:39.650
好 说明数据库也完成了三处 OK 三处功能呢 这里就做的差不多了 好 最后呢 三处功能这里 我们把优化一下啊 一个是有个提示

07:40.290 --> 07:48.450
删除完了过后 我希望有个提示 好 提示怎么写呢 希望有个提示的话 我们看一下啊 在nd里边 他还是有提示的

07:49.410 --> 07:51.090
呃 在哪里 我看一下

07:51.970 --> 07:56.770
删除反馈啊 反馈 我们看一下这个 全局提示啊 message

07:57.810 --> 07:58.290
看一下这个

07:59.890 --> 08:06.210
啊 显示 OK 好 我们就用这种提示吧啊 四个sh 删除好 我们来看一下这个四个sh是咋写的

08:06.930 --> 08:07.650
啊 四个sh

08:08.530 --> 08:10.610
呃 看一下咋写的啊

08:11.730 --> 08:17.810
嗯 点击是个sh 也就是调用一个函数就完事了 对吧 调用一个函数就完事了 那简单

08:18.290 --> 08:21.410
我把他复制一下啊 我这边来 到到这个

08:22.690 --> 08:27.650
movie table里边来 好 三处完成之后啊 点击三处完成之后呢

08:28.210 --> 08:35.570
我等待你啊 因为你你反复的是个异步的嘛 对吧 反复的是个promise 你看呗 反复的是个promise 因此呢 我这里等待你啊

08:36.130 --> 08:40.930
等待你三处完成 那么他要等待的话就不 这个函数呢 也必须要是一个异步函数

08:41.250 --> 08:50.770
二sync 好 等待你三处完成 三处完成之后呢 我们啊 输出一个消息 这里倒入进来 好 输出个消息 三处成功

08:52.370 --> 08:56.450
三处成功 好 保存一下啊 让你再来看啊

08:57.730 --> 09:03.010
反正我们的数据多的很 随便删 删除啊 删除成功 删除成功 删除成功

09:03.730 --> 09:15.250
好 这个是提示搞定的 然后呢 我们还想点击三处的时候呢 给我一个确认的啊 提示 就是到底要不要删除 因为三处的操作呢

09:15.810 --> 09:21.330
是比较重要的啊 是比较重要的 因此呢 我们希望给他一个提示啊 我这里其实顺便说一句吧

09:21.890 --> 09:26.370
实际上啊 在公司里边会不会真正的删除数据呢

09:27.250 --> 09:33.490
一般来说都不会的啊 在公司里边 我们的数据是很重要的 他不能你不能让你随便删除的

09:33.810 --> 09:40.130
我们删除的数据呢 实际上是在数据库里边做了一个标识啊 标 标识一下啊 比方说有一个属性

09:40.290 --> 09:46.450
一直定内 适逢删除了啊 如果你删除了不会把他设为去 我就只是不不把他显示出来而已

09:46.770 --> 09:51.650
数据库里边实际上还还占啊 只不过我们这个项目呢 简单一点啊 不去做那么复杂

09:52.610 --> 09:54.930
公司里边一般是不会真正的删除数据的

09:55.810 --> 09:59.570
好 这里呢 我希望给给个提示啊 点击删除的时候 谈出一个提示

10:00.290 --> 10:05.410
呃 提示的话 我们看一下 应该是个这个对号框 对吧 应该是这个玩意 看一下啊

10:06.690 --> 10:11.250
是这个意思吧 呃 这是个模态框啊 这个是个模态框

10:12.530 --> 10:15.890
我看一下 这个模态框的话 我觉得

10:16.210 --> 10:20.530
呃 用者不是很舒服 我们用这个气泡缺人框吧

10:21.090 --> 10:26.130
这个要简单一点啊 这个要简单一点 好吧 我们用这个玩意啊 用这个玩意

10:26.610 --> 10:29.970
看一下怎么用的 非常简单啊 外面该套一个prob

10:30.850 --> 10:32.850
prob comfort啊 pop comfort

10:33.890 --> 10:36.850
好 我们把它复制一下啊 复制一下 到这边来

10:38.050 --> 10:40.450
套 外面套一个东西啊 外面套一个东西

10:41.170 --> 10:50.560
套一个pop comfort 把这个关了 好 这里

10:51.120 --> 10:55.440
套一个pop comfort 然后这里边呢 我先倒入进来啊 先倒入进来

10:56.320 --> 10:59.840
呃 台头表示的是啊 表示的是提示消息

11:01.040 --> 11:04.960
真的要确定要删除吗

11:07.120 --> 11:14.240
on comfort啊 当我们点击 点击确定的时候 好 也就是说点击确定的时候 我们才做这个操作对吧

11:14.400 --> 11:16.080
也就是说我们这个代码呢 可以写到这来

11:16.880 --> 11:20.800
把这一块代码啊 放到这来 好 这个就不要了

11:22.320 --> 11:24.720
好 点击确定的时候 我们做这个操作

11:25.360 --> 11:33.680
然后点击取消的时候 我啥都不做啊 取消的时候啥都不做啊 确定的按钮呢 我们就给他写个文本 确定啊 取消按钮呢 取消

11:34.960 --> 11:36.720
好 再看一下啊

11:37.600 --> 11:46.900
做加一个这个东西 点删除 okay 你看 还有提示的啊 取消就什么都不做啊 点删除 点确定

11:47.780 --> 11:49.940
删掉了 点确定 删掉了

11:51.140 --> 11:55.060
好 那么删除功能 编辑功能呢 我们都把它做出来了啊 都做出来了

11:55.860 --> 11:59.540
呃 那么这节课呢 再加一个东西吧 因为现在还有两个东西没有做

12:00.100 --> 12:05.300
表格里边还有一个搜索 还有一个分页 对吧 还有搜索一个分页

12:05.940 --> 12:08.820
好 我们这里先做分页吧 先把分页给做了

12:10.020 --> 12:13.940
好 先把分页给做了啊 我们怎么来做这个分页呢

12:15.300 --> 12:18.180
看那个官方文档 他里边有说到啊 这里边

12:19.140 --> 12:25.780
分页的话有这么一个啊 配积getting啊 配积getting 就是配置这个东西来完成分页

12:26.180 --> 12:30.900
如果你把它配置为force的话 那么就不不展示啊 不展示分页

12:31.620 --> 12:35.940
如果你如果你把它配成一个对象的话 就是显示分页

12:36.820 --> 12:42.660
好 什么时候我要显示分页 什么时候我不显示分页了 我们这里可以处理一下啊

12:43.460 --> 12:45.220
就是这个page nation

12:46.900 --> 12:48.660
好 我们这里处理一下

12:50.420 --> 12:58.100
这边加个配置啊 page nation 我们给他加个配置啊 这个配置的话 我们专门写个函数来得到一个配置 因为这里的配置呢可能比较多

12:58.820 --> 13:01.540
呃 我们只要看一下这个page nation什么类型

13:02.180 --> 13:06.580
你看他的类型有这么几个类型 他是可选的 也就是说他有可能是undefined

13:07.460 --> 13:10.500
也有可能是force 也有可能是page nation config

13:11.060 --> 13:15.140
他有这么几种情况 我们这里呢只考虑这两种情况 一个是部分页

13:15.780 --> 13:21.140
和一个分页配置 我们考虑这么两种情况 好 那么这里呢 我们首先

13:21.860 --> 13:24.580
写这么一个函数啊 get page

13:26.020 --> 13:26.500
config

13:27.460 --> 13:32.580
得到分页配置 返回的是啥呢 我们就可以用这里啊 这里标注的东西

13:33.220 --> 13:37.460
返回的有可能是这个config对象 有可能的是一个force

13:38.260 --> 13:40.500
啊 这两种情况都有可能啊 都有可能

13:42.020 --> 13:47.380
啊 我们写这么一个函数啊 好 这个函数里边呢 他找不到名称 导致进来啊

13:49.060 --> 13:51.940
好 这个函数里边呢 我们判断一下 什么情况下

13:52.740 --> 13:53.540
我不分页

13:54.980 --> 14:03.510
想一想 啥情况下我不分页 我们的属性里边不是有这么一个东西吗

14:04.390 --> 14:07.830
那个啥 偷偷对吧 总纪录数

14:08.630 --> 14:14.870
如果总纪录数啊 如果总纪录数等于零了还分页吗 一早分页

14:15.670 --> 14:19.590
一页都没有你怎么分页 说总纪录数为零的情况下

14:20.310 --> 14:23.830
能分页吗 他不能分页 所以说这个种情况下返回force

14:24.630 --> 14:25.910
啊 这种情况下返回force

14:27.030 --> 14:29.830
好 什么那么剩下的呢 我们先返回一个空对象啊

14:30.470 --> 14:37.190
先返回一个空对象 因为这个里面的很多属性都是可选的 我们一会就可以看到 其实你先来看一下吧 这里面配置

14:38.710 --> 14:41.990
啊 他继承了另外一个配置 叫page nation props

14:42.550 --> 14:46.230
啊 继承了个配置 你看全是可选的属性啊 这些属性全是可选的

14:46.470 --> 14:49.830
所以说呢 我们现在先暂时不写啊 我们看一下啊 首先

14:50.870 --> 14:56.950
就是说什么情况下不分页呢 就是我们一条数据都没有的情况下就不分页了

14:57.990 --> 15:00.070
什么情况下会一条数据都没有呢

15:01.110 --> 15:04.790
第一种情况 数据库里面啥都没有 对吧 数据库里面啥都没有

15:05.270 --> 15:07.990
第二种情况呢 是一开始页面出现的时候

15:08.710 --> 15:14.150
一开始页面出现的时候 是不是什么数据都没有 对吧 什么数据都没有 那么那个时候呢也不分页

15:14.630 --> 15:16.790
这个情况我们稍微处理一下就行了 这个简单

15:17.830 --> 15:23.590
好 我们现在主要是看分页的情况 要分页的情况 有哪些可以配置呢

15:24.230 --> 15:29.830
啊 我们来看文档啊 要学会看官方文档 这些东西都不用你去背啊 反正我是背不住的啊

15:30.790 --> 15:35.510
啊 看文档啊 这里边呢 他有一个分页配置 他说请你参考这个文档

15:36.150 --> 15:38.470
这个文档里边有详细的分页配置

15:39.430 --> 15:44.630
ok 那么我们进入这个文档 就看一下分页的时候 哪些东西可以配置啊 我们直接看最后边

15:45.590 --> 15:51.590
第一个 当前 当前的页数 页码啊 应该是当前页码

15:51.910 --> 15:54.230
这个是不是要配置啊 这个要配置

15:54.870 --> 15:58.230
当前的页码来自于哪呢 是不是来自于属性 是不是里面有

15:58.870 --> 16:02.950
当前的页码是哪 是condition里面的什么配置 对吧

16:03.510 --> 16:05.830
来自于这啊 当前页码来自于这

16:06.550 --> 16:13.590
还有哪些要配置呢 还有哪些呢 我看一下啊 默认的每条的页数

16:14.390 --> 16:17.350
应该有一个配置材质 对 每页显示多少条数据

16:18.390 --> 16:22.710
他也会影响到分页 对吧 每页显示多少条数据 是不是要配置一下

16:23.590 --> 16:29.590
啊 要配置一下probs啊 来自于哪呢 来自于limit 对不对 来自于这

16:30.470 --> 16:33.350
好 继续啊 每页显示多少条数据

16:33.910 --> 16:39.910
然后呢 这里看一下啊 还有一个总页数啊 总页数偷偷

16:40.630 --> 16:46.950
总的数据数啊 总的数据这是不要配置啊 来自于哪呢 来自于sprobs

16:46.950 --> 16:49.750
condition 啊condition的这么

16:50.950 --> 16:55.030
呃不是不是condition啊 应该就是偷偷啊 来自偷偷

16:56.230 --> 17:01.910
好 把这个三个配置完了过后基本上就没了啊 基本上就没了 保存一下 我们来看一下分页

17:03.430 --> 17:07.270
这数据我们都提供了的 对吧 一共一百二十二页啊

17:08.390 --> 17:11.270
好 分页完成之后呢 我现在我们要搞定下一件事情就是

17:12.150 --> 17:14.070
挑转页面 挑转页面

17:14.950 --> 17:19.270
怎么挑转页面呢 实际上呢 在官方文档里边已经说得很清楚了啊

17:19.750 --> 17:24.710
我们在在这里可以处理 就是在分页配置这里可以处理 也可以在表哥这里统一处理

17:25.030 --> 17:29.270
因为我们后边还要做按关键字查询 也就是搜索

17:29.750 --> 17:32.710
由于我们后边还要做搜索 所以说我们到到时候统一处理吧

17:34.070 --> 17:40.470
在表格里边呢 有一个函数 你可以配置的 表格里边有个函数 我看一下在哪

17:42.550 --> 17:44.790
表格里边的函数是在

17:46.070 --> 17:46.550
啊 这里

17:47.830 --> 17:48.470
on change

17:49.910 --> 17:56.390
反分页排序啊 表哥还是可以排序的 只不过我们服务器呢 没有做排序功能啊 排序我们这里就忽略掉了

17:57.030 --> 18:01.030
在分页排序和筛选 筛选就是按照关键字查询

18:01.590 --> 18:05.910
啊 这些情况发生变化的时候 他会触发on change

18:06.550 --> 18:07.350
触发这个事件

18:08.150 --> 18:12.470
好 后边这个事件给你提示了啊 他有哪些哪些参数的可以获取

18:13.270 --> 18:17.590
好 我们其实只需要一些 对吧 好 我们来写一下on change这个事件

18:18.230 --> 18:20.710
on change这个事件 配在表格里边

18:21.910 --> 18:24.470
好 on change这个事件里边呢 我们

18:25.270 --> 18:28.950
那他去调用一个函数吧 我们在函数里边处理啊 在函数里边处理

18:29.590 --> 18:30.070
方可行

18:30.950 --> 18:34.630
不是方可行啊 就是handle change

18:35.430 --> 18:42.470
处理变化啊 处理变化 当所分页发生变化的时候啊 当筛选发生变化的时候啊 我们

18:43.190 --> 18:46.950
触发这个函数 这个函数呢里边呢有一些参数啊

18:47.590 --> 18:52.870
这个参数呢 我这里看一下啊 一个是分页的 分页的情况 一个是筛选的情况

18:53.750 --> 18:55.910
也就是我们其实只要用到这两个参数就够了

18:56.710 --> 18:58.230
只需要用到这两个参数就够了

18:58.950 --> 19:00.070
好 这是这两个参数

19:01.110 --> 19:04.790
好 这两个 然后呢 这里呢 我们去调用这个函数啊 我们z

19:05.670 --> 19:10.710
handle change 调用这个函数 当我们分页发生变化的时候 让它运行这个函数

19:11.190 --> 19:14.150
只不过呢 你要小心一点啊 这里会有z指向的问题

19:14.630 --> 19:19.830
会有z指向的问题 所以说你小心一点 这里最应该怎么做 应该用band

19:20.390 --> 19:22.390
绑定z啊 绑定z

19:22.950 --> 19:23.990
好 去调用这个函数

19:24.790 --> 19:27.510
好 这个函数里边有两个参数 这两个参数啥类型呢

19:28.950 --> 19:32.470
当然你可以不写类型 不写类型的话 就没人是n你 对吧

19:33.510 --> 19:39.030
如果是n你类型的话 你没有办法获得智能提示 也没有办法呢 获得类型检查

19:39.430 --> 19:44.470
如果你要给他加类型的话 怎么加 像这种情况我遇到很多很多次了

19:45.270 --> 19:48.950
他这个参数啥类型 你就看这边 你就看这个n签几啥类型

19:49.590 --> 19:50.310
第一个参数

19:50.950 --> 19:54.150
page nation config 对吧 是这个类型

19:54.630 --> 19:56.950
好 filters 什么类型啊 你看一下这里

19:57.430 --> 19:58.070
filters

19:59.270 --> 20:02.230
然后它是这一长串类型 这一长串类型

20:03.350 --> 20:08.790
那么这个recorder 表示的是什么类型呢 他这里面实际上是啥 是不是这个imv的

20:09.590 --> 20:15.110
啊 因为他分 因为他到时候筛选的时候呢 要做一些事情啊 或者说我们现在先不着急写筛吧

20:15.590 --> 20:19.670
先不着急写筛 我们一会再说啊 一会做筛选的时候再详细说

20:20.150 --> 20:28.070
我们先先搞定分页 好 当分页变到变化的时候呢 我们来输出一下啊 输出一下这个参数

20:28.150 --> 20:28.870
page nation

20:30.230 --> 20:33.670
page nation 输出一下 看一下这里面有啥 保存

20:36.710 --> 20:40.840
把控制台打开 这里先清空啊

20:42.280 --> 20:47.720
然后点击第二页 点第三页 点第四页 点一百二十二页

20:48.680 --> 20:50.520
我 你看到没 我需要啥东西

20:51.240 --> 20:59.080
我需要啥东西 是不是这个corrent 对吧 我把这个corrent就是新的夜所影 对不对 好 我把这个玩意啊 把这个玩意拿到

20:59.640 --> 21:05.000
然后呢 在这里边去触发事件 在这里面触发事件 因为你点了分页过后

21:05.720 --> 21:11.000
肯定会影响到各种各样的数据 他会影响到数据仓库里边的数据 我这里肯定处理不了

21:11.160 --> 21:12.520
因此呢 我要把事件扔出去

21:13.400 --> 21:16.200
我把事件扔出去 这里面再加个时间啊

21:17.160 --> 21:21.560
on page change

21:23.240 --> 21:23.880
那么这里呢

21:25.480 --> 21:27.880
或者叫做on change吧 on change

21:28.680 --> 21:31.880
on change的时候呢 我会告诉你一个新的夜码

21:32.360 --> 21:33.000
新的夜码

21:34.040 --> 21:34.680
new page

21:35.240 --> 21:35.800
是一个number

21:37.400 --> 21:41.720
一个新的夜码 然后你返回啥呢 其实你啥都不用返回啊 握着就行了

21:42.680 --> 21:48.840
好 我们写到这个时间 这个时间写一看 马上又一天提示你啊 现在多了个时间了 这里是不是要加个加个时间

21:49.800 --> 21:50.840
on change

21:51.880 --> 21:56.280
new page 一个新的夜码告诉我 然后我做啥呢 是不是又是dispatch

21:57.000 --> 21:59.320
啊 这边new vaction 啊 这里

22:01.480 --> 22:01.800
什么

22:02.920 --> 22:07.000
又是fake movies 啊 fake movies 啊 传条件啊 条件

22:07.480 --> 22:11.160
条件呢 我们只需要给他一个新的夜码就行了啊 page

22:11.800 --> 22:15.480
new page 啊 把新的夜码告诉他就行了 这样的事情

22:16.200 --> 22:17.960
有仓库去完成数据的变化

22:18.760 --> 22:28.360
好 仓库的数据一变 你看一下这边的是不是跟着变了啊 这边啊 这边的什么夜所影啊 这些东西把他都跟着变了啊 当前夜码那些跟着变了

22:28.760 --> 22:30.360
总夜数也可能也会跟着变

22:31.320 --> 22:37.080
好 那么这里呢 我就去啊 当我们分业发生变化的时候 我就去调用那个函数就完事了啊 调用这个函数

22:37.800 --> 22:40.120
不用判断啊 直接来调用 this props

22:41.320 --> 22:45.080
on change 调用 把新的夜码给你 page nation

22:46.120 --> 22:49.960
nation 然后这里面current 啊 把新的夜码告诉你

22:51.000 --> 22:59.000
好 这里爆错啊 啊 他说他有可能是on define 有可能是on define 那么这里呢 我们明确的知道 他不可能是on define 对吧

22:59.320 --> 23:01.880
如果他没有分业的话 如果他没有分业的话

23:02.520 --> 23:03.480
啊 我们这里是

23:04.120 --> 23:07.320
如果他没有分业的话 我们这种这这里呢 是

23:08.440 --> 23:11.160
是不嫌是分业的 所以他这里不可能是on define

23:11.720 --> 23:17.800
至少目前不可能是on define 之后如果有可能是on define的话 我们再再考虑对吧 至少目前不可能是on define

23:18.280 --> 23:20.520
那么我们直接叫个感嘆号 完事

23:21.960 --> 23:30.240
好了 保存一下啊 那么这里这边啊 这边 我们看一下分业

23:31.200 --> 23:40.160
关了啊 第二页啊 你看数据是不是显示到第二页了啊 第三页啊 你看数据显示到第三页了

23:41.280 --> 23:44.160
啊 这个变化了太快了啊 这个变化太快了 你可能

23:44.880 --> 23:48.720
感觉不出来啊 但是确实已经完成了分业了啊 已经完成了分业了

23:49.440 --> 23:53.600
好 我们现在接下来 干脆把这个功能也做了吧 就是一个夹仔效果

23:54.160 --> 23:56.400
因为他分业的过程中啊 他会

23:57.200 --> 24:01.520
从远程去读取数据 并且呢 页面一开始数据没有是

24:02.080 --> 24:09.520
啊 他夹仔数据呢是需要一点时间 我希望在夹仔数据的时候呢 有一个夹仔效果啊 有这么一个夹仔效果

24:09.920 --> 24:13.680
这个夹仔效果很简单啊 就是在table里边有一个loading

24:14.320 --> 24:19.440
一个loading这个属性在table里边有这么一个属性啊table里边有一个loading属性

24:19.520 --> 24:21.520
一个配置一下就行了啊 配置为一个board

24:21.840 --> 24:22.320
就行了

24:23.040 --> 24:24.640
好 那么我们这里配置一下啊

24:25.360 --> 24:26.960
配置一下这个playboard里面的loading

24:28.160 --> 24:30.000
配置为啥呢 是不是属性里面有

24:30.560 --> 24:34.160
属性里面就有一个一声loading对吧 要配置为这个值就行了

24:35.360 --> 24:40.200
保存一下 啊 大家不知道能不能看得清楚啊

24:42.040 --> 24:47.160
啊 能不能看得清楚啊 我这里为了让大家看得清楚啊 因为我这个是录评员

24:47.160 --> 24:49.240
所以说不知道这个帧率是多少

24:49.800 --> 24:53.320
所以大家可能看不清楚 那我这样子吧 我在

24:54.280 --> 24:56.760
service里边啊 我在service里面

24:57.560 --> 24:59.080
嗯 处理一下

25:00.280 --> 25:01.960
service里面movie service

25:02.680 --> 25:06.360
得到电影这一块啊 我得到电影这一块 我处理一下

25:07.320 --> 25:11.160
嗯 在get movies这里啊

25:12.760 --> 25:17.800
嗯 我想一想啊 我在这里处理吗 我就在这里处理吗啊 我就在这里处理

25:18.600 --> 25:21.800
我这里处理不知道 但是我这个代码不知道大家能不能看懂啊

25:22.040 --> 25:25.480
因为我这里就不用await了啊 我返回的是一个new promise

25:26.120 --> 25:30.680
返回的是new promise 为什么呢 因为它是个异部还说啊 返回的是一个promise

25:31.240 --> 25:33.480
这个promise里面有resolve

25:35.480 --> 25:37.160
resolve reject

25:38.280 --> 25:41.640
我们只需要resolve就够了 只需要resolve就够了

25:43.000 --> 25:45.880
这是es6里面的异部的做法啊

25:46.920 --> 25:48.920
这个await是es7里面的

25:49.640 --> 25:52.040
好 这里边呢 我们用个set timeout

25:53.080 --> 25:53.880
set timeout

25:54.840 --> 25:58.040
等待1.5秒吧 等待1.5秒

25:58.440 --> 26:02.280
等待1.5秒的时候呢 才去做这个事啊 才去做这个事

26:03.240 --> 26:07.800
啊 这里我把它写成一个异部的函数啊 写成了异部的函数

26:08.760 --> 26:11.800
好 等待1.5秒之后呢 我们才去做这个事

26:12.120 --> 26:16.840
然后这里不是返回data了啊 这里是使用resolve data

26:17.800 --> 26:23.880
好了啊 好了 那现在呢就没什么问题了啊 没什么问题了

26:24.520 --> 26:31.880
OK 我们再保存一下 好 你看1.5秒之后

26:33.800 --> 26:37.480
啊 1.5秒之后啊 1.5秒之后完成分页

26:39.160 --> 26:44.760
好了 那么现在呢 分页也搞定了啊 分页也已经搞定了

26:45.480 --> 26:48.360
好 那么这节课呢 我们先倒着吧

26:49.080 --> 26:53.800
先倒着吧 好吧 那么大家跟上啊 我不希望一节课讲了太长太长

26:54.200 --> 26:58.840
呃 大家跟上把这个分页的功能呢 做了啊 把分页的功能做了

26:59.320 --> 27:05.800
呃 做了之后呢 我们最后一块 最后一块表格呢就是筛选啊 我们筛选单独拿一节课来做

27:06.120 --> 27:10.840
好吧 现在先把分页的功能做了 好 那么这里可能就到这了啊 拜拜

