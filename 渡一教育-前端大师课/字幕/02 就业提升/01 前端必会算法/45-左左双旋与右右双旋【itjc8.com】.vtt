WEBVTT

00:01.140 --> 00:07.060
大家好 上一集咱们说了左右双圈和右左双圈

00:07.060 --> 00:10.260
但是上一集我们说完左右双圈和右左双圈之后

00:10.260 --> 00:12.780
我们发现二叉树它还不平衡

00:12.780 --> 00:14.100
为什么呢

00:14.100 --> 00:17.620
因为有一种 还有一种特殊的情况

00:17.620 --> 00:19.140
还有一种特殊的情况

00:19.140 --> 00:20.420
看

00:20.420 --> 00:22.660
看这个PPT

00:22.660 --> 00:25.060
说现在有一颗这样的二叉树

00:25.060 --> 00:27.540
这样的二叉树 九的左边是六 是吧

00:27.540 --> 00:29.060
六的左边是五的左边是四

00:29.140 --> 00:31.540
六的右边是七 右边是八

00:31.540 --> 00:34.420
我们从下往上看是不是平衡 是吧

00:34.420 --> 00:35.620
四是不是平衡

00:35.620 --> 00:37.420
五是不是平衡 是吧

00:37.420 --> 00:38.340
八是不是平衡

00:38.340 --> 00:39.580
七是不是平衡

00:39.580 --> 00:40.780
六是不是也平衡

00:40.780 --> 00:41.540
对吧

00:41.540 --> 00:43.500
九是不是不平衡

00:43.500 --> 00:44.300
对吧

00:44.300 --> 00:46.020
所以我们要进行右选 是吧

00:46.020 --> 00:47.140
然后我们看变化分支

00:47.140 --> 00:49.380
是不是唯一最深的

00:49.380 --> 00:50.340
不是 是吧

00:50.340 --> 00:52.100
它确实是最深的

00:52.100 --> 00:53.580
但是它不是唯一最深的 是吧

00:53.580 --> 00:55.780
因为左边这两个跟它一样深

00:55.780 --> 00:56.100
对吧

00:56.100 --> 00:57.780
它但它不是唯一最深的

00:57.780 --> 01:02.020
然后我们给它右旋 是吧

01:02.020 --> 01:03.220
右旋怎么练

01:03.220 --> 01:07.040
哎呦

01:07.040 --> 01:09.790
怎么的

01:09.790 --> 01:12.110
先把它给断开 是吧

01:12.110 --> 01:13.310
拿下来

01:13.310 --> 01:16.030
然后把六给提上去

01:16.030 --> 01:19.150
把九拿下来

01:19.150 --> 01:24.980
对吧

01:24.980 --> 01:26.340
六提上去 九拿下来

01:26.340 --> 01:31.460
然后七放到九的左边 是吧

01:31.460 --> 01:33.860
这是右单旋 对吧

01:34.100 --> 01:35.020
但是你看啊

01:35.020 --> 01:37.460
这样一换完了之后

01:37.460 --> 01:38.340
九

01:38.340 --> 01:40.380
它本来这右边什么都没有

01:40.380 --> 01:41.500
然后你加了一个东西

01:41.500 --> 01:43.340
还给它加在左边

01:43.340 --> 01:47.140
如果你变化分支的长度超过了二

01:47.140 --> 01:48.140
是吧

01:49.740 --> 01:50.460
就这种情况

01:50.460 --> 01:56.320
如果变化分支

01:56.320 --> 02:03.100
变化分支的高度

02:03.100 --> 02:13.220
比旋转节点的另一侧高度

02:13.220 --> 02:17.620
差距超过二

02:17.620 --> 02:21.660
那么单旋之后

02:21.660 --> 02:26.100
依旧不平衡

02:26.100 --> 02:29.540
就是刚才这种情况 是吧

02:29.540 --> 02:32.740
这是变化分支

02:32.780 --> 02:35.020
变化分支的高度为二

02:35.020 --> 02:37.740
然后九个右侧的高度为零 是吧

02:37.740 --> 02:39.620
所以变化分支最后短

02:39.620 --> 02:40.700
怼在九成了之后

02:40.700 --> 02:41.500
一边是二

02:41.500 --> 02:42.140
一边是零

02:42.140 --> 02:43.580
差距还是二

02:43.580 --> 02:44.300
是吧

02:44.300 --> 02:46.700
所以它右单旋了之后

02:46.700 --> 02:49.940
要对右侧的分支

02:49.940 --> 02:52.700
重新进行考量

02:52.700 --> 02:55.100
看它是否平衡

02:55.100 --> 02:59.300
我们看一下代码怎么写

02:59.300 --> 03:01.220
看一下代码怎么写

03:01.260 --> 03:03.420
这个是进行右单旋了

03:03.420 --> 03:03.820
是吧

03:03.820 --> 03:04.420
右单旋了

03:04.420 --> 03:05.300
这回看好了

03:05.300 --> 03:06.780
我不直接写

03:06.780 --> 03:09.660
不是一个New Roots

03:09.660 --> 03:12.580
就是New Roots 是吧

03:12.580 --> 03:15.940
但是我一旦进行右旋了之后

03:15.940 --> 03:19.580
我一旦进行右旋了之后

03:19.580 --> 03:20.900
我要看什么

03:20.900 --> 03:24.340
看右侧的分支

03:24.340 --> 03:26.420
看右侧的分支是不是平衡

03:26.420 --> 03:27.220
是吧

03:27.220 --> 03:30.980
我让New Roots的Right

03:30.980 --> 03:36.270
再等于趁这

03:36.270 --> 03:37.830
趁这什么

03:37.830 --> 03:43.600
New Roots的Right

03:43.600 --> 03:45.880
我让它再来一遍

03:45.880 --> 03:48.000
我让它再去判断一下平衡

03:48.000 --> 03:49.800
再去判断一下平衡

03:49.800 --> 03:50.280
这样的话

03:50.280 --> 03:52.320
我们能保证每一次旋转了之后

03:52.320 --> 03:54.360
右旋了之后

03:54.360 --> 03:56.440
我们有可能会再发生右旋

03:56.440 --> 03:57.240
是吧

03:57.240 --> 03:59.120
这是发生了一次右旋是吧

03:59.120 --> 03:59.960
右旋了之后

03:59.960 --> 04:02.680
我们对右侧的分支再进行平判

04:02.680 --> 04:03.640
是吧

04:03.640 --> 04:04.560
趁这

04:04.600 --> 04:06.000
如果你Balance的话

04:06.000 --> 04:07.120
我就Return

04:07.120 --> 04:07.400
是吧

04:07.400 --> 04:08.640
如果平衡的话就Return了

04:08.640 --> 04:09.600
如果不平衡的话

04:09.600 --> 04:11.120
会需要继续再旋转

04:11.120 --> 04:12.960
会进行继续的旋转

04:12.960 --> 04:16.120
所以会发生右右双旋

04:16.120 --> 04:17.560
或者是右左双旋

04:17.560 --> 04:20.680
OK吧

04:20.680 --> 04:24.440
然后对右分支进行旋转了之后

04:24.440 --> 04:26.120
右分支进行旋转了之后

04:26.120 --> 04:29.440
大局它有可能又一次的不平衡

04:29.440 --> 04:34.240
所以New Roots等于趁这

04:35.080 --> 04:37.000
New Roots

04:37.000 --> 04:41.440
对自己再做一次平衡

04:41.440 --> 04:43.040
对自己再做一次平衡

04:43.040 --> 04:45.880
最后Return New Roots

04:45.880 --> 04:51.280
这是对右侧分支进行一次再平衡

04:51.280 --> 04:53.560
右侧分支进行再平衡了之后

04:53.560 --> 04:55.440
右侧分支的高度是不是就变了

04:55.440 --> 04:56.120
是吧

04:56.120 --> 04:57.320
右侧分支的高度就变了

04:57.320 --> 04:59.520
右侧分支的一旦高度变了

04:59.520 --> 05:01.840
我们要对自己进行重新一下判断

05:01.960 --> 05:05.360
看一下是否还是平衡的

05:05.360 --> 05:06.720
有则改之无则加两

05:06.720 --> 05:08.480
趁这就是这个是吧

05:08.480 --> 05:10.160
平衡的话就直接Return

05:10.160 --> 05:11.520
不平衡的话才会变化

05:11.520 --> 05:12.840
是吧

05:12.840 --> 05:15.440
我们Return New Roots

05:17.560 --> 05:21.150
这个也是

05:21.150 --> 05:22.550
Life的这个也是

05:22.550 --> 05:28.590
我们不是一个New Roots等于Life的Roots

05:28.630 --> 05:35.470
然后我们让New Roots的Life等于Change

05:37.470 --> 05:38.790
Change New Roots的Life

05:38.790 --> 05:39.510
是吧

05:39.510 --> 05:40.350
右选了之后

05:40.350 --> 05:44.190
我要对左选是吧

05:44.190 --> 05:45.030
左选了之后

05:45.030 --> 05:47.230
我要对左侧的分支再进行平衡

05:47.230 --> 05:49.070
看他需不需要左左双选

05:49.070 --> 05:49.910
是吧

05:49.910 --> 05:54.990
然后我要对New Roots等于Change一下

05:55.390 --> 05:58.190
这样的话

05:58.190 --> 06:00.550
我左侧的分支也会平衡

06:00.550 --> 06:03.550
然后我再Return New Roots

06:03.550 --> 06:09.890
看看真是可能会触发左左双选

06:09.890 --> 06:13.450
会不会触发是取决于这里面判断平衡平衡

06:13.450 --> 06:15.050
如果平衡的话就不触发了

06:15.050 --> 06:17.130
如果不平衡的话就可能会触发

06:17.130 --> 06:19.010
也就是左左双选

06:19.010 --> 06:21.850
在这一块的话

06:21.850 --> 06:23.690
我们再看一下

06:23.850 --> 06:24.530
实行

06:25.650 --> 06:25.930
是吧

06:25.930 --> 06:29.610
这一回趁热了之后

06:29.610 --> 06:33.750
Ace Balance就都是出了

06:33.750 --> 06:34.830
是吧

06:34.830 --> 06:36.310
都是出了

06:36.310 --> 06:39.550
这样的话我们就可以完成了这个任务

06:39.550 --> 06:40.670
是吧

06:40.670 --> 06:42.910
就把它变成二差平衡排序处

06:44.590 --> 06:46.350
我们看一下这回再进行一下比较

06:47.510 --> 06:48.430
过去19次

06:48.430 --> 06:51.580
现在14次

06:51.580 --> 06:52.540
过去19次

06:52.540 --> 06:54.860
现在14次

06:54.860 --> 06:55.700
过去17次

06:55.700 --> 06:56.540
现在12次

06:57.740 --> 06:58.420
过去12次

06:58.420 --> 06:59.060
现在13次

06:59.060 --> 07:00.260
真是一种特殊情况

07:00.260 --> 07:00.540
是吧

07:00.540 --> 07:02.900
过去20次

07:02.900 --> 07:04.220
现在13次

07:04.220 --> 07:05.180
特殊情况的时候

07:05.180 --> 07:05.820
差距

07:05.820 --> 07:07.460
这个数字的差不超过1

07:07.460 --> 07:08.820
也就是1和2

07:08.820 --> 07:10.140
但是正常的情况下

07:10.140 --> 07:11.340
我们会少很多

07:11.340 --> 07:12.460
所以平均下来

07:12.460 --> 07:14.540
它的速度会快很多

07:14.540 --> 07:15.060
平均下来

07:15.060 --> 07:16.420
它的速度会快

07:16.420 --> 07:19.900
现在它就变成了一个二差平衡排序处了

07:19.900 --> 07:21.780
现在它就是二差平衡排序处了

07:21.780 --> 07:22.060
是吧

07:22.860 --> 07:25.340
很瘦了点

07:25.340 --> 07:26.260
LOG

07:26.260 --> 07:28.420
AZBALANCE

07:28.420 --> 07:30.220
UNLOAD

07:30.220 --> 07:33.980
对吧

07:33.980 --> 07:37.580
这个现在是一个平衡的二差排序处

07:37.580 --> 07:38.420
对吧

07:38.420 --> 07:41.420
我们现在就完成了二差平衡排序处了

07:41.420 --> 07:45.580
有二差平衡排序处了之后

07:45.580 --> 07:49.060
我们二差平衡排序处就真的完美了

07:49.060 --> 07:50.860
这就真的完美了

07:50.860 --> 07:53.100
这就已经性能达到极致了吗

07:53.100 --> 07:54.740
不一定

07:55.380 --> 07:57.540
我们还有很多的探索

07:57.540 --> 08:00.580
我们还有一些思维上的一些方式

08:00.580 --> 08:03.540
可以让它的性能变得更加的强大

08:03.540 --> 08:05.140
还有什么样的方法

08:05.140 --> 08:06.780
可以让它变得更牛逼

08:06.780 --> 08:08.580
让它性能变得更好

08:08.580 --> 08:10.580
我们下集来说

