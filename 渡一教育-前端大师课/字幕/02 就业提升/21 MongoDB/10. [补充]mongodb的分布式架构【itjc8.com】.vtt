WEBVTT

00:00.750 --> 00:04.750
前几天有同学在问那个关于mongerDB

00:04.750 --> 00:06.750
如何进行远程连接

00:06.750 --> 00:10.750
就是我们现在呢就是我们写的express是服务器对吧

00:10.750 --> 00:14.750
写了个服务器服务器里边呢可能会连接mongerDB

00:14.750 --> 00:16.750
mongerDB呢就在这个服务器里边

00:16.750 --> 00:19.750
所以说我们连接的时候呢是不是使用的是那个

00:20.750 --> 00:22.750
localhost看一下吧

00:22.750 --> 00:24.750
连接的是本地计算机

00:24.750 --> 00:26.750
那么对于一些小型项目的话

00:26.750 --> 00:29.750
数据库跟那个网站的再一台服务器

00:29.750 --> 00:33.750
并不奇怪啊所以连接本地呢本身也没有什么问题

00:33.750 --> 00:35.750
那么这就造成一个就是有同学就想问啊

00:35.750 --> 00:39.750
如果说服务器跟我们的express服务器跟那个

00:39.750 --> 00:42.750
我们的mongerDB他不在一台计算机上

00:42.750 --> 00:44.750
那怎么去连接呢其实非常非常简单

00:44.750 --> 00:47.750
你只需要把这个地方改成你的IP地址就行了

00:47.750 --> 00:49.750
比方说你的服务器IP地址啊

00:49.750 --> 00:54.750
就是你mongerDB在另外一台服务器上就192168.1.100

00:54.750 --> 00:56.750
那你的express服务器在另一台服务器上

00:56.750 --> 00:58.750
那这里就写100就行了

00:58.750 --> 01:02.750
就你把mongerDB所在的计算机的IP地址写上

01:02.750 --> 01:04.750
就完事了就这么简单啊

01:04.750 --> 01:06.750
那么这就涉及到一个问题啊

01:06.750 --> 01:09.750
可以也是有些朋友比较关心的

01:09.750 --> 01:12.750
他就说mongerDB呢就卖seq里面呢

01:12.750 --> 01:15.750
他是我们要输入账号密码对不对啊

01:15.750 --> 01:16.750
才能进行连接

01:16.750 --> 01:19.750
那么为什么mongerDB他们要让你输入账号密码呢

01:19.750 --> 01:22.750
那么这样子会不会造成安全性问题呢

01:22.750 --> 01:24.750
实际上呢大家不用去担心这个东西

01:24.750 --> 01:27.750
mongerDB呢他可不可以有账号密码

01:27.750 --> 01:29.750
可不可以有用户呢是可以的啊

01:29.750 --> 01:31.750
但是呢不打算给大家推荐这种方式

01:31.750 --> 01:34.750
这种方式呢并不是一个好的方式

01:34.750 --> 01:37.750
嗯因为mongerDB呢他最重要的都是

01:37.750 --> 01:41.750
他的查询啊和那个独写的效率

01:41.750 --> 01:44.750
你使用了建就是你使用了mongerDB里面的建权

01:44.750 --> 01:48.750
我们把它叫做建别权权权权

01:48.750 --> 01:50.750
如果说你使用他的权限系统的话

01:50.750 --> 01:54.750
会比较严重的影响他的执行效率

01:54.750 --> 01:56.750
他做任何事情他都要去看权限

01:56.750 --> 01:58.750
就很就会影响效率啊

01:58.750 --> 02:01.750
所以大家不要去不见大家去用这个就是

02:01.750 --> 02:03.750
他的用户系统

02:03.750 --> 02:05.750
但是呢这就说到一个问题了

02:05.750 --> 02:07.750
他安全性怎么办安全性是这样子的

02:07.750 --> 02:10.750
他是利用服务器安全性来搞定这件事的

02:10.750 --> 02:12.750
而不是他本身的安全性

02:12.750 --> 02:14.750
什么意思呢我这里给大家看了

02:14.750 --> 02:17.750
也花了一个就是mongerDB的分布式架构图

02:17.750 --> 02:19.750
什么叫分布式

02:19.750 --> 02:22.750
就是我们的数据啊服务也好数据也好

02:22.750 --> 02:24.750
不在一台计算机上

02:24.750 --> 02:26.750
我们要用很多台计算机

02:26.750 --> 02:29.750
成千上万台计算机来提供服务

02:29.750 --> 02:33.750
包括数据服务包括我们的就是网站服务等等等等

02:33.750 --> 02:35.750
来提供这些服务

02:35.750 --> 02:37.750
那么我们就需要把不同的服务呢

02:37.750 --> 02:39.750
分到不同的计算机上

02:39.750 --> 02:41.750
那么这个就叫做分布式

02:41.750 --> 02:43.750
在mongerDB里面就分布式有很多啊

02:43.750 --> 02:46.750
比方说缓存的分布式的解决办法呢

02:46.750 --> 02:49.750
一般是使用那个服务器集群

02:49.750 --> 02:51.750
另外呢就是

02:51.750 --> 02:54.750
我们在使用这个服务器集群的时候呢

02:54.750 --> 02:56.750
也有各种不同的集群

02:56.750 --> 02:57.750
比方说

02:57.750 --> 03:00.750
我们的网站服务器啊应用服务器集群

03:00.750 --> 03:02.750
包括还有这个缓存服务器集群

03:02.750 --> 03:04.750
还有什么sation服务器的集群

03:04.750 --> 03:06.750
单独为sation来建一个集群

03:06.750 --> 03:09.750
还有就是集群所有的集群就是多个计算机

03:09.750 --> 03:10.750
很多很多的计算机

03:10.750 --> 03:13.750
包括数据库还有数据库的服务器集群

03:13.750 --> 03:16.750
那么这些东西呢是比较深的啊

03:16.750 --> 03:18.750
这些概念涉及到就是服务器架构了

03:18.750 --> 03:21.750
呃一般后端同学后端的开发者呢

03:21.750 --> 03:23.750
在工作了很多很多年之后呢

03:23.750 --> 03:25.750
呃他比较熟悉这一块

03:25.750 --> 03:27.750
而前端的开发者的话

03:27.750 --> 03:28.750
特别是刚开始学的话

03:28.750 --> 03:30.750
肯定是不太熟悉这一块的啊

03:30.750 --> 03:31.750
我这里就给他介绍一下

03:31.750 --> 03:34.750
蒙古地利的数据库服务器的集群

03:34.750 --> 03:35.750
这么一个系统

03:35.750 --> 03:37.750
那么来说明他的主要是说明

03:37.750 --> 03:39.750
给让大家有这么一个概念啊

03:39.750 --> 03:41.750
呃说明一下他的安全性的解决办法

03:41.750 --> 03:43.750
首先让大家要知道外面这个大框框

03:43.750 --> 03:45.750
这大框框呢就是我们的

03:46.750 --> 03:48.750
安全的服务器环境

03:48.750 --> 03:50.750
什么叫安全的服务器环境呢

03:50.750 --> 03:51.750
就大框框里边的东西

03:51.750 --> 03:52.750
没有暴露出来的东西

03:52.750 --> 03:53.750
你想访问就访问不了的

03:53.750 --> 03:55.750
他里边有一套安全系统

03:55.750 --> 03:57.750
来控制你访问的

03:57.750 --> 03:58.750
一般来说有很多种方式

03:58.750 --> 03:59.750
比方说控制某一个端口

03:59.750 --> 04:01.750
对外不能访问

04:01.750 --> 04:03.750
或者是紧张对某一些ip地址

04:03.750 --> 04:04.750
才能访问我这个端口

04:04.750 --> 04:06.750
其他的就不能访问我这个端口

04:06.750 --> 04:08.750
啊就这么个意思

04:08.750 --> 04:10.750
呃一般服务器呢

04:10.750 --> 04:11.750
就做那种大型的服务器

04:11.750 --> 04:13.750
肯定要都都会做这些事

04:13.750 --> 04:15.750
当然还有一些其他的安全措施

04:15.750 --> 04:16.750
总之呢这一个大框框

04:16.750 --> 04:18.750
就是一个服务器的安全环境

04:18.750 --> 04:20.750
这里边这个环境里边有很多台积放机

04:20.750 --> 04:21.750
但是外边的人呢

04:21.750 --> 04:24.750
想访问这些积放机是根本就访问不了的

04:24.750 --> 04:25.750
根本就不允许你访问

04:25.750 --> 04:26.750
而我们的数据库在哪呢

04:26.750 --> 04:27.750
就在这个环境里边

04:27.750 --> 04:29.750
所以说别人想访问根本就访问不了

04:29.750 --> 04:31.750
只有自己自己人才能访问

04:31.750 --> 04:32.750
比方自己人是谁呢

04:32.750 --> 04:34.750
自己人就是这个server

04:34.750 --> 04:35.750
这个server呢可以用

04:35.750 --> 04:36.750
加把来搭建啊

04:36.750 --> 04:38.750
也可以用那个就是express啊

04:38.750 --> 04:39.750
露着街市里面express来搭建

04:39.750 --> 04:40.750
总之都可以啊

04:40.750 --> 04:41.750
总之你搭建一个

04:43.750 --> 04:45.750
那么这个vibre server是属于自己人

04:45.750 --> 04:46.750
因此呢他

04:46.750 --> 04:47.750
提供对外的访问

04:47.750 --> 04:49.750
就是我们外面的人可以访问他

04:49.750 --> 04:50.750
但是外面的人访问不到

04:50.750 --> 04:52.750
不到他里边的东西

04:52.750 --> 04:54.750
而他呢可以访问你一遍

04:54.750 --> 04:55.750
他怎么访问呢

04:55.750 --> 04:58.750
他比较他连接他要操作数据库

04:58.750 --> 05:00.750
他就会发送一个消息

05:00.750 --> 05:01.750
到那个到mongers

05:01.750 --> 05:03.750
mongers呢他是一个

05:03.750 --> 05:04.750
专门来搭建数据库

05:04.750 --> 05:06.750
就mongerDB

05:06.750 --> 05:08.750
服务器集群的这么一个工具

05:08.750 --> 05:09.750
也是一个应用程序

05:09.750 --> 05:11.750
他安装在一般来说安装在

05:11.750 --> 05:14.750
单独的一台或多台计算机上

05:14.750 --> 05:15.750
我们比方说这里一台

05:15.750 --> 05:17.750
把他当成一台就简单

05:17.750 --> 05:18.750
那么这一台计算机呢

05:18.750 --> 05:19.750
他就会把我们的

05:19.750 --> 05:21.750
比方说我们这里发送了一个查询

05:21.750 --> 05:23.750
或者是发送了一个写入修改

05:23.750 --> 05:25.750
那么这里呢就把修改的消息呢

05:25.750 --> 05:27.750
又发送给后边的东西

05:27.750 --> 05:28.750
那么后边东西是什么呢

05:28.750 --> 05:30.750
又是一群一群的计算机

05:30.750 --> 05:33.750
每一个群里边又有很多的计算机

05:33.750 --> 05:34.750
又是一群一群的计算机

05:34.750 --> 05:36.750
你可以认为每一个

05:36.750 --> 05:37.750
但是对他来讲的话

05:37.750 --> 05:38.750
他就可以认为

05:38.750 --> 05:40.750
每一个每一群计算机就是一台

05:40.750 --> 05:42.750
因为他只跟其同一台打交道

05:42.750 --> 05:44.750
他就发送过去

05:44.750 --> 05:46.750
那么他到底发送给哪一个呢

05:46.750 --> 05:48.750
他会经过一个算法

05:48.750 --> 05:50.750
经过一个叫负载军人算法

05:50.750 --> 05:52.750
那么负载军人算法他就决定

05:52.750 --> 05:53.750
我这个数据

05:53.750 --> 05:55.750
比方说我添加一个数据

05:55.750 --> 05:56.750
新增一个用户

05:56.750 --> 05:57.750
那我新增这个用户

05:57.750 --> 06:00.750
我应该新增到哪一台计算机上去了

06:00.750 --> 06:03.750
新增到哪一台具体的服务器上去了

06:03.750 --> 06:04.750
他就做分发的

06:04.750 --> 06:05.750
原来的意思吧

06:05.750 --> 06:07.750
那么他有很多种算法

06:07.750 --> 06:08.750
可以支持这件事

06:08.750 --> 06:10.750
我们就不具体的介绍了

06:10.750 --> 06:12.750
如果说将来有机会的话

06:12.750 --> 06:14.750
可以给他讲一讲那个大型的网站的

06:14.750 --> 06:16.750
价格的变迁

06:16.750 --> 06:18.750
我以前本身也是做这个的嘛

06:18.750 --> 06:20.750
这里边我们

06:20.750 --> 06:22.750
比方说他就决定的到这一台

06:22.750 --> 06:23.750
到这一台

06:23.750 --> 06:25.750
那么到这一台过后呢

06:25.750 --> 06:26.750
他会

06:26.750 --> 06:28.750
那么这边有一个接待员

06:28.750 --> 06:29.750
你可以把他认为是一个前台

06:29.750 --> 06:30.750
那么这个前台

06:30.750 --> 06:32.750
我们把他叫做主数据服服务器

06:32.750 --> 06:34.750
那么主数据服务器

06:34.750 --> 06:35.750
他就会直接完成修改

06:35.750 --> 06:36.750
比方说我们这里的

06:36.750 --> 06:38.750
比方说新增用户他就直接新增了

06:38.750 --> 06:40.750
新增过去把消息回归给他了

06:40.750 --> 06:42.750
那么他就把消息回归过去

06:42.750 --> 06:43.750
明白的意思吧

06:43.750 --> 06:45.750
那么他决定新增过后了

06:45.750 --> 06:47.750
那么这后边是什么东西呢

06:47.750 --> 06:48.750
主要是担心了

06:48.750 --> 06:49.750
他如果说有些挂掉了

06:49.750 --> 06:51.750
那我的数据就没了

06:51.750 --> 06:52.750
我不能让他挂掉

06:52.750 --> 06:53.750
而且挂掉过后呢

06:53.750 --> 06:55.750
他能够自己马上恢复

06:55.750 --> 06:56.750
那怎么办呢

06:56.750 --> 06:57.750
比方说这个突然

06:57.750 --> 07:00.750
这个服务器比方说在北京

07:00.750 --> 07:02.750
那么他突然挂掉了

07:02.750 --> 07:03.750
那怎么办呢

07:03.750 --> 07:04.750
还有别的服务器可以用

07:04.750 --> 07:05.750
比方说在上海

07:05.750 --> 07:06.750
有些服务器可以用

07:06.750 --> 07:07.750
因此在这个集群里面

07:07.750 --> 07:09.750
不是说必须要在一个集访

07:09.750 --> 07:10.750
可以在不同的集访

07:10.750 --> 07:11.750
跟你很远的

07:11.750 --> 07:13.750
他只是逻辑上的一个概念

07:13.750 --> 07:14.750
那么因此他

07:14.750 --> 07:15.750
他有了收到数据过后了

07:15.750 --> 07:16.750
他会进行同步

07:16.750 --> 07:18.750
叫replication

07:18.750 --> 07:19.750
同步

07:19.750 --> 07:20.750
同步到重复器

07:20.750 --> 07:21.750
叫secondary

07:21.750 --> 07:22.750
重复器

07:22.750 --> 07:23.750
这个重复器可能有很多

07:23.750 --> 07:24.750
一般来说

07:24.750 --> 07:25.750
就一两个就可以了

07:25.750 --> 07:26.750
就已经比较

07:26.750 --> 07:27.750
比较安全了

07:27.750 --> 07:28.750
他主要是为了

07:28.750 --> 07:29.750
让他如果说挂掉的时候

07:29.750 --> 07:31.750
他马上有一个人可以顶替

07:31.750 --> 07:32.750
主要是起这么一个作用

07:32.750 --> 07:33.750
因此一般来说

07:33.750 --> 07:34.750
这个一个

07:34.750 --> 07:35.750
最多两个就够了

07:35.750 --> 07:36.750
不需要太多

07:36.750 --> 07:38.750
平时都没有什么用的

07:38.750 --> 07:39.750
就放到这儿的

07:39.750 --> 07:41.750
有的时候可以把叫做

07:41.750 --> 07:42.750
灾难备份

07:42.750 --> 07:43.750
那么他可以同步到

07:43.750 --> 07:44.750
重复器

07:44.750 --> 07:46.750
如果说有一天

07:46.750 --> 07:47.750
他挂掉了过后

07:47.750 --> 07:48.750
他就会进行选举

07:48.750 --> 07:49.750
在重复器当中

07:49.750 --> 07:51.750
进行选举出一台

07:51.750 --> 07:52.750
作为主服务器

07:52.750 --> 07:53.750
就这个东西扔掉了

07:53.750 --> 07:54.750
不要了

07:54.750 --> 07:55.750
我就从重复器里面

07:55.750 --> 07:56.750
再选一台

07:56.750 --> 07:57.750
放到这儿

07:57.750 --> 07:58.750
那么谁来选举呢

07:58.750 --> 07:59.750
就是这个

07:59.750 --> 08:01.750
叫做仲裁服务器

08:01.750 --> 08:02.750
他来决定

08:02.750 --> 08:03.750
怎么来选举

08:03.750 --> 08:04.750
他怎么来选举呢

08:04.750 --> 08:05.750
他首先要知道

08:05.750 --> 08:07.750
目前有哪些服务器存在

08:07.750 --> 08:08.750
他怎么来知道呢

08:08.750 --> 08:09.750
他通过心跳检测

08:09.750 --> 08:10.750
他每隔一段时间

08:10.750 --> 08:12.750
他就会去发送一个

08:12.750 --> 08:14.750
一个非常非常短的消息

08:14.750 --> 08:15.750
问题还在不在

08:15.750 --> 08:16.750
你的状态是什么

08:16.750 --> 08:18.750
那么同样的服务器

08:18.750 --> 08:19.750
他都会问

08:19.750 --> 08:20.750
在不在

08:20.750 --> 08:22.750
如果说你们都在的话

08:22.750 --> 08:23.750
都在的话

08:23.750 --> 08:24.750
那么OK

08:24.750 --> 08:26.750
我就选出一台

08:26.750 --> 08:28.750
在目前在线的服务器当中

08:28.750 --> 08:29.750
选出一台作为主服务器

08:29.750 --> 08:31.750
然后又继续提供服务

08:31.750 --> 08:32.750
这么个意思

08:32.750 --> 08:34.750
那么其他的集群是一样的意思

08:34.750 --> 08:35.750
就是不同的数据

08:35.750 --> 08:36.750
存出到不同的集群

08:36.750 --> 08:37.750
不同的数据

08:37.750 --> 08:38.750
存出到不同的集群

08:38.750 --> 08:39.750
叫sharding

08:39.750 --> 08:40.750
就是分片

08:40.750 --> 08:41.750
我们把分片集群

08:41.750 --> 08:42.750
分片就是什么意思

08:42.750 --> 08:44.750
把数据分成一片一片的

08:44.750 --> 08:46.750
不同的集群的不同的数据

08:46.750 --> 08:47.750
或者服务器

08:47.750 --> 08:49.750
就存出不同的数据

08:49.750 --> 08:50.750
就这么个意思

08:50.750 --> 08:51.750
比方说简单一点

08:51.750 --> 08:53.750
就是年龄十到二十之间的

08:53.750 --> 08:55.750
存一个服务器集群

08:55.750 --> 08:56.750
二十到三十之间的

08:56.750 --> 08:57.750
存另外一个服务器群

08:57.750 --> 08:58.750
就这么个意思

08:58.750 --> 08:59.750
体会一下就行了

08:59.750 --> 09:01.750
这一面细节太多太多了

09:01.750 --> 09:02.750
然后再说一下

09:02.750 --> 09:03.750
就是说这个东西

09:03.750 --> 09:04.750
好像看上去很复杂

09:04.750 --> 09:06.750
那跟我们写代码有没有关系呢

09:06.750 --> 09:07.750
我告诉大家没有什么关系

09:07.750 --> 09:08.750
这些东西

09:08.750 --> 09:10.750
不会影响到底写代码的

09:10.750 --> 09:11.750
你代码该打写

09:11.750 --> 09:12.750
还是打写

09:12.750 --> 09:13.750
对你来说

09:13.750 --> 09:14.750
不要用一些express

09:14.750 --> 09:17.750
express写的时候要连服务器

09:17.750 --> 09:18.750
对你来说

09:18.750 --> 09:19.750
服务器就一台

09:19.750 --> 09:20.750
剩下的事情

09:20.750 --> 09:22.750
它全部是自动给你搞定的

09:22.750 --> 09:23.750
对你来说

09:23.750 --> 09:24.750
就相当于有点

09:24.750 --> 09:25.750
类似于代理的意思

09:25.750 --> 09:27.750
你就跟他打交道就行了

09:27.750 --> 09:29.750
所以说你的代码是不会受到

09:29.750 --> 09:30.750
任何影响的

09:30.750 --> 09:31.750
我主要是解释一下

09:31.750 --> 09:33.750
原来有一些疑问

09:33.750 --> 09:34.750
关于这个安全性

09:34.750 --> 09:35.750
安全性之后

09:35.750 --> 09:36.750
本身就是个安全防疫

09:36.750 --> 09:37.750
它本身就不会暴露出去

09:37.750 --> 09:39.750
所以随便连在这边

09:39.750 --> 09:40.750
随便连

09:40.750 --> 09:41.750
另外一个就是

09:41.750 --> 09:43.750
关于这个就是

09:43.750 --> 09:45.750
会不会对写代码造成影响

09:45.750 --> 09:46.750
不会的

09:46.750 --> 09:47.750
OK

09:47.750 --> 09:48.750
我就说一下这个

09:48.750 --> 09:49.750
这个里面讲说

09:49.750 --> 09:50.750
要深入讲解的话

09:50.750 --> 09:51.750
东西很多

09:51.750 --> 09:52.750
对我们前段来说

09:52.750 --> 09:53.750
也不是很重要

09:53.750 --> 09:54.750
就讲到这

09:54.750 --> 09:56.750
关于分布式架构

