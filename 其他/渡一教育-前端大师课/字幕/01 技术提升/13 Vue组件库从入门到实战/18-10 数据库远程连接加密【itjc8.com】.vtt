WEBVTT

00:00.620 --> 00:10.620
好这节课的话我们来看一下这个数据库下面啊在前面的话我们在我们的这个呃远程服务器

00:10.620 --> 00:16.620
就我们的那个Linux系统里面安装了那个MangoDB然后接下来我们启动的话我们是怎么启动的呢

00:16.620 --> 00:25.620
啊我们是这么启动的啊这里对不对MangoD然后接下来这边dbpass指定我们的数据库的这个路径啊data下面的这个DB

00:25.620 --> 00:33.620
那接下来这边bump的ip0.0.0.0啊我们是这样子启动的那这样启动的话会有一个问题

00:33.620 --> 00:46.620
什么问题呢啊你看我这边写的有就是所有的ip你都可以连接上啊也就是无论随便啊谁拿一台这个电脑都可以连接上你的这个数据库

00:46.620 --> 00:54.620
那这个是不是一个很危险的行为对不对你想想你的这个数据库相当于就在裸奔啊随便谁都可以连接上

00:54.620 --> 01:02.620
那既然他可以连接上他是不是就可以对你的这个数据进行这个任意的这个修改对不对啊说说我们这边的话要做一个事情

01:02.620 --> 01:12.620
什么事情呢让我们这边的话就是要对我们的这个数据库进行一个加密啊加密之后然后接下来的话啊创建一个这个账号密码

01:12.620 --> 01:23.620
那你要连接是吧你必须要输入账号密码你才能连接上啊让我们来看一下这个具体的这个步骤啊这个步骤的话其实我这边已经写在这个笔记里面了啊

01:23.620 --> 01:33.620
我们这边我们来看一下那首先的话我们这边这边的话首先的话需要在这个andme数据库里面创建一个这个用户这个用户的角色的话

01:33.620 --> 01:47.620
那是这个userandme或者这个userandme only database啊那我这边我们就来创建首先第一步useandme切换到你的这个数据库切换到这个andme数据库

01:48.620 --> 02:02.620
切换到andme数据库然后使用什么呢使用这个db.createUser使用这个方法这个方法里面然后接下来的话传入一个对象对象里面三个属性啊user,twd和rose

02:03.620 --> 02:11.620
user这是什么呢user就是你的用户名啊比方我这边用户名是ROT然后密码密码的话是123456

02:11.620 --> 02:23.620
然后接下来这边roserose的话里面就是这里又是一个数组数组里面然后有一个对象然后rose对应了角色角色的话就是userandme only database

02:24.620 --> 02:33.620
看到没有是不是就合作对上了对吧那接下来你的这个db你的数据库数据库的我们这边呢就是andme啊就是andme ok

02:33.620 --> 02:41.620
好我这边呢就是具体操作的这个截图也在这里看到没有userandme然后这边的话这边switch的todbandme

02:42.620 --> 03:05.110
那这样我这边输入这个dbdb的话就是可以查看你当前所使用的数据库好这边记一下啊db可以查看查看当前所使用的数据库 ok

03:06.110 --> 03:16.110
好这边呢就是切换到这个andme这个数据库了啊切换到andme这个数据库之后然后接下来的话这边使用这个db点quateuser啊其实就是上面这条mini

03:17.110 --> 03:28.110
看到没有然后就成功的创建了这个角色啊我这边的话我就不掩饰了为什么呢因为我这边他已经创建过了我现在再创建的话他就会告诉我这个该用户已经存在

03:29.110 --> 03:52.110
所以我这边的话就不创建了但是你可以看到我这边啊刚才其实就是刚才截图的那边步骤看到没有userandme然后再这边db然后再这边显示出的是andme怎么样然后再这边创建一个这个新的这个用户啊这里嘛用户名是root密码一二三十五六然后再这边他的角色就是userandme only database然后再db对应的就是andme

03:53.110 --> 04:18.110
那这样你一瞧回说一瞧回说他就会显示出这个就会显示出这个successfully ended user就成功添加了一个这个角色看到没有啊那我们这边呢就成功的在我们的这个andme这个数据库里面添加了一个这个用户啊用户的话他这边的话是这个root密码一二三十五六啊然后这样这个角色角色就是这个userandme only database

04:18.110 --> 04:47.110
ok好然后这里这里完了之后然后既然你可以登录就是这边可以登录一下这个用户怎么登录呢就是首先还是要切换到你的这个数据库切换到这个数据库之后大家这边db.os要这个方法大家这边的数你刚才的帐号密码就可以了就相当于就登录了啊然后这个andme为什么我们要在这个andme这个数据库里面啊创建用户呢因为这个andme这个数据库他是一个很特别的这个数据库

04:49.110 --> 04:54.510
这个数据库里面的用户他可以访问就是mango db中所有的这个数据库

04:55.510 --> 05:06.710
明白没有啊所以我们这边他在andme里面创建了一个用户那你的话也可以干嘛呢也可以在就是你想在的这个数据库里面创建用户比如说我们这边是my site

05:07.410 --> 05:17.010
对吧那我这边就可以在my site里面创建一个用户他步骤的话其实是一样的也就是首先第一步这边user数据库名是切换

05:17.810 --> 05:30.210
对吧切换到你对应的这个数据库然后接下来这边db点create user然后接下来你这边的话呃写上你的这个用户密码然后接下来的话这边决设最这边就有点不一样了

05:31.010 --> 05:42.510
这边上你叫写你这个决设能够做的一些事情比如说我这边肉read对呢就是可以读啊然后接下来的话这边肉read write就是可以写

05:43.310 --> 05:50.310
也就是我这个用户的话可以读这个数据库里面的数据可以写这个数据库里面的数据啊我们来看一下嘛

05:51.010 --> 06:11.510
比如说这边这边的话我说user my site是不是切换到了my site这个数据库啊然后你看这边switch的图db my site啊切换过去了切换过去之后然后接下来我这边db点create user啊这边用户名卸节密码我就随便写了一个651321啊和刚才那个是反则的

06:11.710 --> 06:16.110
然后接下来这边肉肉实的话仍然是对应的是数组数组里面是不是就有两个对象了

06:16.910 --> 06:22.710
第一个的话是这个肉它是读可以读这个数据库啊大家这个数据库对应的是my site

06:23.110 --> 06:27.510
第二个是什么呢可以读写读写大家对应的是my site

06:28.210 --> 06:32.810
然后一抄回说仍然这边显示出就是成功创建使用户

06:33.870 --> 06:35.750
看到没有啊你回到这边你看一下嘛

06:36.550 --> 06:36.950
这边

06:38.250 --> 06:50.150
这边看到没有啊那就是这句话大家这里话就是成功创建使用户成功创建使用户之后大家这边我登录了一下这个用户啊这边db点os要这个os方法

06:50.750 --> 06:57.750
输入这个用户名和密码它这边返回了一个什么的返回一个1说明你登录成功我看这个截图没有

06:58.750 --> 07:14.750
啊这边截了图的啊接下来这边执行这个db os那这样你的用户名和密码它返回的是这个1说明登录成功啊返回返回1说明登录成功

07:16.150 --> 07:22.750
OK好那么这里的话你其实就已经就在你的这个数据库上面你就添加了这个一个用户了

07:23.750 --> 07:29.750
添加了一个用户并且设置了帐号密码

07:30.750 --> 07:39.750
好然后这一步就完成了这一步完成之后然后接下来下一步下一步的话我们需要去修改一下我们的mongodb的这个配置文件

07:40.750 --> 07:44.750
我们mongodb的配置文件之前是怎么写的之前是不是这么写的

07:45.750 --> 07:53.750
对吧之前是这么写的啊这个的话就是啊就是那个简略的书写啊你如果要详细的书写的话你可以像这样子

07:55.750 --> 07:56.750
就可以像这个样子

07:57.750 --> 08:05.750
怎么样可以像这个样子这样子来写啊这里面呢就是指定一向一向的system log 就是你的这个日字文件

08:05.750 --> 08:13.750
然后接下这边nate你的这个连接然后接下这边process management 就是这个进程的这个管理

08:14.750 --> 08:16.750
这边的这个fork queue 就是后台运行

08:17.750 --> 08:24.750
然后接下这个security把这个打开这个打开代表什么呢这个打开代表要开启客户端的认证

08:25.750 --> 08:34.750
说白了就是你把这个打开之后你要连的话不是说直接就连了啊你必须要登录我的那个账号密码才能够连接

08:35.750 --> 08:43.750
然后接下来这边这边其他这种没什么这边呢就是这个dbpass你就写上之前的那个dbpass对吧啊其他就没什么

08:44.750 --> 08:49.750
所以你这边啊就可以把你的这个整个这个配置文件你可以用这一份啊可以用这一份

08:50.750 --> 09:00.750
然后你看我在这边我在这边啊我写的就也是这个配置文件看到没有啊这边呢是bondipren是写的是0.0.0.0

09:00.750 --> 09:08.750
但是这一次不一样的是什么呢我这边开启了这个客户端的这个认证啊开启了客户端的认证

09:09.750 --> 09:18.750
然后回头的话让你来启动启动的时候你注意啊启动启动的话你这边你要指定就是去读取我们的这个配置文件

09:19.750 --> 09:27.750
那后面的话加上这个穿梭杠杠康贝格然后接下来空格大家你配置文件的这个路径我们的路径是在上级目标的这个

09:27.750 --> 09:44.750
mongodb.conf里面或者你写绝对路径也可以你这边可以直接这样写就是usr下面的local下面的mongodb下面的mongodb.conf

09:45.750 --> 09:54.750
对吧写这个绝对路径也可以啊好那我们这边让我们来试一下啊这部分我刚才其实已经启动了吓启动了之后

09:54.750 --> 10:10.750
然后这样我把这个我把它停一下怎么停一下呢这边的话首先ls哦然后接下来杠挨杠挨杠挨然后这样冒号然后接下来我们的这个

10:11.750 --> 10:24.750
这个的mongodb它的端口号是多少它的端口号是27017对不对所以你这边可以输入27017走你可以看到这边这边你就可以看到我们的mongodb已经启动了

10:25.750 --> 10:33.750
已经启动了包括这个方式的话你也可以看什么呢你也可以看就是我们的这个后台就是那个服务期段比我7001

10:34.750 --> 10:41.750
看到没有这边是不是启动了的对吧好然后接下来的话下一步好我们把这个在笔记里面记一下啊

10:43.750 --> 10:58.750
这个就是查看查看进程这边呢就是ls哦然后接下来空格i然后加上什么呢一个冒号然后接下来端口号

10:59.750 --> 11:14.640
端口号啊例如例如ls然后的杠挨然后接下来比如说27017对吧这个就可以查看进程

11:15.640 --> 11:21.640
那我现在的话我这个mongodb我已经启动了启动了然后这样你在这里你就可以看到什么呢可以看到它的这个cid

11:21.640 --> 11:41.640
cid它进程的这个编号是24311对吧然后这样我这边呢就是ql然后杠挨所以有个空格哈大家输入你的pid24311就可以把这个进程给它停止掉比如说你这边让你再来看一下走是没有了看到没有

11:42.640 --> 11:58.640
这会儿就没有了啊那这边停止进程停止进程就是什么呢啊ql然后空格然后杠挨然后加这里这里是你的pid啊不是端口号啊不是端口号

11:59.640 --> 12:10.640
我们刚才输入这个其实就是为了查看这个pid知道吧啊这里这里的话应该是查看这个进程的pid好然后接下来例如

12:13.020 --> 12:18.020
例如我们这边的话这就是这里q钢924311

12:21.020 --> 12:33.020
我们就把停掉了好停掉了之后然后接下来我们就来重新来启动重新来启动重新启动的话然后这样我们这个配置文件是写好的写好了之后然后接下来我这边的话我就来启动启动的话就是

12:34.020 --> 12:44.020
当前目录下面的猫狗狄啊然后接下来这边的杠杠废个或者什么呢或者你这边直接钢F也可以啊然后接下来的话这边

12:46.020 --> 13:01.020
指定你的配置文件配置文件是usr下面的什么呢local下面的猫狗db下面的这个猫狗db.conf对吧好回车

13:02.020 --> 13:15.020
啊这里的话现在你的这个猫狗db他就会在后台挂起一个这个进程挂起个进程你如果不指定这个的话我给大家看一下啊我把这个我把停掉停掉你如果比如说你这边这个fork

13:16.020 --> 13:24.020
你是force保充一下确定确定好然后接下来你这边的话你重新来启动

13:25.020 --> 13:39.020
我看一下这边的话我们改成force了改成force之后然后接下来的话force写对秒force对吧确定

13:41.020 --> 13:46.020
然后接下来的话你在这边走

13:47.020 --> 13:54.020
诶这里的话他应该是会直接给你挂起啊我看一下

13:56.020 --> 14:02.020
诶这里怎么回事我看一下哦可能是刚才已经启动了我这边的话重新把这个

14:04.020 --> 14:12.020
27017啊这边已经启动了是吧然后这边把它把它关闭一下q-9然后24596

14:13.020 --> 14:24.020
ok好那这样我们这边让我们重新拿一次你看你现在的话你把这个fork设成这个force之后你看你这个这个控制台你就不敢关

14:26.020 --> 14:30.020
看到没有你这个控制台就不敢关因为你这边一旦关了的话他这个进程就没有了

14:31.020 --> 14:38.020
因为没有啊所以这边的话他就是给你提供了一个这个fork就有点类似于我们之前上上节课讲的那个low heart

14:39.020 --> 14:44.020
就把这个进程把它挂起来啊那他这边给你提供了这个命令的话那你用这个是不是更方便些

14:45.020 --> 14:52.020
对吧你就不用使用那个low heart来执行了你这边的话就可以直接把这个这边呢就直接设置为q

14:53.020 --> 14:54.020
保存

14:56.020 --> 15:07.020
然后接下来这边这边的话然后停止掉停止掉之后然后加这边执行啊你看到没有他这边呢就是啊会把你的这个进程他这边有个直进程

15:08.020 --> 15:15.020
直接开始了啊大家主进程他就退出了相当于就挂了就把他这个进程挂起来了 ok

15:16.020 --> 15:23.020
好然后接下来完了之后然后我们接下来远程来连接数据库时我们就需要干嘛呢我们就需要输入帐号密码了

15:24.020 --> 15:32.020
啊你看这边我们来试一下比如说回到我的这个lob3d啊我这边呢我建立一个新的连接

15:33.020 --> 15:38.020
这边crate然后接下来这边这边的话输入就是我的这个

15:40.020 --> 15:42.020
呃这个ip地址

15:44.020 --> 15:49.020
这个是吧负责负责了之后然后下来到这边然后加这边paste

15:50.020 --> 15:50.420
看到没有

15:51.020 --> 15:58.020
feel the to know the list of the database 你没办法你连不上为什么因为我这个必须要帐号密码才能连上

15:59.020 --> 16:08.020
看到没有无论你怎么试你都连不上那怎么办呢然后加点第二个啊点第二个第二个的话然后这样你在这边啊你就可以配置一下

16:09.020 --> 16:19.020
比如说我们要连的是什么呢连的是my site 然后用户名解决然后密码654321对吧然后加这边test看到没有

16:20.020 --> 16:26.020
这边你看成功是就连上了my site这个data base并且是以哪个用户是不解决这个用户

16:27.020 --> 16:36.020
对不对好然后这样你这边的话保存大家这边连接看到没有我这边那就连接上了啊这边就连接上了这边数据都是ok的

16:38.020 --> 16:46.020
数据这些这都是ok的对但是别人迈连的时候他就不能随便就连得上他必须要输什么呀是必须要输入帐号密码才行

16:47.020 --> 16:53.020
对不对必须要输入帐号密码啊好这是这个点然后接下来还有个地方要改

16:54.020 --> 17:06.020
哪个地方呢你看我们这边我们这边数据库是不是已经启动了已经启动了之后然后这样我们这边让我们一刷新你会发现连不上连不上啊数据又出不来了

17:07.020 --> 17:21.020
为什么原因很简单因为你的服务器端啊服务器端你是不是也会有这个连接数据库的那个内行代码那内行代码也要干嘛呢也需要进行修改啊你看这边笔记

17:22.020 --> 17:37.020
笔记啊接下来的话就是使用芒果子来连接有全线的这个数据库啊就是在哪里呢接下来就是在你的服务器端代码里面

17:38.020 --> 18:01.020
在哪里面啊使用这个芒果子芒果子的时候然后连接的连接的是什么呢是有全线的数据库所以需要修改你的连接制服串啊需要修改你的连接制服串

18:02.020 --> 18:10.020
另外没有啊怎么修改呢你看这边语法啊这边呢mango db然后这边就是user name然后接下来这边的话这个password

18:11.020 --> 18:20.020
然后对应你的这个ip啊大家这边对应你的端可号对应你的这个你要连的数据库然后接下来这边呃这个的话应该是

18:21.020 --> 18:29.020
这个os source啊这个应该是你的用户名吧我看一下啊全线来源啊全线来源啊然后这样我们这边我们来

18:30.020 --> 18:34.620
回到我们这边我们来呗那我们这边的话找到我们的这个代码

18:36.620 --> 18:40.620
找到我们的代码我们的代码在这里是吧

18:41.620 --> 18:45.820
my site server 2 然后里面的话有一个config

18:47.220 --> 18:53.220
config然后接下来这边有个config点default点接下来这样我这边让我把它打开

18:54.220 --> 18:59.220
打开打开之后然后找到你连接数据库的地方这里

19:01.220 --> 19:09.220
对不对这里之前我们是不是直接就连了直接这样子就连了那现在的话你这边你就要把它改一下让我这边让我复制一下

19:11.420 --> 19:22.220
复制一下然后像我把这个就注释掉了啊注释掉之后然后接下来的话呃这边这边呢你就照着我这边改首先的话这边就是要输入这个用户名和这个密码

19:23.220 --> 19:26.500
我们用户名是什么我把这个复制过来吧

19:27.420 --> 19:31.620
这连接字符创网就直接把它复制过来然后放到这里面

19:34.180 --> 19:39.620
放到这里面好一个一个来改首先这里我们用户名用户名的话是不叫做解决

19:40.500 --> 19:49.820
然后接下来密码密码的话对应的是654321对吧 然后再对应的是这个it ip的话就应该是这个it

19:50.820 --> 19:54.220
就应该是这个it好然后再这里

19:56.980 --> 19:58.860
好然后接下来这边对应的这个端口号

19:59.860 --> 20:01.460
端口号对应的就是啊

20:03.460 --> 20:07.260
27017对吧 再加来这边这个data base

20:08.500 --> 20:12.540
就你data base的名字data base的话我们这边是不是就是解决

20:13.260 --> 20:14.580
然后不解决

20:14.900 --> 20:17.380
这边那就是应该是my site

20:18.420 --> 20:22.460
然后接下来你的这个这个缩实的来源

20:23.020 --> 20:24.860
这里的话就应该也是my site

20:26.460 --> 20:29.740
对吧 你的连接字符创你就应该修改成这个样子

20:30.300 --> 20:31.700
好 然后接下来这边保存一下

20:33.300 --> 20:35.940
好 保存完了之后然后接下来你的这个

20:37.220 --> 20:40.380
你的这个是不是也要重启一下 对不对 服务器也要重启一下

20:40.380 --> 20:42.220
所以我们这边要重启一下这个服务器

20:42.980 --> 20:45.020
啊 我这边新开个终端算了

20:47.620 --> 20:48.060
打开

20:52.300 --> 20:53.460
怎么会打开失败呢

20:54.660 --> 20:57.300
好 这边让我这里打开终端

21:00.020 --> 21:00.340
OK

21:01.220 --> 21:05.140
好 我们这边cd到user下面的这个local

21:05.500 --> 21:07.020
下面的这个my site 2

21:08.220 --> 21:08.780
到这下面

21:09.220 --> 21:14.220
然后这边nvmusev14.15.0

21:15.060 --> 21:15.420
OK

21:15.780 --> 21:18.380
然后接下来的话这边npmotstop

21:19.740 --> 21:20.820
首先的话停止一下

21:22.020 --> 21:23.660
好 这边它就停止了

21:23.660 --> 21:25.940
你看它这边停止它说也要拿到这个pid

21:26.620 --> 21:28.220
看不看 其实就和刚才是一样的

21:28.380 --> 21:29.500
我们刚才那个

21:30.020 --> 21:31.460
那个lso

21:32.020 --> 21:33.860
就其实它全称叫做listo

21:34.380 --> 21:36.020
它其实我们也是为了拿到什么

21:36.180 --> 21:37.940
就拿到这个端口号的这个pid

21:38.380 --> 21:38.740
对不对

21:39.140 --> 21:40.620
好 大家这边完事了之后

21:40.620 --> 21:41.820
然后再这边重启一下

21:42.220 --> 21:42.620
start

21:45.270 --> 21:46.550
啊这边在等待

21:46.870 --> 21:47.710
啊说没问题

21:48.030 --> 21:48.270
对不对

21:48.270 --> 21:49.950
那说明刚刚我们的代码没有问题

21:50.310 --> 21:50.910
没有问题之后

21:50.910 --> 21:52.350
然后这样我们这边我们来刷新一下

21:52.350 --> 21:53.110
重新刷新一下

21:53.790 --> 21:54.230
看到没有

21:54.910 --> 21:55.630
不连接上了

21:56.350 --> 21:56.710
对不对

21:57.030 --> 21:57.670
就连接上了

21:58.590 --> 22:00.030
说这边的话就是这些课的话

22:00.030 --> 22:01.510
就给大家介绍的这个啊

22:01.750 --> 22:04.630
如何给你的这个数据库进行一个这个加密

22:04.910 --> 22:05.750
这个很重要

22:06.350 --> 22:07.070
这个很重要

22:07.270 --> 22:10.030
因为你不可能随便让谁拿一台电脑

22:10.070 --> 22:11.510
只要他知道你的这个IP地址

22:11.510 --> 22:12.470
知道你的端口号

22:12.710 --> 22:14.070
他就连上你的数据库

22:14.390 --> 22:15.390
你这样子好危险嘛

22:16.110 --> 22:16.590
对不对

22:16.590 --> 22:17.470
你这样很危险

22:17.470 --> 22:19.550
所以我们必须要给我们的这个数据库

22:19.910 --> 22:20.670
这个加密

22:21.110 --> 22:22.830
说白了其实就是给你的数据库

22:23.030 --> 22:25.310
添加一个这个帐号

22:25.830 --> 22:26.190
对吧

22:26.190 --> 22:27.470
说白了就是添加个帐号

22:27.470 --> 22:28.950
然后再添加一个帐号密码

22:29.630 --> 22:29.910
是吧

22:29.910 --> 22:31.670
然后你连接的时候

22:31.670 --> 22:33.950
你就必须要输入这个帐号密码

22:34.510 --> 22:34.870
好吧

22:35.190 --> 22:36.590
好我们整个这个部署的话

22:36.590 --> 22:37.910
就给大家介绍这么多

22:38.270 --> 22:38.510
啊

22:38.510 --> 22:39.230
大家下去的话

22:39.230 --> 22:40.430
可以把你的这个项目

22:40.710 --> 22:42.510
把它部署到这个服务器上面

22:42.750 --> 22:44.110
自己去买一台服务器

22:44.350 --> 22:45.310
买一个域名

22:45.470 --> 22:46.470
把你的这个项目

22:46.670 --> 22:48.030
自己把它这个部署了

22:48.430 --> 22:48.750
啊

22:49.030 --> 22:50.430
当我们整个这个

22:51.070 --> 22:51.710
部署的话

22:51.950 --> 22:52.670
就说这么多

22:52.670 --> 22:52.950
好

22:52.950 --> 22:54.030
这期课就到这里

22:54.270 --> 22:54.710
再见

