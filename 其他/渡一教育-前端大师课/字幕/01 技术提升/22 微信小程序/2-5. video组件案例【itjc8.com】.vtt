WEBVTT

00:00.000 --> 00:06.720
OK 前面的话 咱们讲了这个sweeper 轮波图组件 以及这个moveable

00:06.720 --> 00:12.560
可移动的这个组件 咱们这节课的话再讲一个 再讲一个这个video

00:12.560 --> 00:19.680
基本上也就差不多了 剩下的这个组件的话 咱们后面 后面这个第五章写这个案内的时候

00:19.680 --> 00:26.640
用到哪个讲哪个 对吧 就没有必要在这第二章 一个一个拉出来这个介绍 对吧

00:26.800 --> 00:32.640
包括我们之前讲那个组件库的话 也是用到哪个讲哪个 对吧 OK

00:33.360 --> 00:37.040
好 这节课 这节课的话 咱们来看一下这个video

00:38.240 --> 00:46.640
video的话 这个是做这个视频的 他这边的话 实际上和那个浏览器的那个video 实际上很相似 对吧 他这边 你看有src

00:47.120 --> 00:53.200
这个是你要播放的视频的资源地址 然后加这边的话是这个duration 时长

00:53.760 --> 00:55.840
control 时 这个是你的这个

00:57.360 --> 01:03.440
播放空间 就是你可以就是有这个播放啊 暂停啊 有这些 他这边的话会有个这个

01:04.720 --> 01:11.840
弹幕 看到没有 会有这个弹幕弹幕list 你的弹幕列表 还有这个弹幕这个btn

01:11.840 --> 01:19.440
啊 这个是是否显示弹幕按钮啊 只在这个初始化式 ok 啊 并且的话 他这边提供了一个例子

01:20.000 --> 01:25.600
啊 其他的实际上很多很相似啊 就这边用able 弹幕 然后autoplay

01:26.320 --> 01:29.760
自动播放 对吧 循环播放 然后multi的 轻易播放

01:30.240 --> 01:33.280
很多是相似的 但他这边的话 他提供了更多的属性

01:34.080 --> 01:39.280
可能没有 哇 这属性好多呀 ok 这个属性的话就不挨在这介绍了

01:40.160 --> 01:45.600
本他整个这个video的话 这个属性还是蛮多的 关于这个弹幕的话

01:46.560 --> 01:53.520
啊 这边是他支持的格式 ok 这个morp4肯定是最把稳的 对不对 就是mp4是这个

01:55.600 --> 02:00.080
这个最安全的 对吧 你无论是ios还是这个android啊 都是支持的

02:00.640 --> 02:06.080
啊 有一些这个格式的话 可能这个ios支持这个android不支持啊 这个的话你要注意啊

02:07.520 --> 02:09.920
好 然后这边让他有一个这个弹幕的例子

02:10.640 --> 02:14.080
在这边 看到没有 那官方的话提供了一个弹幕的例子

02:14.480 --> 02:20.880
好 咱们这边的话就带着大家把这个例子写一下吧 好吧 写一下然后大致看一下啊 看一下他这个video ok

02:21.520 --> 02:22.960
好 回到我们这边

02:24.800 --> 02:25.520
回到我们这边

02:26.560 --> 02:33.200
好 这边的话 然后是一个全新的项目啊 然后我把这个要用到的这个样式 我已经把它放进来了

02:33.760 --> 02:39.920
啊 这边这个样式的话也都很简单啊 这就不多说了 ok 好 首先这里 这里的话view

02:41.760 --> 02:42.640
container

02:42.720 --> 02:47.200
首先最外层啊 有一个这个容器 然后接下来的话是这个video

02:48.640 --> 02:56.720
video啊 我把这调整一下 ok 好 接下来的话是你的src 就是你这个

02:57.600 --> 03:03.040
呃video他的一个这个视频的这个地址啊 这个地址的话我就直接把那个官方的

03:04.560 --> 03:06.400
官方的那个地址我把拿过来

03:08.240 --> 03:11.040
ok 拿过来之后 然后接下来这边我们保存一下

03:11.920 --> 03:14.880
保存之后 什么就已经出来了 对吧 我们来看一下

03:15.600 --> 03:16.000
你看

03:16.880 --> 03:20.720
藤信大学智慧分享已经有了生态共演

03:21.520 --> 03:26.080
对吧 ok 好 已经有了 好有了之后 然后接下来的话 咱们这边

03:26.880 --> 03:32.320
咱们来准备一些这个弹幕啊 弹幕的话你这边的话来到这个ts这边

03:33.600 --> 03:38.960
来到这边啊 这边的话你就可以准备 你看他这边会有一个这个弹幕least

03:39.520 --> 03:42.560
在这边 他是一个什么 他是个oree

03:43.440 --> 03:46.080
他是个oree 所以我们这边呢 就是有个弹幕

03:47.280 --> 03:48.800
弹幕least

03:50.400 --> 03:59.360
他对应的值是一个oree 啊oree里面 然后接下来你一条弹幕就是一个对象啊 一条弹幕就一个对象啊 比如我们这边默认有两条弹幕

03:59.840 --> 04:06.320
弹幕里面他就会有什么呢 有这个text 就是你弹幕的内容啊 比如这个是第一秒

04:06.960 --> 04:10.080
出现的弹幕

04:11.600 --> 04:16.880
ok 那既然你这边指定了第一秒 那接下来你在这边这个时间这边有写个1

04:17.600 --> 04:20.320
表示什么呢 表示第一秒啊 然后接下来的话这边

04:21.040 --> 04:22.240
第二个比较text

04:23.760 --> 04:28.000
啊 随随便写的内容吗 ok 假设他是在第三秒的时候出现

04:29.200 --> 04:34.000
第三秒 好 除了这个以外 你还可以指定这个颜色啊 比如这边这个counter

04:36.510 --> 04:38.430
counter 比如说我们这边就是一个白色

04:39.230 --> 04:39.550
white

04:40.830 --> 04:41.870
两个都是白色吗

04:44.560 --> 04:47.600
ok 好 这边呢 我们是不是就准备了这个弹幕的这个数据

04:48.160 --> 04:53.520
准备了之后 然后接下来来到你的这边啊 来到这边 这边的话你就得

04:54.640 --> 05:00.400
在这里你就新增一个弹幕least 他对应的是什么 是不是对应的就是他呀

05:01.440 --> 05:04.000
是不是就应该是他啊 对对应的是这个数组

05:06.240 --> 05:08.080
ok 好 来 我们这边呢 我们保存

05:08.960 --> 05:10.480
保存之后 然后加这边播放

05:12.400 --> 05:18.800
彭宣大学 智慧分享生态供应 对吧 这是这个供应这个弹幕 ok

05:19.840 --> 05:25.520
好 然后接下来的话 然后我们要发送弹幕啊 发送弹幕的话 然后将我们在下面 我们写个

05:26.400 --> 05:29.280
view 点input container

05:31.600 --> 05:34.080
啊 这个是发送 发送弹幕

05:38.210 --> 05:41.490
好 发送弹幕 然后加这边呢 这个input

05:43.490 --> 05:49.410
text ok 把这个稍微调整一下 内幕和id这个就不要了

05:50.850 --> 05:55.970
ok 在这边 这边的话 咱们就双向绑定啊 咱们这边呢 下面再来一个

05:56.770 --> 05:59.410
再来个数据啊 这个数据呢 就叫做new

06:00.290 --> 06:00.690
弹幕

06:02.770 --> 06:06.370
一开始的话 对应的是个控制串啊 这个是新弹幕的内容

06:07.330 --> 06:17.650
用户输入的新弹幕的内容 ok 好 那接下来 这边咱们就双向绑定啊 这边呢 就是应该是一个

06:18.530 --> 06:24.060
model 然后value等于一个

06:25.500 --> 06:26.140
是new

06:27.180 --> 06:27.500
弹幕

06:29.100 --> 06:32.140
啊 这边是一个输入框 对吧 好 让在这边保存

06:33.340 --> 06:39.100
ok 啊 这边可以进行个输入啊 但这边你看 它又会出现这个啊 你这边给它绑定一个事件吧

06:39.740 --> 06:41.340
bound input

06:42.140 --> 06:42.940
等于一个

06:44.140 --> 06:49.500
input handle 它像这个微信啊 微信小程序 它就会有很多的这种

06:50.300 --> 06:55.420
这种问题 ok 你去它的那个官方的那个讨论平台 你去看

06:56.060 --> 07:02.060
很多人在说啊 就各种各样的问题 有些问题很早就有了 然后一直到现在也没解决

07:03.740 --> 07:04.380
比如像这个

07:05.020 --> 07:07.020
比如像这个啊 再比如说像这个

07:07.500 --> 07:11.980
ok 这个实际上我们这边没有任何问题 对不对 它说这边的话 加载这个

07:12.700 --> 07:13.660
加载这个media

07:14.220 --> 07:14.540
失败

07:17.150 --> 07:23.470
ok 这会好了 那这边你就可以输入 输入之后 然后接下来它就存到哪里了 说存到这里面了

07:24.030 --> 07:30.110
对吧 这个方法 放这吧 好 然后接下来我们这边的话 就下面来个按钮

07:31.710 --> 07:34.750
button 这个呢 是发送弹幕

07:35.470 --> 07:39.790
发送弹幕啊 我们这边绑着type

07:40.590 --> 07:42.430
等于一个比如说剩的

07:43.710 --> 07:50.030
弹幕 好在这下面 下面的话就是一个发送

07:51.550 --> 07:52.830
发送弹幕

07:54.110 --> 07:57.220
发送弹幕

07:58.500 --> 08:07.460
ok 好了 这个发送弹幕这边的话 咱们要做什么事情了啊 咱们这边的话需要首先拿到它这个

08:08.740 --> 08:15.620
拿到它这个video的这个上下文 拿到上下文之后调上下文的方法啊 你注意这边

08:16.500 --> 08:18.180
然后接到哪里呢 接到这吧

08:19.620 --> 08:20.100
无论

08:21.700 --> 08:24.420
无论是发送弹幕

08:25.140 --> 08:25.780
还是

08:26.340 --> 08:27.060
控制

08:27.940 --> 08:28.500
整个

08:29.860 --> 08:34.420
视频的播放或者这个暂停

08:35.060 --> 08:43.620
我们都需要什么呢 我们都需要拿到这个video的这个上下文对象

08:44.900 --> 08:51.620
ok 然后之后调用上下文对象的方法

08:52.500 --> 08:55.700
来进行啊 相应的操作

08:58.670 --> 08:59.150
面包

08:59.790 --> 09:01.870
ok 这一点的话 实际上和那个

09:03.070 --> 09:07.790
浏览器里面的那个video实际上很相似啊 浏览器里面的那个video你要操作

09:08.110 --> 09:10.110
它是不是也是要拿到这个上下文对象

09:10.590 --> 09:12.430
对不对 然后调它的什么play啊

09:12.990 --> 09:17.390
perse啊 调这些方法 这边的话也是一样的啊也是一样的

09:17.630 --> 09:21.070
所以我们这边呢要拿 要拿的话 咱们这边呢就是拿一个

09:23.550 --> 09:24.910
这个是一个生命周期

09:25.470 --> 09:31.310
啊 一个生命周期方法 对不对 好 然后接下来我们这边通过什么呢通过微信

09:31.550 --> 09:33.550
它有一个叫做create

09:34.910 --> 09:36.430
create video

09:36.670 --> 09:37.710
然后context

09:37.710 --> 09:38.750
ok

09:38.990 --> 09:41.550
你看它这边呢都已经给你显示出来了

09:41.790 --> 09:45.390
这边呢你需要传一个什么呢 需要传一个id

09:45.390 --> 09:46.670
所以我们给这个video

09:46.670 --> 09:49.230
啊 给这个video咱们设置一个id

09:49.230 --> 09:50.510
啊 比如我们这边呢

09:50.510 --> 09:53.070
给它一个id

09:53.630 --> 09:56.590
id等于一个my video

09:57.310 --> 10:00.830
ok 好 然后接下来的话 这边这边你就把这个id

10:01.070 --> 10:03.470
把它传过去 第二个参数不需要啊

10:04.510 --> 10:07.870
ok 好 那这边呢就拿到这个上下文对象

10:07.870 --> 10:10.110
啊 拿到这个上下文对象之后 大家怎么

10:10.430 --> 10:12.270
这边把它存储到

10:12.750 --> 10:13.550
z

10:13.950 --> 10:16.270
点这个video context

10:16.590 --> 10:18.110
啊 或者就叫做context

10:20.110 --> 10:22.750
啊 存储到这个z这个对象上面

10:23.390 --> 10:27.550
ok 好 存储到上面之后 然后接下来我们这边发送这个弹幕

10:27.550 --> 10:29.230
你这边就可以通过z

10:29.950 --> 10:31.790
点context

10:31.790 --> 10:33.310
它上面的各种方法

10:33.790 --> 10:35.070
来进行这个操作

10:35.070 --> 10:36.510
好 那我们这边我们来看一下

10:37.790 --> 10:40.190
这边让你看啊 这边相关的api

10:40.190 --> 10:43.070
说微信点create video context

10:43.070 --> 10:45.950
对不对啊 你点过来 点过来是到这里

10:46.750 --> 10:48.990
啊 是到这里 这里的话你可以通过

10:48.990 --> 10:51.790
微信点create video context

10:52.030 --> 10:55.790
啊 拿到一个什么呢 拿到一个这个上下文的这个实力对象

10:56.350 --> 10:59.870
啊 拿到实力对象之后 这边就可以啊 调各种各样的方法

11:00.510 --> 11:02.190
看到没有 我们要的是什么 我们要的是这个

11:03.070 --> 11:05.630
对不对 发送弹幕啊 那我们这边的话

11:06.830 --> 11:08.190
调用这个方法

11:09.070 --> 11:11.470
点剩的弹幕

11:11.870 --> 11:14.510
好 这边传入一个什么呢 传入一个object

11:15.150 --> 11:16.590
啊 传入一个object

11:17.310 --> 11:21.150
好 object 传入一个对象 对象里面你看它这边就有什么

11:21.230 --> 11:23.790
是不是你的这个text 还有就是你的corner

11:24.430 --> 11:26.350
对不对 好 那我们这边这个text

11:27.710 --> 11:30.270
对应什么 所以对应的是不是应该是z

11:30.270 --> 11:32.830
是点data 点这个new

11:33.630 --> 11:36.590
弹幕 对不对 好 至于这个corner

11:36.590 --> 11:39.630
corner的话 它官方例子是给了一个随机的

11:40.190 --> 11:42.670
啊 给一个这个随机的颜色 那随机的颜色的话

11:42.670 --> 11:45.710
那这个官方它已经写好了 我直接把这个拿过来

11:46.190 --> 11:49.790
啊 直接就放在这 官方的例子这边

11:49.870 --> 11:51.150
它提供了一个这个函数

11:52.270 --> 11:56.270
干嘛 这个函数也很简单 对不对 创建一个rgb的数组啊

11:56.270 --> 12:00.190
人家这边循环三次啊 人家这边是会摇一个这个随机的颜色

12:00.750 --> 12:05.390
对不对 摇了之后啊 最终的话 然后啊 反正就获取到一个随机的颜色

12:05.790 --> 12:09.550
好 获取到之后这边corner corner的话咱们就调用这个get

12:10.110 --> 12:11.070
randomcorner

12:12.190 --> 12:14.350
OK啊 来我们这边 我们保存一下

12:17.090 --> 12:20.290
保存一下啊 重新编一下吧

12:22.050 --> 12:24.290
啊 这边的话 有些时候他就会出现这个错误啊

12:25.250 --> 12:26.450
啊 这个错误我查过

12:27.010 --> 12:31.890
OK 这个查过 这个现在没有一个很好的这个解决方法啊

12:32.130 --> 12:35.650
这是他官方的一个这个bug啊 一直也没解决

12:36.050 --> 12:41.170
OK 之前的话 网上有说各种各样的方式啊 比如加什么autoplay啊之类的

12:41.490 --> 12:44.530
啊 但是这些这些解决方式实际上都不太好

12:45.170 --> 12:47.810
对不对 你让他你仔细看他他的这个错误 他是什么

12:48.290 --> 12:49.890
Failed to load media

12:50.610 --> 12:54.690
就是加载这个视频支援失败 对不对 但是这个支援实际上是

12:55.570 --> 12:59.650
腾讯大学 智慧分享 生态共营

12:59.970 --> 13:00.850
我来发送一个

13:02.850 --> 13:04.210
你好 走

13:04.930 --> 13:07.250
就算了 对不对 把我们这边

13:08.530 --> 13:11.810
这个整个这个弹幕的功能 我把这个关小声点

13:13.250 --> 13:16.210
是否遇到过转写的 整个这个发送弹幕的功能

13:17.010 --> 13:18.770
这就搞定了 我一直在点

13:22.610 --> 13:27.490
除了这个以外的话 你这边呢 还可以干嘛呢 还可以就是通过这个context这个对象

13:27.730 --> 13:33.330
啊 控制这个视频的播放和暂停之类的啊 这些就很简单了啊 比如我们这边

13:33.890 --> 13:34.690
视频播放

13:36.610 --> 13:37.490
视频播放

13:38.450 --> 13:44.450
视频啊就暂停嘛 一个是暂停 一个是播放啊 我们这边呢就叫做

13:45.170 --> 13:45.730
play

13:47.570 --> 13:48.530
play handle

13:50.130 --> 13:51.490
啊 这边呢就是perse

13:53.010 --> 13:55.090
perse handle

13:55.730 --> 13:57.250
好 然后接下来这边

13:58.290 --> 13:59.650
这边呢是播放

14:00.850 --> 14:01.970
播放视频

14:02.530 --> 14:03.810
然后暂停

14:05.250 --> 14:05.650
视频

14:07.730 --> 14:10.130
好 这边呢是play

14:12.050 --> 14:13.090
啊 直接复制过来吧

14:15.260 --> 14:16.220
play handle

14:18.220 --> 14:20.380
然后还有一个是perse handle

14:23.680 --> 14:28.640
啊 这边有个逗号 然后接下来这边就是应该是z点context

14:29.840 --> 14:34.000
是不是拿到这个上下文对象啊 这上下文对象里面就有什么 你看一下

14:34.880 --> 14:35.600
返回回去

14:36.320 --> 14:41.440
这边是不是有play 有perse啊 对不对 有播放 有暂停 有停止啊

14:41.920 --> 14:44.160
这边的话点play

14:47.460 --> 14:49.460
好 然后接下来这边呢是perse

14:52.830 --> 14:53.390
perse

14:54.430 --> 14:58.510
ok 啊 我们保存一下 保存之后 然后重新编一下

15:00.030 --> 15:03.070
你看这次又没有那个错误 对吧 比如播放

15:04.190 --> 15:05.310
对吧 暂停

15:06.190 --> 15:07.790
啊 ok 暂停

15:08.350 --> 15:08.830
看到没有

15:09.710 --> 15:12.830
好 然后接下来这边 这边的话我记得他还有个按钮

15:13.230 --> 15:17.070
啊 还有个按钮 这边你可以开启那个弹幕 我看看他那个按钮是什么

15:18.030 --> 15:19.950
啊 是在vido 这边

15:20.510 --> 15:22.270
vido他这边的话有一个

15:23.150 --> 15:23.790
啊 就这个

15:24.270 --> 15:28.110
弹幕btn 他默认是false啊 你这边你可以把它开成是chew

15:30.030 --> 15:31.070
我们回到这边

15:32.430 --> 15:33.070
啊 这边

15:33.950 --> 15:39.470
弹幕btn 你看他现在呢是没有那个弹幕的那个开关的 就我们一般弹幕不是有个开关吗

15:40.110 --> 15:41.790
对不对 他没有没有你这边你可以把他

15:42.350 --> 15:43.150
可以把它打开

15:44.430 --> 15:45.310
啊 这边chew

15:46.030 --> 15:46.430
保存

15:48.030 --> 15:50.350
啊 保存播放 你看这边是不是有了

15:55.550 --> 15:56.910
好 然后剩下的这些

15:57.150 --> 16:00.110
剩下的这些属性的话就不一一实力了

16:00.670 --> 16:05.230
啊 这边呢 我实际上其实就是把它这个官方的 就这边他有个这个实力代码啊

16:05.710 --> 16:07.230
这边啊 有个实力代码

16:07.470 --> 16:09.150
带着大家写了一下

16:09.550 --> 16:12.590
ok 实际上你这边的话 你这个vido的话

16:13.390 --> 16:16.430
啊 我们刚才讲了你这边是不是可以拿到这个context

16:17.150 --> 16:19.790
可以拿到这个对象 这个对象里面是不是可以控制这个播放

16:20.030 --> 16:22.750
暂停 除了播放暂停以外 实际上还有什么呢

16:22.990 --> 16:23.390
还有就是

16:24.190 --> 16:24.510
这里

16:24.830 --> 16:28.350
还可以控制比如说跳到这个指定位置啊之类的

16:28.590 --> 16:29.310
各种各样的

16:29.550 --> 16:34.190
说你这边的话 实际上是完全可以自己写一个这个控制面板的

16:34.990 --> 16:35.390
知道吧

16:35.950 --> 16:43.230
啊 以前的话再给同学们讲那个vido 就浏览器那个vido的时候啊 一般的话我会带着同学们自己写一个那个

16:43.630 --> 16:45.390
控制面板 这个你完全写得出来

16:45.630 --> 16:47.630
对不对 比如说你觉得他这个样式不好看

16:48.190 --> 16:50.750
啊 他这个样式不好看的话 你把什么把那个control

16:51.150 --> 16:52.270
首先先把他隐藏了

16:52.670 --> 16:53.790
就他自身的那个

16:55.550 --> 16:58.910
就他自身的这个control是 他默认是true 你把它设置成force

16:59.150 --> 17:00.830
force的话他这边是不是就没有这个了

17:01.230 --> 17:03.390
没有这个之后再加上你再自己写一个

17:03.870 --> 17:05.870
对吧 自己写一个来进行这个控制

17:06.270 --> 17:09.310
啊 然后接下来每一个这个就你自己写的

17:09.550 --> 17:12.270
上面的每一个按钮 然后对应了是不是就这些事件

17:12.910 --> 17:13.790
是不是就这些事件

17:14.190 --> 17:14.590
对不对

17:14.990 --> 17:16.430
啊 你完全是可以写出来的

17:16.910 --> 17:17.230
ok

17:17.870 --> 17:19.790
啊 这个就是关于这个vido

17:20.430 --> 17:23.230
嗯 其他的话也没什么好说的啊

17:23.710 --> 17:24.030
ok

17:25.310 --> 17:30.270
嗯 然后后面 后面的这些组件的话 我们就后面用到一个 我们再讲一个啊

17:30.350 --> 17:32.270
那我们这边的话 关于整个这个

17:32.910 --> 17:36.670
就是微信小程序 他内置的这个组件啊 就快速的给大家

17:37.390 --> 17:40.910
过了一下啊 从下节课开始的话 咱们就开始来讲这个了

17:41.710 --> 17:42.670
就我如何

17:43.230 --> 17:44.510
制定一组件

17:45.150 --> 17:48.590
好吧啊 比如他内置的组件啊 我觉得这个不太好

17:49.070 --> 17:53.550
啊 不是不太好啊 就是啊 比如我们有些时候会根据我们的这个业务

17:54.190 --> 17:56.510
对不对 我的业务 比如说我现在我要做一个

17:58.030 --> 17:58.750
比如说我这边

17:59.470 --> 18:00.190
这个是我的

18:00.670 --> 18:01.070
这个

18:01.470 --> 18:05.070
页面啊 然后接下来啊 我这个页面里面 然后接下来有一条一条的

18:05.070 --> 18:06.750
比较这是第一条信息 第二条

18:07.150 --> 18:11.070
第三条 那我往往就需要干嘛 是把这个是吧 封装成一个

18:11.550 --> 18:16.990
组件 对不对啊 把这个封装成一个制定义的组件 这个是很常见的一个需求

18:17.550 --> 18:22.430
ok 说下节课的话 我们来看一下如何制定义组件啊

18:22.990 --> 18:28.270
好 这期课的话就到这里啊 给大家简单介绍一下video ok 拜拜

