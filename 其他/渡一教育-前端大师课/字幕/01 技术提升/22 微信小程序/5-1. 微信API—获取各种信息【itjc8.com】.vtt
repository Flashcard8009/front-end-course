WEBVTT

00:00.000 --> 00:02.800
OK 从这一张开始

00:02.800 --> 00:06.600
咱们就正式进入到第五章的学习

00:06.600 --> 00:08.000
那么第五章的话

00:08.000 --> 00:12.000
咱们是微信小程序的常见应用片

00:12.000 --> 00:14.600
那正在这一张的学习的话

00:14.600 --> 00:16.000
实际上我的建议

00:16.000 --> 00:17.600
我的建议是就是到时候

00:17.600 --> 00:19.800
你比如说你开发微信小程序的时候

00:19.800 --> 00:21.000
你用到哪个

00:21.000 --> 00:22.400
你再去看哪个

00:22.400 --> 00:25.600
你没有必要就是全部要把所有的全部看完

00:25.600 --> 00:26.300
看完了

00:26.300 --> 00:28.200
但是实际上你开发又没用到

00:28.200 --> 00:30.300
很快实际上你就忘了

00:30.300 --> 00:31.000
OK

00:31.000 --> 00:32.400
所以你学习这一张的时候

00:32.400 --> 00:35.800
你不需要抱有太大的心理负担

00:35.800 --> 00:36.500
OK

00:36.500 --> 00:37.400
你看我这一张的话

00:37.400 --> 00:38.200
到时候我会讲

00:38.200 --> 00:40.200
比如说我们常见的一些微信

00:40.200 --> 00:41.800
一些常见的应用

00:41.800 --> 00:46.400
比如说微信如何使用微信登录

00:46.400 --> 00:49.200
然后接下来如何分享小程序

00:49.200 --> 00:51.400
如何比如说微信的支付

00:51.400 --> 00:53.200
地图的定位

00:53.200 --> 00:55.400
以及比如说如何扫码

00:55.400 --> 00:56.200
对不对

00:56.200 --> 00:58.000
大家还就是微信提供了一些

00:58.000 --> 00:59.400
其他的一些这个API

00:59.400 --> 01:01.200
比如录音之类的

01:01.200 --> 01:01.700
OK

01:01.700 --> 01:02.400
那这些的话

01:02.400 --> 01:04.900
实际上都是和你实际开发的时候

01:04.900 --> 01:06.700
你的这个需求有关系的

01:06.700 --> 01:07.700
比如你开发的时候

01:07.700 --> 01:09.000
你这个需求用到了

01:09.000 --> 01:10.000
比如要分享

01:10.000 --> 01:11.900
分享当然是比较常见的

01:11.900 --> 01:12.700
用到分享

01:12.700 --> 01:14.600
这样你再回过头来看

01:14.600 --> 01:16.600
这样子实际上是比较好的

01:16.600 --> 01:17.800
比如你开发这个小程序

01:17.800 --> 01:19.100
用到的录音

01:19.100 --> 01:19.500
对吧

01:19.500 --> 01:22.700
再把我这里面的录音看一下

01:22.700 --> 01:23.300
这样子的话

01:23.300 --> 01:24.100
实际上对于你来讲

01:24.100 --> 01:25.700
你也比较轻松

01:25.700 --> 01:26.500
对不对

01:26.500 --> 01:27.300
OK

01:27.300 --> 01:28.800
这是关于这一张

01:28.800 --> 01:31.400
这一张如何进行的一个学习

01:31.400 --> 01:33.000
正确的学习知识

01:33.000 --> 01:33.300
OK

01:37.320 --> 01:38.020
那这边的话

01:38.020 --> 01:39.420
咱们第一节课

01:39.420 --> 01:40.020
第一节课的话

01:40.020 --> 01:42.620
我们主要讲一下在微信里面

01:42.620 --> 01:45.920
如何获取这个用户的这个信息

01:45.920 --> 01:48.720
实际上这个是获取这个用户信息的话

01:48.720 --> 01:51.220
这个当我们新建了这个小程序的时候

01:51.220 --> 01:53.720
它这个demo实际上已经给我们写好了

01:53.720 --> 01:54.020
你看

01:54.020 --> 01:56.520
这个是我新建了一个项目

01:56.520 --> 01:57.220
对吧

01:57.320 --> 01:58.420
新建的这个项目

01:58.420 --> 01:59.820
咱们可以看到这边的话

01:59.820 --> 02:02.120
下面有一个Hello World

02:02.120 --> 02:03.720
上面的话就是我的头像

02:03.720 --> 02:05.720
和我的这个微信的这个尼称

02:05.720 --> 02:06.320
OK

02:06.320 --> 02:06.720
这个的话

02:06.720 --> 02:08.320
实际上一开始我们新建项目的时候

02:08.320 --> 02:09.520
它整个这个

02:09.520 --> 02:11.220
如何获取用户的这个信息

02:11.220 --> 02:12.720
它就已经写好了

02:12.720 --> 02:13.520
只不过之前的话

02:13.520 --> 02:16.120
我一直没有带大家看过

02:16.120 --> 02:16.920
那么这节课的话

02:16.920 --> 02:19.220
带着大家一起把这个看一下

02:19.220 --> 02:20.220
好吧

02:20.220 --> 02:20.320
好

02:20.320 --> 02:22.520
来我们来看一下这个这里

02:22.520 --> 02:23.520
首先这里

02:23.520 --> 02:24.320
配级是

02:24.320 --> 02:26.320
接下来我们把它展开

02:26.320 --> 02:26.920
展开的话

02:26.920 --> 02:28.020
里面有两个页面

02:28.020 --> 02:28.920
一个index

02:28.920 --> 02:30.320
一个nox

02:30.320 --> 02:31.820
这个是我们之前就知道的

02:31.820 --> 02:32.420
对吧

02:32.420 --> 02:33.420
我们着重是什么

02:33.420 --> 02:35.320
着重是把index展开

02:35.320 --> 02:36.320
index展开

02:36.320 --> 02:37.520
再加这边四个文件

02:37.520 --> 02:39.820
让我们打开wxmail

02:39.820 --> 02:40.820
打开之后

02:40.820 --> 02:41.520
然后以前的话

02:41.520 --> 02:42.760
我们就直接就把这个

02:42.760 --> 02:44.020
代码就把它干掉了

02:44.020 --> 02:44.320
对吧

02:44.320 --> 02:46.020
包括它这边这个css

02:46.020 --> 02:47.420
然后还有这个js

02:47.420 --> 02:48.820
我们直接就把它干掉了

02:48.820 --> 02:50.720
那我们这边这节课的话

02:50.720 --> 02:52.420
咱们就具体的来看一下

02:52.420 --> 02:55.720
它这边是如何获取到我的这个信息的

02:56.720 --> 02:57.720
我们来看一下

02:57.720 --> 02:58.720
一点一点来看

02:58.720 --> 03:00.420
首先的话最外层是container

03:00.420 --> 03:01.920
那这个是最外层的盒子

03:01.920 --> 03:02.220
好

03:02.220 --> 03:03.520
然后接下来里面

03:03.520 --> 03:04.920
里面的话分成两个

03:04.920 --> 03:06.920
一个是user info

03:06.920 --> 03:07.920
那你通过这个名字

03:07.920 --> 03:09.020
你就知道这个是什么

03:09.020 --> 03:10.620
这个时候就是

03:10.620 --> 03:13.520
就是来渲染这个用户信息的

03:13.520 --> 03:13.920
对不对

03:13.920 --> 03:15.720
那我们来写一下注射

03:15.720 --> 03:20.620
渲染用户信息

03:20.620 --> 03:22.120
下面这个

03:22.120 --> 03:23.620
下面这个的话就是

03:23.620 --> 03:26.220
渲染一个Hello world

03:26.220 --> 03:28.120
这边的话对应了一个model

03:28.120 --> 03:29.020
那这个model对应的

03:29.020 --> 03:30.220
这肯定就是Hello world

03:30.220 --> 03:31.020
我们到这边

03:31.020 --> 03:32.620
js这边来看一下

03:32.620 --> 03:33.920
是不是就是Hello world

03:33.920 --> 03:34.520
对不对

03:34.520 --> 03:35.820
这个没什么好说的

03:35.820 --> 03:37.220
我把它分个屏

03:37.220 --> 03:38.220
分个屏

03:38.220 --> 03:40.420
好回到这边

03:40.420 --> 03:43.120
我看这个能不能把它折起来

03:43.120 --> 03:45.220
这个好像折不了

03:45.220 --> 03:46.320
算了吧

03:46.320 --> 03:46.620
好

03:46.620 --> 03:47.420
然后接下来的话

03:47.420 --> 03:47.920
这边

03:47.920 --> 03:49.320
那下面这个就不用管它了

03:49.320 --> 03:50.620
我就直接把它折起来了

03:50.620 --> 03:51.420
折起来之后

03:51.420 --> 03:52.520
让我们重点看什么

03:52.520 --> 03:53.920
重点看这一块

03:53.920 --> 03:54.820
这一块的话

03:54.820 --> 03:55.820
它又分成什么呢

03:55.820 --> 03:58.720
分成了三个block

03:58.720 --> 03:59.320
看了没有

03:59.320 --> 04:00.720
分成了三个block

04:00.720 --> 04:02.320
三个block这边

04:02.320 --> 04:03.420
wgif

04:03.420 --> 04:06.120
如果你这个can I use open data

04:06.120 --> 04:06.920
这个是q

04:06.920 --> 04:08.320
那我就渲染这一块

04:08.320 --> 04:10.120
这个语法我们都是学过的

04:10.120 --> 04:11.320
对不对

04:11.320 --> 04:12.320
lceif

04:12.320 --> 04:14.620
如果你这个has user info

04:14.620 --> 04:16.120
这边就是这边

04:16.120 --> 04:17.920
整体这个表达是

04:17.920 --> 04:18.820
整体是q

04:18.820 --> 04:20.620
那它就渲染这一块

04:20.620 --> 04:22.820
否则的话就是这一块

04:22.820 --> 04:23.520
那这一块的话

04:23.520 --> 04:25.320
这个逻辑还是非常清晰的

04:25.320 --> 04:25.820
对吧

04:25.820 --> 04:26.020
好

04:26.020 --> 04:27.220
来我们一个一个来看

04:27.220 --> 04:29.520
主要我们把这个展开

04:29.520 --> 04:31.020
展开之后这个block里面

04:31.020 --> 04:31.620
block里面

04:31.620 --> 04:32.820
然后有两个东西

04:32.820 --> 04:33.520
一个是什么呢

04:33.520 --> 04:35.020
一个是view

04:35.020 --> 04:35.620
view里面

04:35.620 --> 04:37.120
然后有个open data

04:37.120 --> 04:39.320
大家这边有个open data

04:39.320 --> 04:39.920
ok

04:39.920 --> 04:40.220
好

04:40.220 --> 04:41.020
然后接下来的话

04:41.020 --> 04:43.820
这边是can I use open data

04:43.820 --> 04:44.820
我们来看一下

04:44.820 --> 04:46.520
can I use open data

04:46.520 --> 04:47.420
在哪里

04:47.420 --> 04:48.820
是不是在这里

04:48.820 --> 04:49.520
对不对

04:49.520 --> 04:50.620
can I use open data

04:50.620 --> 04:51.220
然后接下来的话

04:51.220 --> 04:52.220
这边有个什么呢

04:52.220 --> 04:53.320
有个微信点

04:53.320 --> 04:54.420
can I use

04:54.520 --> 04:56.520
是否能够使用这个

04:56.520 --> 04:58.320
并且这边end

04:58.320 --> 05:00.720
是否能够使用这个

05:00.720 --> 05:03.220
如果两个都是q的话

05:03.220 --> 05:03.720
那接下来

05:03.720 --> 05:04.620
它是不是自然而然

05:04.620 --> 05:06.720
就进入到这个block

05:06.720 --> 05:06.920
好

05:06.920 --> 05:07.520
那你接下来

05:07.520 --> 05:08.520
你这边猜都猜得到

05:08.520 --> 05:09.520
我们来看一下这边

05:09.520 --> 05:10.720
这边让它用的是什么呢

05:10.720 --> 05:13.120
用的是open data

05:13.120 --> 05:13.720
这个可能说

05:13.720 --> 05:15.620
我们就是第一次看到

05:15.620 --> 05:15.920
对吧

05:15.920 --> 05:17.320
我们之前从来没用过

05:17.320 --> 05:18.320
第一次看到

05:18.320 --> 05:19.920
那你这边就直接干嘛

05:19.920 --> 05:22.420
是不是直接去看它的文档

05:22.420 --> 05:22.920
知道吧

05:22.920 --> 05:25.520
就一定要养成看文档的习惯

05:25.520 --> 05:26.820
特别是这一张

05:26.820 --> 05:27.820
这一张我们基本上

05:27.820 --> 05:30.520
我们会介绍大量的微信API

05:30.520 --> 05:31.620
包括比如说后面什么

05:31.620 --> 05:32.520
如何录音

05:32.520 --> 05:34.620
实际上就是用它里面的API

05:34.620 --> 05:35.620
如何扫码

05:35.620 --> 05:37.620
就是用它里面的API

05:37.620 --> 05:41.720
所以一定要有自己查询API的习惯

05:41.720 --> 05:44.020
哪怕就是有些API我没有介绍过

05:44.020 --> 05:44.820
那你自己看到

05:44.820 --> 05:46.520
比如你觉得你针对这个

05:46.520 --> 05:47.320
不太熟悉

05:47.320 --> 05:48.820
那接下来你打开什么

05:48.820 --> 05:50.920
打开它这边

05:50.920 --> 05:52.220
微信开发文档

05:52.220 --> 05:54.320
是不是自己在这里收一下

05:54.320 --> 05:54.920
对不对

05:54.920 --> 05:56.020
ok

05:56.020 --> 05:56.820
那接下来的话

05:56.820 --> 05:57.620
这边open data

05:57.620 --> 05:59.120
你这边可以收一下

05:59.120 --> 05:59.820
open data

05:59.820 --> 06:00.820
看它这有没有

06:02.220 --> 06:03.020
这

06:03.020 --> 06:03.420
看到没有

06:03.420 --> 06:04.920
open data

06:04.920 --> 06:06.120
点过来

06:06.120 --> 06:06.820
这个是什么

06:06.820 --> 06:08.820
这个的话是用户信息

06:08.820 --> 06:09.820
这个是已经调整

06:09.820 --> 06:10.320
这个是干嘛

06:10.320 --> 06:10.820
你看

06:10.820 --> 06:14.620
用于展示微信开放数据的

06:14.620 --> 06:15.520
看到没有

06:15.520 --> 06:17.320
展示微信开放数据

06:17.320 --> 06:19.820
下面的话有一些属性

06:19.820 --> 06:20.520
基本上的话

06:20.520 --> 06:21.020
你看一下

06:21.020 --> 06:22.820
它的这个功能的这个描述

06:22.820 --> 06:24.120
看一下它的这个属性

06:24.120 --> 06:27.220
然后接下来再把它官方提供的这个例子

06:28.520 --> 06:29.920
官方提供的这个例子

06:29.920 --> 06:30.820
再把它看一下

06:30.820 --> 06:32.920
基本上就没有太大问题了

06:32.920 --> 06:33.620
ok

06:33.620 --> 06:34.820
那你看这边

06:34.820 --> 06:35.520
微信点

06:35.520 --> 06:37.520
can I use open data

06:37.520 --> 06:39.220
点type user

06:39.220 --> 06:40.320
aveta ur

06:40.320 --> 06:40.820
这个就是什么

06:40.820 --> 06:42.620
这个是不是就用户的头像

06:42.620 --> 06:43.020
对不对

06:43.020 --> 06:43.220
好

06:43.220 --> 06:44.420
再加你看这个type

06:44.420 --> 06:45.320
type就是什么

06:45.320 --> 06:46.220
是不是 user

06:46.220 --> 06:47.720
aveta ur

06:47.720 --> 06:48.820
合转就对上了

06:48.820 --> 06:50.420
合转就对上了

06:50.420 --> 06:51.220
对不对

06:51.220 --> 06:51.420
好

06:51.420 --> 06:53.320
这边是user nickname

06:53.320 --> 06:54.620
然后加合这里

06:54.620 --> 06:56.620
是user nickname

06:56.620 --> 06:57.920
是不是就对上了

06:57.920 --> 06:59.120
所以说它一进来的话

06:59.120 --> 07:00.120
它自动就干嘛

07:00.120 --> 07:03.220
是不是自动就获取到我的头像信息

07:03.220 --> 07:04.520
以及我的这个

07:04.520 --> 07:05.820
泥撑信息

07:05.820 --> 07:06.420
对吧

07:06.420 --> 07:07.220
ok

07:07.220 --> 07:07.320
好

07:07.320 --> 07:09.520
因为它后面写的有注射

07:09.520 --> 07:12.820
如果需要尝试获取用户信息

07:12.820 --> 07:14.720
可改为force

07:14.720 --> 07:14.920
好

07:14.920 --> 07:15.420
来我们这边

07:15.420 --> 07:16.620
我们把它改成force

07:16.620 --> 07:17.520
我们这边的话

07:17.520 --> 07:18.820
把它复制一份

07:18.820 --> 07:22.120
注意你这边在看这个官方代码的时候

07:22.120 --> 07:24.320
你这边最好不要去删除它

07:24.320 --> 07:24.620
是吧

07:24.620 --> 07:25.520
你把它复制一份

07:25.520 --> 07:26.020
复制一份

07:26.020 --> 07:28.920
然后这样你把原来的这个注射掉

07:28.920 --> 07:31.120
方便你恢复

07:31.120 --> 07:31.320
好

07:31.320 --> 07:33.320
然后接下来这边

07:33.320 --> 07:34.020
这边的话

07:34.020 --> 07:35.020
我们就直接干嘛

07:35.020 --> 07:37.620
是不是直接给它改成force

07:37.620 --> 07:38.220
对吧

07:38.220 --> 07:39.020
改成force

07:39.020 --> 07:39.620
然后这样我们回头

07:39.620 --> 07:41.220
我们来盘一下这个逻辑

07:41.220 --> 07:42.420
改成force之后

07:42.420 --> 07:45.020
整个这个block

07:45.020 --> 07:46.120
是不是就进不去了

07:46.120 --> 07:46.520
对不对

07:46.520 --> 07:48.520
接下来它就会进入到这边

07:48.520 --> 07:50.020
这边的话它会去判断什么的

07:50.020 --> 07:52.820
判断haz user info

07:52.820 --> 07:53.020
好

07:53.020 --> 07:55.220
来我们来看一下haz user info

07:55.220 --> 07:56.820
这边是不是force

07:56.820 --> 07:57.220
对不对

07:57.220 --> 07:57.620
force

07:57.620 --> 07:58.320
那接下来取反

07:58.320 --> 07:59.420
那接下来的话

07:59.420 --> 08:01.220
它就会进入到这

08:01.220 --> 08:02.220
进入到这之后

08:02.220 --> 08:03.920
然后接下来我们来看一下

08:03.920 --> 08:06.620
这边的话有两个button

08:06.620 --> 08:07.820
一个view

08:07.820 --> 08:08.520
对不对

08:08.520 --> 08:10.320
但是这两个button和这个view

08:10.320 --> 08:11.420
它们又是什么

08:11.420 --> 08:13.520
是不是又是这个分支的关系

08:13.520 --> 08:14.420
看到没有

08:14.420 --> 08:18.420
如果你这个can I use get user profile

08:18.520 --> 08:19.620
如果它是去

08:19.620 --> 08:20.920
那我就只显示一个什么

08:20.920 --> 08:22.320
只显示个button

08:22.320 --> 08:23.720
如果它是force

08:23.720 --> 08:25.320
那then can I use

08:25.320 --> 08:26.720
这个它是去

08:26.720 --> 08:28.320
那我就显示第二个button

08:28.320 --> 08:29.120
否则的话

08:29.120 --> 08:30.620
我这边就显示这个view

08:30.620 --> 08:31.320
然后接下来这边

08:31.320 --> 08:33.320
请使用1.4.4

08:33.320 --> 08:34.220
即以上

08:34.220 --> 08:35.820
这个版本的基础库

08:35.820 --> 08:36.720
来我们这边

08:36.720 --> 08:38.720
重新编一下

08:38.720 --> 08:39.520
你看

08:39.520 --> 08:40.220
现在的话

08:40.220 --> 08:41.820
它就不是说直接显示出

08:41.820 --> 08:43.120
头像和这个泥撑

08:43.120 --> 08:43.820
现在的话

08:43.820 --> 08:47.020
它是不是就进入到了第二个block

08:47.020 --> 08:47.720
对不对

08:47.820 --> 08:48.720
第二个block

08:48.720 --> 08:49.620
然后接下来的话

08:49.620 --> 08:50.720
这边

08:50.720 --> 08:52.320
它这边显示出来这个按钮

08:52.320 --> 08:52.820
那这个按钮

08:52.820 --> 08:53.720
究竟是哪个按钮

08:53.720 --> 08:55.020
我们来看一下

08:55.020 --> 08:58.020
这边它是can I use get pro info

08:58.020 --> 08:58.920
我们来看一下这边

09:00.920 --> 09:03.120
can I use get user info

09:03.120 --> 09:04.120
这个默认是什么

09:04.120 --> 09:06.020
默认是一个force

09:06.020 --> 09:07.320
大家这边有个can I use

09:07.320 --> 09:08.120
can I use

09:08.120 --> 09:10.120
这边是一个微信can I use

09:10.120 --> 09:12.920
这个和刚才的open type是一样的

09:12.920 --> 09:13.720
ok

09:13.720 --> 09:14.020
好

09:14.020 --> 09:15.720
然后接下来这个按钮

09:15.720 --> 09:16.720
这个按钮的话

09:16.720 --> 09:21.020
它绑定了一个叫做get user profile

09:21.020 --> 09:22.120
那今天我们这边找一下

09:22.120 --> 09:25.120
get user profile在这里

09:25.120 --> 09:27.320
是不是就找到了

09:27.320 --> 09:28.020
对不对

09:28.020 --> 09:28.920
就找到了

09:28.920 --> 09:29.720
与此对应了

09:29.720 --> 09:31.520
我们看一下下面那个按钮

09:31.520 --> 09:32.120
下面这个按钮

09:32.120 --> 09:33.120
实际上它这边

09:33.120 --> 09:34.420
它显示的和上面这个按钮

09:34.420 --> 09:35.620
实际上是一样的

09:35.620 --> 09:37.320
也就是说你如果上面这个

09:37.320 --> 09:38.320
不支持的话

09:38.320 --> 09:39.420
那接下来我就显示

09:39.420 --> 09:41.320
这个下面的这个按钮

09:41.320 --> 09:42.120
他们做的事情

09:42.120 --> 09:43.820
实际上都是一样

09:43.820 --> 09:44.520
就是什么呢

09:44.520 --> 09:47.520
就是获取用户的信息

09:47.520 --> 09:49.420
就是获取用户的信息

09:49.420 --> 09:50.720
刚刚我们来看一下

09:50.720 --> 09:51.220
这边的话

09:51.220 --> 09:53.520
首先一个get user profile

09:53.520 --> 09:55.620
这边是get user info

09:55.620 --> 09:57.520
最早的时候

09:57.520 --> 09:59.420
我们在获取这个用户信息的时候

09:59.420 --> 10:00.520
我们用的都是什么呢

10:00.520 --> 10:02.320
用的都是这种方式

10:02.320 --> 10:03.320
get user info

10:03.320 --> 10:04.520
用的都是这种方式

10:04.520 --> 10:05.720
但是你看它现在

10:05.720 --> 10:09.320
它说不推荐使用这个get user info

10:09.320 --> 10:10.020
预计什么呢

10:10.020 --> 10:12.920
预计从这个2021年

10:13.920 --> 10:15.620
这都2023年了是吧

10:15.620 --> 10:18.520
很早就已经开始就是不推荐了

10:18.520 --> 10:20.920
这个的话将不再弹出弹框

10:20.920 --> 10:25.120
它会直接返回匿名的用户信息

10:25.120 --> 10:27.120
什么叫做匿名的用户信息

10:27.120 --> 10:30.520
它以返回的是一个空的这个头像

10:30.520 --> 10:31.720
空的这个头像

10:31.720 --> 10:32.520
然后接下来的话

10:32.520 --> 10:34.920
那个泥撑那些也是没有的

10:34.920 --> 10:36.720
一个匿名的用户信息

10:36.720 --> 10:38.120
就这个接口基本上就

10:38.120 --> 10:39.820
它后面也就没有维护了

10:39.820 --> 10:41.620
说现在的话推荐的都是什么呢

10:41.620 --> 10:44.520
现在推荐的都是使用这种方式

10:44.520 --> 10:49.520
ok推荐使用微信点get user profile

10:49.520 --> 10:52.320
那这个是不是就是一个API

10:52.320 --> 10:52.820
对不对

10:52.820 --> 10:54.620
就是一个微信提供的API

10:54.620 --> 10:56.120
让我这边当我点击的时候

10:56.120 --> 10:57.920
它这边会到这里到这里之后

10:57.920 --> 10:59.820
大家这边会调用这个API

10:59.820 --> 11:02.220
那这个API你没见过

11:02.220 --> 11:02.820
对不对

11:02.820 --> 11:04.820
你没见过你没见过怎么办

11:04.820 --> 11:07.920
没见过去这个它的文档里面看哦

11:07.920 --> 11:08.920
是不是啊

11:08.920 --> 11:10.720
好那接下来这边过来

11:12.220 --> 11:14.320
这边搜索一下出来了对吧

11:15.220 --> 11:16.720
好过来看一下

11:18.020 --> 11:19.420
好这边功能描述

11:19.420 --> 11:21.920
啊获取用户信息

11:21.920 --> 11:25.920
啊让页面产生点击事件后才可以调用

11:25.920 --> 11:28.220
你注意我之前我就踩过这个坑

11:28.220 --> 11:30.920
我之前的话是本来在这个onload里面

11:30.920 --> 11:31.720
onload里面

11:31.720 --> 11:34.920
然后这样我就直接想着自动获取它的这个信息

11:34.920 --> 11:36.720
后来我发现获取不了

11:36.720 --> 11:38.220
后来我再回来看文档

11:38.220 --> 11:41.220
我发现他这边必须要就是在这个bunt

11:41.220 --> 11:42.520
在这个button

11:42.520 --> 11:45.120
就这个按钮的这个点击事件里面

11:45.120 --> 11:46.220
才可以啊

11:47.220 --> 11:51.820
好然后每次请求都会弹出授权这个窗口

11:51.820 --> 11:52.920
用户同意后

11:52.920 --> 11:55.720
他才会返回你的这个user info

11:55.720 --> 11:57.920
ok好然后接下来这个是功能描述

11:57.920 --> 11:59.420
然后在这边看一下参数

11:59.420 --> 12:00.020
参数的话

12:00.020 --> 12:02.720
他允许你传递一个对象

12:02.720 --> 12:04.520
那对象里面有些什么呢

12:04.520 --> 12:07.620
对象里面有这个常见的就是这个描述

12:08.620 --> 12:11.020
啊描述就是你不是有个弹窗吗

12:11.020 --> 12:11.920
对吧弹窗的话

12:11.920 --> 12:14.020
然后就像他的那个声明啊

12:14.020 --> 12:16.220
就你这个你要获取用户的信息

12:16.220 --> 12:17.620
你是用来干啥的

12:17.620 --> 12:19.020
好然后加一个success

12:19.020 --> 12:20.620
一个fail一个complete

12:20.620 --> 12:22.520
啊这个我们已经很熟悉了

12:22.520 --> 12:24.220
对吧ok好

12:24.220 --> 12:25.720
那接下来我们来看一下他的

12:25.720 --> 12:26.820
他这边的话就是你看

12:26.820 --> 12:29.720
那这边首先有一个这个desc

12:29.720 --> 12:30.720
一个描述

12:30.720 --> 12:33.820
他这边说的是展示用户信息

12:33.820 --> 12:34.620
好然后接下来的话

12:34.620 --> 12:35.520
这边成功的话

12:35.520 --> 12:37.120
他这边的话会打印出来

12:37.120 --> 12:39.420
那并且这边set data

12:39.420 --> 12:39.920
把什么呢

12:39.920 --> 12:41.720
把这个user info啊

12:41.720 --> 12:44.520
接下来这边设置成res.user info

12:44.520 --> 12:46.620
把这个has user info啊

12:46.620 --> 12:48.320
设置成这个q

12:48.320 --> 12:49.720
ok好

12:49.720 --> 12:51.620
然后接下来我们这边我们来看一下啊

12:52.720 --> 12:56.320
我把那个调色器打开

12:56.320 --> 12:56.620
好

12:56.620 --> 12:58.820
然后接下来我们这边获取一下点击

12:59.820 --> 13:00.920
你看这边

13:00.920 --> 13:03.020
是不是弹出来了这个

13:03.020 --> 13:05.620
就是这个什么信息框

13:05.620 --> 13:06.620
他这个叫什么啊

13:06.620 --> 13:08.820
就是就是这边有个弹出框

13:08.820 --> 13:09.520
对吧

13:09.520 --> 13:10.820
弹出了这个弹出框啊

13:10.820 --> 13:13.720
询问这个用户是否允许啊

13:13.720 --> 13:16.920
首先要用用这个用户允许了之后才行

13:16.920 --> 13:17.120
好

13:17.120 --> 13:18.620
然后接下来他这边呢

13:18.620 --> 13:20.120
我们点击允许

13:20.120 --> 13:21.120
点击允许之后

13:21.120 --> 13:22.420
然后接下来你看这边啊

13:22.420 --> 13:24.720
头像和这个

13:24.720 --> 13:26.420
啊尼称就出来了

13:26.420 --> 13:27.620
好然后加这边打印

13:27.620 --> 13:29.320
这边res打印打印

13:29.320 --> 13:31.020
打印我们把它展开看一下啊

13:31.020 --> 13:31.920
这边有些什么东西

13:32.920 --> 13:36.420
嗯这边有这个cloud id啊

13:36.420 --> 13:38.420
然后加这边还有这个编码这个data啊

13:38.420 --> 13:39.320
一些其他的

13:39.320 --> 13:40.320
然后加我们着重看什么呢

13:40.320 --> 13:41.420
着重看这边

13:41.420 --> 13:43.120
user info

13:43.120 --> 13:43.420
对不对

13:43.420 --> 13:44.920
这个是不是就用户的信息啊

13:44.920 --> 13:45.120
好

13:45.120 --> 13:46.520
然后加你把它展开

13:46.520 --> 13:47.120
展开之后

13:47.120 --> 13:49.520
你看这边是不是有我的这个头像啊

13:49.520 --> 13:49.920
对不对

13:49.920 --> 13:51.920
然后语言让家尼称

13:51.920 --> 13:53.220
是不是就获取到了

13:53.220 --> 13:53.620
对不对

13:53.620 --> 13:56.920
获取到了之后这边是不是就显示出来了

13:56.920 --> 13:57.520
对不对

13:57.520 --> 13:58.620
ok

13:58.620 --> 13:59.420
你看以前的话

13:59.420 --> 14:00.320
从来没带过大家

14:00.320 --> 14:03.820
就是把它这个官方提供了这个默认的这个代码

14:03.820 --> 14:05.220
带着大家看一下

14:05.220 --> 14:07.220
今天的话首先的话带着大家看一下

14:07.220 --> 14:10.220
我不知道下去有没有人就是自己看过啊

14:10.220 --> 14:11.120
ok

14:11.120 --> 14:13.920
你看一下这边你就知道他如何去获取这个

14:13.920 --> 14:16.020
用户的这个头像和这个尼称

14:16.020 --> 14:18.920
那你以后你在遇到这种需求的时候

14:18.920 --> 14:21.520
是不是也就是和他这个官方这边设立的是

14:21.520 --> 14:22.620
一样

14:22.620 --> 14:23.620
对不对

14:23.620 --> 14:24.520
ok

14:24.520 --> 14:26.020
这边是这个block

14:26.020 --> 14:27.320
如果这个也不支持的话

14:27.320 --> 14:28.820
这个是什么

14:28.820 --> 14:31.120
这边是有一张这个图片

14:31.120 --> 14:33.720
图片然后接下来这边的话是

14:33.720 --> 14:35.820
有一个user info

14:35.820 --> 14:37.820
leak name

14:37.820 --> 14:38.920
就如果上面也不支持

14:38.920 --> 14:40.520
哦不是不是

14:40.520 --> 14:41.920
他这边是这个意思

14:41.920 --> 14:43.320
他这边那是你这边

14:43.320 --> 14:45.920
这边是不是已经把这个改成Q了

14:45.920 --> 14:46.420
对不对

14:46.420 --> 14:47.120
改成Q的话

14:47.120 --> 14:48.320
他下次他就进哪里了

14:48.320 --> 14:49.920
是不是就进这个block了

14:49.920 --> 14:50.220
对不对

14:50.220 --> 14:50.920
进这个block

14:50.920 --> 14:53.120
让你的这个user info

14:53.120 --> 14:54.920
Veta这边这边是不是已经有值了

14:54.920 --> 14:56.720
因为你这边是不是已经把这个res

14:56.720 --> 14:58.720
点user info复制给他了

14:58.720 --> 14:59.020
对不对

14:59.020 --> 15:00.120
说他这边已经有值了

15:00.120 --> 15:00.720
说后面的话

15:00.720 --> 15:02.320
他就直接显示

15:02.320 --> 15:03.920
直接显示这个

15:03.920 --> 15:05.120
对吧ok

15:06.520 --> 15:09.720
这是官员他这个默认的这个代码

15:09.720 --> 15:10.320
那接下来

15:10.320 --> 15:12.020
我们这边我们再来看几个吧

15:12.020 --> 15:13.320
带着大家看几个

15:13.320 --> 15:16.120
其实主要是带着大家去查询文档

15:16.120 --> 15:18.520
ok主要是查文档

15:18.520 --> 15:19.520
好比我们在这边

15:19.520 --> 15:20.220
我们在这边的话

15:20.220 --> 15:23.320
我们再来几个这个button好不好

15:23.320 --> 15:24.320
好这边的话

15:25.320 --> 15:27.720
再来几个button

15:27.720 --> 15:28.420
一个是什么呢

15:28.420 --> 15:30.320
一个是比如说收获地址

15:34.400 --> 15:36.200
好就查看这个收获地址

15:36.200 --> 15:37.500
他也是这个默认的

15:37.500 --> 15:38.100
一个是什么呢

15:38.100 --> 15:42.480
一个是查看这个用户授权

15:42.480 --> 15:46.780
查看用户授权

15:46.780 --> 15:47.680
好还有个什么呢

15:47.680 --> 15:51.090
还有个是系统设置

15:51.090 --> 15:52.290
系统设置

15:52.290 --> 15:55.690
就是设置他相应的这个授权信息

15:55.690 --> 15:58.690
我们这边把这个type把它改一下

15:58.690 --> 16:01.690
稍微把它type

16:01.690 --> 16:02.990
我们让他等于一个什么呢

16:02.990 --> 16:05.490
等于一个primary

16:05.490 --> 16:06.490
好然后接下来的话

16:06.490 --> 16:06.890
这边

16:09.090 --> 16:09.890
bund type

16:12.560 --> 16:14.360
这个是查看收获地址

16:14.360 --> 16:15.960
所以咱们这边andress

16:20.240 --> 16:21.140
然后接下来的话

16:21.140 --> 16:22.440
这边这边的话

16:22.440 --> 16:24.040
是查看用户授权

16:24.040 --> 16:25.740
比较叫做user orce

16:27.040 --> 16:28.140
好然后接下来的话

16:28.140 --> 16:31.440
这边bund type

16:31.440 --> 16:33.640
等于一个啊这边的话

16:33.640 --> 16:36.040
sysopt

16:36.040 --> 16:37.440
ok啊三个按钮

16:37.440 --> 16:38.840
好我们这边重新编一下

16:40.340 --> 16:41.040
ok

16:42.540 --> 16:44.440
咋没出来呢

16:44.440 --> 16:46.240
重新编一下啊出来了

16:46.240 --> 16:49.640
啊他有些时候他这个就是要编一两次啊

16:49.640 --> 16:52.040
然后把那个调成统一的好吧

16:52.040 --> 16:54.740
我们把这个他这边应该显示的是这个按钮

16:54.740 --> 16:59.850
把这个按钮啊这两个按钮我们一起吗

16:59.850 --> 17:01.150
这两个按钮

17:01.150 --> 17:04.050
哎按错了啊

17:04.050 --> 17:05.950
这个两个按钮我们一起啊

17:05.950 --> 17:08.150
把它也调成这种primary

17:08.150 --> 17:11.150
ok好然后给这个button稍微设置一下那个吧

17:12.250 --> 17:12.750
button

17:14.750 --> 17:17.550
这边button稍微设置一下啊

17:17.550 --> 17:18.850
margin bottom

17:18.850 --> 17:21.750
给一个比较30啊p差保存

17:21.750 --> 17:24.950
ok好那下面这个咱们就不要了

17:24.950 --> 17:25.650
哈下面这个

17:27.350 --> 17:29.850
这个我就把主持掉吧

17:29.850 --> 17:34.050
好吧ok好那现在的话我们这边获取用户

17:34.050 --> 17:36.950
投向这货取投向你一声这个是不是做好了的

17:36.950 --> 17:40.750
对你点击之后啊这边允许啊这边是不是获取啊

17:40.750 --> 17:43.450
这个是ok的好那现在我们要做什么功能呢

17:43.450 --> 17:46.650
现在我们要分别做这个收获地址啊

17:46.650 --> 17:51.150
一个是收获地址一个是查看用户授权啊

17:51.150 --> 17:53.950
然后还有一个是系统设置ok好

17:53.950 --> 17:57.450
来我们一个一个来写首先的话是这边收获地址

17:58.450 --> 18:02.450
好然后接下来这边这边是不是应该是有一个

18:02.450 --> 18:07.450
andress啊对不对收获地址啊这些大家都很熟悉啊

18:07.450 --> 18:08.450
所以

18:10.450 --> 18:12.450
收获

18:13.450 --> 18:15.450
收获地址

18:16.450 --> 18:17.450
adress

18:17.450 --> 18:23.890
ok好这个andress我如何获取他的这个收获地址呢

18:23.890 --> 18:27.890
啊我们这边来看一下他这边会涉及到一个这个API

18:27.890 --> 18:30.890
叫做微信点choose address

18:31.890 --> 18:32.890
涉及到

18:34.890 --> 18:41.890
涉及到什么呢微信啊我们整个这一张实际上很多实际上就是调他的这个

18:41.890 --> 18:45.890
原生的这个API在吧他给我们提供了很多这个API啊

18:45.890 --> 18:48.890
我们这边涉及到的是这个choose address

18:48.890 --> 18:52.890
这个也很好理解对不对choose是选择adress是地址

18:52.890 --> 18:54.890
好那接下来的话第一反应是干嘛

18:54.890 --> 18:55.890
出去看文档

18:56.890 --> 18:58.890
对不对ok好过来

18:59.890 --> 19:05.890
有了吧对吧我们来看一下这边怎么用的choose address

19:05.890 --> 19:08.890
好这边呢是传一个对象啊

19:08.890 --> 19:15.890
好获取用户收获地址啊调起用户编辑收获地址的原生界面

19:15.890 --> 19:18.890
所以他这边的话会调起这个原生界面

19:18.890 --> 19:23.890
好并在这个编辑完成后返回用户选择的这个地址

19:23.890 --> 19:27.890
ok好来看他的用法他的用法也很简单啊

19:27.890 --> 19:31.890
这边这个sixth fail complete就是这么几个回调啊

19:31.890 --> 19:34.890
那也就说什么呢也就说我们在这边

19:34.890 --> 19:40.890
我们就直接来写微信点choose address

19:40.890 --> 19:43.890
对吧要接受一个对象对象里面的话

19:43.890 --> 19:51.290
再加这边的这个sixth好这边呢会有一个res啊

19:51.290 --> 19:55.290
一个res然后加我们这边首先还是我们打印一下console.logres

19:55.290 --> 19:59.290
打印一下就是他的这个返回值

19:59.290 --> 20:03.290
ok好然后加你注意他这边的话他还会有一个

20:03.290 --> 20:09.600
啊就这边的话你要申请开通啊这个我要记录一下

20:09.600 --> 20:13.600
再使用啊我这边的话我就不单独开一个文档了啊

20:13.600 --> 20:16.600
啊以前我们都是单独开一个文档机笔记我这边就不开了

20:16.600 --> 20:20.600
我这边就就在这边就在这个代码里面我就记了啊

20:20.600 --> 20:25.600
啊在使用这个收获地址的时候

20:25.600 --> 20:30.600
收获地址在获取啊应该是叫做获取

20:30.600 --> 20:35.600
在获取收获地址的时候需要

20:35.600 --> 20:39.600
呃去什么呢去这个微信

20:39.600 --> 20:43.600
公众平台开通

20:43.600 --> 20:45.600
使全线

20:45.600 --> 20:49.600
ok啊我这边的话我是开通了的啊在这边小程序

20:49.600 --> 20:51.600
这边他有个接口设置

20:51.600 --> 20:53.600
可不可以你点过来

20:53.600 --> 20:55.600
点过来之后你看这边

20:55.600 --> 20:59.600
呃获取用户收获地址啊接口对应的就是choose address

20:59.600 --> 21:03.600
那在你这边你就点击你没有开通他这边就是一个按钮去开通

21:03.600 --> 21:05.600
啊我这边呢是已经开通了

21:05.600 --> 21:08.600
可不可以啊比如说你要开通这个你这边就点击去开通

21:08.600 --> 21:12.600
去开通他要求你填写就是你的这个申请的原因啊

21:12.600 --> 21:15.600
你稍微填一下啊大字就是这样子的

21:15.600 --> 21:18.600
ok所以注意啊需要再开通

21:18.600 --> 21:21.600
需要这个在后台开通

21:21.600 --> 21:24.600
呃回到这边啊

21:24.600 --> 21:26.600
这个是第一个好第二个

21:26.600 --> 21:31.600
除了开通以外然后接下来他这边还有个要求

21:31.600 --> 21:35.600
在这里我看还有个要求他是写在哪里的

21:35.600 --> 21:39.600
嗯啊这里啊这里看到没有

21:39.600 --> 21:45.600
另外就是你这边在使用该接口的时候需要在app.json中进行声明

21:45.600 --> 21:48.600
否则无法正常使用该接口

21:48.600 --> 21:51.600
看到没有两个条件首先的话你先去开通啊

21:51.600 --> 21:54.600
在这边你在使用的时候你还需要在app.json里面

21:54.600 --> 21:57.600
你需要去声明啊那怎么声明的

21:57.600 --> 22:00.600
你看他这边是不是有个具体规则键公告啊

22:00.600 --> 22:05.420
那这样我们这边我们点过来看一下呗

22:05.420 --> 22:08.420
点过来看一下啊那这边这边的话

22:08.420 --> 22:11.420
然后详细的话实际上就是在

22:11.420 --> 22:14.420
在这边在这边你看

22:14.420 --> 22:16.420
有个required private

22:16.420 --> 22:20.420
inforce啊就是你这边要求一些这个隐私的一些信息

22:20.420 --> 22:23.420
那接下来你需要在这个app.json里面

22:23.420 --> 22:26.420
你需要把它配置一下不用我们这边呢我们就配置什么呢

22:26.420 --> 22:30.420
choose address对不对啊来到我们这边

22:30.420 --> 22:34.420
来到app.json啊那既然你就照着他所说的

22:34.420 --> 22:38.420
你把它配置一下就可以了啊所以一定要去看文档啊

22:38.420 --> 22:42.420
知道吧你如果不看文档的话你可能这边没出来你就在那儿

22:42.420 --> 22:45.420
百度查半天对吧百度查半天就是你查的时候

22:45.420 --> 22:48.420
有一个最大的问题就是你查的信息有可能是旧的

22:48.420 --> 22:51.420
特别是这个微信小城区他的这个接口

22:51.420 --> 22:55.420
他的改了很多了啊包括我以前写的一些接口

22:55.420 --> 22:58.420
以前就以前写的一些势力啊发现他接口变了

22:58.420 --> 23:01.420
有些的话都是就是已经是不推荐了

23:01.420 --> 23:05.420
没有啊所以直接去看他官方的文档是最好的

23:05.420 --> 23:08.420
你们以后一定要养成这个看文档的这个习惯

23:08.420 --> 23:11.420
就我的这个视频迟早有天会过时的

23:12.420 --> 23:15.420
对不对啊你首先要把这个心疼这个心态摆正

23:15.420 --> 23:19.420
就我这个教学视频我这边呢是虽然是2023年对吧

23:19.420 --> 23:23.420
但这个迟早有一天会过时的那到时候那你怎么办呢

23:23.420 --> 23:26.420
对不对所以一定要学会查这个文档啊

23:26.420 --> 23:29.420
这个也是之前和你们袁老师商量的时候啊

23:29.420 --> 23:32.420
我们就觉得就是这堂课一就这门课啊

23:32.420 --> 23:35.420
实际上一个重点就是让大家养成查文档的这个习惯

23:35.420 --> 23:39.420
啊你看我反复的再带着大家看文档看文档

23:39.420 --> 23:42.420
对不对这个实际上也是你以后开发的一个常态

23:42.420 --> 23:45.420
啊好这边这边的话是

23:45.420 --> 23:48.420
choose address啊你把它加上对吧加上就ok了

23:48.420 --> 23:51.420
啊就ok了好了基本上啊这边记下吧

23:51.420 --> 23:56.990
另外另外还需要

23:56.990 --> 23:59.990
在app.json中

23:59.990 --> 24:03.990
呃添加配置啊具体

24:03.990 --> 24:05.990
参与文档

24:05.990 --> 24:08.990
ok好来我们这边

24:08.990 --> 24:11.990
保存保存之后大家我们这边点击

24:11.990 --> 24:14.990
啊他这边你看他这个这个就是原生的

24:14.990 --> 24:18.990
啊这个就是原生的ok他这边让他没打一寸的

24:18.990 --> 24:21.990
啊这边好像要点确定比我点确定

24:21.990 --> 24:24.990
你看这边是不是就出来了对不对张三人家这边

24:24.990 --> 24:27.990
这个信息就出来了啊这个你如果用这个手机

24:27.990 --> 24:30.990
预览的话啊他这边是可以自己编辑的

24:30.990 --> 24:33.990
比如说我这边用手机预览一下

24:33.990 --> 24:38.560
稍等啊用手机预览一下

24:38.560 --> 24:43.130
好啊我这边我就不投评了哈我就不投评了

24:43.130 --> 24:46.130
我这边我给你们验证一下啊对的啊

24:46.130 --> 24:49.130
我这边的话如果就是我这边如果手机上

24:49.130 --> 24:52.130
我点这个收获地址啊点了收获地址之后

24:52.130 --> 24:55.130
人家他这边的话会就出现我以前编辑过的这个

24:55.130 --> 24:58.130
收获地址那像我可以新增啊新增这个新的

24:58.130 --> 25:01.130
收获地址之类的ok那你这边的话你这个

25:01.130 --> 25:04.130
收获地址啊拿到之后那既然你是不是

25:04.130 --> 25:07.130
就可以做这个下一步的操作对不对啊

25:07.130 --> 25:10.130
比如说举个例子举个例子比我这边拿到了

25:10.130 --> 25:13.130
对吧拿到了之后人家将我这边的就是微信

25:14.130 --> 25:17.130
点这个修model啊

25:17.130 --> 25:20.130
让家这边这个title啊比较展示

25:22.130 --> 25:24.130
比较展示啊content

25:24.130 --> 25:28.820
content就是什么呢complete就不要了

25:28.820 --> 25:32.820
啊然后contentcontent就是比如说你所在的

25:32.820 --> 25:34.820
比我们这边用一个

25:34.820 --> 25:39.820
模板支付串你所在的啊

25:39.820 --> 25:41.820
然后接下来这边

25:41.820 --> 25:44.820
而也是点这个ctname

25:44.820 --> 25:46.820
我看一下

25:46.820 --> 25:48.820
这边你把它展开

25:48.820 --> 25:50.820
ctname对吧

25:50.820 --> 25:53.820
ctname啊

25:53.820 --> 25:56.820
然后接下来话啊比如说是我们的优质

25:56.820 --> 25:57.820
城市

25:58.820 --> 26:01.820
是我们的优质城市

26:02.820 --> 26:05.820
啊可享受

26:06.820 --> 26:09.820
啊八折优惠

26:10.820 --> 26:13.820
ok好来保存一下

26:14.820 --> 26:16.820
好获取那家这边的话

26:16.820 --> 26:18.820
他这边的话他这个tc端这个模拟器里面

26:18.820 --> 26:20.820
他没有办法添加之类的

26:20.820 --> 26:23.820
你到时候你用手机啊你这边点这个预览

26:23.820 --> 26:25.820
点预览之后生成这个二维码大家你用手机少

26:25.820 --> 26:27.820
找了之后人家这边的话

26:27.820 --> 26:30.820
他是应该是会显示你之前微信编辑的这个地址

26:30.820 --> 26:32.820
那家这边的话应该是有个加号

26:32.820 --> 26:35.820
啊就安卓啊安卓这边是有个加号

26:35.820 --> 26:37.820
苹果的话不知道应该也是差不多的啊

26:37.820 --> 26:40.820
啊家你这边是可以添加这个新地址的

26:40.820 --> 26:42.820
啊但你也可以选择就是你原来的这个地址

26:42.820 --> 26:44.820
ok啊点这个确定

26:44.820 --> 26:47.820
ok你所在的城市什么广州市

26:47.820 --> 26:49.820
对对啊确定

26:49.820 --> 26:53.820
ok啊这个就是啊获取这个收获地址

26:53.820 --> 26:56.820
啊好然后接下来话咱们这边的话

26:56.820 --> 26:59.820
我们来看一下这个查看用户权限

27:00.820 --> 27:02.820
查看用户权限啊这边的话

27:04.820 --> 27:07.820
好把这个写完了我们就把它折起来啊

27:07.820 --> 27:10.820
我们这几个主要就是获取各种信息

27:10.820 --> 27:13.820
啊这个是查看

27:13.820 --> 27:18.820
查看用户权限

27:18.820 --> 27:24.540
ok啊这个的话基本上也是

27:24.540 --> 27:27.540
调用一个这个api调用什么呢

27:27.540 --> 27:31.540
调用调用这个微信

27:32.540 --> 27:35.540
点getting叫做我看一下

27:35.540 --> 27:38.540
叫做get setting啊get setting

27:38.540 --> 27:41.540
就这个主要就是调这个api

27:41.540 --> 27:43.540
他获取什么缺陷呢就是你看我们

27:43.540 --> 27:46.540
刚才不是这个获取投向泥撑的时候

27:46.540 --> 27:48.540
他不是有个弹框吗

27:48.540 --> 27:50.540
是不是需要这个用户允许之后

27:50.540 --> 27:52.540
是不是才能获取对不对

27:52.540 --> 27:55.540
那针对这一类的话实际上很多啊

27:55.540 --> 27:58.540
实际上很多比如说有这个

27:58.540 --> 28:01.540
是否允许这个获取这个地理位置

28:01.540 --> 28:04.540
是否授权就是获取这个通讯地址

28:04.540 --> 28:08.540
是否就是可以添加这个通讯路联系人

28:08.540 --> 28:11.540
是否授权比如说这个系统日历

28:11.540 --> 28:14.540
他这一类的话他挺多的ok

28:14.540 --> 28:16.540
好那我们这边呢我们还是老规矩

28:16.540 --> 28:19.540
我们这边的话去这个官方文档看一下

28:19.540 --> 28:26.960
好来到这边啊这里

28:26.960 --> 28:31.720
微信点get setting

28:32.720 --> 28:35.720
没出来了啊出来了ok你看

28:35.720 --> 28:38.720
获取用户当前设置啊

28:38.720 --> 28:41.720
然后返回职中只会出现什么呢

28:41.720 --> 28:45.720
小程序已经向用户请求过的权限

28:45.720 --> 28:49.720
注意啊只会这个请求过的这个权限啊

28:49.720 --> 28:51.720
他这边的话有一个一个是

28:51.720 --> 28:54.720
微视这个subscription是否订阅啊

28:54.720 --> 28:58.720
大家这边成功失败和这个最终的这个

28:58.720 --> 29:00.720
回调

29:00.720 --> 29:02.720
好然后加我们这边我们来看一下啊

29:02.720 --> 29:06.720
他这边有这个视力你最好把他这个官方的视力看一下

29:06.720 --> 29:09.720
他这边就是调这个接口

29:09.720 --> 29:12.720
然后加这边的话这个res点 all setting里面

29:12.720 --> 29:16.720
这里面就有一项一项的这个权限ok好来呗

29:16.720 --> 29:18.720
那我们这边我们来看一下

29:18.720 --> 29:21.720
把他过来放过来

29:21.720 --> 29:27.540
放过来之后然后加我们这边我们来看一下

29:27.540 --> 29:29.540
啊这边重新编一下

29:29.540 --> 29:34.430
好获取用户权限拿到了

29:34.430 --> 29:36.430
对不对你让他这边跟我返回那个对象啊

29:36.430 --> 29:40.430
这个对象的话就和他这边他说的这个对象是一样的

29:40.430 --> 29:42.430
啊他这边就是我们来看一下

29:42.430 --> 29:45.430
他这边就是有scorp.address2啊

29:45.430 --> 29:47.430
这个invoice2

29:47.430 --> 29:49.430
那这个invoice title2

29:49.430 --> 29:52.430
recorder2 userinfo2

29:52.430 --> 29:56.430
那你有些可能知道是什么意思有些你可能不知道什么意思

29:56.430 --> 29:58.430
对不对不要这个userinfo你应该知道

29:58.430 --> 30:02.430
这个是用户信息address你是知道

30:02.430 --> 30:06.430
这个是这个地址对不对啊那其他的这些这些是什么

30:06.430 --> 30:08.430
那这个的话他官方文档肯定什么

30:08.430 --> 30:11.430
说肯定有些肯定而且肯定会有一个什么

30:11.430 --> 30:14.430
说肯定会有个表格对不对猜都猜得到啊

30:14.430 --> 30:17.430
说你这边就要去干嘛这边是不是就去找

30:17.430 --> 30:21.430
对吧他这边的话拿到的那个权限

30:21.430 --> 30:24.430
我们这边看一下呢

30:24.430 --> 30:30.430
授权啊这儿是不是就有了对不对啊scorp.userlocation

30:30.430 --> 30:35.430
这个是精确地理位置啊然后模糊地理位置啊之类的

30:35.430 --> 30:38.430
这个是麦克风摄像头男牙啊挺多的

30:38.430 --> 30:44.430
看到没有啊挺多的啊微信这个运动部所日历这些都有啊

30:44.430 --> 30:47.430
好来既然获取到了那接下来我们就把它干嘛呢

30:47.430 --> 30:51.430
我们就把它展示出来好吧我就把它展示出来

30:51.430 --> 30:55.430
好我这边的话我首先的话先做一个这个keyname的映射

30:55.430 --> 31:01.430
我这边首先复制两个这个这个辨量过来在这边

31:01.430 --> 31:09.730
啊写下面一点好首先这个这个的话是keyname的这个映射啊

31:09.730 --> 31:23.730
这个是什么这个是权限权限key和对应这个权限名称名称的这个映射

31:24.730 --> 31:30.730
ok啊这个是什么呢这个是存储就是我们到时候我们要把这个整个这个权限把它处理好

31:30.730 --> 31:33.730
再加存存储这个处理好的这个权限信息

31:34.730 --> 31:42.730
存储处理好的权限信息ok存到这个数组里面

31:42.730 --> 31:45.730
啊到时候的话我这边会把这个数组把它便利出来

31:45.730 --> 31:50.730
ok好然后接下来回到我们这边我们这边呢是不是已经拿到了

31:50.730 --> 31:56.730
对不对拿到了然后接下来他是像这样子的一个对象啊像这样对象好像这样子的对象之后

31:56.730 --> 31:59.730
然后接下来我们这边的话我们去便利一下

32:00.730 --> 32:02.730
我们这边首先把它解构出来吗

32:03.730 --> 32:10.730
我们这边把它解构把什么呢把这个all setting把它拿出来啊拿出来这个打印就不要打印了

32:10.730 --> 32:15.730
拿出来的话他就是像这样子的一个对象对吧好像这样子的对象之后

32:15.730 --> 32:25.730
然后接下来我们这边Const一个setting setting啊对应是一个空数组啊

32:25.730 --> 32:33.730
然后加这边复讯环let这个key硬这个all setting

32:35.730 --> 32:39.730
去便利啊便利这个对象便利这个对象然后key拿到的是什么

32:40.730 --> 32:43.730
key拿到的是什么key拿到的是不是就是这个scope

32:45.730 --> 32:57.730
scopescope点userinfo是吧拿到的就是这些对不对拿到的就这些啊好首先把这个key拿到拿到之后

32:57.730 --> 33:06.730
然后接下来我这边setting啊然后点push啊这个setting啊是不是就是这边的这个数组啊对不对

33:06.730 --> 33:14.730
对不对啊我往里面去呃推入一个对象这对象里面就有两个东西一个是key啊key对应的是什么

33:14.730 --> 33:19.730
key对应的是呃我们这边把那个race的指向保存一下

33:19.730 --> 33:29.730
这边哇一个或者const嘛const一个下滑线race等于一个race啊或者你这边用那个箭头寒数也可以啊

33:29.730 --> 33:33.730
这边用箭头寒数也行这边的话比如说我们这边

33:34.730 --> 33:43.730
把它改成箭头寒数啊也可以啊好然后接下来这边这个key这个key的话就是什么呢就是race点data

33:44.730 --> 33:49.730
然后点keyname keyname是不拿到什么是不拿到

33:50.730 --> 33:56.730
这个是不这个对象这个对象然后接下来哪一项呢啊哪一项是不是对应的就是这边这个key

33:57.730 --> 34:04.730
对对对应的这个keyok好然后接下来的话这边这个ware

34:05.730 --> 34:13.100
值值对应的就是什么呢值对应的就是啊 our setting 然后接下来这个key ok

34:13.100 --> 34:19.100
那最终的话整个 for 循环跑完了之后我们来看一下整个这个setting啊啊它变成了什么样子console.log

34:19.100 --> 34:27.100
setting啊啊ok好大家这边我们保存一下

34:27.100 --> 34:35.100
啊重新编一下啊这边写错了啊保存一下啊重新编一下

34:36.100 --> 34:43.100
ok啊查看用户授权啊你看这边这个setting ar这边是个输主输主里面你看他这边就变成这个样子了

34:44.100 --> 34:51.100
看到没有key对应的是这个是否用户授权用户信息啊去这边怎么会有个undefine

34:52.100 --> 35:02.100
这边undefine应该是我这边没写拳啊应该是我这边没写拳这边的话我看一下啊啊我这边呢就是你只写了一部分对不对

35:02.100 --> 35:05.100
我们刚才是不是好像有个recorder 是吧我们把那个recorder加上

35:06.100 --> 35:20.100
recorder加上是麦克风是吧啊这个应该是这个因为我之前的话我那个就是就是授予了这个麦克风的啊是否

35:21.100 --> 35:31.100
允许使用麦克风ok你这边实际上你可以把写拳啊可以把写拳啊保存保存了重新站来看一下

35:33.100 --> 35:42.100
授权展开啊就是麦克风看到没有啊这几个什么都是去啊对的都是去啊好都是去然后接下来这个输主好了之后

35:42.100 --> 35:44.100
好了之后然后接下来把这个输主

35:45.100 --> 35:48.100
负责给谁呢 这边呢z

35:49.100 --> 35:51.100
点这个cdata

35:55.100 --> 36:05.100
然后接下来这边sys opt list对应的是什么呢对应的是ctr啊就刚才我们那个输主ok啊我们这边呢再再来定一个

36:06.100 --> 36:11.100
这边再来定一个再来定一个什么呢这边的话是修

36:13.100 --> 36:21.420
这个sys opt对应的是force啊这个是什么呢就是是否显示

36:25.710 --> 36:33.980
是否是否显示啊这个权限

36:34.980 --> 36:43.980
立表啊一开始的话是force啊然后接下来这边让我们这个权限已经获取到了吗获取到了之后我们就把它改成什么呢改成这个

36:45.980 --> 36:46.980
修

36:47.980 --> 36:55.980
然后这边就把它改成这个ok好那剩下的工作就很简单了剩下工作是不是你这边的话你这个输主都有了

36:55.980 --> 37:05.980
这个sys opt list 数组都有了有了之后然后接下来把它旋出来就ok了对不对啊好那我这边我就不带着写了我就直接拿过来啊

37:06.980 --> 37:08.980
我直接把这一块拿过来

37:10.980 --> 37:14.980
放到我看一下就放到这吧这个这个就不要了

37:15.980 --> 37:18.980
ok好让一下这边保存一下

37:19.980 --> 37:24.980
好查看用户授权走啊这边是不是包错了我看一下

37:27.550 --> 37:36.550
呃这边修啊这边我看好像是有一些样式啊还是没有样式没有样式啊修

37:37.550 --> 37:39.550
sys稍等我看一下

37:40.550 --> 37:47.550
啊我再编一下呢重新编一下啊这边出来了对了当前权限设置如下

37:48.550 --> 37:54.550
呃这个默认应该是force才对啊最开始应该是force看一下啊

37:55.550 --> 38:01.550
他是force才对啊这个应该是一开始应该是不会显示出来的哎他这边怎么

38:02.550 --> 38:12.550
high等 high等啊这边应该是true对吧high等true啊然后接下来这边这边下面这边是应该是force

38:14.930 --> 38:23.430
下面这边force保存重新编一下嗯哎这一块有点奇怪呢

38:24.430 --> 38:28.430
哎这个怎么老是显示出来呢稍等我看一下啊调一下

38:29.430 --> 38:34.060
这边的话shu system

38:35.060 --> 38:37.060
shu system有个class然后加这边这个high等

38:38.060 --> 38:40.060
high等等于一个

38:42.060 --> 38:44.060
哦这边写的不一样是吧

38:45.060 --> 38:46.060
这边是这个

38:47.060 --> 38:49.060
sysopt我看一下下面啊

38:50.060 --> 38:53.060
sysopt ok那变两名不一致啊

38:54.060 --> 38:55.060
再编一下

38:56.060 --> 39:02.060
ok可以了他有些时候需要编一两次好大家我们这边查看用户授权啊是不是出来了

39:03.060 --> 39:06.060
对不对当前这个权限设置这些是不是就都出来了

39:07.060 --> 39:14.060
对不对ok啊这是关于这个权限的这个查看好然后接下来这边的话还有一个这个系统的这个设置

39:15.060 --> 39:19.060
系统的设置sysopt啊我们这个叫做setting吧

39:20.060 --> 39:25.060
啊sysoptsetting好然后接下来来到这边

39:26.060 --> 39:30.060
到这边把这个折起来啊好这边呢是设置

39:33.060 --> 39:37.060
设置用户权限

39:38.060 --> 39:46.820
ok好这边我们设计到了这个API

39:47.820 --> 39:51.820
设计到的这个API什么的叫做微信

39:51.820 --> 39:53.820
点这个open

39:54.820 --> 40:01.820
open setting啊设计到了是这个好把这个的话还是先去文档里面看一下

40:03.820 --> 40:04.820
好到这边来

40:05.820 --> 40:08.820
好出来了open setting

40:09.820 --> 40:18.820
啊他这个的话也是调用这个原生的看到没有调起客户端小程序设置界面啊返回用户设置的这个操作结果

40:19.820 --> 40:26.820
设置界面只会出现小程序已经向用户请求过的这个权限

40:27.820 --> 40:29.820
ok啊来我们这边我们来试一下

40:30.820 --> 40:34.820
这边的话你就调用微信点这个open setting

40:36.820 --> 40:43.820
open setting啊然后加这边呢传入一个对象对象里面我们就写一个这个sixth就可以了

40:44.820 --> 40:51.820
sixth然后把它写成一个箭头还说啊这样就直接可以获取到这个外层的this

40:52.820 --> 40:57.820
好然后接下来这边这边的话就直接结构啊结构他里面有个什么呢有个这个all setting

40:58.820 --> 41:03.820
直接结构结构了然后加我们这边我们来打印看一下console.nog all setting

41:04.820 --> 41:06.820
ok好然后在这边保存一下

41:07.820 --> 41:12.820
好来系统设置你看他这边的话就跳转到这里了

41:13.820 --> 41:18.820
这个系统这个原生的啊这边的话你看到的这个界面和你手机上实际上还不太一样

41:19.820 --> 41:24.820
ok你这边实际上你可以开个预览开个预览然后加你这边用你的手机扫一下啊

41:25.820 --> 41:29.820
用你自己的手机扫一下你自己弄一个预览啊你不要扫我的

41:30.820 --> 41:35.820
你扫我的是进不去的好然后接下来这边点这个系统设置

41:35.820 --> 41:36.820
系统设置

41:37.820 --> 41:41.820
点系统设置之后呢他里面就有什么呢里面就有就是啊也是就是

41:42.820 --> 41:48.820
获取用户权限啊会有什么用户信息啊麦克风啊就是你之前设置过的啊之前设置过的

41:49.820 --> 41:50.820
ok

41:51.820 --> 41:56.820
好然后接下来你在这里的话你可以进行设置比如说我把这个麦克风的权限我把它关掉

41:57.820 --> 42:01.820
对吧关掉之后然后加好这边啊这边我返回

42:02.820 --> 42:08.820
啊这边我返回返回之后你看这边这边他就会出现什么你看这边这个recorder这边就变成什么了是force了

42:09.820 --> 42:14.820
也就是他这边呢同样是返回这个offsetting他返回的是什么是不返回的是新的对不对

42:14.820 --> 42:19.820
这边的话刚才我们拿到的是offsetting拿的是什么什么当前这个用户设置的这些权限的这个

42:20.820 --> 42:25.820
啊开关对不对究竟是出还是force而这边这边是什么呢这边是设置后的这个权限啊

42:26.820 --> 42:27.820
这边

42:28.820 --> 42:36.820
这边拿到的是设置后的权限信息

42:37.820 --> 42:43.820
ok好那既然拿到设置后的权限信息之后那接下来就干嘛是不进行这个权限的更新就可以了

42:44.820 --> 42:50.820
啊进行权限的更新即可

42:51.820 --> 42:53.820
ok好那我们这边的就const

42:54.820 --> 42:56.820
const一个setting

42:57.820 --> 42:58.820
settingar

42:59.820 --> 43:02.820
啊等于把之前的这个解构啊

43:03.820 --> 43:04.820
z点data

43:05.820 --> 43:11.820
点这个syas opt list把之前的解构啊解构之后然后加这边 for 循环

43:12.820 --> 43:17.160
let i off

43:18.160 --> 43:19.160
这个setting

43:20.160 --> 43:26.160
哎呀啊啊去便利他便利他之后然后拿到的是什么拿到的是啊

43:27.160 --> 43:32.160
呃就是我们之前之前这个key变成了什么呢key变成了

43:33.160 --> 43:40.160
key变成了这种的这个数组还记不记得就我们之前不是有个数组吗数组的里面是每一个对象对象的key是这个然后这个

43:41.160 --> 43:48.160
那个那个那个什么就是value 是这个对不对啊那这边呢我们拿到的就是每一个我看一下啊这边拿到的是每个对象

43:49.160 --> 43:52.160
啊你这边可以cancel一下吗这样子我给大家cancel一下

43:54.160 --> 43:57.160
这边cancel点log

43:57.160 --> 44:00.160
首先我们打印一下打印一下这个settingar

44:02.160 --> 44:09.820
好然后我们再打印一下这个offsetting offsetting ok啊

44:11.820 --> 44:17.820
好大家这边是系统设置啊比如说把这个打开返回啊这边是去

44:18.820 --> 44:26.820
哎啊打印出来了打印出来了settingar是哎settingar我看一下

44:27.820 --> 44:32.770
opt list opt list

44:33.770 --> 44:41.770
这个应该是有值的啊哦要先先那个先获取一下先查看啊然后他这个是不是才有值啊对不对

44:41.770 --> 44:48.770
大家这边再来设置啊比如把这个权限关了过来 ok看到没有啊大家这个settingar

44:48.770 --> 44:52.770
settingar这边拿到你看kiss不就是像这样子的对不对

44:52.770 --> 44:58.770
但我这边是用的是off啊用的是off注意我这边不是硬啊不是硬我这边是offoff

44:58.770 --> 45:05.770
那就是拿到每一个对象对不对拿到每一个这个对象啊拿到每个对象之后然后接下来这边for

45:06.770 --> 45:12.770
好直接写吧啊let这个key in这个offsetting

45:13.770 --> 45:18.770
好大家这边e符什么呢e符i点key

45:18.770 --> 45:29.130
然后全等于一个z点data点keyname点keyname

45:30.130 --> 45:36.130
好大家这边i点vr等于什么呢等于一个offsettingkey

45:37.130 --> 45:42.130
ok那整个这个双重 for 循环完了之后让我们这边来看一下

45:43.130 --> 45:47.130
console.log这个setting啊

45:50.130 --> 45:57.530
ok啊重新编一下啊这边的话是首先先查看一下啊

45:57.530 --> 46:03.530
然后接下来这边麦克风线是force对不对啊进去进去之后我们把它打开打开之后

46:03.530 --> 46:07.530
然后这边过来过来的话然后接下来你看之前的settingar啊

46:07.530 --> 46:09.530
然后接下来我们这边

46:10.530 --> 46:15.530
嗯啊他这边打印的就已经是最终的结果了啊打印的是最终的结果

46:16.530 --> 46:24.820
好然后接下来我们这边这边这个settingar已经更新了更新了之后人家我们这边啊

46:24.820 --> 46:25.820
是不是就和上面一样

46:26.820 --> 46:29.820
好这边一样啊raze点setdata

46:31.820 --> 46:35.820
把这个setdata重新把它更新一下啊啊这个就不用了

46:35.820 --> 46:39.820
ok啊保存保存之后人家这边来看一下

46:40.820 --> 46:46.820
好首先的话这边呢查看用户授权啊这边麦克风线是q对吧都是q啊我们进入系统设置啊

46:46.820 --> 46:51.820
我们把这个麦克风我们把它关了啊关了之后人家这边回来

46:52.820 --> 46:58.820
这边是不是就force了对不对啊系统设置重新把这个打开啊人家这边

46:59.320 --> 47:05.820
这就是q了ok啊你看这边这边的话我们就是通过这么几个api对吧

47:05.820 --> 47:12.820
ok微信点这个open setting啊还有这个getgetsetting啊然后还有这个收获地址啊

47:12.820 --> 47:16.820
所以我们这几个实际上就是什么呢实际上就是查看各种各样的信息

47:17.820 --> 47:22.820
对不对你收获地址如何查看啊你的授权信息如何这个查看

47:22.820 --> 47:28.820
实际上更重要的是什么呢更重要的是带着大家啊去熟悉这个官方这个文档啊

47:28.820 --> 47:31.820
如何去查询这个api文档

47:32.820 --> 47:37.820
好下来的话大家可以把这个例子自己写一写

47:37.820 --> 47:40.820
ok好这节课就到这里啊再见

