WEBVTT

00:00.000 --> 00:07.040
这节课的话 咱们来看一下 关于这个wxss的这个编译 啊 以及它这个适配 它具体是

00:07.760 --> 00:10.080
如何做的 打对应的是哪段代码啊

00:10.880 --> 00:15.200
好 我们这边的话 我们前面讲过微信小程序的话 它的本质是一个什么

00:15.760 --> 00:22.080
本质的话是一个哈布雷的应用 对不对啊哈布雷这个哈布雷的应用 它的本质又是什么

00:22.640 --> 00:27.120
它本质是不是就是利用到了这个原生组件里面的这个vivo view这个组件

00:27.840 --> 00:31.360
vivo view这个组件它是可以干嘛 是不是用来显示这个网页的

00:32.080 --> 00:35.920
对不对 它说哈布雷的应用的话 我们一般把它称之为套壳应用

00:36.400 --> 00:41.280
它外面的话套了一个这个原生组件的壳 内部的话使用的是这个vivo view

00:41.680 --> 00:45.520
啊 然后在vivo view里面的话 实际上就是什么 实际上就是html cssj

00:46.160 --> 00:47.600
进行一个开发 ok

00:48.480 --> 00:55.040
好 那明白了这一点之后 让接下来我们回头再来看啊 那也就是说最终的话 我们的微信小程序

00:55.520 --> 01:04.480
无论是wxml也好 还是这个wxss也好 它最终的话 它是离不开什么了 是不是离不开这个html和css的

01:05.360 --> 01:14.000
对不对 那前面的话这个有关这个wxml啊 我们前面的话已经看到了 它实际上的话 它使用了类似于这个vivo components

01:14.560 --> 01:21.920
啊 使用类似于这样子的这个技术 然后里面的话全是自定义这个组件啊 那这个wxss呢

01:22.480 --> 01:30.640
这个的话 我们知道它类似于什么 类似于css的协法啊 说类似的话可能不太准这个准确 基本上就是一模一样

01:31.280 --> 01:39.600
除了什么 除了就是新添加了这个单位rp差 对吧 其他的话 基本上css里面的这个语法啊 也都可以使用啊

01:40.800 --> 01:47.680
那这个wxss注意一点 它实际上它并不是可以直接在这个vivo view成进行这个渲染的

01:48.240 --> 01:55.440
啊 原因很简单 微博view这一层的话 它直接能够执行的是这些东西 对不对 这些东西它才能够进行渲染

01:55.920 --> 02:04.240
那你这个wxss 我不能直接的进行个渲染 那怎么办呢 啊 这边呢 实际上它会经过一层这个编译

02:04.800 --> 02:09.520
有一个编译的过程 okay 好来 这边呢 带着大家一起来看一下

02:10.640 --> 02:16.480
好 首先的话 在编译编译的这个工具里面 有一个叫做w csc的这个编译器

02:17.040 --> 02:24.800
啊 这个编译器的话 它是位于这个 你安装了那个微信开发者工具之后 你可以在微信开发者工具里面 你是可以找到的

02:25.200 --> 02:29.760
啊 我们怎么找来 这边给大家演示一下 首先的话 你在这边

02:31.360 --> 02:35.760
嗯 这边的话 你把这调成这个top 然后接下来的话 这边呢 输入help

02:37.440 --> 02:45.120
输入help 它是一个函数啊 而且你输入help之后 你可以看到这边的话 就列出了很多的帮助函数

02:45.600 --> 02:50.880
对 比较的previewupload很多 好 然后其中的话 这边第八个

02:52.000 --> 02:55.040
open winter 啊 然后我们这边执行它

02:59.660 --> 03:05.820
啊 这里的话open winter 可以看到这边呢 它是个函数 对吧 好 然后将我们这边我们来执行它

03:06.940 --> 03:13.580
走 好 执行完毕之后 它这边会打开一个目录 打开一个目录之后 然后接下来我们来看一下

03:13.900 --> 03:20.380
你看这边实际上就是这个基础库的包 大家看到没有 就我们这边不是之前的话 可以选择那个基础库吗

03:21.180 --> 03:29.820
这边这个 我看在这里 这里可以选择这个基础库 对吧 我选择了几个基础库 它这边的话 实际上就会下载到这里

03:30.540 --> 03:35.980
看到没有 这个就是之前选择过的这个基础库啊 好 然后接下来往下面走

03:36.780 --> 03:41.740
往下面走 这边会有两个可执行文件 看到没有 一个是wcc

03:42.300 --> 03:49.580
一个是wcsc 啊 这个的话是编译那个wxmail的 我看一下 我记得是这个

03:50.860 --> 03:57.900
啊 对了 对了啊 wcc 它是编译这个wxmail的 然后这个wcsc

03:58.220 --> 04:04.620
它就是编译我们的这个wxss的 就它编译那个就是样式文件的

04:04.940 --> 04:08.860
这个的话是编译那个结构文件的 ok 好我们把这个复制一份

04:09.820 --> 04:16.940
我们把它复制一份 复制一份之后我把它放到啊 放到这个这个是我们的项目 我这边有个新项目

04:17.900 --> 04:24.220
就干净的新项目啊 里面啥都没有 好我把它放到这里 放到pages下面的index

04:24.700 --> 04:26.220
我就把它放到这个页面里面

04:27.260 --> 04:33.660
ok 把它放到这里 放到这里之后 然后接下来我做什么事情呢 接下来的话我就要用这个

04:34.060 --> 04:42.620
这个文件去编译我们的wxss 就编译我们的样式文件 好 然后接下来我这边我来到中端

04:44.300 --> 04:48.700
来到中端 然后接下来我们这边cd啊 先切换到这个目录

04:49.500 --> 04:50.940
把这个目录直接拖进来

04:53.380 --> 04:58.100
好 拖进来过来 过来之后 然后接下来我们这边这个index index下面

04:58.900 --> 05:02.420
是不是就有这些文件 对不对啊 你这边可以ls看一下

05:02.980 --> 05:07.220
就有这些文件 好 有这些文件之后 然后将我这边当前目录下面的

05:08.180 --> 05:14.900
wcsc 就是这个可执行文件 好 然后接下来我要去编译啊 你这边就执行这个命令就可以了

05:15.540 --> 05:18.100
啊 这边 你跟着这个执行就可以了

05:18.900 --> 05:21.380
这边 这边的话是干js

05:22.420 --> 05:25.700
然后index.wxss

05:26.500 --> 05:29.060
编译 是不编译它 对不对 把它编译成什么

05:30.020 --> 05:37.540
啊 取个名字 它是编译成js 那在这个js你给它取个名字 我们就叫做wxss.js

05:38.100 --> 05:38.340
走

05:40.340 --> 05:46.260
好 稍等片刻啊 这边编译完成了啊 编译完成了之后 然后接下来我们这边来看一下

05:47.540 --> 05:52.660
啊 把这个先关掉吧 我们来看一下你可以看到现在的话 这边是不是多了一个js文件

05:53.220 --> 05:56.020
对吧 js文件 然后接下来我们这边 我们来看一下

05:56.980 --> 06:01.460
你看 这里的话就是最终编译出来的这个js

06:02.340 --> 06:06.420
ok 最终编出来的js 我们这边这样 我们写点东西 好吧

06:07.140 --> 06:09.620
我们这边的话 比如说我们给它一个class

06:10.820 --> 06:12.580
class 等于一个test

06:13.220 --> 06:14.980
好 然后接下来在这边点

06:15.860 --> 06:20.820
test 我们稍微写一点啊 比如说我们这边给它一个颜色 颜色是一个

06:21.380 --> 06:23.540
read 然后给它一个border

06:24.180 --> 06:24.900
border1

06:25.780 --> 06:27.780
rpx solid

06:28.340 --> 06:29.300
然后read

06:29.860 --> 06:31.700
好 然后接下来给一个piling

06:32.100 --> 06:33.380
piling 比如说15

06:33.940 --> 06:34.500
rpx

06:35.460 --> 06:37.780
好 然后给个比如说border radius

06:39.060 --> 06:39.860
给个15

06:40.260 --> 06:40.740
rpx

06:41.460 --> 06:42.900
好 然后display

06:43.780 --> 06:44.900
inline block

06:45.940 --> 06:47.060
ok 好 我们保存一下

06:47.700 --> 06:50.740
保存到现在这边出来了 对吧 这个就是我们之前讲的

06:50.820 --> 06:52.820
那个自定义组件的时候写的这些样式

06:53.140 --> 06:55.300
好 然后接下来我们这边再重新编译一下

06:56.100 --> 06:57.140
再重新编译一次

06:58.420 --> 07:02.260
ok 编译了之后 然后接下来我们来看一下这个js文件

07:02.580 --> 07:03.540
这边这个js

07:03.940 --> 07:06.420
这js的话代码倒不是太多

07:06.820 --> 07:09.140
阅读起来的话 实际上也比较容易

07:09.460 --> 07:11.140
我这边我看一下能不能格式画一下

07:12.580 --> 07:13.620
这边格式画

07:14.660 --> 07:16.740
可以了 这边把它格式画一下

07:17.140 --> 07:19.380
这个这个的话 实际上你可以去读一下

07:19.940 --> 07:22.420
整体来讲的话 这一段代码实际上不难

07:22.980 --> 07:24.340
ok 然后整个这一块

07:25.140 --> 07:28.500
然后这里的话 最后这边实际上就是我们写的样式

07:29.060 --> 07:32.500
看了没有 这边有个这个set css to hit

07:32.500 --> 07:33.540
我们把这折一下

07:35.060 --> 07:35.460
这里

07:36.580 --> 07:40.580
看了没有 这边是这个方形 这边set css to hit

07:41.140 --> 07:42.660
然后接下来这边

07:43.860 --> 07:45.380
整个我看一下

07:46.100 --> 07:47.460
这边这边是一个函数

07:47.940 --> 07:50.260
这个是check device wise

07:51.220 --> 07:54.580
device wise 就是确认什么 是不是设备的这个宽度

07:54.980 --> 07:57.220
你看这些名字时 你根据这些名字

07:57.220 --> 07:59.220
你都知道它这个函数是在做什么的

07:59.220 --> 08:01.620
你把它展开 展开你看它这边是不是

08:01.620 --> 08:03.300
window.screen.wise

08:03.300 --> 08:04.660
是否获取你的宽度

08:05.380 --> 08:07.060
然后默认是什么 默认是不是375

08:07.620 --> 08:09.220
对不对 然后获取这个dpr

08:09.700 --> 08:12.580
这边的话有些概念 你如果之前学过那个

08:13.060 --> 08:15.940
微博app的话 那你这些的话实际上是很熟悉的

08:16.420 --> 08:19.380
对不对 dpr这些概念很熟悉

08:20.660 --> 08:23.140
就是如果你没有学过的话 其实问题也不大

08:23.940 --> 08:27.060
问题也不大 你只需要知道它这个函数是在做什么就可以了

08:27.700 --> 08:30.260
明白吧 这边它很明显它就是在干嘛

08:30.260 --> 08:33.380
是不是这边就是在确认这个设备的这个宽度

08:33.940 --> 08:36.660
对不对 然后就在这边写好之后这边调用一下

08:37.780 --> 08:42.260
好 然后这边会有一个这个set css to hit

08:42.260 --> 08:43.300
我们在这边来看一下

08:44.500 --> 08:45.380
在这边来看一下

08:46.100 --> 08:50.420
整体来讲的话 这边这个代码可以就是拆成三个部分

08:51.060 --> 08:54.180
第一个部分是什么呢 第一个部分就是我们刚所说的设备信息

08:54.660 --> 08:56.500
就是这个check device wise

08:57.060 --> 08:58.980
就这个 这边给了一些注射

08:59.700 --> 09:03.380
这个的话 这一段代码实际上就是在确认你的设备信息

09:04.020 --> 09:06.420
好 人家第二部分就这里

09:06.980 --> 09:11.540
这里的话它主要是在干嘛呢 主要是在获取一套基本的设备信息

09:11.940 --> 09:15.380
包含比如说你设备的高度宽度物理像素

09:15.700 --> 09:18.660
那 css 像素比例 设备方向之类的

09:18.980 --> 09:20.500
实际上也是在获取这个信息

09:21.060 --> 09:23.060
这边你可以看这边这个代码

09:23.620 --> 09:27.300
ok 好 然后接下来这边 这边让你注意这里的话

09:27.300 --> 09:30.980
有两行代码 它是这个rp差转换的这个代码

09:31.300 --> 09:31.700
就这里

09:33.220 --> 09:33.700
就这里

09:34.260 --> 09:35.300
它的这个rp差

09:35.300 --> 09:39.060
rp差是不是我们在书写小程序的时候 我们的这个单位是不是就rp差

09:39.460 --> 09:42.020
那这个rp差最终需要被转换成什么

09:42.580 --> 09:45.060
最终是不是需要被转换成这个p差

09:45.860 --> 09:48.420
对不对 为什么 因为最终的话你还是就是什么

09:48.660 --> 09:50.740
还是就是 html css js

09:51.460 --> 09:56.660
对不对啊 所以你这边它无论你这个wxss 里面给你提供了哪些模法

09:56.820 --> 09:58.660
最终的话它是要转换回来的

09:58.900 --> 10:02.580
啊 所以这边的话rp差最终的话也会被转换成这个p差

10:02.900 --> 10:04.100
啊 这边呢就是这两句

10:04.820 --> 10:06.020
再进行一个转换

10:06.420 --> 10:12.260
好 最后最后的话一颗最后这段代码最后这段代码的话就是这个set css to

10:12.820 --> 10:13.700
这个head

10:13.860 --> 10:15.540
啊 你看名字就知道什么意思啊

10:15.860 --> 10:18.420
这把这个css放到这个head上面去啊

10:18.980 --> 10:21.060
对不对啊 然后接下来这边调用

10:21.540 --> 10:23.540
最终啊 上面是这个方法的实现

10:23.780 --> 10:28.100
然后接下来这边是调用 调用的话加里面 里面就是我们所写的这些

10:28.900 --> 10:30.020
啊 这边来看一下

10:30.660 --> 10:34.180
这边这边在调用这个方法的时候 你要里面的话就是刚才我们

10:35.220 --> 10:38.900
里面的话就是我们刚才所写的这些css代码

10:39.620 --> 10:42.580
看到没有啊 这边solid read padding

10:42.980 --> 10:46.980
啊 它这边都还做了一个编译 它这边做了一个什么是区间的

10:47.780 --> 10:50.020
对不对啊 border border的话我们是

10:50.260 --> 10:54.820
epx是solid的 它这边是做了一个这个区间这个这个区间啊

10:55.380 --> 10:57.780
好 总之的话这这边的话就是我们所写的样式

10:58.020 --> 11:01.700
那传入到set css to head里面啊

11:02.100 --> 11:05.060
那这边的话我们就知道了 最终我们在这里

11:05.700 --> 11:08.100
我们在这边所写的样式

11:08.340 --> 11:10.500
它实际上的话它有一个过程是什么呢

11:10.580 --> 11:11.460
它是编译

11:12.420 --> 11:15.140
最终的话会被编译成这个css文件

11:15.460 --> 11:18.260
然后接下来在css里面进行一个执行

11:18.900 --> 11:21.940
OK啊 这个呢就是关于这个编译结果啊

11:22.100 --> 11:24.340
有兴趣的同学下来的话可以自己再看一下

11:24.740 --> 11:27.300
整体来讲的话这个编译结果的话也不能啊

11:27.300 --> 11:29.460
包括这些名字的话你都是看得懂的啊

11:29.460 --> 11:30.340
比如这边你看这边

11:30.740 --> 11:32.180
transform rpx

11:32.660 --> 11:34.660
对不对 这边是rpx的这个转换

11:36.100 --> 11:38.500
OK啊 这就是关于这个

11:39.460 --> 11:42.340
微信小程序中wxs它的编译

11:42.660 --> 11:45.460
以及它的那个适配是对应的是哪个部分

11:45.860 --> 11:48.420
这个的话大家下来的话可以自己再看一看

11:48.980 --> 11:52.100
好吧 OK好 这节课就到这里啊 再见

