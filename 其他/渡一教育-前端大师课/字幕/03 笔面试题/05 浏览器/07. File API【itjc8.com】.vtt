WEBVTT

00:01.260 --> 00:03.560
大家好 我是谢老师

00:03.820 --> 00:06.120
这一刻的话 我们一起来看一下这个

00:06.900 --> 00:07.920
File API

00:08.420 --> 00:11.760
File的话 翻译成中文就是文件的意思

00:12.020 --> 00:14.820
说这个File API的话 顾名思义就是干嘛呢

00:15.080 --> 00:16.880
顾名思义就是提供一些

00:17.140 --> 00:18.160
和文件

00:18.420 --> 00:20.460
操作相关的一些这个接口

00:20.720 --> 00:22.500
一些属性啊 一些方法呀

00:23.020 --> 00:23.520
好吧

00:23.780 --> 00:25.320
好 那我们这边让我们一起来看一下

00:25.840 --> 00:28.900
那首先的话 还是来 首先这个File API

00:29.160 --> 00:30.960
做一个简单的这个介绍

00:31.740 --> 00:32.540
我们来看一下

00:33.060 --> 00:36.900
首先我们知道HTML的话 有这个Input表单空间

00:37.400 --> 00:40.480
对吧 这个经常用的Input表单空间

00:40.980 --> 00:43.040
然后这个Type的话 你可以把它设置为什么呢

00:43.300 --> 00:45.080
你可以把它设置为File

00:46.100 --> 00:46.880
File就是什么

00:47.900 --> 00:50.460
File的话 是不是就是一个上传文件

00:51.220 --> 00:52.760
对不对 比如说我们这边

00:53.020 --> 00:53.780
我们把它复制一下

00:54.300 --> 00:56.340
复制了之后 我这边打开了

00:56.860 --> 01:00.180
我这边的话 就直接放了一个这个Input

01:00.380 --> 01:02.180
然后Type是File 保存一下

01:02.940 --> 01:04.740
保存了之后 然后接下来的话

01:05.000 --> 01:07.040
显示出来的 是不是就是这个样子

01:07.820 --> 01:10.880
对不对 我可以在这边的话 我可以选择一个文件

01:11.140 --> 01:12.680
比方我找一张这个图片

01:14.220 --> 01:15.500
找一张图片 打开

01:16.520 --> 01:17.020
可了没有

01:17.280 --> 01:18.560
那现在的话 这个

01:18.820 --> 01:21.120
这边的话 你就已经选择了一个文件了

01:21.380 --> 01:23.680
是一个JPG的这个图片

01:23.940 --> 01:25.740
但是这种显示方式

01:26.000 --> 01:27.020
非常的不友好

01:27.780 --> 01:29.060
对不对 非常的不友好

01:29.260 --> 01:31.320
用户选择了之后 用户都看不到

01:31.580 --> 01:33.360
就自己选择的这个图片

01:33.620 --> 01:34.380
是什么

01:35.140 --> 01:37.300
那在以前 以前是怎么做的呢

01:37.540 --> 01:39.980
以前的话 由于这个客户端

01:40.220 --> 01:42.060
它不能够读取本地文件

01:42.580 --> 01:44.620
那以前是怎么办的 以前的话选择了之后

01:44.860 --> 01:46.160
然后接下来就把这张图片

01:46.420 --> 01:47.960
上传到服务器

01:48.720 --> 01:51.020
上传到服务器之后 服务器存出好了之后

01:51.280 --> 01:53.840
服务器再把这张图片给你返还回来

01:54.360 --> 01:56.140
返还回来之后 接下来你在本地

01:56.400 --> 01:58.700
你就可以把服务器给你返回的这个图片

01:59.060 --> 01:59.820
显示出来

02:00.340 --> 02:00.860
可能没有

02:01.100 --> 02:02.380
那以前没办法

02:02.640 --> 02:03.660
以前只能这么做

02:04.180 --> 02:04.940
只能这么做

02:05.460 --> 02:07.000
所以以前的话也会有一个问题

02:07.260 --> 02:08.780
就会导致你的这个

02:09.040 --> 02:09.820
服务器

02:10.080 --> 02:12.380
有大量这个荣誉的这个图片

02:13.140 --> 02:17.240
对不对 比如这个用户比如选这个 选这个图片 然后觉得不太好

02:17.500 --> 02:19.540
接下来的话 我又换一张 对吧 我又点

02:20.060 --> 02:20.820
我又换一张

02:21.080 --> 02:23.640
换一张我觉得这张也不太好 将我又换一张

02:23.900 --> 02:24.920
那完全有可能吧

02:25.420 --> 02:25.940
对不对

02:26.200 --> 02:28.760
那最后的话 比如说用户选选选选选了五六次

02:29.260 --> 02:31.820
然后接下来只有最后一次是符合他的要求的

02:32.080 --> 02:33.620
比如说经常我们就是在

02:33.880 --> 02:34.900
上传投降的时候

02:35.160 --> 02:35.920
就会遇到

02:36.180 --> 02:40.020
对不对 只有最后一张是符合要求的 但是你现在的话服务器就把

02:40.280 --> 02:42.060
你前面选的那五六张

02:42.320 --> 02:43.340
都上传到服务器了

02:44.120 --> 02:44.620
对不对

02:44.880 --> 02:46.420
那以前的话也没办法

02:46.680 --> 02:47.700
只能这个样子

02:49.740 --> 02:52.300
这个是选择文件前是这个样子

02:52.560 --> 02:54.620
选择文件后是这个样子

02:54.880 --> 02:55.640
我们可以看到

02:55.860 --> 02:56.720
这种做法

02:56.980 --> 02:59.420
用户体验非常的差

03:00.200 --> 03:03.020
对不对 我们无法在客户端对文件选取

03:03.280 --> 03:04.940
就是对用户选取的文件

03:05.200 --> 03:05.980
进行一个

03:06.240 --> 03:07.620
Validate 就是验证

03:08.380 --> 03:09.420
你在客户端没办法验证

03:09.680 --> 03:13.000
也没办法干嘛呢 也没办法读取文件的大小

03:13.260 --> 03:14.020
然后无法

03:14.280 --> 03:15.560
判断文件的类型

03:15.820 --> 03:16.580
无法预览

03:16.840 --> 03:18.880
就这些的话你都做不到

03:19.400 --> 03:20.160
都做不到

03:20.420 --> 03:21.960
无论你是要验证也好

03:22.220 --> 03:24.000
还是要读取文件大小也好

03:24.200 --> 03:26.000
还是要判断文件类型

03:26.260 --> 03:28.040
还有一个最重要的预览

03:28.300 --> 03:28.820
都做不到

03:29.080 --> 03:32.400
都只能干嘛呢 都只能没办法先上传到服务器端

03:32.660 --> 03:35.220
服务器端那边来判断文件的大小

03:35.480 --> 03:38.540
服务器端那边来判断文件的类型

03:38.800 --> 03:41.100
判断了之后把结果返还给你

03:41.360 --> 03:42.380
你如果要预览对吧

03:42.640 --> 03:44.180
好先上传到服务器端

03:44.440 --> 03:47.500
服务器端上传完毕之后再把那个图片链接

03:47.760 --> 03:49.560
给你 让你才能预览

03:50.320 --> 03:50.820
明白吧

03:51.540 --> 03:54.100
然后如果是多文件上传

03:54.860 --> 03:57.700
那这个javascript的更是回天乏力

03:57.940 --> 03:59.380
你看我这边加一个这个

03:59.980 --> 04:00.760
multiple

04:01.520 --> 04:03.580
multiple 那这个的话是不是可以

04:03.840 --> 04:04.840
多文件上传

04:05.100 --> 04:07.140
对了 比如说我们这边回到我们这边代码

04:07.400 --> 04:08.180
我们加上这么一个

04:08.940 --> 04:09.820
multiple

04:10.480 --> 04:11.000
保存

04:11.500 --> 04:13.560
保存了之后 然后接下来回到我们这边

04:13.820 --> 04:15.600
我们这边的话我们来选择多个文件

04:15.860 --> 04:17.660
比较这边选择三张

04:17.900 --> 04:18.420
打开

04:18.940 --> 04:20.720
你看这边那就显示三个文件

04:21.200 --> 04:22.060
其他啥都没有了

04:22.320 --> 04:23.840
连文件名都没有了

04:24.100 --> 04:25.900
刚才好歹还有一个文件名

04:26.160 --> 04:27.680
现在的话连文件名都没有了

04:27.940 --> 04:29.480
就显示三个文件

04:30.000 --> 04:30.500
可能

04:30.760 --> 04:32.540
所以以前的话这种体验

04:32.800 --> 04:33.820
非常非常差

04:34.860 --> 04:36.900
但是html5的话给我们提供了什么呢

04:37.160 --> 04:37.920
给我们提供了

04:38.180 --> 04:38.940
file api

04:39.720 --> 04:41.000
有了这个东西之后

04:41.260 --> 04:42.540
一切就不同了

04:43.040 --> 04:45.040
这个file api他就是干嘛呢

04:45.300 --> 04:47.900
他允许我们使用这个javascript

04:48.160 --> 04:49.960
来读取本地文件

04:50.780 --> 04:51.700
可以读取了

04:51.960 --> 04:53.500
但不能直接访问

04:53.760 --> 04:55.540
他依赖于这个用户的行为

04:56.820 --> 04:58.620
然后比如用户

04:58.880 --> 05:01.180
在这个type等于file的空间上

05:01.440 --> 05:03.420
选择了某个文件之后

05:03.680 --> 05:05.020
那接下来的话我们就可以干嘛了

05:05.280 --> 05:06.820
我们就可以使用这个file api

05:07.320 --> 05:08.340
来访问

05:08.600 --> 05:10.900
这个文件的一系列信息

05:11.660 --> 05:12.700
一系列信息

05:13.720 --> 05:14.740
那我们这边首先

05:15.000 --> 05:16.280
这边我们来看几个概念

05:16.540 --> 05:18.080
首先的话这边有一个file

05:18.800 --> 05:20.340
file的话它是一个实力对象

05:20.600 --> 05:22.640
代表的是单个文件

05:23.160 --> 05:24.440
然后这个file list

05:24.940 --> 05:27.240
file list的话它是什么呢它就是

05:27.500 --> 05:28.540
一个类数组

05:29.300 --> 05:30.580
一个类数组对象

05:30.840 --> 05:33.140
里面存储的就是一个一个的file

05:33.400 --> 05:35.440
这个相当于file list里面

05:35.700 --> 05:37.480
存储的就是一个一个的file

05:37.740 --> 05:39.800
好大家还有一个file reader

05:40.060 --> 05:41.580
这是拿来读文件的

05:42.100 --> 05:43.380
好大家这个blobo

05:43.640 --> 05:46.440
blobo的话它是这个文件对象的这个二镜子

05:46.700 --> 05:47.480
原始数据

05:47.940 --> 05:49.480
这些的话你先有个印象

05:49.740 --> 05:50.760
先有个印象

05:51.020 --> 05:52.800
一会我们看了实际例子你就知道了

05:53.320 --> 05:53.820
好吧

05:54.080 --> 05:55.620
好那我们一个一个来看

05:55.880 --> 05:57.920
你看这边先看file对象

05:58.180 --> 05:58.960
然后file list

05:59.220 --> 05:59.980
然后file reader

06:00.240 --> 06:01.260
我们一个一个来看

06:01.520 --> 06:03.040
那首先的话是file

06:04.080 --> 06:06.380
file对象的话它就代表是什么呢

06:06.640 --> 06:07.660
代表是一个文件

06:08.160 --> 06:09.960
用来读写文件的信息

06:10.220 --> 06:12.000
继承了这个blobo对象

06:12.260 --> 06:14.560
或者说它是一个特殊的blobo对象

06:14.820 --> 06:16.360
blobo就是什么blobo就是二镜子

06:16.940 --> 06:19.140
我们知道我们的计算机只能处理二镜子

06:19.640 --> 06:23.740
对吧说最终你文件也好还是什么也好最终都是二镜子

06:24.240 --> 06:26.300
所以这个文件它就继承了这个对象

06:28.080 --> 06:31.160
好最常见的使用这个file

06:31.420 --> 06:32.940
它的这个场合就是什么呢

06:33.200 --> 06:35.000
最常见的这个场合就是

06:35.260 --> 06:36.280
上传

06:36.800 --> 06:37.560
上传的时候

06:38.060 --> 06:39.100
那么这边我们来看一下

06:39.860 --> 06:41.140
我把这个例子写一下

06:41.400 --> 06:42.680
multiple就不要了

06:43.560 --> 06:46.460
我们这边那就是一个简单的一个上传空间

06:46.720 --> 06:49.040
好然后接下来的话在这边script

06:50.560 --> 06:51.400
这边给个id嘛

06:51.640 --> 06:52.620
id等于file

06:53.640 --> 06:55.960
好然后现在这边挖一个这个file

06:56.200 --> 07:00.040
等于一个document.getElementById

07:01.060 --> 07:02.080
好这边的话file

07:03.880 --> 07:06.960
好这里的话是不是就拿到这个空间了

07:07.220 --> 07:10.120
对不对拿到这个空间之后我给它绑定一个什么呢

07:10.320 --> 07:13.140
我给它绑定一个unchanged方法

07:14.680 --> 07:16.740
看到没有绑定一个unchanged方法

07:17.000 --> 07:19.280
也就是它发生改变的时候会触发这个方法

07:19.540 --> 07:23.640
触发这个方法之后然后接下来的话这边它会有一个event对象

07:24.400 --> 07:25.440
4件对象

07:25.700 --> 07:27.740
4件对象上面就有一个什么呢

07:28.000 --> 07:32.340
event.target.files

07:33.100 --> 07:35.680
这个是什么这个就是一个file list

07:36.180 --> 07:37.720
就是我们这边回到我们这边

07:37.980 --> 07:38.740
file list

07:39.200 --> 07:41.760
什么是不是它是一个类数组对象

07:42.020 --> 07:44.200
对不对这个类数组对象里面装的是什么

07:44.460 --> 07:46.120
装的是一个一个的file

07:46.620 --> 07:47.400
好我们这边的话

07:47.660 --> 07:49.440
其他的先不做我们先干嘛呢

07:49.700 --> 07:52.000
先把它打印出来我们先看一下

07:53.800 --> 07:54.560
保存

07:55.080 --> 07:57.120
保存了之后然后来到我们这边

07:58.920 --> 08:02.000
然后打开不要打开这张share打打开

08:02.500 --> 08:03.020
看到没有

08:03.780 --> 08:05.320
这边是不是打印出file list

08:06.080 --> 08:08.400
看到没有然后由于我们现在只有一个文件

08:08.500 --> 08:09.940
所以这边那就是只有一个0

08:10.200 --> 08:11.460
然后里面是不是file

08:11.720 --> 08:12.500
你把它展开

08:13.000 --> 08:17.100
看到没有这个filefile它是个对象对象里面是包含了这个文件

08:17.620 --> 08:19.140
一系列这些信息

08:19.400 --> 08:20.680
对不对它的名字

08:20.940 --> 08:21.700
它的size

08:21.960 --> 08:22.740
它的type

08:23.500 --> 08:25.040
看到没有这些信息是不是就包含了

08:25.800 --> 08:28.360
对不对那你如果是什么的如果是

08:28.620 --> 08:30.920
多张图片比如说我们这边的话

08:31.180 --> 08:32.720
把这个multiple加上

08:33.240 --> 08:35.540
multiple加上之后然后接下这边来呗

08:36.820 --> 08:38.340
直接选择3张

08:38.620 --> 08:39.120
走

08:39.880 --> 08:40.400
看到没有

08:40.660 --> 08:41.420
这边0

08:41.680 --> 08:42.180
1

08:42.440 --> 08:42.960
2

08:43.480 --> 08:44.240
三个文件

08:44.500 --> 08:46.540
它是一个内数组对象注意

08:46.800 --> 08:49.620
file list是一个内数组对象它不是数组

08:49.880 --> 08:52.180
这个内数组对象大家之前

08:52.440 --> 08:52.940
学过的

08:53.200 --> 08:54.480
那个arguments

08:55.000 --> 08:56.780
arguments是不是就是一个内数组对象

08:57.560 --> 08:58.060
对不对

08:58.320 --> 09:00.380
然后接下来这边每一个

09:01.140 --> 09:02.420
每一个是一个file

09:02.680 --> 09:06.000
对象file对象里面就包含了当前这个文件的一些

09:06.260 --> 09:08.040
具体的这个信息啊

09:08.600 --> 09:09.260
看到没有啊

09:09.520 --> 09:14.760
说你这边的话一下子就这两个东西你是不是就都明白了一个是file一个是file list

09:15.260 --> 09:16.280
对不对file

09:16.540 --> 09:17.820
代表单个文件

09:18.080 --> 09:20.380
提供了诸如namefilesize

09:20.640 --> 09:22.680
然后接下来的话这边这个type

09:22.940 --> 09:23.460
这个

09:24.220 --> 09:25.500
mimetype对的

09:25.760 --> 09:26.780
就是它的这个

09:27.040 --> 09:27.560
类型

09:27.820 --> 09:28.460
反正一些

09:28.720 --> 09:31.140
只读文件的信息注意到它是只读的哦

09:31.640 --> 09:32.680
你能不能去改一下呀

09:33.440 --> 09:36.760
你能不能去改它一个文件本来比如说它的这个大小就是这么大

09:36.960 --> 09:39.760
比如就是1kb你强行改成3kb行不行

09:40.040 --> 09:40.800
不肯定不行

09:41.060 --> 09:43.360
对不对所以它都是一些只读的属性

09:43.880 --> 09:45.920
然后接下来第二个file list

09:46.180 --> 09:48.240
一个内数组的file对象集合

09:48.500 --> 09:50.280
你看现在这两个你是不是就看得懂了

09:51.040 --> 09:51.560
对不对

09:52.080 --> 09:52.580
ok

09:53.360 --> 09:54.640
这是关于这个file

09:55.400 --> 09:59.240
浏览器的话原生提供了一个这个file的构造函数

09:59.760 --> 10:01.800
就我们的这个file实力对象啊

10:02.060 --> 10:05.900
你除了可以使用这个比如说我们这边刚才是使用什么

10:06.100 --> 10:07.760
是不是那个上传文件的空间

10:08.020 --> 10:09.700
监听它的这个清几事件

10:09.960 --> 10:11.740
是不获取到的这个file

10:12.000 --> 10:14.040
除了这个以外的话你可以自己来

10:14.300 --> 10:15.980
生存file实力对象

10:16.360 --> 10:17.880
怎么生存的就是这边

10:18.140 --> 10:19.420
new一个file

10:19.680 --> 10:20.960
new一个file

10:21.220 --> 10:21.980
new一个file人

10:22.240 --> 10:24.280
然后接下来它这边接收三个参数

10:24.540 --> 10:25.320
一个是ore

10:25.820 --> 10:26.840
它是一个数组

10:27.100 --> 10:28.640
表示文件的内容

10:28.900 --> 10:30.420
一个是lamb

10:30.680 --> 10:32.720
你这个文件的名字

10:33.080 --> 10:34.460
然后一个是options

10:34.720 --> 10:36.000
options是一个配置对象

10:36.260 --> 10:37.740
里面可以配置这两项

10:38.000 --> 10:39.060
一个是它的type

10:39.320 --> 10:41.640
一个是它的这个nuster modified

10:41.900 --> 10:43.680
就是上次修改的时间

10:43.940 --> 10:46.500
你看我们刚才那个file打开是不是就是这些东西

10:46.760 --> 10:47.260
对不对

10:47.520 --> 10:48.380
有lamb

10:48.640 --> 10:49.680
有size

10:49.940 --> 10:50.840
有type

10:51.100 --> 10:52.900
有这个nuster modified

10:53.660 --> 10:54.680
是不是有这些信息

10:54.940 --> 10:55.460
对不对

10:55.720 --> 10:56.480
那我这边就可以干嘛了

10:56.740 --> 10:57.760
我这边就可以自己

10:59.040 --> 11:00.320
自己来创建一个

11:00.800 --> 11:01.800
比如说我们这边

11:02.060 --> 11:02.840
把这个注射掉

11:05.680 --> 11:07.680
看到没有我们自己创建了一个

11:07.940 --> 11:08.960
file实力对象

11:09.220 --> 11:11.820
那这个file实力对象的话它下面就有这些属性

11:12.080 --> 11:12.840
就在这边

11:13.360 --> 11:14.280
有这些属性

11:14.520 --> 11:15.920
这边你可以打印出来看一下

11:18.890 --> 11:19.410
好这边

11:20.170 --> 11:22.210
看到没有这边console.logfile

11:22.470 --> 11:23.630
last modified

11:23.890 --> 11:25.550
然后加这边fileLamb

11:25.810 --> 11:26.830
然后fileSize

11:27.090 --> 11:27.850
fileType

11:28.370 --> 11:28.890
你看一下

11:30.170 --> 11:31.190
说这边是不是有

11:31.950 --> 11:32.450
对不对

11:32.730 --> 11:33.230
这边就有

11:34.210 --> 11:37.530
当我们一般的话不会就是自己来new一个file

11:37.790 --> 11:38.550
一般不会

11:38.810 --> 11:39.570
但有些

11:39.830 --> 11:41.110
就是特殊场景下会

11:41.370 --> 11:42.650
这个的话后面就是我们

11:42.910 --> 11:44.450
就做实战的时候

11:44.710 --> 11:45.730
遇到了再给大家说

11:45.990 --> 11:49.050
大家先了解就是我这边可以new一个file对象

11:49.310 --> 11:51.090
先了解这个知识点就可以了

11:51.350 --> 11:53.410
那我们今天这些口网主要还是

11:53.670 --> 11:54.170
看什么呢

11:54.430 --> 11:55.450
主要还是看

11:56.470 --> 11:58.530
就是通过上传控键

11:59.030 --> 12:00.570
去上传一个文件的时候

12:00.830 --> 12:02.370
拿到的file对象

12:03.090 --> 12:03.590
好吧

12:04.110 --> 12:04.610
好

12:04.870 --> 12:05.650
这是这个

12:06.150 --> 12:06.930
好下一个

12:07.190 --> 12:08.730
下一个的话是fileList

12:08.990 --> 12:10.510
fileList刚才是不是已经看了

12:11.030 --> 12:11.290
对不对

12:11.550 --> 12:13.850
它是一个类似输入的对象

12:14.110 --> 12:16.150
每一个成员都是什么呢

12:16.410 --> 12:18.190
都是file实例

12:18.710 --> 12:20.230
就是一个一个file对象

12:20.750 --> 12:22.030
这个刚才也已经看了

12:22.290 --> 12:23.070
这就不说了

12:23.830 --> 12:26.130
好然后fileList实例属性

12:26.390 --> 12:27.930
它的属性有什么有认识

12:28.190 --> 12:29.210
认识我们刚才是不是看到了的

12:29.970 --> 12:30.470
对不对

12:30.730 --> 12:31.250
它有认识

12:31.470 --> 12:33.510
然后它方法方法的话是item

12:34.270 --> 12:35.750
item的话就是

12:36.010 --> 12:37.350
获取到某一个文件

12:37.610 --> 12:39.390
但是因为它是一个类数组

12:39.910 --> 12:41.450
所以可以直接通过这种方式

12:41.710 --> 12:42.470
来获取

12:42.730 --> 12:44.250
所以这个item一般也不怎么用

12:44.510 --> 12:46.310
什么意思就是我这边的话

12:46.570 --> 12:48.110
比方我这边multiple

12:48.370 --> 12:49.370
然后

12:49.630 --> 12:50.070
这里

12:50.330 --> 12:51.670
这里的话我要获取第一个文件

12:51.930 --> 12:53.990
第一个文件我这边是不是直接加个0就可以了

12:54.750 --> 12:56.290
对不对因为它是一个类数组吗

12:57.050 --> 12:58.210
它是个类数组对象

12:58.470 --> 12:59.370
让我这边的话

13:00.370 --> 13:01.870
我选择三个

13:03.410 --> 13:05.730
你看这边是不是直接就是获取到第一个

13:06.230 --> 13:07.510
对不对我可以直接

13:08.030 --> 13:09.570
直接就这样子获取

13:09.830 --> 13:11.870
直接通过这种类数组的形式来获取

13:12.130 --> 13:13.910
所以这个的话一般也用了很少

13:14.670 --> 13:16.730
这是关于file和fileList

13:17.490 --> 13:19.030
好然后接下来下一个

13:19.790 --> 13:22.370
下一个的话是fileRator

13:23.130 --> 13:23.910
fileRator

13:24.170 --> 13:25.950
这个就是用来干嘛的呢

13:26.210 --> 13:29.350
这个的话就是用来读取file对象的类

13:29.830 --> 13:30.870
或者blobo

13:31.110 --> 13:33.670
因为我们说了这个file它是不是就继承于这个blobo

13:34.190 --> 13:36.750
对不对所以它可以读取file和blobo

13:37.010 --> 13:39.310
用来读取文件的类容

13:40.070 --> 13:40.830
来读取

13:41.090 --> 13:41.870
那我们这边我们来看一下

13:42.130 --> 13:43.910
首先的话你这边可以new一个

13:44.170 --> 13:45.190
fileRator

13:45.710 --> 13:47.950
然后接下来的话它有这么一些属性

13:48.210 --> 13:51.330
我不打算IZIZNAM没有太大的意义

13:51.590 --> 13:52.870
你这边的话大字low也

13:53.130 --> 13:55.170
有我们用到一个我们回来看一个

13:55.430 --> 13:56.710
有这些属性

13:56.970 --> 13:58.250
然后接下来有什么呢

13:58.470 --> 13:59.990
有这些方法

14:01.010 --> 14:02.030
有这么一些方法

14:02.290 --> 14:02.710
ok

14:02.970 --> 14:04.350
好然后接下来我们干嘛呢

14:04.610 --> 14:06.130
我们直接来写个例子

14:06.650 --> 14:07.930
写个例子你来看

14:08.450 --> 14:09.470
那我这边的话

14:11.770 --> 14:12.790
我这边怎么做呢

14:13.050 --> 14:14.590
我这边的话先新建一个吧

14:15.610 --> 14:16.630
来到我这边

14:16.890 --> 14:18.430
我这边先新建一个

14:18.690 --> 14:21.750
新建一个比较test.txt

14:22.270 --> 14:23.550
创建一个文本文件

14:23.810 --> 14:24.570
比如说这边的话

14:24.830 --> 14:28.150
this is a test

14:28.730 --> 14:29.530
是不是写了一句话

14:30.050 --> 14:30.550
对不对

14:30.810 --> 14:32.090
好然后接下来在这里

14:32.850 --> 14:34.390
这里的话我们这边

14:34.650 --> 14:36.190
首先还是fileUnchained

14:36.450 --> 14:36.950
对吧

14:37.210 --> 14:38.490
然后接下来的话下一步

14:38.750 --> 14:40.530
下一步的话我们首先保存一下

14:41.310 --> 14:42.850
这个multiple就不要了

14:43.870 --> 14:45.910
好这边保存一下这个file

14:47.190 --> 14:48.470
这边也叫file不太好

14:48.730 --> 14:50.270
是吧我们这边取个啥名呢

14:51.290 --> 14:52.830
比如说叫做这个

14:53.330 --> 14:54.610
fileHandle

14:56.410 --> 14:57.170
fileHandle

14:57.370 --> 14:59.430
等于一个什么呢等于一个event

14:59.690 --> 15:01.210
点这个target

15:02.490 --> 15:04.290
点这个files

15:04.550 --> 15:05.570
然后0

15:05.830 --> 15:07.110
对吧取到第一个

15:07.370 --> 15:08.390
取到这个文件

15:08.650 --> 15:09.930
取到这个文件之后

15:10.190 --> 15:11.450
我们来看一下取到没有

15:12.230 --> 15:13.250
那肯定是取到了

15:13.510 --> 15:14.530
刚才是不是已经看过了

15:15.290 --> 15:16.070
对不对

15:16.570 --> 15:17.350
肯定是取到了

15:17.610 --> 15:19.130
好那我们这边我们再来看一眼吧

15:19.390 --> 15:20.410
选择文件

15:21.950 --> 15:23.230
然后桌面

15:24.770 --> 15:25.290
然后这个

15:26.050 --> 15:26.570
打开

15:27.170 --> 15:28.190
肯定是拿到了的

15:28.450 --> 15:28.950
对不对

15:29.210 --> 15:31.770
好拿到了之后然后接下来的话下一步

15:32.290 --> 15:34.330
下一步干嘛呢下一步我就要开始读取了

15:36.130 --> 15:37.150
下一步

15:39.750 --> 15:43.070
下一步我就要开始

15:43.330 --> 15:44.610
读取文件了

15:44.870 --> 15:48.190
怎么读取呢先创建一个fileRator

15:48.710 --> 15:50.230
这边挖一个

15:50.490 --> 15:51.010
Rator

15:52.030 --> 15:53.570
等于一个什么呢等于一个new

15:54.330 --> 15:55.110
fileRator

15:56.390 --> 15:56.890
看到没有

15:57.610 --> 16:01.710
我们读是用谁来读是用这个fileRator的实理对象来读

16:02.470 --> 16:02.990
ok

16:03.250 --> 16:05.550
好然后接下来的话这边就调它的方法

16:05.810 --> 16:07.590
它是个对象吗对象就有方法

16:07.850 --> 16:09.390
好然后接下来这边的话就有一个

16:09.650 --> 16:10.150
read

16:10.670 --> 16:11.690
stext

16:13.230 --> 16:13.730
看到没有

16:13.990 --> 16:16.290
把谁扔进去把你的这个file

16:16.810 --> 16:19.110
把你的这个取出来的这个文件

16:19.370 --> 16:20.130
扔进去

16:20.650 --> 16:22.190
我们看一下这个readstext

16:22.450 --> 16:23.210
这个text

16:23.970 --> 16:25.010
在哪个位置啊

16:25.990 --> 16:27.010
在这里

16:27.270 --> 16:27.810
看到没有

16:28.050 --> 16:30.850
这边读取完成后result属性

16:31.110 --> 16:34.950
将返回文件内容的文本制服串

16:35.450 --> 16:39.050
该方法的第一个参数代表文件的blowboard实理

16:39.550 --> 16:40.310
第二个是

16:40.570 --> 16:41.090
可选的

16:41.850 --> 16:42.110
ok

16:42.370 --> 16:44.410
好那这边第一个第一个的话是不是就是这边

16:44.670 --> 16:46.210
把这个file传进去

16:46.470 --> 16:48.770
好传进去之后然后接下来它就开始读

16:49.030 --> 16:51.070
但读的话它是这个一步的

16:51.330 --> 16:52.870
对不对我不可能在后面等着

16:53.130 --> 16:54.150
那接下来我知道

16:54.350 --> 16:56.410
我就是他什么时候读完呢

16:57.170 --> 16:58.970
啊什么时候他读完我才知道呢

16:59.230 --> 17:00.750
那这边的话给他绑定一个什么的

17:01.010 --> 17:03.310
绑定一个onload事件

17:03.570 --> 17:04.850
给filereader绑

17:05.110 --> 17:07.670
给filereader绑一个onload事件

17:07.930 --> 17:09.970
啊它是一个监听函数

17:10.730 --> 17:13.810
啊通常在什么呢在这个函数里面使用result属性

17:14.070 --> 17:15.850
拿到文件的内容

17:16.630 --> 17:17.130
看到没有

17:17.390 --> 17:20.210
啊说说我们这边的话我们就给他绑定一个事件

17:21.490 --> 17:22.250
reader

17:22.510 --> 17:23.030
点

17:23.290 --> 17:24.050
onload

17:24.350 --> 17:25.770
等于一个function

17:27.170 --> 17:29.490
当你读完了之后你这这行代码

17:29.750 --> 17:32.050
19行代码19行代码是不是在读取

17:32.550 --> 17:37.670
对不对读取文件的内容读取文件的内容读完之后他就会触发这个onload

17:38.170 --> 17:40.850
好然后接下来这边呢就会有一个事件对象

17:41.110 --> 17:44.070
传进来传进来之后然后接下来的话这边

17:44.830 --> 17:45.850
event

17:46.110 --> 17:46.630
点

17:46.890 --> 17:47.650
target

17:47.910 --> 17:49.190
有一个什么呢有一个

17:49.450 --> 17:50.210
result

17:51.490 --> 17:52.010
ok

17:52.390 --> 17:58.310
好那我们这边我们来看一下行不行啊那我们这边的话保存一下看一下能不能把这个文件

17:58.570 --> 18:01.430
就是我们的这个taste的文件能不能读出来

18:01.690 --> 18:02.450
保存

18:04.600 --> 18:05.880
啊这边要选择是吧

18:07.160 --> 18:08.700
啊选择text

18:09.220 --> 18:09.980
打开

18:10.500 --> 18:11.260
读出来没有

18:12.020 --> 18:12.800
是不是就读出来了

18:13.560 --> 18:14.060
对不对

18:14.320 --> 18:14.840
就读出来了

18:15.100 --> 18:18.420
哎你看这边的话你这个filereader是不是就快速入门了

18:18.940 --> 18:23.540
对不对啊说刚才那些api的话没有必要一个一个去看

18:24.020 --> 18:26.140
对吧没有必要就是啊我们先来看这个

18:26.400 --> 18:29.980
然后接下来再来看这个没有必要用一个去看一个

18:30.760 --> 18:33.320
啊我们这些的话这些api学习都是这个样子的

18:34.080 --> 18:36.900
没有吧用一个看一个啊

18:37.660 --> 18:38.440
好然后下面

18:38.700 --> 18:41.260
下面的话是一个读取

18:41.520 --> 18:42.540
图片的这个例子

18:43.040 --> 18:43.820
我们来看一下啊

18:44.080 --> 18:45.620
这边那就加了一个image

18:47.700 --> 18:48.720
加了个image

18:49.480 --> 18:53.580
好但这个image现在这边是没有没有东西src这边没有

18:54.040 --> 18:55.840
对吧那现在的话这里是

18:56.100 --> 18:57.120
空空如也

18:57.380 --> 18:59.680
这里是空的但这里有一个这个image

18:59.940 --> 19:00.960
啊有一个image

19:01.220 --> 19:02.740
好然后接下来下一步

19:03.000 --> 19:04.540
下一步的话我们这边

19:04.800 --> 19:05.820
就仍然是

19:06.580 --> 19:11.200
绑了on-chain级对吧然后接下来拿到这个文件拿到这个文件然后接下来这边开始干嘛

19:11.460 --> 19:12.220
是不是开始读取

19:12.980 --> 19:15.560
对不对读取读取了之后然后接下来的话这边

19:17.340 --> 19:18.100
onload

19:18.360 --> 19:21.180
好这边的话稍微就有一点不一样了

19:21.700 --> 19:22.720
啊就是这里

19:23.080 --> 19:25.080
这里的话我们要做的就不再是

19:25.340 --> 19:29.340
打印了啊然后接下这里啊这里的话也有变化我把这删了吧

19:31.120 --> 19:35.480
把这删了首先的话这边的话是创建一个这个file reader这一步没变

19:35.740 --> 19:37.260
好然后接下来的话

19:38.800 --> 19:42.380
我要开始读取这边的话就是reader

19:42.640 --> 19:43.920
我们要调什么方法呢

19:44.180 --> 19:44.940
调这个方法

19:47.330 --> 19:47.850
调这个方法

19:49.130 --> 19:50.930
read as data

19:51.190 --> 19:52.210
ur

19:52.930 --> 19:56.770
看没有调这个方法啊这个方法的话是读取完成之后

19:57.290 --> 20:03.170
result属性将返回一个这个ur air格式的这个制服串代表文件内容

20:03.430 --> 20:08.550
啊对于图片文件这个制服串可以直接用来设置image元素的src

20:08.810 --> 20:09.570
这个是不是就很方便

20:10.330 --> 20:14.430
对不对我们要的就是这个啊所以我们这边呢就使用什么呢使用这个

20:15.710 --> 20:17.510
reader as data ui air

20:18.010 --> 20:20.830
用这个方法去读读你的这个file

20:21.510 --> 20:26.990
看没有读了之后然后这样我这边仍然是给你绑定一个什么绑定一个

20:28.030 --> 20:28.430
load

20:28.710 --> 20:29.150
onload

20:31.530 --> 20:34.330
好然后接下来的话这边是不是会有一个event

20:35.090 --> 20:37.930
对不对event然后接下来我们这边event

20:39.090 --> 20:40.170
好我们这边先打一下嘛

20:41.090 --> 20:41.530
log

20:42.290 --> 20:46.810
event 点 target 点result

20:47.650 --> 20:48.130
保存

20:48.690 --> 20:50.090
保存了之后然后过来漏液

20:50.730 --> 20:52.490
啊啊选择文件

20:54.370 --> 20:56.250
找一张图片比较这个

20:56.810 --> 20:57.170
打开

20:58.490 --> 20:58.970
呃

21:00.530 --> 21:01.930
file啊field

21:02.850 --> 21:03.690
啊啊这个

21:04.930 --> 21:05.770
is problem

21:06.770 --> 21:10.250
啊这边的话稍微有一点问题啊我们这边我们来看一下

21:11.930 --> 21:16.810
啊这里的话这个是不是传错了对不对这边我们是叫做file handle啊

21:17.770 --> 21:18.290
啊把这个

21:19.130 --> 21:19.610
啊保存

21:20.290 --> 21:20.810
再过来看

21:21.570 --> 21:22.090
选择

21:23.370 --> 21:25.650
然后图片拿一张走

21:26.450 --> 21:26.970
好你看这边

21:27.810 --> 21:28.330
是不是读出来了

21:28.850 --> 21:32.410
对不对读出来的直播他是以什么是不是以bass 64的形式啊

21:33.170 --> 21:34.970
对不对啊刚才的话这边写的有

21:35.730 --> 21:37.130
在哪里在这里啊

21:37.850 --> 21:41.930
这边不能直接进行bass 64解码必须把这个前维

21:42.570 --> 21:47.610
从制服创删除以后再进行解码啊他这边是说的这个bass 64能否解码的问题

21:48.170 --> 21:49.610
好这边的话我们是可以直接用的

21:50.210 --> 21:53.530
他这边的话这个图片他直接就转成这个bass 64了

21:54.050 --> 21:55.930
那我们这边怎么用的我们这边这个样子

21:56.610 --> 21:57.690
把我们拿到这个image

21:59.090 --> 21:59.690
给个id

22:00.610 --> 22:01.610
id image

22:02.010 --> 22:03.410
好这边的话拿一下这个image

22:04.010 --> 22:08.810
哇一个image等于一个document.get element by id

22:10.290 --> 22:16.370
image是不是先拿到好拿到之后然后接下来我这边的话直接把这个结果就设置为什么呢

22:16.730 --> 22:19.450
设置为这个image的src

22:20.490 --> 22:21.090
就可以了

22:21.690 --> 22:22.090
ok

22:22.330 --> 22:23.850
好那这样我们这边保存一下

22:24.410 --> 22:27.210
保存了之后然后向我们这边我们来看一下选择

22:27.970 --> 22:29.210
那找一张图片

22:29.770 --> 22:30.370
打开

22:31.050 --> 22:31.570
看到没有

22:32.330 --> 22:33.090
数据搞定了

22:33.370 --> 22:34.650
对不对选择

22:35.410 --> 22:36.690
找一张这个图片

22:37.450 --> 22:37.970
打开

22:38.730 --> 22:39.490
是不是就ok了

22:40.010 --> 22:40.570
对不对

22:40.810 --> 22:42.570
那困扰了大家很久的

22:42.810 --> 22:45.650
这个客户端图片预览这个问题

22:45.930 --> 22:48.730
我们是不是就可以用这个file api

22:48.970 --> 22:49.730
来解决了

22:50.530 --> 22:51.090
对不对

22:51.330 --> 22:52.610
就可以用这个来解决了

22:54.650 --> 22:59.130
然后在后面我这边写了一个综合一点的实力

22:59.370 --> 23:00.890
其实也是越南图片

23:01.130 --> 23:03.610
也是越南图片只不过我把它写的好看一些

23:04.130 --> 23:05.410
那我们这边我们来看一下

23:06.170 --> 23:07.450
把这个例子来看一下

23:08.490 --> 23:10.250
这一块我就删了

23:11.810 --> 23:14.090
这些代码的话在笔记里面都有

23:14.610 --> 23:17.170
笔记里面都有我这边就不留了

23:18.170 --> 23:20.930
好那我们把这个例子来写一下

23:21.450 --> 23:23.450
这边的话首先给一个label

23:24.490 --> 23:25.250
给一个label

23:26.850 --> 23:28.250
label的话把它包起来

23:28.450 --> 23:30.450
包起来然后下这边有一个input

23:31.450 --> 23:31.970
file

23:32.730 --> 23:33.930
file然后给一个id

23:34.170 --> 23:36.170
id的话就是一个file

23:36.570 --> 23:38.130
然后接下来这边给一个di位

23:39.410 --> 23:40.930
好那目前为止的话这边

23:41.850 --> 23:43.250
这边是不是就有一个上传空间

23:43.490 --> 23:44.410
那下面还有个什么呢

23:44.650 --> 23:45.730
还有一个空的di位

23:45.970 --> 23:47.090
还有空的di位

23:47.370 --> 23:48.690
di位的话我这边的话

23:49.210 --> 23:50.050
给一个class

23:50.650 --> 23:52.730
然后是一个cross

23:53.490 --> 23:57.090
不过这边的话是有一个upload image

24:00.610 --> 24:02.650
然后加这边这边再来个di位

24:02.890 --> 24:04.370
这个di位拿来做实质价

24:07.250 --> 24:07.690
OK

24:07.930 --> 24:10.330
好那接下来回头我们是要把这个隐藏的

24:11.090 --> 24:13.330
就这个input我们是要把它隐藏掉的

24:13.570 --> 24:15.210
隐藏掉由于你这边是label

24:15.770 --> 24:17.890
label然后加两者是不关联了的

24:18.090 --> 24:20.010
对不对啊回头用户的话

24:20.770 --> 24:21.730
点的是他

24:22.490 --> 24:25.170
点击的是他点击的是他然后就会触发什么的

24:25.410 --> 24:26.410
触发这个

24:27.290 --> 24:29.530
这个上传空间的点击世界

24:30.130 --> 24:30.650
OK

24:30.890 --> 24:31.930
好我们这边我们来看一下嘛

24:32.170 --> 24:33.570
现在的话这边还是空的

24:33.810 --> 24:37.250
好然后接下来我们这边我们来写一下这个css

24:37.490 --> 24:38.530
就直接写在这

24:39.290 --> 24:40.330
这边的话style

24:42.090 --> 24:43.890
好然后接下来这边点

24:44.890 --> 24:47.890
upload image

24:49.490 --> 24:51.290
宽给个150

24:51.890 --> 24:53.890
高给个150

24:54.090 --> 24:55.690
给了一个这个border

24:56.090 --> 24:57.490
epx

24:57.890 --> 24:59.890
这边给的是一个dash

25:00.490 --> 25:01.490
一个虚线

25:01.690 --> 25:03.490
然后给了一个这个sky blue

25:03.890 --> 25:04.690
天然色

25:04.890 --> 25:06.890
好给了一个这个border radius

25:08.690 --> 25:11.490
border radius

25:12.090 --> 25:13.890
给了一个30像素

25:14.690 --> 25:17.490
然后加这边呢给了一个position relative

25:17.690 --> 25:18.890
因为一会这个十字架

25:19.090 --> 25:20.690
十字架的话要绝对定位

25:21.690 --> 25:22.890
然后加这边cursor

25:23.090 --> 25:23.890
给了一个pointer

25:24.490 --> 25:26.490
好然后这里的话就已经出来了

25:27.090 --> 25:28.690
看到没有这东西就已经出来了

25:28.890 --> 25:31.890
好出来了之后然后接下来的话我们来看这个cross

25:33.290 --> 25:34.890
点cross

25:36.090 --> 25:37.290
我们来做这个十字架

25:37.690 --> 25:40.490
首先的话这边宽给个30

25:41.090 --> 25:42.490
高给个30

25:42.690 --> 25:44.890
好然后接下来这边的一个position

25:45.690 --> 25:47.490
absolute绝对定位

25:47.690 --> 25:49.090
绝对定位的话这个lift

25:49.690 --> 25:51.490
lift的话等于一个

25:53.290 --> 25:54.890
等于一个什么呢等于一个

25:55.290 --> 25:56.490
50%

25:57.090 --> 25:59.490
减去一个15像素

25:59.690 --> 26:01.890
因为你这个宽是30吗

26:01.890 --> 26:03.090
对吧减去他的一半

26:03.490 --> 26:04.890
好top的话是不是也是一样

26:05.690 --> 26:07.490
对不对啊这边的top

26:08.290 --> 26:10.290
好然后为了让你看得到这个框框

26:10.490 --> 26:13.290
我们这边的话给一个给个border吗

26:15.090 --> 26:16.890
solid保存一下

26:17.490 --> 26:18.690
好这框框是不是有了

26:19.290 --> 26:19.690
对不对

26:20.090 --> 26:22.290
好有了之后然后接下来下一步

26:22.690 --> 26:25.090
下一步的话我们这边通过before after

26:25.290 --> 26:26.290
来做这个十字架

26:27.090 --> 26:29.290
cross before

26:30.490 --> 26:31.890
添加一个委员数

26:32.290 --> 26:34.490
content是一个什么呢是一个空

26:36.090 --> 26:38.090
然后宽给个30

26:38.490 --> 26:39.490
高给个

26:40.490 --> 26:42.890
两像素然后给一个背景颜色

26:43.490 --> 26:47.490
背景颜色的话也是什么呢也是一个sky blue

26:48.490 --> 26:50.490
ok好那我们这边让我们来看一下

26:52.890 --> 26:53.690
怎么没有呢

26:54.690 --> 26:56.690
边光的我看一下content

26:57.690 --> 27:02.090
然后宽30高两像素边光的carner

27:03.090 --> 27:03.590
这边

27:07.690 --> 27:09.290
这边怎么没有出来呢

27:10.690 --> 27:13.490
这边点cross before

27:15.290 --> 27:17.090
嗯我看一下啊

27:17.890 --> 27:19.090
这里应该是对的呀

27:19.890 --> 27:21.690
那我这边我定位定一下呢

27:22.290 --> 27:23.490
是不是被挡住了

27:24.290 --> 27:27.490
好这边的position absolute

27:28.690 --> 27:30.090
然后接下来这边top

27:30.690 --> 27:32.690
top的话clc

27:33.690 --> 27:34.890
把它定位到

27:35.490 --> 27:37.490
中间是50%啊

27:37.690 --> 27:39.890
然后减去的一像数

27:39.890 --> 27:42.490
因为它的高度是2对吧保存一下

27:43.090 --> 27:44.690
有了吗有了对不对

27:44.690 --> 27:46.490
刚才是被挡住了啊

27:46.890 --> 27:49.690
好然后before做完了拉after 是不是一样的

27:50.890 --> 27:51.290
对不对

27:51.290 --> 27:53.290
怎么after的话你注意要旋转一下

27:55.090 --> 27:57.690
after after的话你这边的把它旋转一下

27:58.690 --> 27:59.890
这边trust form

28:00.290 --> 28:01.690
然后rotate

28:02.490 --> 28:05.490
rotate这边的话90度啊

28:05.490 --> 28:07.890
然后其他的话啊这边的话

28:08.690 --> 28:10.490
要把这个left设置一下

28:12.090 --> 28:13.890
leftclc

28:15.700 --> 28:19.600
50%减个15像数啊保存

28:22.540 --> 28:23.140
5

28:23.940 --> 28:24.640
我看一下

28:25.540 --> 28:28.540
这边的话啊这边没改这边是after

28:30.140 --> 28:30.840
啊保存

28:31.540 --> 28:34.140
是不是出来了对不对这里就出来了

28:34.140 --> 28:37.240
好出来了之后就可以把这个cross

28:37.640 --> 28:39.640
把这个border这border就可以标了

28:41.340 --> 28:43.140
好那我们这边的样式就写好了

28:43.340 --> 28:46.340
样式写好之后然后现在这个这个是不是我们要让它隐藏

28:46.440 --> 28:50.240
我们回头点这个这个的话和它是不是关联在一起了的

28:50.540 --> 28:51.940
对不对我们用label关联在一起了

28:51.940 --> 28:53.840
你看我现在我比如说我鼠标我点它

28:54.640 --> 28:56.440
是不是仍然会触发那个input

28:56.840 --> 28:59.840
对不对啊所以我们这边呢就直接把那个input

29:01.540 --> 29:06.240
把那个input然后type等于一个file

29:06.440 --> 29:09.040
把它干嘛的把它display

29:10.040 --> 29:10.440
浪

29:11.340 --> 29:12.640
对不对保存一下

29:13.640 --> 29:19.440
ok啊用户点这个点这个是不是就可以打开这个文件选择

29:19.740 --> 29:22.540
对不对可以选择这个文件啊上传文件

29:23.040 --> 29:24.640
好然后接下来话下一步

29:25.340 --> 29:28.040
下一步的话其实就和我们刚才做的很相似了

29:28.640 --> 29:30.340
下一步的话这边就是

29:31.340 --> 29:32.040
script

29:32.740 --> 29:35.040
首先的话把那个几个文件

29:35.440 --> 29:38.740
先拿到一下啊这边的话挖一个这个file

29:39.840 --> 29:42.040
等于一个什么呢等于一个document

29:42.640 --> 29:45.840
点这个query selector

29:46.940 --> 29:49.840
然后这边就是警号file

29:50.240 --> 29:53.240
这个拿到什么拿到这个上传空间对不对

29:53.640 --> 29:58.180
好然后接下来话把那个把这个div

29:58.880 --> 30:02.680
就是整个这个div啊包括这个十字架我们要拿到啊

30:02.680 --> 30:03.880
十字架一会再说

30:04.380 --> 30:07.380
好这边这个div div的话这边的话就是document

30:07.980 --> 30:10.180
点query selector

30:11.580 --> 30:16.080
好这边呢就是应该是点upload image

30:16.680 --> 30:20.880
对不对把它拿到好拿到之后然后接下来话下一步

30:21.180 --> 30:23.180
下一步的话这边是不是就是应该是file

30:23.980 --> 30:26.880
点unchange啊是不是就和刚才是一样的

30:27.480 --> 30:28.880
对不对然后function

30:30.080 --> 30:33.780
ok好然后接下来下一步下一步的话就拿到

30:34.380 --> 30:36.180
拿到我们的这个

30:37.380 --> 30:42.080
呃这个用户他这边的话就是他选择了文件之后

30:42.080 --> 30:45.980
拿到他的这个文件啊怎么来拿他的这个文件呢

30:46.480 --> 30:47.680
是不是就和刚才是一样的

30:48.580 --> 30:50.580
刚才的话我们来看一下啊

30:53.390 --> 30:56.090
刚才的话在这里说通过

30:58.800 --> 31:01.700
呃是不是他有一个这个files

31:02.400 --> 31:04.300
对通过这个files可以拿到

31:04.700 --> 31:06.300
ok好了回到我们这边

31:07.300 --> 31:09.700
啊我们之前是通过事件对象来拿的是吧

31:09.700 --> 31:12.100
那我们还是通过这个吧还是通过这个啊

31:12.100 --> 31:13.900
但其实这这边呢通过这个file

31:14.200 --> 31:17.700
file也可以直接拿到好那我们这边呢就直接event

31:18.300 --> 31:22.100
点target点什么 to result

31:22.800 --> 31:25.700
对不对他拿到的是一个什么拿到的是一个file list

31:25.700 --> 31:28.800
然后这样我这边直接干嘛呀是不是第一个

31:29.400 --> 31:33.500
对不对啊这边挖一个file handle

31:34.100 --> 31:37.300
先拿到好拿到了之后然后接下来下一步

31:37.300 --> 31:39.300
下一步的话是不是要读取

31:40.200 --> 31:41.700
对不对说接下来这边

31:42.700 --> 31:46.300
就开始读取啊这边的话是首先要挖一个

31:46.700 --> 31:48.300
under等于一个new

31:48.900 --> 31:50.400
这个file reader

31:50.900 --> 31:52.700
创建一个radar对象

31:53.500 --> 31:54.500
啊这边写错了

31:55.000 --> 31:55.900
这边的话是

31:56.800 --> 32:00.400
radar好然后接下来的话这边使用这个radar

32:01.400 --> 32:03.100
radar的点radar

32:03.700 --> 32:05.600
sdata url

32:05.900 --> 32:07.900
然后去读什么读这个文件

32:09.600 --> 32:10.400
是不是去读取

32:11.500 --> 32:15.800
读取了之后给这个radar绑定一个unload的事件

32:16.800 --> 32:20.300
对不对当你读完了之后会触发触发

32:20.600 --> 32:22.300
触发的话然后接下来这里

32:24.440 --> 32:31.940
这里的话通过事件对象然后event点target点result

32:32.340 --> 32:33.740
是不是拿到你这个

32:34.240 --> 32:35.740
读取文件的这个内容

32:36.440 --> 32:38.640
对不对拿到读取文件的内容之后

32:38.640 --> 32:40.440
然后将我把这个内容设置为什么

32:40.540 --> 32:43.240
是不是设置为这个div的背景图就可以了

32:43.840 --> 32:46.040
对不对把这一块设置成背景图

32:46.040 --> 32:47.440
那这边就是div

32:48.340 --> 32:49.740
点这个style

32:50.140 --> 32:52.140
点什么呢点这个bangground

32:53.540 --> 32:54.240
等于

32:55.440 --> 32:57.040
好这边就url

32:58.540 --> 32:59.740
好然后下这边

33:00.740 --> 33:02.640
把这个拿过去

33:03.640 --> 33:07.740
然后后面的话是一个就设置下这个背景图的样式

33:08.240 --> 33:10.740
然后no repeat

33:11.840 --> 33:14.040
对不对啊那我们这边保存一下

33:14.140 --> 33:14.940
来看一下

33:16.340 --> 33:17.040
点击

33:17.540 --> 33:20.240
然后选择这个有这个头像打开

33:21.140 --> 33:22.440
啊这边说的抱错了

33:23.040 --> 33:24.040
抱到这边

33:25.140 --> 33:26.840
0有问题

33:27.540 --> 33:31.040
这边event点target好我看一下这里啊

33:31.840 --> 33:33.840
啊这里这里的话不应该是result

33:33.840 --> 33:35.040
这里应该是啊

33:35.140 --> 33:36.740
这应该是files啊

33:37.540 --> 33:39.240
对不对应该是files

33:39.740 --> 33:40.540
好再来

33:44.840 --> 33:45.340
走

33:46.140 --> 33:46.840
是不是ok了

33:47.440 --> 33:50.140
对不对一个图片越来就ok了

33:50.240 --> 33:52.940
好ok是ok是个十字架是不是很好看

33:53.340 --> 33:54.740
对不对我们把这个十字架

33:54.840 --> 33:55.840
我们把它处理一下

33:56.040 --> 33:57.440
要处理的话也很简单

33:57.640 --> 34:00.440
首先的话在js里面我们把它获取的

34:00.840 --> 34:01.640
回到我们这边

34:02.240 --> 34:05.540
这边的话哇一个这个cross

34:06.740 --> 34:11.340
等于一个document点这个cary selector

34:13.360 --> 34:16.860
这边的话cross拿到拿到之后

34:16.860 --> 34:18.660
然后接下来把它设置为什么

34:18.760 --> 34:20.060
设置为透明就可以了

34:20.560 --> 34:24.360
cross点style点这个opacity

34:26.060 --> 34:26.760
等于一个0

34:27.360 --> 34:28.360
ok搞定

34:28.960 --> 34:30.560
你看我们这边的话一个这个

34:31.060 --> 34:33.860
比如说用户在填表单的时候有个要求

34:33.860 --> 34:36.560
他上传头像那这个头像的预览

34:36.560 --> 34:37.760
你看我们这边就做完了

34:38.160 --> 34:38.960
比如说这边

34:40.360 --> 34:40.860
打开

34:41.560 --> 34:44.960
是不是ok的对不对那用户的话可以换图片

34:45.760 --> 34:46.260
打开

34:46.960 --> 34:48.760
是不是ok的对不对

34:49.260 --> 34:53.060
就ok了啊你看这个就是一个file api的一个

34:53.360 --> 34:55.860
实战啊一个综合实力

34:56.160 --> 34:57.160
大家的话可以

34:57.660 --> 34:58.260
试一试

34:58.460 --> 35:00.060
对不对自己敲一敲

35:00.660 --> 35:02.560
ok你可以把视频暂停了

35:02.560 --> 35:04.160
把这个例子自己敲一下吗

35:04.560 --> 35:05.560
这个也不难对吧

35:05.760 --> 35:06.960
代码也没多少行

35:07.460 --> 35:07.860
ok

35:09.260 --> 35:13.760
好那最后最后的话就是实力讲完了

35:14.060 --> 35:15.960
讲完了之后然后接下来最后

35:16.260 --> 35:19.460
最后的话就需要给大家再介绍一个叫做

35:19.660 --> 35:23.460
file system assist api

35:24.760 --> 35:26.660
这个是什么啊我们来看一下

35:27.460 --> 35:30.360
看上去上面的这个file api还不错

35:30.760 --> 35:32.760
是吧我们刚才使用这个file api

35:32.960 --> 35:35.860
是不是实现了这个图片的这个预览

35:36.360 --> 35:38.260
是不是实现了这个功能对不对

35:38.560 --> 35:40.060
但是他仅仅是干嘛呀

35:40.260 --> 35:42.660
他是不是能够读取你本地的文件

35:43.360 --> 35:46.660
他和我们这里要讲的离线存储有啥关系呢

35:47.760 --> 35:51.360
你想想我们整个这一张啊都是在讲什么

35:51.360 --> 35:52.660
是不是在讲离线存储啊

35:52.860 --> 35:54.260
无论是cookie也好

35:54.760 --> 35:58.960
还是vivo storage也好啊还是vivo sql

35:59.260 --> 36:01.060
包括这个index的db

36:01.660 --> 36:03.360
这些东西是不是都是这个

36:04.360 --> 36:07.260
可以在你浏览器是不是离线的存储数据啊

36:07.960 --> 36:10.860
对不对那你这个file api的话他是干嘛

36:11.160 --> 36:13.860
他是读取文件对不对

36:13.960 --> 36:17.360
他和我的这个离线存储有啥关系呢

36:17.760 --> 36:19.660
啊其实是这样子的

36:20.060 --> 36:22.560
file api的话他确实只能干嘛呢

36:22.760 --> 36:24.560
只能读取文件

36:25.260 --> 36:27.360
他确实只能读取文件啊

36:27.860 --> 36:31.660
那是但是呢有一套新的api规范又推出来了

36:31.860 --> 36:34.760
这个叫做什么呢这个叫做file system

36:35.060 --> 36:36.360
excess api

36:36.660 --> 36:38.560
所以这两套是不一样的

36:38.760 --> 36:40.760
一个是file api

36:40.960 --> 36:45.260
一个是file system access api啊

36:45.860 --> 36:49.160
他是两套规范千万要注意啊

36:49.160 --> 36:51.060
这个我给你画一个重点

36:51.260 --> 36:53.660
不要搞混了因为很多人搞混

36:54.160 --> 36:57.060
很多人搞混啊他是两套规范

36:57.260 --> 36:59.860
千万不要混淆了啊你看这边

37:00.860 --> 37:02.860
这个是file api的规范

37:03.360 --> 37:05.760
看了没有啊挺多的啊挺多的

37:05.760 --> 37:07.960
那这个是file system

37:08.360 --> 37:10.460
excess api的规范

37:11.160 --> 37:14.060
看了没有完全是两套规范不是同一套

37:14.460 --> 37:16.960
知道吧看了没有这是file api

37:17.660 --> 37:20.560
这个是file system access api

37:20.760 --> 37:22.260
不要搞混了OK

37:23.260 --> 37:26.260
好然后关于这个file system

37:26.360 --> 37:28.960
assess api这套方案的话基本上就应该是

37:28.960 --> 37:30.860
未来的这个主角了啊

37:30.860 --> 37:33.760
因为他不仅仅是可以读他还可以干嘛呢

37:33.760 --> 37:36.260
他还可以写啊还可以写

37:36.460 --> 37:39.060
那是不是就是我们可以用他来做这个文件

37:39.060 --> 37:40.660
版本的理线存储了

37:41.260 --> 37:43.260
对不对啊你看我这边写的有

37:43.760 --> 37:45.960
这个api对于我们前端来讲

37:46.160 --> 37:49.060
意义挺大的啊意义挺大的为什么呢

37:49.160 --> 37:51.660
因为有了这个功能我们完全就可以通过这个

37:51.660 --> 37:52.460
浏览器

37:53.160 --> 37:56.460
啊来走从什么呢从打开到编辑

37:56.460 --> 37:58.560
到保存一套到底

37:59.160 --> 38:02.360
啊一套到底啊就是你要打开一个文件

38:02.360 --> 38:03.760
或者新建一个文件

38:03.760 --> 38:06.260
然后接下来进行编辑进行保存

38:06.760 --> 38:07.860
都可以做了

38:08.260 --> 38:10.360
都可以做了就在浏览器端做呦

38:10.460 --> 38:13.160
注意在浏览器端做就都可以了啊

38:13.560 --> 38:15.460
但是现在比较遗憾的就是什么呢

38:15.660 --> 38:17.260
只有骨骼支持

38:17.660 --> 38:20.260
你看我这边把这个我通过kmi user

38:20.660 --> 38:22.760
把它打开是全线标红

38:23.360 --> 38:25.360
对不对就只有骨骼支持

38:25.460 --> 38:27.560
骨骼支持都还不是很好的支持

38:27.860 --> 38:29.460
看到没有都没有一个绿色的

38:29.860 --> 38:31.660
压根就没有绿色啊

38:31.960 --> 38:34.160
而且这个API的话目前来讲的话

38:34.260 --> 38:36.260
就是中英文资料都比较少

38:36.560 --> 38:38.860
无论是中文还是英文英文都很少

38:39.260 --> 38:42.260
英文他的资料都很少就更别说中文了

38:43.060 --> 38:45.560
知道吧啊说我这边的话就不做这个

38:45.560 --> 38:46.960
过多的这个介绍了

38:47.960 --> 38:50.760
这个的话就是可能还要再过几年吧

38:51.160 --> 38:54.260
再过几年慢慢随着这个浏览器的这个支持

38:54.760 --> 38:57.960
越来越多了之后啊慢慢用的就越来越多了

38:58.960 --> 39:01.960
那这边的话就是你如果对他感兴趣

39:01.960 --> 39:04.460
我这边给了两个扩展的这个链接

39:04.660 --> 39:05.960
一个是这个mdn的

39:07.930 --> 39:10.230
这边有一个这个file system

39:10.530 --> 39:11.330
sysAPI

39:11.830 --> 39:13.130
这边呢你可以看一下

39:13.230 --> 39:15.530
但这边是英文的啊是英文的

39:15.730 --> 39:16.330
还有一个是什么呢

39:16.330 --> 39:17.330
还有一个是这个

39:18.230 --> 39:19.730
这个我不知道我打的开不

39:20.830 --> 39:23.330
我打的开打的开啊一个是这个

39:23.330 --> 39:25.330
这个是别人写的博客啊

39:25.330 --> 39:26.930
他这边就演示了个例子

39:28.130 --> 39:29.030
你可以看一下

39:29.330 --> 39:31.530
他说这边的演示的这个例子还挺有意思的

39:31.530 --> 39:33.730
就这个text editor

39:35.030 --> 39:36.630
克拉米尔你看这个这个就微博版本的

39:36.630 --> 39:39.030
哦克拉米尔微博版本好

39:39.030 --> 39:40.530
我这边的话你看我这边可以

39:40.730 --> 39:42.830
克拉米尔neal open save

39:42.930 --> 39:43.630
克拉米尔

39:44.430 --> 39:46.730
哎这边这边是历史记录啊

39:46.730 --> 39:49.330
这边edit克拉米尔我这边让我写一个

39:49.330 --> 39:50.930
比如说今天

39:54.000 --> 39:57.100
今天我们学习了

39:58.100 --> 40:00.300
file api

40:02.200 --> 40:04.600
相关的指示

40:05.600 --> 40:07.900
对吧好让大家这边让我可以保存

40:09.500 --> 40:11.900
克拉米尔强大薄是非常强大

40:12.400 --> 40:14.800
对不对好让大家这边来假设叫做

40:15.100 --> 40:17.800
test 222

40:18.200 --> 40:19.000
好保存

40:19.800 --> 40:21.500
ok 你看在我的桌面上

40:22.400 --> 40:24.900
在我的桌面上是不是就有了这么一个文件

40:25.900 --> 40:27.700
克拉米尔就有这么一个文件

40:27.900 --> 40:29.200
那你回头的话用这个是不是

40:29.200 --> 40:30.800
就可以做理解存储

40:31.700 --> 40:34.100
对不对相当强大了一个 api

40:34.500 --> 40:35.300
相当强大

40:35.500 --> 40:38.700
下来的话你可以自己了解一下好不好

40:39.100 --> 40:41.200
这个后面就是随着这个资料

40:41.700 --> 40:43.700
变多了之后啊我这边到时候

40:43.700 --> 40:45.300
我单独抽个时间吗

40:45.500 --> 40:47.700
单独研究一下然后做一期视频

40:47.900 --> 40:48.800
来介绍这个

40:49.300 --> 40:49.700
好吧

40:50.300 --> 40:50.700
ok

40:51.300 --> 40:53.100
这就是这节课啊这节课的话

40:53.100 --> 40:54.300
主要就是给大家介绍

40:54.600 --> 40:55.700
这个file api

40:56.500 --> 40:58.800
这个你要知道啊这个已经很成熟了啊

40:59.000 --> 41:00.500
这个非常非常成熟了

41:00.500 --> 41:01.800
这边你可以用那个

41:02.200 --> 41:03.400
kai use看一下吗

41:04.300 --> 41:07.900
三w.kaiuse.com

41:10.260 --> 41:13.160
你这边那就是file api

41:15.460 --> 41:16.860
这个是不是很成熟啊对不对

41:16.860 --> 41:17.960
这个至少有绿色

41:18.460 --> 41:20.260
是吧至少有绿色啊

41:21.660 --> 41:23.960
就是这节课给大家介绍了这么一个

41:24.160 --> 41:25.860
然后这个的话作为了解

41:26.460 --> 41:27.360
这个作为了解

41:27.960 --> 41:28.360
好吧

41:28.760 --> 41:31.260
好这节课的话就先到这里啊

41:31.560 --> 41:32.360
好再见

