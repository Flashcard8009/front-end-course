WEBVTT

00:00.620 --> 00:03.620
好 接下来的话 我们来看一下通过这个Storage

00:03.620 --> 00:07.620
Storage它有一个事件 叫做Storage事件

00:07.620 --> 00:10.620
通过这个来实现这个跨标签页的通信

00:10.620 --> 00:13.620
这个Web Storage我们前面是学过的

00:13.620 --> 00:17.620
对不对 学过的 这边就不介绍这个知识了

00:17.620 --> 00:19.620
我们这边来看一下

00:19.620 --> 00:21.620
当我们就是Local Storage

00:21.620 --> 00:24.620
Local Storage是不是可以本地存储这个值啊

00:24.620 --> 00:26.620
对不对 当我们存储

00:26.620 --> 00:30.620
存储 如果我们存储是修改一个已有的值

00:30.620 --> 00:34.620
那它就会触发什么呢 触发一个Storage事件

00:34.620 --> 00:36.620
等一下我看一下 这里好像是

00:36.620 --> 00:39.620
应该是每次将一个值存储到本地时

00:39.620 --> 00:42.620
就会触发一个Storage事件

00:42.620 --> 00:44.620
这个事件里面

00:44.620 --> 00:47.620
它的这个事件回掉函数里面 有这么几个参数

00:47.620 --> 00:51.620
一个是key 就告诉我们被修改条目的件

00:51.620 --> 00:54.620
然后NewValue 就是修改后的值

00:55.620 --> 00:58.620
OtherValue修改前的值

00:58.620 --> 01:01.620
然后这个Storage Area

01:01.620 --> 01:05.620
就是指向事件监听对应的Storage对象

01:05.620 --> 01:09.620
然后还有一个URL 就是对应的触发Storage

01:09.620 --> 01:12.620
事件的网页的地址

01:12.620 --> 01:14.620
好 那我们这边把这个写一下

01:14.620 --> 01:16.620
写一下你就明白了

01:16.620 --> 01:18.620
好 那接下来到这边

01:18.620 --> 01:20.620
仍然是建好了两个页面 对吧

01:20.620 --> 01:22.620
好 那接下我们这边Script

01:24.620 --> 01:25.620
我们这边干嘛呢

01:25.620 --> 01:28.620
我们这边首先localStorage.name

01:28.620 --> 01:30.620
然后这边等于一个

01:30.620 --> 01:32.620
比如写节

01:32.620 --> 01:36.620
那再来一个localStorage.edge

01:36.620 --> 01:39.620
等于一个20

01:39.620 --> 01:42.620
好 然后接下来这边log一下

01:42.620 --> 01:44.620
信息

01:44.620 --> 01:47.620
信息已经设置

01:47.620 --> 01:49.620
保存一下

01:49.620 --> 01:50.620
保存了之后

01:50.620 --> 01:51.620
然后来到这边

01:51.620 --> 01:52.620
这边是不是信息已经设置

01:52.620 --> 01:55.620
好 那我们这边进Politication看一下

01:55.620 --> 01:58.620
在Storage

01:58.620 --> 02:00.620
这边 是不是有了

02:00.620 --> 02:01.620
对吧 有了

02:01.620 --> 02:02.620
好 有了之后

02:02.620 --> 02:03.620
然后接下来的话

02:03.620 --> 02:05.620
我们在页面2

02:05.620 --> 02:06.620
页面2

02:06.620 --> 02:07.620
页面2我们干嘛呢

02:07.620 --> 02:09.620
页面2的话

02:09.620 --> 02:10.620
我们这边的话

02:10.620 --> 02:13.620
绑定一个Storage世界

02:13.620 --> 02:14.620
Script

02:14.620 --> 02:17.620
好 我们这边window

02:17.620 --> 02:23.830
window.onStorage

02:23.830 --> 02:28.400
等于一个function

02:28.400 --> 02:29.400
看到没有

02:29.400 --> 02:30.400
好 然后接下来这边

02:30.400 --> 02:31.400
接受一个世界对象

02:31.400 --> 02:34.400
好 世界对象上面就有这么一些值

02:34.400 --> 02:36.400
我们来看一下有哪些

02:36.400 --> 02:37.400
是这边key

02:37.400 --> 02:38.400
newValue

02:38.400 --> 02:39.400
对吧

02:39.400 --> 02:40.400
然后oldValue

02:40.400 --> 02:42.400
然后还有就是这个Storage area

02:42.400 --> 02:43.400
URL

02:43.400 --> 02:45.400
好 那我们这边我们来试一下

02:45.400 --> 02:48.400
我们这边做的事情也很简单

02:48.400 --> 02:49.400
我们这边就干嘛呢

02:49.400 --> 02:50.400
我们把它打印出来

02:50.400 --> 02:53.400
1.key

02:53.400 --> 02:54.400
就是你修改的是哪个

02:54.400 --> 02:57.400
然后叫做1.oldValue

02:57.400 --> 03:00.400
oldValue

03:00.400 --> 03:03.970
我们这边前面加点话吧

03:03.970 --> 03:05.970
修改

03:05.970 --> 03:08.970
修改的键

03:08.970 --> 03:10.970
为

03:10.970 --> 03:13.970
好 然后接下来这边

03:13.970 --> 03:15.970
这边是

03:15.970 --> 03:17.970
之前的值

03:17.970 --> 03:18.970
为

03:18.970 --> 03:20.970
然后接下来

03:20.970 --> 03:22.970
修改后

03:22.970 --> 03:24.970
修改后

03:24.970 --> 03:26.970
后的值为

03:26.970 --> 03:27.970
这边就应该是什么

03:27.970 --> 03:29.970
newValue

03:29.970 --> 03:30.970
对不对

03:30.970 --> 03:32.970
然后还有这个log

03:32.970 --> 03:37.470
1.Storage

03:37.470 --> 03:41.170
Storage

03:41.170 --> 03:43.170
这个area

03:43.170 --> 03:44.170
Storage area

03:44.170 --> 03:46.170
我看一下是啥

03:46.170 --> 03:49.170
指向世界监听对应的Storage对象

03:49.170 --> 03:50.170
有点打印算

03:50.170 --> 03:51.170
我们看了就知道了

03:51.170 --> 03:53.170
然后接下来还有一个什么呢

03:53.170 --> 03:54.170
还有一个url

03:54.170 --> 03:56.170
对吧 1.url

03:56.170 --> 03:57.170
ok

03:57.170 --> 03:59.170
好 然后接下来我们在页面2

03:59.170 --> 04:01.170
我们就绑定了这么一个

04:01.170 --> 04:03.170
Storage 时间

04:03.170 --> 04:04.170
好了 接下来怎么用呢

04:04.170 --> 04:05.170
很简单

04:05.170 --> 04:07.170
来到我们这边

04:07.170 --> 04:09.170
我们这边的话就只需要

04:09.170 --> 04:11.170
修改我们的localStorage

04:11.170 --> 04:14.170
这个localStorage的值就可以了

04:14.170 --> 04:17.170
就比如说

04:17.170 --> 04:19.170
我看一下我这边有没有演示

04:19.170 --> 04:21.170
这边好像没有 是吧

04:21.170 --> 04:22.170
我记得这边的话

04:22.170 --> 04:25.170
修改值就是直接是

04:25.170 --> 04:28.170
localStorage

04:28.170 --> 04:30.170
然后点

04:30.170 --> 04:31.170
比如说 age

04:31.170 --> 04:33.170
对对 直接复制就可以了

04:33.170 --> 04:34.170
比如说我改成一个

04:34.170 --> 04:35.170
刚才设置的是多少

04:35.170 --> 04:36.170
是20 是吧

04:36.170 --> 04:38.170
我改成30

04:38.170 --> 04:39.170
走

04:39.170 --> 04:40.170
看到没有

04:40.170 --> 04:42.170
是不是这边的话就触发了

04:42.170 --> 04:43.170
对不对

04:43.170 --> 04:45.170
修改的键为 age

04:45.170 --> 04:46.170
之前的值是20

04:46.170 --> 04:48.170
修改之后是30

04:48.170 --> 04:50.170
这个是不是Storage对象

04:50.170 --> 04:51.170
对不对

04:51.170 --> 04:52.170
就是Storage对象

04:52.170 --> 04:53.170
然后加这边

04:53.170 --> 04:55.170
是你修改的页面

04:55.170 --> 04:56.170
它的 URL

04:56.170 --> 04:57.170
你看

04:57.170 --> 04:59.170
这里是不是也是实现了一个

04:59.170 --> 05:01.170
跨标签页通信

05:01.170 --> 05:02.170
对不对

05:02.170 --> 05:03.170
那我完全可以干嘛呢

05:03.170 --> 05:05.170
完全可以在这个

05:05.170 --> 05:06.170
页面2

05:06.170 --> 05:08.170
我这边监听Storage事件

05:08.170 --> 05:10.170
然后加你如果修改了的话

05:10.170 --> 05:11.170
然后我根据你新的值

05:11.170 --> 05:12.170
那接下来我这边

05:12.170 --> 05:14.170
做点其他的事情之类的

05:14.170 --> 05:16.170
只不过我这边没写而已

05:16.170 --> 05:17.170
对不对

05:17.170 --> 05:18.170
我这边没写而已

05:18.170 --> 05:19.170
这边的话可以做点

05:19.170 --> 05:20.170
其他的事情修改一下

05:20.170 --> 05:21.170
DOM之类的

05:21.170 --> 05:22.170
所以也实现了一个

05:22.170 --> 05:23.170
两个页面

05:23.170 --> 05:25.170
时间的这个通信

05:25.170 --> 05:26.170
对不对

05:26.170 --> 05:27.170
OK

05:27.170 --> 05:29.170
这个的话就是关于这个使用

05:29.170 --> 05:30.170
这个Storage

05:30.170 --> 05:32.170
来进行跨标签页通信

05:32.170 --> 05:34.170
核心就是使用什么

05:34.170 --> 05:36.170
核心就是使用Storage事件

05:36.170 --> 05:37.170
好吧

05:37.170 --> 05:38.170
好

05:38.170 --> 05:39.170
这就可就先到这里

05:39.170 --> 05:41.170
大家可以下来练一练

05:41.170 --> 05:43.170
我每次讲了一个小例子

05:43.170 --> 05:45.170
你下来自己敲一下

05:45.170 --> 05:47.170
不要着急就把下一个视频点开

05:47.170 --> 05:48.170
听完一个

05:48.170 --> 05:50.170
然后自己敲一下

05:50.170 --> 05:51.170
然后再听下一个

05:51.170 --> 05:52.170
好吧

05:52.170 --> 05:53.170
好

05:53.170 --> 05:54.170
这里可就到这里

