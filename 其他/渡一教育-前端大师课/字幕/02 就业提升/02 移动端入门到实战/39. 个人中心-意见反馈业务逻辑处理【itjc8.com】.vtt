WEBVTT

00:01.260 --> 00:06.380
各位同学大家好 这节课我们继续意见反馈界面的一个制作

00:06.640 --> 00:09.960
那么本节课我们把它的业务逻辑来进行一个处理

00:10.220 --> 00:14.320
我们回到我们的这个上节课的代码里面 我们已经定义好了两个事件

00:14.580 --> 00:17.900
一个是 ad image 包括一个 Samid feedback

00:18.160 --> 00:19.700
这个我们要清楚一下 首先呢

00:19.940 --> 00:23.780
他们俩的一个先后顺序 肯定是你先把这个图片上传完了之后

00:24.040 --> 00:27.120
然后才可以进行一个提交反馈意见 对不对

00:27.380 --> 00:31.220
当然了这个业务的一个决定权啊在于你的产品 有的时候呢

00:31.260 --> 00:35.620
是要求你 我们把这个文本信息 包括图片两个都不可能少

00:35.860 --> 00:39.960
然后直接都统一的给提交进去 或者是还有一种情况是啥呢

00:40.220 --> 00:44.060
这个图片你可传可不传 但是呢你这个文本信息必须要有

00:44.320 --> 00:48.420
那一般啊 经常性的这个出现的 也就是说我们后一种

00:48.660 --> 00:53.020
情况 就是说我们有文本信息就可以了 这个呢我们要明确一下

00:54.300 --> 00:59.420
好的 那我们先来处理一下这个添加图片的一个操作 就是在这个里面

00:59.620 --> 01:04.740
我们添加图片操作 因为之前我们知道要使用Uni点一个什么

01:05.000 --> 01:11.660
TruthImage 对不对 这种情况能进行图片的一个添加 这里面还有它的参考地址啊

01:11.920 --> 01:15.240
并且呢在这个文档里也给同学们写好了TruthImage

01:16.520 --> 01:20.880
那首先呢 第一个它是什么呢 Count 也就是说你要传几张图片

01:21.140 --> 01:25.220
那这几张图片呢 我们这里面刚才说了 我们想传五张图片

01:25.480 --> 01:28.300
那五张图片怎么办呢 我在这里面可以定一下

01:28.940 --> 01:35.860
比如说我们Count等于一个数量 这个数量呢 我们写死了 就是一个五 五减去谁 这一次点

01:36.580 --> 01:45.260
Image List 那如果说Image List 它是作为我们一个循环条件 在上面进行我们整个的这个Feedback

01:45.460 --> 01:51.420
Image Item的一个结构渲染 那此时呢 我们判断一下它的这个长度 如果说它的长度

01:51.740 --> 01:56.340
假如说是五了 那是不是就零了 那此时零的话这个Uni点出自Image 是不是就没戏了

01:56.380 --> 02:02.140
所以说它也不可能选中了 对吧 这事咱们一个处理啊 之后呢 如果说你上传图片

02:02.340 --> 02:05.660
SixSine呢 我们这个是选择图片 不是上传图片啊

02:06.260 --> 02:10.740
如果说你成功的话 那选择图片 那我们这里面就来能得到一个什么

02:11.100 --> 02:15.660
res.temporatefilepefs 对不对 那我这里面定一个变量啊

02:17.140 --> 02:24.420
temporatefilepefs等于我们的res.temporate这个里面

02:25.020 --> 02:31.100
temporatefilepefs ok 拿到它之后 这个里面我们就可以先来打印一下啊

02:33.060 --> 02:38.140
这个里面改一下叫temporatepefs 那就是tmp啊

02:38.940 --> 02:46.220
tmptemporatefilepefs 把它给做一个打印 我们来看一下 选图片之后的这个啥东西啊

02:46.700 --> 02:52.660
这个呢 我们要明确一下 首先点击图片 这里面选一张嘛 对吧 选一张图片 选两张

02:53.540 --> 02:53.660
来

02:54.700 --> 03:03.340
找了两张图片 这里面拿到的是两个图片的一个什么 图片的这个信息对不对 那这个图片信息呢 其实就可以作为我们的这个

03:03.860 --> 03:06.820
src的一个地址 也就是说图片的src地址

03:07.660 --> 03:14.860
我们直接可以通过它进行一个渲染 那一会呢 我们就是把它追加到我们这个数组里面 在这个数组里面

03:15.900 --> 03:19.940
我们在上面就可以通过它来进行一个循环 给它进一个添加就可以了

03:20.420 --> 03:24.500
拿到它之后 那我们这个里面啊 还需要一个纸 就是什么呢

03:24.980 --> 03:31.220
它的一个图片的名称啊 然后这两个都搞定之后 那我们直接的就可以来进行使用了啊

03:31.700 --> 03:37.140
那首先咱们知道我们获取的是一个啥 是一个数组对吧 那既然是一个数组 我们给你

03:37.860 --> 03:42.420
我们给你循环一下tmptemporatefilepefs 点了一个什么呢fall each

03:43.140 --> 03:46.500
用一个fall each循环 这里面有一个url

03:47.220 --> 03:53.540
还有一个什么呢index啊 那这两个值我们干什么 首先在这里面我们判断一下

03:53.940 --> 03:57.540
如果说我们的这个index小于我们的这个count

03:57.940 --> 04:04.500
也就是说那它小于无常 是不是 那我咋办呢 我让这次点mg list就去push

04:04.980 --> 04:08.660
push就是我们获取到的这个tmptemporatefiles里面的每一项

04:09.060 --> 04:14.500
那也就是说这个uil 是不是 首先第一个是uil 然后呢咱们再使用一个name

04:14.980 --> 04:21.700
那这name呢就是is.tmpfiles之后 它里面的什么index

04:22.180 --> 04:28.580
然后呢使用它的这个name做一个获取啊 那这样呢 我们就能拿到两张图片 我们可以看一下啊

04:29.060 --> 04:31.140
在这个里面选择两张图片来

04:31.860 --> 04:34.740
还是两张啊 咱多类没有 对吧 点击打开

04:36.180 --> 04:41.940
你会发现两张图片是不是上来了 然后我看一下它这个里面的这个内容 我们点击一下走你

04:42.420 --> 04:44.500
走你到配置feedback

04:45.140 --> 04:47.300
然后这里面配置feedback

04:48.420 --> 04:53.380
它里面都有什么mg list mg list里面有一个name有一个uil 对不对

04:53.780 --> 04:58.660
name呢 就是我们图片的名字uil呢 就是我们当前的这个图片的一个

04:59.540 --> 05:03.860
信息对象 那我们直接把它作为src给进行一个渲染 是不是就可以了

05:04.340 --> 05:07.940
那回到这个里面 我们找到什么上面的这一块

05:08.740 --> 05:17.860
vif mg list 点亮 不是它啊 是这个里面 我们indlist然后呢 把这个src给做一个处理

05:18.180 --> 05:24.660
src呢 就不使用它了 那我们用什么呢 我们直接的这个src就是item.uil

05:24.660 --> 05:30.580
是不是就可以了 对吧 我们再来试一下 哎 两张图片已经上来了 对吧 这个是没有任何问题的

05:31.060 --> 05:36.100
好的 那这个处理完成之后 先在这里面 我们再来做一个测试 先看断一下什么呢

05:36.500 --> 05:43.860
这里面只能显示五张图片 对吧 我们的要求是五张图片 那我在这里面就来处理啊 再来一二三

05:45.460 --> 05:51.780
好的 再选三张啊 OK 五张可以了 并且我们后面的这个内容是不是没有了 那这个逻辑也是没有问题了

05:52.180 --> 05:58.180
逻辑没有问题了之后 那我们再来处理什么呢 这个小icon 那你点击你是不是得给做一个删除啊 对吧

05:58.500 --> 06:02.820
所以说呢 我们这里面有一个close 那我们要把它给做一个处理啊

06:03.220 --> 06:06.020
close这里面 我们写一个什么呢 点击事件

06:06.100 --> 06:08.340
adclick等于我们的这个dl

06:08.900 --> 06:09.300
mg

06:09.860 --> 06:14.020
删除图片啊 删除图片的话 我得把这个index给它传过去

06:14.340 --> 06:20.660
因为我得告诉这个mg list的 你删除哪一张图片对吧 那我这里面就写一下这个叫我们

06:21.700 --> 06:22.340
object

06:24.100 --> 06:30.660
加一个dol号 这好像不太对啊 噁心啊 对是在这里面啊 我直接的在这里面删除图片

06:30.820 --> 06:31.140
ok

06:31.780 --> 06:37.460
dl image 然后呢 它应该是我们直接删除谁 这一次点

06:37.780 --> 06:40.420
image list的点splease 对不对

06:41.620 --> 06:47.380
splease删除 就是我们的这个锁影值 那这里面添加一个锁影值index

06:47.540 --> 06:50.340
ok 再来试一下 看它是否可行 我们

06:51.380 --> 06:55.060
先上传 对吧 那我第一次上传几张 上传三张

06:55.540 --> 07:01.540
那第二次我们再来看一下 123 然后没问题 再来三张 但此时你再来三张的话

07:01.860 --> 07:07.540
它最后一张肯定是上不去的 因为它最多是不是就五张 对吧 那我现在把这个大猎猫给删除了

07:07.620 --> 07:13.620
然后呢 把这个大熊也给干掉 那现在就剩这个大猎猫和大熊了 对不对 把这个小涂头给干掉

07:13.940 --> 07:20.180
好的 没有问题 是不是 那整个这一块就处理完了 处理完成之后 那这个里面我们就可以进行一个什么

07:20.500 --> 07:24.580
我们图片的这一个上传了 也就是说在你提交反馈意见的时候

07:24.900 --> 07:30.420
你真正的做到一个图片上传 上传成功之后 拿到一个我们上传之后的这个图片地址

07:30.900 --> 07:37.860
并且呢 把这个文本信息一起发通给云寒树 云寒树呢 做一个保存 那整个我们意见反馈的这个功能就实现了啊

07:39.140 --> 07:46.420
好的 我们来实现一下啊 这个三蜜的feedback 是作为我们一个处理 对不对 那我们就回到这个里面啊

07:46.740 --> 07:50.660
回到这个三蜜的feedback 我们要做一点什么事呢 首先

07:51.140 --> 07:58.020
虽然说你这个图片 也就是说你这个提交意见的时候 图片你可能不传 但是我们这个这次点content

07:58.180 --> 08:04.420
也就是说你文本的内容啊 尽量给我传点吧 要不然你这俩都没有 你这次你往上提什么呀 对吧

08:04.820 --> 08:12.420
那我直接优你一点受toss的 如果说你没有的话 那我给你做一个提示啊 抬头 抬头给他一个什么呢 文本内容

08:13.380 --> 08:20.180
不能为空 okay 给完成之后 那我在里面把这个icon给他干掉 那就是icon

08:20.660 --> 08:26.580
如果说都没有内容 那我直接的就给你瑞参调 下面都不知情了 是不是就可以了 对吧

08:26.980 --> 08:33.380
那完成这个之后 那现在这里面要做两件事 是什么呢 上传我们的一个图片

08:33.860 --> 08:37.860
把这个图片又上传了 第二件事是什么呢 提交我们的一个什么

08:38.580 --> 08:40.420
反馈意见 反馈信息

08:40.900 --> 08:45.860
反馈信息 okay 其实我们主要就是做这两件事

08:46.180 --> 08:52.340
那上传图片的时候 我们知道这是一个异不操作 并且呢 我们在前端直传 所以说我们这里面啊

08:52.980 --> 08:55.460
给他做一个什么受loading的一个效果

08:56.340 --> 09:02.420
让他有一个loading啊 处理 然后呢 如果说你传完了 那我们优你点headloading啊

09:02.660 --> 09:09.460
把它再给做一个关闭 那在这个里面 其实我们就可以啊 它的中间就做这个图片上传了 对不对

09:09.700 --> 09:18.260
那我上传图片的时候 首先就是说 我给后端一会儿 我们要提交反馈信息的时候 我们这个里面啊 要有一个数组 那这里面呢 是

09:18.340 --> 09:25.700
url1和这url2 以及我们的这个url3 这种形式 那你有几张图片 就是给我生成这几张

09:26.020 --> 09:31.460
这个几个地址 对不对 那这里面 我们最好是做一个什么呢 我们定一个caus的

09:32.420 --> 09:34.420
fadeback啊

09:35.620 --> 09:41.780
fadeback 我们这里面写一个image list 定义这样一个反馈的图片

09:42.100 --> 09:47.220
数组 那这个数组里面呢 我们因为有好多张图片啊 所以说我们这里面写一个什么

09:47.620 --> 09:50.580
wait 我这里面使用promise.out

09:51.060 --> 09:56.660
如果说你上传成功一张之后 因为你是个异步操作 那我就让你返回一个promise的一下

09:56.820 --> 10:02.580
所以说我在这个里面 这次点get 我定了一个啊 比如说这次点getfile的

10:03.940 --> 10:13.940
id 获取它的这个地址啊 就是这么一个方法getfile的id方法 那我这个里面就是获取图片的上传地址 在这里面写一下

10:14.580 --> 10:19.060
我们这个叫获取上传的一个图

10:20.020 --> 10:25.140
片地址啊 这里面是真正的做事了 那我们直接的这个里面getfile的

10:25.380 --> 10:29.620
因为在这里面一调用 返回一个promise 所以说这里面肯定有一个什么

10:30.020 --> 10:36.020
return啊 那这个里面因为咱们这个是自己设计的吗 所以说你这样写了 那我们直接在这里面

10:36.500 --> 10:41.860
return一个什么呢 我们这一次点image list 返回一个promise的数组

10:42.260 --> 10:47.940
那这个image list 我们通过点map在形式 如果说你有长度对不对

10:48.260 --> 10:54.020
因为刚才我们选择图片的时候 已经保存了一个我们图片的临时地址的这样一个数组

10:54.260 --> 10:59.540
那我这里面就可以通过map item 这种形式 return出来一个什么

11:00.740 --> 11:04.740
我们这里面newpromise对象 那这个promise对象里面啊

11:05.300 --> 11:09.060
这个里面是真正的做每一张图片的什么上传

11:09.060 --> 11:16.340
return 那这个return 我们做点事情啊 这里面我们const result 等于我们的这个

11:16.740 --> 11:20.100
avait 然后呢是调用unicload

11:20.980 --> 11:25.060
unicload 哎呀 写错了啊 应该是unicload的

11:25.540 --> 11:29.460
点一个什么呢 我们直接的upload fail的一个方法

11:29.860 --> 11:34.820
那这个upload fail pump 这里面必须有一个什么呢 必须有一个fail pass

11:35.300 --> 11:37.860
两个是不可缺少的 第一个是fail pass

11:38.180 --> 11:44.500
fail pass就是我们item.ui 对不对 然后呢还有一个什么clodepath 文件的这个名字

11:44.900 --> 11:48.740
文件名字就是我们item.name 是不是有了 对吧

11:50.100 --> 11:57.140
me ok 那你这个时候啊 我们这个里面 result结果就是我们获取到的一个什么上传的这个值

11:57.460 --> 11:59.380
我们可以打印一下 比如说le

12:00.340 --> 12:07.060
result这个结果值 应该是个啥东西啊 但是它上传的时候fade back image ok 没问题啊

12:07.700 --> 12:12.820
我们在这里面能打印的到啊 来再上传一下 比如说这里面我上传两张

12:14.580 --> 12:19.700
点击 然后这里面得给点信息啊 你要不给信息的话都过不去 对不对 提交反馈意见

12:20.980 --> 12:24.660
ok 现在是上传完了 上传完了之后 你看这里面有一个什么

12:25.060 --> 12:31.540
第一张上传成功的suggested true 然后第二张也是suggested true 这里面有它的fail id

12:31.780 --> 12:34.180
fail id呢 就是我们可访问的一个

12:34.820 --> 12:39.860
地址啊 那这个地址呢 我们直接的这个里面就可以拿它进行一个访问了

12:40.100 --> 12:42.820
其实这个里面我们可以试一下 打开我们的这个

12:43.300 --> 12:52.180
云寒数的web控制台刚才上了上传的两张图片 那这个里面啊 我们云存储里面应该是有什么两张图片的 对吧

12:53.380 --> 13:00.420
一张两张刚才是三点三点上传的 应该是这张 对不对 还有一个三点三十四 这两张都是啊

13:00.740 --> 13:05.060
然后这两张图就上传进去了 当然了 我们现在啊 暂时不需要 为了保持这个

13:05.540 --> 13:09.940
我们存储对象里面的这个清洁度啊 把它们上传的先干掉啊

13:11.380 --> 13:16.500
好了 既然咱们说了 你能拿到这两个了 然后并且我们也看到了 这个里面

13:16.900 --> 13:21.780
我们拿到的是fail id和这个fail pass fail id呢 就是我们获取的一个

13:22.260 --> 13:28.660
它保存在我们对象存储里面的一个地址啊 那这个地址呢 我们就给它返回出去就可以了 对不对

13:28.660 --> 13:31.140
看看我们瑞称一个什么 result

13:33.140 --> 13:36.900
点 我们的fail id把它瑞称出去啊 因为刚才这个

13:37.700 --> 13:43.700
也别瑞称出去啊 稍微怨我啊 咱不能瑞称了 对不对 刚才都一直在loading了 其实咱们应该是怎么办

13:44.420 --> 13:47.460
瑞大状态 因为我们在这个里面啊

13:48.020 --> 13:51.780
使用这种promise的形式一直在这调用呢 在这呢

13:52.260 --> 13:56.980
这个里面await promise 刚才一直在loading是因为啥 是因为这个还没执行完成 对吧

13:57.300 --> 14:02.820
你只有这种 result.fail id 把它这个结果只是给输出 那它才能进行一个什么

14:03.140 --> 14:10.260
真正的一个我们的这个promise对象直径完成 对不对 要不然你没给他做瑞大 他一直在这loading啊 因为他

14:10.660 --> 14:13.140
下不去 是不是 好了 那咱们再回来看一下

14:13.940 --> 14:19.060
这次再怎么办 上传两张图片还是啊 我们刷清一下吧 刷清一下来123

14:19.940 --> 14:21.380
一个两个ok

14:22.980 --> 14:25.380
打开打开这里面123点击提交

14:26.340 --> 14:30.660
点击提交之后 它成功了 你看我们也打出来什么两个地址对不对

14:30.820 --> 14:35.380
那你这两个地址都有了 现在咱们说这个fadeback mg list

14:35.780 --> 14:41.220
其实呢 它就可以作为一个什么真正的提交的这个内容了 对吧 也就是说一个图片信息了

14:41.460 --> 14:44.820
那我们这时候既然有它了 那我们就可以获取一个什么

14:45.220 --> 14:48.100
直接的就可以来做事了 那这里面做什么事呢

14:48.420 --> 14:50.900
我们可以进行一个方法调用了 counts的

14:51.860 --> 14:59.060
这里面肯定是给我们显示一个信息 告诉我们这次意见反馈提交有没有成功 对吧 我这里面写一个

14:59.380 --> 15:06.660
这次点dollarhttp 然后呢 我们这里面点一个update下方线 是我们的fadeback

15:07.220 --> 15:13.700
ok 定义这么一个方法 fadeback里面 我们需要传点值 首先呢 我们要把这个内容给传过去

15:14.100 --> 15:15.780
内容呢 就是我们这一次点

15:16.740 --> 15:21.940
把他这次点content给传过去 对不对 然后这个里面谁提交的这个反馈

15:22.340 --> 15:30.900
也就是说当前登录的这个user info 然后呢点下线id 当前登录的这个用户的id 你得给他做一个保存

15:31.300 --> 15:36.740
因为到时候得根据这个id去找你一个人 对吧 优带id保存了之后 那还有一个就是什么

15:36.740 --> 15:40.500
我们定义好的这个fadeback 也就是说反馈的图片集合

15:41.060 --> 15:48.100
把他们几个都给传进去之后 然后我们在这个里面写一下啊 因为已经写的很熟了 所以说我们直接就在这里面

15:50.820 --> 15:55.140
这里面提示一下 提示啥呢 提示就是要上传成功了吧 对吧 title

15:55.380 --> 16:02.340
然后呢 我们在这里面把这个msg给解构出来就可以了 之后呢 我们在这里面定义一下set timeout

16:02.740 --> 16:07.620
你先给人家一个提示信息 当你提示信息赚了一会差不多的时候

16:08.020 --> 16:15.620
那我们直接的就让你什么 有一个界面的跳转就可以了 一般的我们给1.5毫秒对吧 1.5秒啊

16:15.940 --> 16:23.620
然后呢you你点switch 比如说这里面switch type 就让他开始做一个跳转 url 就是我们的一个地址

16:23.860 --> 16:30.980
那地址我们跳转到哪 配置是下面的一个什么self 再给我回到self 界面是不是就可以了

16:31.300 --> 16:37.140
switch type 就是跳转的我们指定导航来开启的这种界面里面 对吧 那这个我们就处理完了

16:37.220 --> 16:42.660
处理完成之后 我们到update的feedback 因为这里面是不是已经上传了 那你上传的时候

16:43.060 --> 16:50.340
我这个uniclode的function 我们新建一个什么 云含数 把这个uploadupdate的feedback来创建一下

16:50.820 --> 16:58.260
但是在创建之前呢 其实我们这里面是这次点dollar atp的 对不对 那所以说你这个阿甲克斯也得处理一下 我们把这个

16:58.820 --> 17:02.580
阿甲克斯来定一下 到这个里面 阿甲克斯api

17:03.060 --> 17:08.420
然后呢 是我们的interface 这属于有点的 是吧 那我们直接在这个里面啊

17:10.340 --> 17:14.340
这个叫什么呢 叫我们的提交反馈意见 提交

17:15.620 --> 17:21.220
反馈意见 我看想了想了之后 在这里面expot constant

17:21.620 --> 17:28.500
我们的update fadeback 等于我们的data 然后是阿甲克斯 这里面是name

17:29.460 --> 17:34.660
跟他同名就可以啊 name然后是update fadeback好了data

17:35.140 --> 17:40.740
搞定之后呢 这时候云含数 我们就可以来进行一个定义了 把这些没用的先干掉啊

17:41.140 --> 17:44.500
云含数都干啥呢 其实这个云含数啊 相对就比较简单了

17:44.820 --> 17:48.980
我们直接就获取数据库的一个引用 并且呢给他提交到我们的这个

17:49.380 --> 17:57.300
评论的这个表里面就可以了 首先呢 我们获取一个const db等于我们的uniclode的点data

17:57.540 --> 18:05.060
被子 我看获取引用之后 那咱们就来使用啊 首先呢 把前端拿过来的值 咱们都给接收一下

18:05.460 --> 18:10.260
user id 第一个 是不是 然后还有一个是fadeback

18:11.460 --> 18:15.620
image list 图片的这个列表 然后还有一个我们的content

18:16.180 --> 18:20.020
等于什么呢 event 从这个event里面进行获取

18:20.740 --> 18:26.180
获取之后 那我们这里面就定一下avate 然后呢 db.collection

18:27.380 --> 18:33.860
collection 我们找一个表啊 叫什么fadeback表 如果说这个表你没有他自己啊 就来给你创建啊

18:34.180 --> 18:39.220
爱的 这个和我们mongles 是非常像的 爱的 我们这里面添几个值啊 user id

18:39.220 --> 18:42.980
user id呢 我们就把这个当前前端获取的udo id给他

18:43.540 --> 18:48.740
传递过去 然后之后是什么呢 我们的这个fadeback mg list

18:49.380 --> 18:53.540
然后这个有了之后 我们再把这个content给他做一个返回

18:54.500 --> 18:57.700
之后 我们return的时候这里面code

18:58.420 --> 19:03.780
写一下code 是一个什么 0 data 我们订一个msg

19:04.500 --> 19:11.300
msg 这里面写一句什么话呢 叫提交反馈意见成功啊 或者是提交反馈成功也可以啊提交

19:11.940 --> 19:14.420
反馈成功 好的

19:15.140 --> 19:18.420
定义完了 定义完了 那我们就来试一下 来 我们看一下

19:18.820 --> 19:25.140
首先我们云存储这个先看云收据库 我这里面之前做测试的时候已经定义了一个fadeback

19:25.540 --> 19:28.740
然后这里面有一些信息 那打算呢 我们直接的我可以这样

19:29.140 --> 19:32.500
把它也干掉啊 因为这里面的这个fadeback也没有任何意义啊

19:32.980 --> 19:38.420
呀哈 这个里面删除的比较多了 只删一个就可以啊 把这个表给删除fadeback

19:40.100 --> 19:45.460
好了 fadeback表删除了此时 我们这个刷写里面他是没有这个的啊 然后我们提交一条啊

19:46.420 --> 19:49.700
第一条 第一个啊 反馈意见

19:50.980 --> 19:58.980
好的 这里面传一张图片吗 因为咱们刚才做了 已经这个图片是可以 没问题的哈 打开打开之后提交反馈意见

19:59.940 --> 20:04.420
加载中 这时候是上传图片啊 有一个上传图片的过程

20:05.380 --> 20:07.940
上传图片的过程update fadeback

20:08.660 --> 20:11.540
现在修改这个update 可以了 是吧

20:12.020 --> 20:15.620
里面有爆错了 500 那咱们看一下是爆错原因是啥

20:16.820 --> 20:19.940
他居然有爆错 every time out 请求超时了

20:20.740 --> 20:24.420
这个有点问题了 那咱们看一眼啊 我刷新一下

20:25.220 --> 20:31.700
超时了 这个有点难搞了 怎么办 重新来一遍啊 刷新 刚才不算 比如说第一条

20:33.700 --> 20:40.500
反馈意见 好的 这里面我再给他添加一个 两个 添加两张图片吗 这回

20:41.060 --> 20:41.860
然后走你

20:43.700 --> 20:47.540
这回就快得很了啊 然后提交反馈意见成功 刷刷刷很快的

20:47.540 --> 20:51.140
然后直接过去了 过去之后咱这有个爆错啊 爆错是什么

20:51.700 --> 20:56.180
配置是下面的self self 占路径无法在路由表中找到

20:56.740 --> 21:03.940
配置是下面的self self 他说没找到对吧 没找到这个事他就没挑转了啊 那这个事倒是小事了

21:04.740 --> 21:09.060
啊 这写错了se lf 对不对 self self 这个是

21:09.540 --> 21:15.300
刚才我写的有点问题啊 好的 咱不考虑这个事 先把这个数据库这个咱们看一下 我们刷新一下啊

21:16.340 --> 21:22.260
嗯 add the back fade the back ok 刷新一下之后就有了 有了之后 那我们在这个里面来看一下

21:22.820 --> 21:29.060
第一条反馈意见 其实也上来了啊 然后这是第一个反反馈意见 然后第一条反馈意见

21:29.380 --> 21:35.620
其实我们两条都已经上去了啊 然后这里面有content user id 但是这个里面缺了一个什么

21:36.020 --> 21:42.100
img list 也就是说图片没上去 那不对啊 对吧 我们得找一下啊 这个里面是到哪

21:42.660 --> 21:50.180
到我们的这个配置点接层的就不用了 咱们到这个youter interface 也不用 到index里面叫fade back

21:51.460 --> 21:53.380
fade back image list

21:55.220 --> 22:01.300
ok 很有可能是什么呢 我们这个没过来啊 那我们找一下这个self里面

22:01.860 --> 22:04.500
到self里面我们传递的时候在这

22:05.620 --> 22:10.420
如果说啊 到fade back里面 到fade back里面 我们这里面有一个

22:11.620 --> 22:17.460
呃 写的这明天不太对吗 这个叫fade back b a c k 然后这个里面叫什么

22:18.020 --> 22:25.460
fade b a c k 啊 这个缺了一个什么 缺了一个c啊 这个是我的问题 好的 那咱们再来试一下

22:25.860 --> 22:28.420
这两条呢 因为比较少啊 我们直接就给它干掉了

22:29.940 --> 22:31.060
看一下是否可行

22:31.780 --> 22:42.500
这个数据库加载的时候 为什么比较卡顿啊 好的 两个都干掉之后 那我们重新的进行一个数据的上传

22:43.060 --> 22:46.500
这个里面 比如说测试反馈意见

22:48.940 --> 22:52.940
反馈意见之后 这里面传两张图片吧 一个 两个

22:53.420 --> 22:56.220
好的 我打开 打开之后提交反馈意见

22:56.780 --> 23:01.820
提交反馈意见成功 并且挑转过去 挑转过去之后 那这里面我看一下fade back

23:02.300 --> 23:06.140
刷新一下 这里面有一个fade back里面 有两张图片的地址 对不对

23:06.540 --> 23:12.300
然后呢 我展开 展开了之后 这里面应该是可以访问的啊 咱们在这里面访问一下 okay 走你

23:13.020 --> 23:16.700
是不是有了 因为什么 如果说你上传正功之后 我们云存储里面

23:17.180 --> 23:19.980
肯定是会把你给接到的 对不对 所以说这个里面啊

23:20.460 --> 23:24.060
又有好多了 那这个测试的时候 你今天让你多删一下啊

23:24.460 --> 23:28.620
否则呢 如果说这个你要不多删的话 因为这个它是不支持上的呢

23:28.940 --> 23:31.980
不支持我们多条删除的 到最后就会很酸闯

23:32.300 --> 23:35.820
所以说呢 尽量你做测试的时候 手动同步的

23:36.140 --> 23:41.500
把我们这个里面的内容啊 尽量能多删除的 给多删除一些 否则别让它保留太多了啊

23:43.340 --> 23:47.820
好了 那这个咱们就处理完了 处理完了之后 这里面还有一个问题 是啥问题呢

23:48.300 --> 23:53.180
比如说 你看我们现在已经回来了啊 刚才在这个意见反馈的界面 我们把这个

23:53.660 --> 23:57.100
反馈内容也提交了 也有一个上传图片的这么一个操作

23:57.500 --> 24:01.900
其实呢 我们这个里面还有一个隐藏功能 我不知道同学们看没看到过

24:02.620 --> 24:07.900
你看我这里面点击独一讲师团队 那我在这里面换一张图片 假如说现在换成啊

24:08.300 --> 24:13.020
大雄这个图片 那我这里面 其实它是可以什么 调整我们的这个

24:13.420 --> 24:17.820
头像的 也就是说你可以把自己的头像觉得不满意 我们也可以调整一下

24:18.140 --> 24:19.500
同时呢 我们这个里面

24:20.380 --> 24:24.780
把这个就是你当前这个用户发布文章的相关的这个头像信息

24:25.180 --> 24:27.980
你也给他改掉了 然后给前团做一个同步

24:28.300 --> 24:34.140
然后这个里面 但是我们有一个 我们意见反馈的这一块 意见反馈这一块 我们就不处理了

24:34.380 --> 24:40.060
那我们只处理什么呢 这个用户的一个发布的文章的头像更改 还有我们当前用户信息里面

24:40.460 --> 24:44.380
一个指定头像的更改 那这两个呢 我们是都要处理一下的

24:45.740 --> 24:52.620
好的 那这个怎么来做呢 我们就回来啊 继续我们的这个代码 回到我们什么呢 这个里面就回到我们self里面了

24:52.940 --> 24:57.100
self里面 我们要是要做这个头像上传的话 那应该是在哪

24:57.500 --> 25:00.300
就是在我们当前登录状态 点击我们这个

25:00.700 --> 25:03.580
头像logo的时候 那我们这里面就可以做了啊

25:04.380 --> 25:07.580
找到我们my header logo box 对吧 是他

25:07.980 --> 25:12.940
然后给他添加一个点击时间 add click 那我们就称之avata

25:15.290 --> 25:19.290
称之avata之后 那我们这里面就定义啊

25:19.770 --> 25:22.650
来往下走 往下走 称之avata在这个里面

25:23.210 --> 25:29.690
好的 在这 嗯 称之avata我们干什么呢 这里面给大家写一个注释 这个叫提换用户

25:30.410 --> 25:35.130
头像啊 这个就专门的叫做替换用户的头像了啊

25:35.530 --> 25:40.970
然后呢 我们这里面 那你替换头像首先第一步我们得选择图片对吧 那我们就使用

25:41.610 --> 25:43.530
这个里面you 哎呀没改了啊

25:44.090 --> 25:45.530
好了 干了 you need a

25:46.490 --> 25:52.250
truth image 这种形式对吧 选图片 首先呢他替换用户图片

25:52.730 --> 25:58.810
他的一个count一定是几啊 是11对不对 那所以说这个跟我们上传意见反馈兆还是有点不一样的

25:59.210 --> 26:03.050
so size 同样的是一个sync 意义不操作 这里面有一个

26:03.610 --> 26:10.090
re s 我们在这里面做一个打印 那这里面我们获取一个什么呢 file path

26:11.530 --> 26:17.210
file path 等于一个avate 然后我们这里面使用一个zc.upload的方法

26:17.530 --> 26:18.010
啊

26:18.730 --> 26:22.810
因为这个你是直接真正的就上传了 所以说我们这里面订一个upload的

26:23.290 --> 26:30.570
file 方法 那我们直接的把谁传过去 我们把这个file path 就是我们拿回来的真正的一个获取到的

26:30.970 --> 26:36.410
你上传的后端的这个地址啊 就ok了 这里面呢 我们re s点template啊

26:37.530 --> 26:45.050
template这个里面file path 我们获取他的地零像对不对 然后还有一个re s点template

26:45.530 --> 26:50.010
file 下面的地零像之后的点 name 也就是说把它的这个

26:50.490 --> 26:54.650
我们这个图片对象和这个图片的这个文件名都给拿过来

26:55.050 --> 26:59.450
拿过来之后我们这里面就是uploadfile了 那我就定义一下这个uploadfile方法

27:00.010 --> 27:04.010
这个就非常好写了啊 然后呢我这里面写一个async

27:06.090 --> 27:11.690
asyncuploadfile 这里面我们就开始写了 这里面给大家写一下这个叫什么

27:12.010 --> 27:15.850
这个叫上传图片啊 上传图片 ok

27:16.570 --> 27:22.170
嗯 放到这个里面 我们asyncuploadfile 我们都做一下什么事呢 其实也是获取到什么

27:22.570 --> 27:25.210
我们的这个file id啊 那我们就给它解构出来

27:25.850 --> 27:29.930
file id应该是大写的啊 等于一个什么的avait

27:30.330 --> 27:35.130
avait这里面就是我们uniclode 使用uniclode前端直传的方式

27:35.690 --> 27:41.450
apoloadfile 这里面有两个必选的参数 一个叫file path

27:41.850 --> 27:46.410
那file path呢 是谁呢 这里面我们就可以定义一下吧 对吧 file path就叫

27:47.050 --> 27:51.850
file path了 ok 这是第一个 然后还有一个谈数叫什么clod path

27:53.930 --> 27:57.210
clod path 这里面写错了clod path ok

27:57.690 --> 28:03.370
那这个呢 我们为了方便 这里面我们第二个值 直接就给它命名为什么clod path

28:04.170 --> 28:07.930
如果说你这个拿到了之后 那我们怎么办 我把你给return出去啊

28:08.250 --> 28:14.010
把这个file id给你return出去 因为这个是加个sync了 那它默认就是一个什么promise对象 对不对

28:14.330 --> 28:17.210
所以说呢 我直接这里面就可以使用这种avait形式

28:17.690 --> 28:23.930
返回它这个resa 状态 对吧 那这个里面既然有了之后file path 我这里面就可以做什么

28:24.330 --> 28:28.890
往后端上传的这么一个操作了 对不对 那我直接呢 咱们先打印一下啊

28:30.010 --> 28:36.650
const 我们直接的打印一下一个file path 好吧 把这个file path先打印啊

28:37.450 --> 28:44.410
咱们看到能不能上传成功啊 咱们直接在这个里面 我点击上传 注意啊 这是个大熊对吧 那我换成doraim

28:45.530 --> 28:50.810
ok 这里面是不是应该是有一个地址啊 然后open link in new type 就应该是我们这个doraim

28:51.290 --> 28:55.770
你上传成功之后 那你这时候你就要通知我们的什么云寒书修改什么

28:56.010 --> 29:03.450
我们用户的信息 以及文章里面保存的我们作者的一个图片 对不对 那这里面我们就可以写一下avait

29:04.170 --> 29:10.490
调用一个方法 叫什么呢 这一次点 比如说我们updata这个叫user

29:12.250 --> 29:12.650
avaita

29:13.610 --> 29:21.770
好的 那把这个file path给传过去啊 这个file path干嘛呢 就是作为我们真正的要替换的这个图片的信息

29:21.770 --> 29:30.330
对不对 在这个里面上传图片 然后我们这个是更改用户的一个什么更改用户及

29:31.050 --> 29:40.490
文章的及发布文章的一个头像avaita对吧 这里面肯定是有一个sync

29:41.210 --> 29:44.810
这因为有promise对象吗 对不对 那我们直接在这里面写一下啊

29:45.690 --> 29:52.410
我们还要同事同样的拿到一个什么呢 拿到一个msg后端给返回的 我这里面就定一下

29:53.130 --> 30:02.730
msg 等于一个什么avaita 这次点dollerhttp 然后呢点定一下updata 我们这里面是user avaita

30:05.210 --> 30:09.530
好 updata user avaita 这里面得传点纸啊 首先呢 我们这个user

30:10.410 --> 30:19.210
id 是肯定得传过去的 因为我得通过这个找到我们指定的用户 对吧 那我就是这一次点user info 点下个线 id

30:19.530 --> 30:26.570
好的 这是第一个纸 那新的我们头像的地址啊 也就是说我们对象存储里面 给我们认设一个地址

30:26.970 --> 30:32.570
你也得给它发回去啊 如果说这些都搞定之后 那我们就可以用一点shortost 对吧

30:33.050 --> 30:38.650
shortost 我们这里面是一个什么呢 是title title呢 就是我们的这个msg ok

30:39.530 --> 30:41.370
icon呢 icon给的干掉吧

30:42.250 --> 30:48.250
icon是一个now ok 这个就处理完了 处理完成之后 那这里面最后一步 我们一会做这个是什么

30:48.730 --> 30:52.170
修改我们本地的一个就是微查数据啊

30:54.090 --> 31:00.890
里面的用户数据 对吧 当你这些都做完之后 其实呢 我们把这个服务器修改完了 那为了

31:01.370 --> 31:07.530
数据的同步 我们不需要从后端再反复用信息了 其实我们知道只修改了一个什么文件的地址对不对

31:07.850 --> 31:09.290
那我这里面就可以本地的

31:10.170 --> 31:16.650
把我们微查的数据给修改一下 那这里面就写完了吧 其实也没什么玩了 那我直接这次点updata

31:17.130 --> 31:28.170
我们这个updata有一个什么 user 因为common米新里面是不是写了 这次点updata user info 那我们这里面就给他来写一下吧

31:28.490 --> 31:36.170
首先点点点 我们这次点 user info 这是第一个指的 对不对 然后呢 我们再给他做一个展开

31:36.730 --> 31:40.650
呃veta 把后面的后面的给覆盖掉

31:41.610 --> 31:50.010
覆盖掉前面的 那我们把这个avata这个属性给的换了 叫什么file pass 是不是就可以了 对吧 也就是说这个file pass

31:50.330 --> 31:56.010
ok 那这些都搞定之后 那我们就来订一个云海朔 订云海朔之前 我们先把这个方法给写一下

31:56.570 --> 31:59.530
在阿迦克斯里面updata user avatar

32:01.130 --> 32:05.530
在哪里写 在我们的user interface里面啊 这里面叫

32:06.490 --> 32:08.410
更改用户的头像啊

32:09.290 --> 32:11.690
更改用户的头像

32:12.490 --> 32:16.010
嗯 这里面是expot const

32:16.570 --> 32:22.410
updata user avatar等于我们的data 然后呢 这里面是有一个阿迦克斯方法

32:23.130 --> 32:28.890
写一个内幕 内幕里面就是我们这个名字 之后呢 就是我们的这个data

32:29.370 --> 32:32.810
好了 定义完成之后 那就开始进行云海朔的创建

32:33.290 --> 32:36.250
回到这里面 新建云海朔 ok update

32:36.970 --> 32:42.890
user avatar 定义好了之后 那我们就在这个里面来写一下 首先获取数据库的引用 对吧

32:43.210 --> 32:48.010
这个呢 我们刚才都写过啊 直接就来写了uniclode的data base

32:48.490 --> 32:51.450
获取数据库引用之后 那我在这个里面做什么呢

32:51.930 --> 32:56.090
前端的韩数给接啊 前端的参数接一下 那这里面就是

32:56.650 --> 33:01.930
const 我们来接一下 这里面都有什么user id 对吧 还有一个是什么呢

33:02.170 --> 33:08.650
我们的这个failpass 等于我们的这个event 从event里面进行获取

33:09.050 --> 33:14.250
好的 那你处理完成之后 这里面有两个操作 第一个是什么 更新我们的这个用户

33:14.650 --> 33:18.890
然后投向的一个操作 这是第一个 第二个呢 我们是

33:19.370 --> 33:22.810
更新我们文章里面的一个什么

33:23.930 --> 33:27.370
作者投向的一个操作

33:28.330 --> 33:32.330
最后呢 我们还可以扩展一个小操作啊 扩展一个什么小操作呢 在这个里面啊

33:32.570 --> 33:37.690
如果说你更新完用户投向的操作了 然后包括文章里面作者投向操作 你也更新完了

33:37.930 --> 33:41.530
我们这里面判断一下啊 比如说我们判断一下

33:42.170 --> 33:45.290
之前的一个什么用户投向

33:45.770 --> 33:51.530
是否包含在 比如说包含在什么呢 我们的这个对象存储

33:52.410 --> 33:57.770
里面啊 如果说有 那怎么办 如果说有的话啊 直接的 我们给

33:58.250 --> 34:02.250
他进行一个删除的操作

34:02.650 --> 34:08.810
也就是说把他给干掉了就可以了 对不对 那这里面其实主要做这三件事 最后呢给前端返回就可以了

34:09.050 --> 34:11.930
前端返回指我们其实现在都可以掀起啊 因为啥呢

34:12.250 --> 34:16.970
这个里面咱们已经形成不成文的规矩了 对不对 不管怎么着都让他成功

34:17.290 --> 34:22.970
扣的零 我们data这里面有一个msg 那这个叫什么修改投向成功 对吧

34:24.090 --> 34:30.090
好的 那这个里面都写完成之后 那我首先第一步 更新用户投向的一个操作

34:30.410 --> 34:37.770
那更新用户投向操作 首先你得把这个用户找到对不对 那我这里面就写一下conce的user 等于一个什么的aveta

34:39.610 --> 34:43.450
aveta这个里面我们就来写一下 db.collection

34:43.770 --> 34:48.090
db.collection这里面使用一个什么user啊 然后呢 我们点dals

34:48.650 --> 34:52.410
使用这种user id 唯一的形式来给他进行一个查找

34:52.890 --> 34:58.010
找到之后user.dals有点id点get 那你找到之后呢 我们这里面得获取一个什么

34:58.250 --> 35:01.290
他之前的这个投向 那也就是说you o的uil

35:02.090 --> 35:07.610
投向地址 那等于user.data下面的一个零 然后呢点aveta

35:08.570 --> 35:15.370
好吧 把他之前的这个地址给拿到啊 然后拿到之后 我们这里面 其实这个老的就没有用了 对吧

35:15.690 --> 35:22.650
没有用怎么办 我们就给他删除办 但删除有的时候呢 原来这个地址啊 五花八蛮有可能是什么呢 他不是我们这个

35:23.130 --> 35:26.410
对象存储里面的这个地址 所以说我们怎么办 我们这里面就是

35:26.890 --> 35:29.130
给他做一个容错处理 trycatch

35:29.850 --> 35:33.450
啊 我们试着给他做一个删除啊 这里面就是

35:34.090 --> 35:35.210
来 把他放到这里啊

35:35.850 --> 35:40.410
嗯 删除怎么删除呢 其实我们这里面就可以通过aveta 然后呢 我们

35:40.890 --> 35:46.330
you need to load 咱们之前也说过删除图片怎么做 对不对 那我们就可以delete fail的形式

35:46.650 --> 35:50.970
那我这里面写一个fail list ok fail list 的呢 就是我们的这个

35:52.250 --> 35:53.050
uil

35:54.490 --> 35:58.570
也就是把老的这个地址啊 咱们直接在这里面给他删除 但是有可能

35:59.050 --> 36:03.850
你是会报错的 所以说我们在这个里面 假如错了 那我打印一下错误之志就可以了 对不对

36:04.090 --> 36:10.170
你不闪 如果说你找不到 那找不到他这里面就报错了 报错啊 直接的那我这个点中错处理就ok了

36:10.410 --> 36:16.330
这是第一个 那我们接下来啊 先来把这个更新文章里面 做着头像的一个操作啊

36:16.890 --> 36:20.730
啊 不是更新用户头像的操作 那咱们在这吧

36:21.130 --> 36:24.010
找到用户之后还是先做的这个啊 其实无所谓的事啊

36:24.410 --> 36:26.890
咱们先做哪个都可以啊 那我先把这个

36:27.290 --> 36:29.130
用户的头像给更新一下

36:29.690 --> 36:35.930
怎么更新呢 我这里面看似他 然后呢 这里面 我们直接的avait他就可以了

36:36.890 --> 36:43.450
avait我们db.collection 然后呢找到我们的这个User数据表 之后呢.doc

36:43.850 --> 36:46.090
这个里面就是我们的一个UserID

36:47.210 --> 36:49.690
然后呢 我们使用一个点updata

36:52.120 --> 36:58.120
updata方法 然后给他来做一个更新啊 更新谁 更新我们的这个

36:59.080 --> 37:05.320
avaita属性 对不对 avaita属性变成什么呢 变成我们的这个file pass 这不是新的地址啊 对吧

37:05.560 --> 37:08.680
那我们直接就给他 哎呀 放到那去了 直接这个是更新了

37:09.080 --> 37:14.120
然后文章这个里面怎么更新啊 这个文章里面呢 其实和他做法差不多

37:14.520 --> 37:18.840
avait db.collection 然后这里面写一个article

37:19.560 --> 37:24.920
article.doc这个就不行了 因为咱们也不是说根据文章的指定ID对不对

37:25.320 --> 37:31.320
那我们直接这个里面啊 就可以使用一个什么点vail的形式啊 vail的形式呢 我们这里面首先

37:31.880 --> 37:35.080
找到他之后呢 我们再做一个什么点vail之后

37:35.480 --> 37:38.680
我们这里面再点updata去修改 是不是就可以了

37:38.920 --> 37:42.840
也就是说那修改的时候 我们把这个用户的头像给干掉就可以了啊

37:43.240 --> 37:47.160
那这里面啊 我们vail查询条件是什么呢 我们得上这个里面啊

37:47.560 --> 37:51.480
这里面有抱错 咱先不考虑啊 直接这里面一切喜欢他再说

37:52.440 --> 37:54.760
先回到我们的那个云数据库里啊

37:56.120 --> 37:57.240
咱们看一下article

37:57.800 --> 38:03.160
其实article里面这里面保存的这个指肯定是跟我们有关系的 你看这里面有一个Also

38:03.560 --> 38:10.440
Also有一个什么的ID纸啊 这里面叫8010388对不对 就是第一个Also点ID

38:10.840 --> 38:12.360
然后呢 我们看一下youter

38:12.760 --> 38:17.400
youter里面其实他也有一个ID纸对不对 那也就是说你这个

38:18.040 --> 38:23.800
文章的AlsoID跟我们用户的ID匹配了 那说明这个文章就是我们自己写的对不对

38:24.040 --> 38:26.600
也就是说当前这个用户写的 那你改就可以了啊

38:26.840 --> 38:32.120
所以说呢 这里面咋办啊 我现在还得得一个纸啊 得一个什么纸呢 我们把这个ID给获取到

38:32.200 --> 38:35.160
但是为了看着这样方便 我在这里得一下嘛

38:35.400 --> 38:36.440
couns的ID

38:37.080 --> 38:39.240
等于youter.data对不对

38:39.960 --> 38:44.760
点data下面的地零下 然后呢点一个什么ID 那这样就获取到了

38:45.080 --> 38:50.760
获取到这个ID之后 那我查询条件就可以使用什么呢 我们这个都知道用Also

38:52.120 --> 38:55.320
点ID来进行查询啊 然后这里面写一个ID

38:55.640 --> 39:01.720
你找到之后修改一个什么 修改我们的这个Also.avita对吧

39:02.040 --> 39:10.200
把他给做一个更改啊 那我们直接Also.avita改成什么呢 改成我们这个file

39:10.520 --> 39:15.480
是不是这样就可以了 对吧 这个呢 就是我们整个一个操作啊 里面做了

39:16.040 --> 39:20.040
一共啊 大的事情做两件 一个是把我们用户表里面的这个头像改了

39:20.280 --> 39:25.640
还有一个是文章表里的头像改一下 顺带着呢 我们删了一下什么呢 就是原来在

39:26.040 --> 39:28.360
保存在我们对象存储里面的旧的图片

39:28.760 --> 39:34.200
因为你既然都已经改了 两个地方都改了 然后其实实际意义也不大了 那我直接就给你干掉

39:34.600 --> 39:44.040
这样保存到我们对象存储里面的一个情节度啊 要不然你看我们这个云存储 原来用户的头像他都给删了 说明他也不想要了 对吧 那咱们就给他干掉就可以了

39:44.680 --> 39:47.800
这样把这个也处理掉啊 咱们一会做来做测试就可以了

39:48.760 --> 39:52.280
好的 我们看一下吧 咱们这个里面爆错的原因是个什么事啊

39:53.160 --> 39:53.640
啊

39:54.360 --> 39:58.360
我们这个爆错在哪呢 a sync 更改用户头像

39:59.240 --> 40:05.720
嗯 更改用户头像及发布信息 那咱们找一下吧 这里面这个简单了 try catch

40:06.680 --> 40:12.040
哎 不是啊 这是前台的啊 前台的找到self 更改用户头像

40:12.680 --> 40:18.200
注释没有加印号是吧啊 不是注释啊 是注释没有加那个什么加反气盖啊

40:18.840 --> 40:22.440
好的 那我们来试一下吧 试一下咱们回到这个大熊这块

40:23.080 --> 40:30.520
现在呢 我们这个里面是没有任何内容的 我这里面给他改成一个什么呢 改成一个小老头这一块啊 点击打开

40:31.800 --> 40:37.160
有一个爆错 fail pass is now defined 我看一下是后段爆错吗 还不是后段爆错啊

40:37.640 --> 40:42.120
是我们前段的爆错 那咱们直接的self will 178号

40:42.680 --> 40:48.600
找到他 fail pass fail pass这个里面 我们没有给传过来对吧 那这个事就尴尬了

40:49.000 --> 40:52.760
所以说我们update的时候这个里面有了一个 fail pass

40:53.320 --> 40:56.920
那我们这个里面得接收一下 所以说这块处理一下

40:57.400 --> 41:01.560
ok 再来 然后再还是这个小老头选择一下 打开

41:03.740 --> 41:10.860
上传 头像修改成功 那头像修改成功之后咱们刷新一下云数据表啊 然后呢 我们这个对象存储里面

41:11.580 --> 41:16.380
回到这个 我们云存储这里面刷新一下 应该是有一个两张

41:16.940 --> 41:23.980
两张刚才有一个这里面有一个三点半的 三点半应该是这个 我们看一下是不是这个小老头吧

41:24.460 --> 41:29.820
应该没错 这样我们把他给干掉啊 因为他可能是我们之前的 对吧 刚才没有刷新

41:30.140 --> 41:35.260
现在我们看是只有一个小老头 这个是呢 我们之前文本的一个apk啊 这个不需要删除

41:35.820 --> 41:41.900
然后这里面这个小老头 我们有了 有了之后呢 我们怎么办呢 因为他现在已经存储到我们对象存储里面了

41:42.220 --> 41:47.660
我们就看一下他是否 就是说我们在替换的时候 他能不能给做一个更改啊

41:48.460 --> 41:53.900
之后呢 你看我们这个数据库里面 其实也啊 我们这个本地存储里面 他这个也是给更改了

41:54.540 --> 42:02.060
应该是也是这个小老头 是不是啊 C4 C8e啊 我们看一眼这个云存储 C4 C8e对不对

42:02.380 --> 42:06.940
哎 C94B38e 94B38e这个

42:08.380 --> 42:10.380
不太对啊 这里面是大雄

42:11.100 --> 42:19.580
那这个值不对啊 我们看一眼啊 这个值是没问题的 刚才我看的是这个id值啊 而不是说他的这个文件路径啊

42:20.060 --> 42:24.540
C14C8e啊 C14C8e 那我们再回来看一下本地这个

42:25.100 --> 42:31.980
C14C8e ok没错 没错之后现在我就来调整啊 把这个改掉啊 改掉什么呢 我们给他替换一下

42:32.060 --> 42:35.180
替换一下云存储里面 这个肯定得Pass掉对不对

42:36.380 --> 42:43.180
Pass掉之后 那我们直接的换成我们自己的重新上传的一张图啊 换成这个大雄吧 把大雄放上去啊

42:43.980 --> 42:49.580
这里面替换加载中修改投降成功 大雄 这个里面肯定是换了 因为他有地址

42:50.940 --> 42:55.420
这个是8420 f0 830 f0这里面我刷新一下

42:56.140 --> 42:59.900
刷新一下两张图片 原来的那张应该是没有了 这里面

43:00.300 --> 43:07.180
8420 f0对吧 这是没问题的 没问题之后 那我们再回到这个什么呢 我们的这个云数据库里面

43:07.580 --> 43:10.780
云数据库里面 我们看什么 看文章这个里面改没改掉

43:12.380 --> 43:21.580
到奥斯尔里面 这个是我们的Eveta展开8420 f0对吧 都没问题 文章这也改了 然后我们优点表里面的这个

43:22.060 --> 43:26.060
也应该是改了 8 420 f0看一下Eveta的地址

43:26.780 --> 43:35.180
找到我们的这个Eveta 然后展开8420 f0对吧 那整个的这个我们用户更改图片的这个业务逻辑就处理完了

43:36.700 --> 43:43.900
好了 到这里呢 我们基本上所有的这个模块 那我们现在都告一段落了 也就是说制作的差不多了

43:44.220 --> 43:49.740
那接下来是要做什么呢 就开始我们最后一个环节了 那就是进行一个打包的发布

43:50.060 --> 43:54.380
包括我们小程序的打包 h5的一个打包 然后以及我们的这个

43:54.700 --> 43:59.180
app的一个打包 app这一块我们只做安卓的一个打包 因为is这一块

43:59.580 --> 44:01.980
他要求我们呢 必须得注册成我们

44:02.940 --> 44:09.580
年制度的一个会员啊 所以说这个呢 对同学们实现起来是比较麻烦的 那这个里面怎么办呢 我们暂时可以忽略掉

44:10.700 --> 44:16.780
然后呢 我们只做这种小程序和这个app 以及h5w的一个打包就ok了啊

44:17.260 --> 44:19.100
好的 那我们本节课先到这里

