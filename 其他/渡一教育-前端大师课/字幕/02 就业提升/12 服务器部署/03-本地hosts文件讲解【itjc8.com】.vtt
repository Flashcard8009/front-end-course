WEBVTT

00:00.940 --> 00:03.940
好的同学们 刚才我们给大家讲了

00:03.940 --> 00:07.940
域名、IP地址以及DNS服务器

00:07.940 --> 00:09.940
他们之间的一个关系

00:09.940 --> 00:13.940
我们知道域名和IP地址是一一对应的

00:13.940 --> 00:15.940
这个一一对应关系

00:15.940 --> 00:19.940
通常来讲是在DNS服务器里面进行对应的

00:19.940 --> 00:21.940
但这个叫域名解析

00:21.940 --> 00:22.940
就是把你的域名

00:22.940 --> 00:24.940
然后和IP地址进行一个对应的关系

00:24.940 --> 00:25.940
放在这里面来

00:25.940 --> 00:26.940
这个过程叫解析

00:26.940 --> 00:29.940
后面我们会详细做讲解这个步骤

00:29.940 --> 00:31.940
那当我们这个DNS服务器里面

00:31.940 --> 00:34.940
有了你域名和IP地址的对应关系之后

00:34.940 --> 00:37.940
瀏覽器里面在访问我们域名的时候

00:37.940 --> 00:40.940
就会首先去DNS服务器里面找到域名

00:40.940 --> 00:42.940
他对应的IP地址

00:42.940 --> 00:45.940
然后才会把你对应的网页请求

00:45.940 --> 00:47.940
发送到我们这个IP地址

00:47.940 --> 00:49.940
所对应的服务器去

00:50.940 --> 00:52.940
这是我们刚才给大家讲的

00:52.940 --> 00:56.940
整个域名的和IP地址的关系

00:56.940 --> 00:59.940
那么其实除了DNS服务器之外

00:59.940 --> 01:02.940
在我们本地的计算机里面

01:02.940 --> 01:04.940
还有一个小东西

01:04.940 --> 01:07.940
也能起到类似于DNS服务器的

01:07.940 --> 01:08.940
这么一个功能

01:08.940 --> 01:09.940
这个文件叫什么呢

01:09.940 --> 01:11.940
叫hosts文件

01:11.940 --> 01:13.940
不论你是Windows电脑也好

01:13.940 --> 01:14.940
还是Mac电脑也好

01:14.940 --> 01:16.940
它里面都有这个文件

01:16.940 --> 01:17.940
叫hosts文件

01:17.940 --> 01:18.940
那这边呢

01:18.940 --> 01:20.940
我的笔记里面给大家写了

01:20.940 --> 01:22.940
就是本地hosts文件

01:22.940 --> 01:24.940
就是这个HOSTS文件

01:24.940 --> 01:25.940
Windows下呢

01:25.940 --> 01:27.940
是在这个路径里面

01:27.940 --> 01:28.940
SYSTEM32

01:28.940 --> 01:30.940
Drivers Attic

01:30.940 --> 01:32.940
然后下面有这个hosts文件

01:32.940 --> 01:33.940
然后在Mac下呢

01:33.940 --> 01:34.940
就路径比较短

01:34.940 --> 01:36.940
就是根部路下面的Attic

01:36.940 --> 01:37.940
下面的hosts

01:37.940 --> 01:38.940
ok

01:38.940 --> 01:39.940
那接下来我用的是Mac电脑

01:39.940 --> 01:41.940
所以我打开我Mac下的

01:41.940 --> 01:45.380
hosts文件给大家看一下

01:45.380 --> 01:46.380
然后呢

01:46.380 --> 01:48.380
我这边用这个冰机器来打开

01:48.380 --> 01:50.380
当然这个得有权限

01:50.380 --> 01:51.380
你得用超级管理员权

01:51.380 --> 01:52.380
打开才能编辑

01:52.380 --> 01:54.380
不然的话你不能编辑只能看

01:54.380 --> 01:55.380
所以我这边就用

01:55.380 --> 01:56.380
超级管理员权

01:56.380 --> 01:57.380
先打开看一下

01:57.380 --> 01:59.380
Attic下面的这个

01:59.380 --> 02:00.380
hosts文件

02:00.380 --> 02:01.380
ok

02:01.380 --> 02:02.380
好的

02:02.380 --> 02:03.380
可以发现

02:03.380 --> 02:04.380
就是在这个文件里面呢

02:04.380 --> 02:06.380
其实上面这一部分呢

02:06.380 --> 02:07.380
我们不用去关心它

02:07.380 --> 02:08.380
就是

02:08.380 --> 02:09.380
是注释

02:09.380 --> 02:10.380
注释内容

02:10.380 --> 02:11.380
然后呢

02:11.380 --> 02:13.380
下面的这一部分

02:13.380 --> 02:14.380
才是我们的

02:14.380 --> 02:16.380
这个需要关注的点

02:16.380 --> 02:17.380
那左边这一部分呢

02:17.380 --> 02:19.380
你会发现的是IP地址

02:19.380 --> 02:21.380
而到右边这块的话

02:21.380 --> 02:23.380
就是我们的域名了

02:23.380 --> 02:24.380
那同学们可能

02:24.380 --> 02:25.380
我们学好奇过啊

02:25.380 --> 02:26.380
就是老师

02:26.380 --> 02:29.380
为什么我通过127.0.0.1

02:29.380 --> 02:30.380
可以访问到电脑

02:30.380 --> 02:31.380
我还可以通过localhost

02:31.380 --> 02:32.380
你能访问到

02:32.380 --> 02:33.380
它俩有什么关系呢

02:33.380 --> 02:34.380
那这个时候呢

02:34.380 --> 02:35.380
你就明白了

02:35.380 --> 02:36.380
其实它是在

02:36.380 --> 02:38.380
我们的host文件里面

02:38.380 --> 02:40.380
把我们的本地地址

02:40.380 --> 02:42.380
127.0.0.1

02:42.380 --> 02:44.380
和localhost进行一个绑定啊

02:44.380 --> 02:46.380
那当我们在去

02:46.380 --> 02:48.380
瀏覽器里面访问内容的时候

02:48.380 --> 02:49.380
它呢

02:49.380 --> 02:51.380
首先会来这个hosts文件里面啊

02:51.380 --> 02:53.380
也就是说

02:53.380 --> 02:55.380
跟我们刚才讲的这个图里面

02:55.380 --> 02:57.380
稍微有点不一样的就是

02:57.380 --> 02:58.380
当你在瀏覽器里面

02:58.380 --> 03:00.380
敲入一个地址之后啊

03:00.380 --> 03:01.380
其实啊

03:01.380 --> 03:02.380
它隐含了一步就是

03:02.380 --> 03:05.380
先去你本地的hosts文件里面

03:05.380 --> 03:08.380
查找域名和IP地址的对应关系

03:08.380 --> 03:09.380
然后呢

03:09.380 --> 03:10.380
当你的这个

03:10.380 --> 03:12.380
本地的hosts文件里面

03:12.380 --> 03:13.380
没有当前

03:13.380 --> 03:14.380
这个正在请求的域名

03:14.380 --> 03:15.380
比如说

03:15.380 --> 03:16.380
我们要访问淘宝

03:16.380 --> 03:17.380
我在瀏覽器里面

03:17.380 --> 03:18.380
输入淘宝之后呢

03:18.380 --> 03:21.380
它先会来你的hosts文件里面

03:21.380 --> 03:22.380
看一下

03:22.380 --> 03:24.380
有没有淘宝这个域名对应IP地址

03:24.380 --> 03:25.380
诶

03:25.380 --> 03:26.380
这边一看

03:26.380 --> 03:27.380
没有

03:27.380 --> 03:28.380
没有呢就怎么办的

03:28.380 --> 03:29.380
就去dns服务器里面去了

03:29.380 --> 03:31.380
那么dns服务器会把淘宝

03:31.380 --> 03:33.380
这个域名对应IP地址返回

03:33.380 --> 03:34.380
然后呢

03:34.380 --> 03:35.380
它再去请求淘宝服务器

03:35.380 --> 03:37.380
但是假设现在有个情况就是

03:37.380 --> 03:40.380
我的hosts文件里面

03:40.380 --> 03:44.380
有了一个127.0.0.1

03:44.380 --> 03:45.380
然后呢

03:45.380 --> 03:47.380
淘宝.com

03:47.380 --> 03:49.380
那么这个时候就会出现一个问题

03:49.380 --> 03:50.380
什么问题呢

03:50.380 --> 03:51.380
就是

03:51.380 --> 03:53.380
当我们在瀏覽器里面

03:53.380 --> 03:54.380
我现在打开瀏覽器

03:54.380 --> 03:57.380
我们输入淘宝.com

03:57.380 --> 03:58.380
诶你会发现

03:58.380 --> 04:00.380
它打开的是淘宝的网页吗

04:00.380 --> 04:02.380
其实并不是

04:02.380 --> 04:03.380
为什么呢

04:03.380 --> 04:05.380
因为我们修改了hosts文件

04:05.380 --> 04:07.380
给它里面加了一个

04:07.380 --> 04:09.380
域名对应IP地址的关系

04:09.380 --> 04:10.380
那么这个时候

04:10.380 --> 04:11.380
当我们瀏覽器再去

04:11.380 --> 04:12.380
hosts文件里面

04:12.380 --> 04:13.380
去找的时候发现

04:13.380 --> 04:15.380
淘宝这个域名是存在的

04:15.380 --> 04:17.380
而且IP地址也给它了

04:17.380 --> 04:19.380
那它就会直接访问这个

04:19.380 --> 04:21.380
127.0.0.0.1

04:21.380 --> 04:23.380
对应的这个地址

04:23.380 --> 04:24.380
那这个就是我本集

04:24.380 --> 04:25.380
我本集已经部署了一个

04:25.380 --> 04:26.380
简单的小服务系

04:26.380 --> 04:27.380
你看

04:27.380 --> 04:29.380
它显示it works

04:29.380 --> 04:30.380
那这个

04:30.380 --> 04:31.380
其实可以给大家讲一个小

04:31.380 --> 04:32.380
小小好玩的

04:32.380 --> 04:33.380
就是

04:33.380 --> 04:34.380
有的程序员呢

04:34.380 --> 04:35.380
在淘宝这个

04:35.380 --> 04:37.380
双十一双十二的时候呢

04:37.380 --> 04:38.380
避免自家

04:38.380 --> 04:39.380
老婆败家

04:39.380 --> 04:40.380
是不是

04:40.380 --> 04:41.380
然后呢

04:41.380 --> 04:42.380
就把自己家里的这个电脑啊

04:42.380 --> 04:43.380
里面的这个hosts文件

04:43.380 --> 04:44.380
就给它修改

04:44.380 --> 04:45.380
啊

04:45.380 --> 04:46.380
淘宝是指向这个

04:46.380 --> 04:47.380
127.0.0.1

04:47.380 --> 04:48.380
然后呢

04:48.380 --> 04:49.380
就写一个小的网页啊

04:49.380 --> 04:51.380
这个比如说404之类的

04:51.380 --> 04:52.380
那

04:52.380 --> 04:53.380
她老婆就会问

04:53.380 --> 04:54.380
啊你这个淘宝

04:54.380 --> 04:55.380
今天怎么防不了啊

04:55.380 --> 04:56.380
然后你就会告诉她

04:56.380 --> 04:57.380
啊淘宝呢

04:57.380 --> 04:58.380
可能有余人

04:58.380 --> 04:59.380
比较多啊

04:59.380 --> 05:00.380
服务器当机了

05:00.380 --> 05:01.380
所以她

05:01.380 --> 05:02.380
现在网页出问题了

05:02.380 --> 05:03.380
我们就不看她了

05:03.380 --> 05:04.380
我们去看电视吧

05:04.380 --> 05:05.380
所以就这样的

05:05.380 --> 05:06.380
所以hosts文件

05:06.380 --> 05:07.380
它的这个

05:07.380 --> 05:08.380
呃

05:08.380 --> 05:09.380
功能就是

05:09.380 --> 05:10.380
也能帮我们进行

05:10.380 --> 05:12.380
IP地址和域名的

05:12.380 --> 05:14.380
一一对应的这么一个关系啊

05:14.380 --> 05:15.380
大家注意

05:15.380 --> 05:16.380
这个只是你本地修改了

05:16.380 --> 05:17.380
那别人电脑上

05:17.380 --> 05:18.380
没修改的

05:18.380 --> 05:19.380
别人还能正常访问

05:19.380 --> 05:20.380
只是你自己

05:20.380 --> 05:21.380
还不能访问

05:21.380 --> 05:22.380
而已

05:22.380 --> 05:23.380
OK啊

05:23.380 --> 05:24.380
所以这是我们

05:24.380 --> 05:25.380
hosts文件啊

05:25.380 --> 05:26.380
它是先于

05:26.380 --> 05:27.380
DNS服务器

05:27.380 --> 05:28.380
这么一个

05:28.380 --> 05:29.380
请求关系的

05:29.380 --> 05:30.380
再给大家说一下

05:30.380 --> 05:31.380
就是在我们的

05:31.380 --> 05:33.380
这个图里面

05:33.380 --> 05:34.380
我们之前告诉大家的是

05:34.380 --> 05:35.380
当你请求一个

05:35.380 --> 05:36.380
域名的时候呢

05:36.380 --> 05:37.380
他会直接去

05:37.380 --> 05:38.380
DNS服务器里面

05:38.380 --> 05:39.380
找域名的IP者

05:39.380 --> 05:40.380
但其实是前面有

05:40.380 --> 05:41.380
隐藏一步啊

05:41.380 --> 05:42.380
再给大家说一下

05:42.380 --> 05:43.380
他会去本地

05:43.380 --> 05:45.380
hosts文件里面去找

05:45.380 --> 05:46.380
然后呢

05:46.380 --> 05:47.380
hosts文件里面

05:47.380 --> 05:48.380
如果没找到

05:48.380 --> 05:49.380
才会去DNS服务器里面

05:49.380 --> 05:50.380
好

05:50.380 --> 05:51.380
这是我们这节课

05:51.380 --> 05:52.380
比较重要的内容

05:52.380 --> 05:53.380
大家记住啊

05:53.380 --> 05:54.380
这一步啊

05:54.380 --> 05:55.380
那这个还要是

05:55.380 --> 05:56.380
给他说一个就是

05:56.380 --> 05:57.380
hosts文件

05:57.380 --> 05:58.380
他是怎么来的

05:58.380 --> 05:59.380
为什么会有这么一个东西

05:59.380 --> 06:01.380
其实在早期的时候啊

06:01.380 --> 06:02.380
我们的这个

06:02.380 --> 06:04.380
计算机互联网啊

06:04.380 --> 06:05.380
是比较小的

06:05.380 --> 06:07.380
其实我们那会呢

06:07.380 --> 06:08.380
也是为了让

06:08.380 --> 06:09.380
这个IP纸

06:09.380 --> 06:10.380
就是方便记忆一些

06:10.380 --> 06:11.380
所以呢

06:11.380 --> 06:12.380
就给本机里面去

06:12.380 --> 06:14.380
写了这么一个hosts文件

06:14.380 --> 06:15.380
大家就随便写几个域名

06:15.380 --> 06:16.380
我就给他写个别名

06:16.380 --> 06:17.380
然后比如说

06:17.380 --> 06:18.380
这个计算机

06:18.380 --> 06:19.380
我给他写个ABC

06:19.380 --> 06:20.380
或者JAC之类的

06:20.380 --> 06:21.380
我觉得

06:21.380 --> 06:23.380
直接去访问他

06:23.380 --> 06:24.380
那但是由于

06:24.380 --> 06:25.380
后来呢互联网

06:25.380 --> 06:26.380
变得越来越大

06:26.380 --> 06:27.380
那在一个

06:27.380 --> 06:29.380
本地的hosts文件里面

06:29.380 --> 06:30.380
去修改这样内容的话

06:30.380 --> 06:31.380
会变得特别

06:32.380 --> 06:33.380
麻烦

06:33.380 --> 06:34.380
而且就是

06:34.380 --> 06:35.380
怎么说呢

06:35.380 --> 06:36.380
我们的这个

06:36.380 --> 06:37.380
外部服务器的

06:37.380 --> 06:38.380
这个域名可能会

06:38.380 --> 06:39.380
对你的IP纸

06:39.380 --> 06:40.380
可能会发生变更

06:40.380 --> 06:41.380
那么变更的时候

06:41.380 --> 06:42.380
你还得自己手动去

06:42.380 --> 06:44.380
再更新这个hosts文件

06:44.380 --> 06:45.380
所以呢

06:45.380 --> 06:46.380
hosts文件逐渐的

06:46.380 --> 06:47.380
就被我们拋弃了

06:47.380 --> 06:49.380
而转用了这个DNS服务器

06:49.380 --> 06:50.380
因为它操作起来

06:50.380 --> 06:51.380
比较方便一些

06:51.380 --> 06:52.380
所以hosts文件

06:52.380 --> 06:53.380
就是这个作用

06:53.380 --> 06:54.380
好嘞

06:54.380 --> 06:55.380
那么这节课呢

06:55.380 --> 06:56.380
我们给大家讲了

06:56.380 --> 06:59.380
就是本地hosts文件的作用

06:59.380 --> 07:00.380
那同学们

07:00.380 --> 07:01.380
要注意就是

07:01.380 --> 07:03.380
hosts文件的访问优先级

07:03.380 --> 07:05.380
会比这个DNS服务器

07:05.380 --> 07:06.380
要高一些

07:06.380 --> 07:07.380
如果你想在自家

07:07.380 --> 07:08.380
这么玩也行

07:08.380 --> 07:09.380
但是改完之后

07:09.380 --> 07:10.380
你记得改回来

07:10.380 --> 07:11.380
就是玩完之后改回来

07:11.380 --> 07:12.380
别到时候

07:12.380 --> 07:13.380
你电脑

07:13.380 --> 07:14.380
这个对应的网站了

07:14.380 --> 07:15.380
我们把这个删掉啊

07:15.380 --> 07:16.380
不然到时候

07:16.380 --> 07:18.380
我自己连淘宝都防不了了

07:18.380 --> 07:19.380
好

07:19.380 --> 07:20.380
把它改回来

07:20.380 --> 07:21.380
改回来我们再看一下

07:21.380 --> 07:23.380
我这边去请求淘宝.com

07:23.380 --> 07:24.380
好

07:24.380 --> 07:25.380
你看这个时候就正常了

07:25.380 --> 07:26.380
好的

07:26.380 --> 07:27.380
那么这节课呢

07:27.380 --> 07:28.380
我们就先到这儿

