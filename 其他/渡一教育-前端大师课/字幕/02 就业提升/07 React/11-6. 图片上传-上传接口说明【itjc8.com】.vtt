WEBVTT

00:00.690 --> 00:06.830
我们把图片上传这一块功能给大家好好说一下

00:07.090 --> 00:11.950
因为这一块功能它设计的知识点了特别多

00:12.210 --> 00:15.030
一方面设计到IX网络请求

00:15.530 --> 00:20.650
另一方面它设计到了很多ND里面的逐渐

00:21.170 --> 00:25.530
又设计到了你对以前的网络通信那块的知识的理解

00:26.030 --> 00:30.130
所以说这个图片上传也是很多初学者

00:30.610 --> 00:32.690
学习的一道门槛

00:33.210 --> 00:40.110
而你们以后在公司里边做开发的时候呢图片上传又是一个非常非常常见的功能比方说用户

00:40.370 --> 00:45.230
上传头像啊这些东西啊或者上传一些文章的附件啊等等啊

00:45.490 --> 00:48.810
他们都是设计到了图片上传

00:49.330 --> 00:50.870
就是文件上传

00:51.630 --> 00:55.470
我们这里呢就以一个图片上传为例

00:55.730 --> 00:58.550
来给大家解释一下整个图片上传了

00:58.750 --> 01:00.550
我们他是怎么去运作的

01:00.810 --> 01:04.650
可能呢这个东西呢可能会分为几节课来讲啊倒不是因为

01:04.910 --> 01:05.930
他时间比较多

01:06.190 --> 01:09.510
是因为他里边有几块子是需要大家去理解

01:10.530 --> 01:15.650
我们这里呢只是上传图片而我们的功能里边呢就学生管理系统里边

01:15.910 --> 01:18.210
其实他上不上传图片呢没有什么关系

01:18.470 --> 01:18.730
因为

01:20.010 --> 01:23.850
我们对于那个开发服务器里边的学生管理系统啊大家都知道

01:24.110 --> 01:26.650
他里边没有什么学生头像的东西对吧

01:26.850 --> 01:29.930
所以说呢我们这里图片上传呢只是把他那个

01:30.690 --> 01:33.330
核心功能实现啊他是不会嫉妒到

01:33.590 --> 01:34.450
杜一那个

01:34.730 --> 01:36.490
开发者平台里边去了

01:36.930 --> 01:37.350
好吧

01:37.690 --> 01:42.730
嗯然后呢还这个再给大家说一下啊就是图片上传呢本来呢我是想着

01:43.750 --> 01:47.090
嗯在杜一的开发平台里边啊

01:47.330 --> 01:48.730
加一个上传接口

01:49.090 --> 01:50.930
后来呢发现这个平台呢

01:51.190 --> 01:54.830
嗯目前呢正在改造啊所以我加不进去

01:55.130 --> 01:59.010
因此呢我这里呢使用的是我自己的服务器啊

01:59.210 --> 02:01.810
啊写了这么一个图片上传接口

02:02.130 --> 02:06.870
我们这节课呢只讲图片上传接口怎么去用啊

02:06.870 --> 02:09.470
把这节课的知识理解清楚了之后呢

02:09.510 --> 02:13.830
他会为我们下面的课程里边学习图片上传的大家基础

02:14.270 --> 02:15.970
说这节课呢大家好好听啊

02:16.510 --> 02:18.970
啊首先呢我们这几课不涉及到任何的界面

02:18.970 --> 02:22.430
跟rex没有什么关系跟那个什么无密界是没有任何关系

02:22.430 --> 02:23.770
跟nd没有任何关系

02:24.070 --> 02:27.870
纯粹的网络通信来上传一个图片

02:28.710 --> 02:31.270
我们这都知道啊我们无论是啊

02:31.270 --> 02:32.870
这是请求还是什么样

02:32.970 --> 02:35.710
总之我们要跟服务器之间交互是不是都要得

02:35.770 --> 02:37.110
有网络通信啊

02:37.370 --> 02:38.810
哎要网络通信的话

02:38.810 --> 02:41.410
你是不是得知道一个请求地址对吧

02:41.410 --> 02:44.610
我要发送什么样的数据到什么样的地址

02:45.110 --> 02:47.310
好那么这个地址呢我现在告诉你呢啊

02:47.670 --> 02:50.270
如果你要上传一张图片的话

02:51.670 --> 02:52.670
请求这个地址

02:53.570 --> 02:54.970
啊请求这个地址

02:55.070 --> 02:57.370
不过这个地址就是你把图片上来上去啊

02:57.370 --> 02:58.970
不过这个图片能

02:59.370 --> 03:01.370
我在我的服务器上保存多久

03:01.770 --> 03:05.170
啊其实我是把它保我在服务器那边做了一些处理啊

03:05.170 --> 03:06.970
我把它保存到漆流云的啊

03:06.970 --> 03:08.170
这个你们不用管啊

03:08.170 --> 03:09.970
你只需要知道这个接口就行了

03:10.170 --> 03:13.870
但是呢由于我不是漆流云的付费会员

03:13.870 --> 03:15.470
因此呢我的空间有限

03:15.610 --> 03:17.070
可能呢大家下来之后呢

03:17.070 --> 03:19.970
我也不知道你们看这个课程是哪一年了啊

03:19.970 --> 03:21.470
我现在说2019年

03:21.970 --> 03:23.270
到时候呢可能呢

03:23.370 --> 03:24.470
我的空间不够了

03:24.470 --> 03:26.370
所以说我会定期呢清理

03:26.870 --> 03:28.570
我的云空间里边的图片

03:28.870 --> 03:31.870
因此呢大家可能上传的图片之后呢

03:31.970 --> 03:32.970
有段时间能用

03:32.970 --> 03:35.170
可能过了段时间就用不了了啊

03:35.170 --> 03:37.470
正常的因为我可能把图片清除掉了

03:38.370 --> 03:39.070
这个没关系啊

03:39.070 --> 03:40.870
因为这个东西本来就是测试的啊

03:40.870 --> 03:41.670
学习技术的

03:41.970 --> 03:43.470
好首先请求地址啊

03:43.470 --> 03:44.670
请求的是这个地址

03:44.770 --> 03:46.670
那么我们来测试的话用什么测试呢

03:46.670 --> 03:47.670
我们就用一个

03:48.070 --> 03:48.970
调试工具啊

03:48.970 --> 03:49.870
不是调试工具啊

03:49.970 --> 03:51.770
就是一个专门来测试请求的工具

03:51.770 --> 03:52.670
叫poster man

03:53.470 --> 03:54.770
这个你们也都有吧

03:54.770 --> 03:56.170
你们应该学习过了

03:56.170 --> 03:56.670
对吧

03:56.770 --> 03:57.870
这是poster man啊

03:57.970 --> 03:59.370
请就是个请求工具

03:59.570 --> 04:02.070
好这边呢我们这里新加一个请求

04:02.770 --> 04:03.670
嗯这里呢

04:04.070 --> 04:05.170
地址填什么呢

04:05.370 --> 04:06.170
地址的话啊

04:06.170 --> 04:07.570
你们下来也可以去测试一下啊

04:07.570 --> 04:08.670
这些可以下来之后

04:08.970 --> 04:09.970
把这个复制进去

04:10.970 --> 04:12.070
把地址复制进去

04:12.470 --> 04:14.170
好这个请求地址是不是写好了

04:14.370 --> 04:16.210
然后呢我们要请求服务器

04:16.210 --> 04:17.810
除了请求地址之外呢

04:17.810 --> 04:19.270
还是还有一个请求方法

04:19.670 --> 04:20.070
对吧

04:20.070 --> 04:21.970
我们之前呢好多时候得到数据呢

04:21.970 --> 04:23.270
都是用get的方法

04:23.370 --> 04:24.970
那么这里呢我们要用post

04:25.170 --> 04:26.370
啊用post的方法

04:26.670 --> 04:28.870
好这里呢我们使用post的方法

04:29.570 --> 04:30.370
选中post

04:30.870 --> 04:33.370
好那么这里用post去请求这个地址

04:33.770 --> 04:35.270
好请求的时候呢

04:35.270 --> 04:36.670
我们的数据放哪呢

04:36.670 --> 04:38.470
数据数据是不是有多种方法

04:38.470 --> 04:38.770
对吧

04:38.770 --> 04:40.770
是不是可以放到query里边

04:40.770 --> 04:41.970
就是地址蓝里边

04:42.070 --> 04:43.670
当然你要上传图片

04:43.670 --> 04:45.270
你能放到地址蓝吗

04:45.370 --> 04:46.870
啊图片的数据那么大

04:46.970 --> 04:48.570
而你不能放到地址蓝啊

04:49.270 --> 04:50.070
还有一种方式呢

04:50.070 --> 04:51.270
就是放到表单

04:51.270 --> 04:53.770
就是就是请求体里边啊

04:53.770 --> 04:54.570
就是body

04:54.770 --> 04:55.770
请求体里边

04:55.770 --> 04:57.170
所以我们这里呢在postman里边

04:57.170 --> 04:58.370
选中请求体

04:58.370 --> 04:58.970
body

04:59.370 --> 05:00.470
好请求体的话

05:00.470 --> 05:02.170
他有多种格式啊

05:02.170 --> 05:03.270
有多种格式啊

05:03.270 --> 05:05.370
现在最新出来的还有一个graphql

05:06.070 --> 05:07.570
在独一的后边的课程里面

05:07.570 --> 05:09.570
我们可能会把这个东西加上啊

05:10.070 --> 05:10.670
嗯

05:11.170 --> 05:12.670
他请求体呢有多种格式

05:12.670 --> 05:13.570
那么请求体呢

05:13.570 --> 05:16.170
我们一般一般也把它叫做表单格式

05:16.270 --> 05:17.470
表单格式是什么呢

05:17.470 --> 05:18.470
是formdata

05:18.770 --> 05:19.170
啊

05:19.870 --> 05:22.070
如果你不填的话默认的话是这个

05:22.370 --> 05:25.170
叫xwform url encoded

05:25.170 --> 05:26.070
啊默认是这个

05:26.070 --> 05:26.670
但是呢

05:26.670 --> 05:28.070
我们要上传文件的话

05:28.070 --> 05:29.070
就不能用这种方式了

05:29.070 --> 05:30.670
要选中formdata

05:30.970 --> 05:31.970
啊用这种方式

05:32.870 --> 05:34.170
好那么这个formdata里边

05:34.170 --> 05:35.670
要存放一些建值队啊

05:35.670 --> 05:37.370
上传到服务器要存放一些建值队

05:37.470 --> 05:39.370
好那么这个建值队填啥呢

05:39.470 --> 05:41.070
好他在这里告诉你

05:41.170 --> 05:42.470
表单域名称

05:42.470 --> 05:42.870
以后呢

05:42.870 --> 05:45.070
你们看一些揭可文档啊

05:45.070 --> 05:46.710
你说到什么表单域名称

05:46.710 --> 05:47.770
你要知道什么意思啊

05:47.770 --> 05:49.670
就是表单里边的这个key

05:50.070 --> 05:51.770
啊他就是我们要上传到服务器

05:51.770 --> 05:52.970
要给一些数据过去吧

05:52.970 --> 05:53.470
对吧

05:53.470 --> 05:54.470
那么数据呢

05:54.470 --> 05:55.570
他是你这种格式啊

05:55.570 --> 05:57.670
你可以把它理解成为这种格式啊

05:58.270 --> 05:59.570
啊就是建

06:00.170 --> 06:00.970
建值队吗啊

06:00.970 --> 06:01.470
建

06:02.470 --> 06:03.470
值队啊

06:03.870 --> 06:06.470
这是一个建一个值啊

06:06.670 --> 06:07.270
然后呢

06:07.270 --> 06:07.970
一个建

06:08.810 --> 06:09.570
一个值啊

06:09.570 --> 06:10.570
他是用这么种格式

06:10.570 --> 06:13.270
那么这里的建是什么名字啊

06:13.270 --> 06:14.670
他问你建是什么名字

06:14.670 --> 06:16.770
建的话就是emg file

06:17.170 --> 06:17.970
好是这个名字

06:17.970 --> 06:19.270
所以说我们这里建这里呢

06:19.270 --> 06:20.170
填emg file

06:20.570 --> 06:21.970
好那个建的这里呢

06:21.970 --> 06:23.770
我们选中那个file啊

06:23.770 --> 06:26.470
这是个工具里边自带的一个功能啊

06:26.570 --> 06:27.370
file一不然的话

06:27.370 --> 06:28.970
你要自己手动写这个文件的

06:28.970 --> 06:30.370
二镜质数据啊

06:30.370 --> 06:31.970
嗯他那个这个东西太麻烦了

06:32.070 --> 06:33.170
啊这个emg file啊

06:33.170 --> 06:33.970
告诉他这是个图

06:33.970 --> 06:34.870
这是个文件

06:34.870 --> 06:36.970
我们这里的点击可以选中一个文件啊

06:36.970 --> 06:38.170
咱们随便上传一个吧

06:39.770 --> 06:40.570
啊就这个吧

06:40.570 --> 06:41.470
就这个啊

06:41.470 --> 06:42.970
选中一个文件好

06:42.970 --> 06:43.370
接下来呢

06:43.370 --> 06:45.270
我们点send发送请求

06:45.370 --> 06:47.870
我们看一下这个文件能不能上传过去

06:48.070 --> 06:49.170
好点击发送

06:50.770 --> 06:52.870
好稍等片刻之后呢

06:52.870 --> 06:54.370
我们文件就上传到了服务器

06:54.370 --> 06:55.170
上传到哪个服务器

06:55.170 --> 06:57.070
就是我给大家写的这个服务器啊

06:57.170 --> 06:58.070
这个这个地址

06:58.370 --> 06:59.470
上传到了这个地址

06:59.670 --> 07:01.270
好上传到了这个地址之后呢

07:01.270 --> 07:03.570
服务器那边有一个响应结果

07:03.670 --> 07:04.870
啊有个响应结果

07:04.970 --> 07:07.270
什么结果呢啊服务器

07:08.970 --> 07:11.470
服务器的响应结果

07:12.070 --> 07:14.870
如果说如果没有错误

07:15.470 --> 07:16.470
响应了什么结果

07:16.470 --> 07:17.670
响应的是什么结果呢

07:17.870 --> 07:19.270
响应的是下面那种格式

07:23.010 --> 07:23.610
什么格式呢

07:23.610 --> 07:24.910
就是这里叫做

07:24.910 --> 07:27.410
哎看着啊pass pass

07:27.510 --> 07:28.710
这是个节省格式

07:29.710 --> 07:30.510
啊pass

07:31.310 --> 07:33.510
就是你上传图片成功了啊

07:33.510 --> 07:34.610
上传文件成功了

07:34.610 --> 07:37.110
那么我要怎么来访问这个文件呢

07:37.110 --> 07:40.110
你通过他响应的你这个结果pass

07:40.110 --> 07:41.510
里边有一个数据啊

07:41.510 --> 07:42.310
叫做这个数据啊

07:42.310 --> 07:43.310
我们把它复制一下

07:44.910 --> 07:45.310
啊

07:45.810 --> 07:47.510
到时候你要访问这张图片的话

07:47.510 --> 07:49.510
你就通过这个地址来访问啊

07:49.510 --> 07:51.810
这就是文件的路径啊

07:51.810 --> 07:54.910
就是访问路径啊访问路径

07:55.510 --> 07:56.510
啊是这么个意思

07:56.510 --> 07:57.710
这就服务器的响应结果

07:57.710 --> 07:59.210
就是你图片已经上传成功了

07:59.210 --> 08:00.310
已经保存到服务器了

08:00.310 --> 08:01.510
你怎么去访问这张图片呢

08:01.510 --> 08:02.710
他会给你一个地址啊

08:02.710 --> 08:04.110
这是个清流云的地址

08:04.210 --> 08:05.210
好咱们看一下吧

08:05.910 --> 08:07.310
啊在流产系统打开

08:07.510 --> 08:09.110
你看说的这个图片就出来了

08:09.110 --> 08:09.510
对吧

08:09.510 --> 08:11.410
我们通过这个地址就可以访问到这个图片了

08:11.810 --> 08:12.510
因为这意思吗

08:12.710 --> 08:13.810
啊所以说我们上传图片呢

08:13.810 --> 08:15.410
无非就是发出一个请求

08:15.610 --> 08:17.310
服务器呢给会给我们一个地址

08:17.310 --> 08:18.510
哎我们通过这个地址呢

08:18.510 --> 08:19.710
访问就可以得到图片了

08:20.510 --> 08:22.110
这是没有错误的情况下

08:22.210 --> 08:23.610
那如果说有错误呢

08:23.610 --> 08:24.310
比方说啊

08:24.310 --> 08:26.410
我们这里的上传的不是图片

08:26.410 --> 08:26.810
哎

08:26.910 --> 08:27.710
因为我这里呢

08:27.710 --> 08:28.510
我这个服务器呢

08:28.510 --> 08:29.810
他只允许你上传图片

08:29.810 --> 08:31.310
不能允许你上传其他东西啊

08:31.310 --> 08:32.510
比方说我们这里呢

08:32.510 --> 08:33.410
随便上传一个啊

08:33.410 --> 08:35.910
比方说上传一个txt文件啊

08:35.910 --> 08:37.010
这里呢我们点击上传

08:38.210 --> 08:39.610
好你看是不是有错误啊

08:39.710 --> 08:41.210
对不对哎有错误

08:41.210 --> 08:42.110
他告诉你什么呢

08:42.210 --> 08:44.710
namity的mme type

08:44.810 --> 08:49.610
就是呃被限制的类型啊文件类型

08:50.510 --> 08:51.810
啊他说你这个文件呢

08:51.810 --> 08:53.310
是什么文件是这种文件啊

08:53.310 --> 08:55.410
他是不能允许上传的啊

08:55.410 --> 08:56.210
不允许上传的

08:56.210 --> 08:57.410
所以说他会有个错误

08:57.410 --> 08:58.810
因此的如果说服务器反悔

08:58.810 --> 09:00.210
这样的结果啊

09:00.410 --> 09:02.410
就是如果有错误的话

09:04.210 --> 09:05.010
有错误

09:05.010 --> 09:06.910
那么服务器他会反悔这样的结果

09:08.710 --> 09:11.920
你看啊

09:11.920 --> 09:12.620
air

09:12.920 --> 09:13.420
ok

09:14.620 --> 09:16.220
这是个节省啊air

09:16.420 --> 09:18.020
啊这是错误消息

09:19.120 --> 09:20.620
啊他就会返回这么一个结果

09:20.720 --> 09:21.520
你看这个意思吗

09:21.920 --> 09:24.420
啊咱们呢首先把这个接口认识清楚

09:24.420 --> 09:25.320
再来一次啊

09:25.420 --> 09:27.920
我们只要用pose请求去请求这个地址

09:28.020 --> 09:29.920
然后呢给他添加一个表单项

09:29.920 --> 09:31.920
表单项的名字叫做img file

09:32.020 --> 09:34.520
然后呢这里就是文件数据啊文件数据

09:34.720 --> 09:35.320
接下来

09:35.420 --> 09:37.720
点击发送啊他就可以上传到服务器了

09:37.720 --> 09:38.920
我们来看一下他请求的

09:38.920 --> 09:40.120
整个请求的消息体

09:40.320 --> 09:42.720
你可以看到啊我们这里没发放大啊

09:43.020 --> 09:44.220
我们这里复制一下吧

09:44.720 --> 09:46.420
在计时边里边看得清楚一点啊

09:47.120 --> 09:50.020
啊这个请求你看pose请求请求咋了

09:50.020 --> 09:51.920
是不是请求这个地址啊请求

09:51.920 --> 09:54.120
对对对请求这个路径啊

09:54.120 --> 09:55.520
那么我们的主进名是咋了

09:55.520 --> 09:56.420
主进名是这个

09:56.920 --> 09:59.080
啊我们的就是

09:59.080 --> 10:00.620
content

10:00.620 --> 10:01.520
我看呀啊

10:01.520 --> 10:02.220
content tab

10:02.220 --> 10:04.820
我们请求的方法呢是multipart form data

10:05.720 --> 10:08.320
好下面呢你看表单语里面说有图片啊

10:08.320 --> 10:09.720
name就是某个件

10:10.120 --> 10:11.420
啊我们的件img file

10:11.420 --> 10:13.120
那么我们的文件数据在哪呢

10:13.120 --> 10:14.420
文件数据它不会显示的啊

10:14.420 --> 10:15.820
它是一个二镜子的数据

10:15.820 --> 10:16.920
它不会显示在这啊

10:17.320 --> 10:18.120
啊明白的意思吧

10:18.320 --> 10:20.720
啊总之呢我们去请求这样的地址啊

10:20.720 --> 10:22.120
用这种特定的方式

10:22.220 --> 10:24.120
就可以获得服务器的响应结果了

10:24.120 --> 10:25.920
就这么简单好咱们呢

10:25.920 --> 10:27.320
这几课先把这个

10:27.620 --> 10:29.520
API接口认识清楚

10:29.620 --> 10:31.020
认识清楚了接口之后呢

10:31.020 --> 10:33.020
下几课我们再开始来做

10:33.020 --> 10:35.420
这个图来实现了个图片上传的功能

10:35.420 --> 10:37.420
那么到时候呢会遇到一些问题

10:37.420 --> 10:39.720
我你才你认识了接口之后呢

10:39.720 --> 10:41.420
你才知道这些问题是什么意思

10:41.660 --> 10:42.120
好吧

10:42.120 --> 10:43.980
ok啊这几课就这么多了啊

