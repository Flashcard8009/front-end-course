WEBVTT

00:00.690 --> 00:05.490
接下来几页课呢 咱们就给大家介绍一些在 nd 里边

00:05.690 --> 00:08.890
平时开发中比较常见的一些组件

00:09.690 --> 00:14.290
所以我之前说了啊 咱们这个 nd 呢 没有必要把他一个一个的

00:14.490 --> 00:18.490
所见呢 一个一个挨啥的讲 这样讲起来太傻了啊

00:18.690 --> 00:22.090
他学起来呢 也太傻了 不是这样的学习方式

00:22.290 --> 00:26.690
而我们呢 是通过这个学习呢 能够学会去读他的文档

00:26.890 --> 00:30.890
其实呢 我在讲 nd 的时候呢 我会把常用的

00:31.090 --> 00:35.690
而且呢 比较麻烦的组件呢 给大家拿出来讲

00:36.290 --> 00:41.290
嗯 其他的摄像仪主见呢 要么呢 就是不常见的啊 平时开发中都不太用得到

00:41.490 --> 00:45.890
另外一些呢 是虽然说他常见的 他特别特别简单啊

00:45.890 --> 00:48.890
我到时候呢 也会提一下啊 也会稍微的提一下

00:49.290 --> 00:54.090
所以说呢 其实呢 我们通过这一章节的学习 最重要的啊 是要学习他的

00:54.290 --> 01:00.290
越读文档来做开发的一个啊 这种方式 这种方式对大家是非常非常重要的啊

01:01.290 --> 01:05.090
我们这一个看啥呢 看这么一个组件 叫做纪连选择

01:05.690 --> 01:07.890
啊 看一下他的效果吧 看看啊

01:08.490 --> 01:12.690
就这样的效果 他有点类似于呢 下达列表啊

01:13.690 --> 01:17.290
但是呢 又有点区别啊 有点区别 什么区别呢 就是说

01:17.490 --> 01:21.090
他这个下达列表呢 就就一个啊 就一个可以在这里选择

01:21.090 --> 01:24.890
你看你懂了对吧 我都不用解释了啊 解释都是废话 你看你懂了

01:25.490 --> 01:28.890
而且呢 他还可以一步加载 你看呀 他可以一步加载数据

01:30.090 --> 01:35.290
啊 是这么个回事啊 咱们再学习这个东西的使用 嗯 这个东西一般用于什么呢 一般

01:35.790 --> 01:40.690
最常见的就是用于省市区啊 这样的一些纪连选择

01:41.090 --> 01:44.690
在我们 那我们能不能用他给我们提供的那个升耐克车

01:45.090 --> 01:50.090
主件来操 来进行控制呢 也可以啊 也可以跟你们之前

01:50.990 --> 01:54.490
应该这个东西应该在横照横照 你们就学习过了 对吧

01:55.490 --> 02:03.690
你如果说用那个升耐克车来做的话 完全没问题啊 只不过呢 他提供了一种更加优雅的方式 用这种方式来进行操作

02:04.610 --> 02:09.530
好吧 拿咱那么咱们呢 就来试验一下啊 看一下他怎么用

02:10.330 --> 02:13.970
首先他这里给我们提供了一个代码啊 一个代码 而就是一个例子

02:14.010 --> 02:18.410
你看 比方说我们这里要做省市纪连 是不是大概就这样子 对吧 浙江

02:19.370 --> 02:24.250
杭州西湖 好 我们看一下他代码啊 其实他代码特别特别简单

02:24.610 --> 02:30.490
他前面呢 写了一个数组叫Options 一个数组 数组里边呢 他掏了一些对象

02:31.170 --> 02:35.370
我们也不管他里边掏的是啥吧 他总之写了这么一个数组掏了一些对象

02:35.970 --> 02:38.530
然后呢 下面渲染的时候 怎么渲染的呢 你看

02:39.530 --> 02:48.250
castator啊 把这个选项是不是放进去 对吧 把选项放进去 而这个onchain 这个事件呢 他有一个事件叫onchain

02:48.250 --> 02:53.730
去啊 这个onchain的事件呢 其实他啥都没做啊 就是把个输出就完事了啊 其实他啥都没做

02:54.410 --> 02:58.210
好吧 这就是这么一个基本的例子

02:59.010 --> 03:05.170
好 那么我们来照着他的写一下啊 既然他有例子 我们照着他的写一下 就有的时候呢 我们觉得例子看不太懂

03:05.570 --> 03:08.130
哎 我们可以看下面的API啊 他下面有API

03:09.730 --> 03:16.410
啊 有各种各样的属性 呃 如果说我们例子能看到的话 就照了他的例子来做 也基本能够学习到他的使用方式

03:17.010 --> 03:23.290
好 我们在这里呢 新建一个页面吧啊 在这配级室里面 新建一个页面 叫做

03:24.890 --> 03:27.890
taskator.test.js

03:28.610 --> 03:31.370
啊 我们这里呢 写上啊 一个组件

03:32.370 --> 03:34.370
taskator.test

03:34.970 --> 03:40.010
啊 这么一个组件 好 那我们来用一下啊 呃 他怎么用呢 首先把导入进来

03:40.570 --> 03:48.290
import 啊 导入进来 导入进来 从哪里导入啊 是不是从ind里面啊 nd里面 把导入进来啊

03:48.890 --> 03:51.690
呃 就是叫做kaskator啊 kaskator

03:52.810 --> 03:55.010
啊 我们这里直接使用完事

03:55.890 --> 04:02.890
好 他里面不是有一些属性吗 我们先看一下啊 如果说我们啥都没有加 这些属性啥都没有写 我们运行出来看一下什么效果

04:03.610 --> 04:10.510
哎 这里已经运行了啊 重新来吧 重新运行

04:12.270 --> 04:21.550
start好 等一下啊 咱运行出来

04:32.590 --> 04:40.900
嗯 大家其实做这个东西的时候呢 可以类比一下那个下拉列表

04:41.860 --> 04:43.460
好 咱们来进论一面啊

04:44.500 --> 04:46.300
taskator.test

04:47.300 --> 04:52.460
好 你看 是不是出来了 对吧 效果就出来了 只不过呢 他里边有没有选项啊 是不是没有选项

04:53.340 --> 04:57.500
哎 你要做一个下拉列表 所以要给他提供选项 有哪些选项可以选择

04:58.060 --> 05:03.700
所以说呢 我们这里呢 有一个重点就是啊 就做这个组件的重点 就是要给他提供一个选项

05:04.620 --> 05:08.380
那么这个选项呢 我们可以写到这 啊 比方说我们写上这个options

05:09.100 --> 05:14.580
options 表示选项 这个选项是一个啥呢 我们可以通过刚才的例子里面可以看出

05:14.940 --> 05:19.900
你看他提供的选项是不是一个数组 咱们呢 就给他写个数组 那你想一想

05:21.100 --> 05:27.780
是一个数组 是不是合理的 对吧 没问题吧 你看他选项有多个呀 从多个中选一个是不是要得数组 对吧

05:28.300 --> 05:35.300
好 那数组里边每一个选项呢 他是一个对象 你看 你看我怎么知道他是个对象 你看他这里写的是个对象 对吧

05:35.820 --> 05:42.380
你看一个对象啊 我们先别管对象里边有啥东西吧 两个对象对吧 说起来两个对象在这

05:43.060 --> 05:44.180
好 咱们就写两个对象

05:44.700 --> 05:51.860
我再教大家如何来去看这个文档 两个对象的你猜一猜 是不是一个对象就是一个选项啊 对不对 一个对象就是个选项

05:52.260 --> 05:59.460
好 那么每一个对象里边还有什么配置呢 你看一下 他有个value 一个nabel 好 咱们来写一下啊 value

06:00.820 --> 06:01.460
比方说啊

06:03.380 --> 06:04.180
value 是穿

06:05.620 --> 06:10.180
啊 还有一个nabel 你觉得这两个东西是啥意思呢 这两个属性

06:11.140 --> 06:17.940
是不是我们在做下拉列表的时候 每一个选项是不是有一个文本和一个

06:18.820 --> 06:23.780
值 对吧 值啊 值是能给程序用的 文本呢 是给用户看的

06:24.340 --> 06:30.260
所以说这个nabel呢 它对应的就是值啊 这就是文本 value来对应的就是它的值啊 就这么个意思

06:30.660 --> 06:37.700
说这个东西如果你开发东西多 开发那种类似的长进多了 你慢慢就猜都猜得到它什么意思啊 比方说这里value

06:38.420 --> 06:39.140
啊 这里是

06:40.660 --> 06:42.340
啊 是吧 浙江

06:44.100 --> 06:48.500
value 用浙江啊 一般来说这个value要基督id

06:50.020 --> 06:55.140
浙江 好 保存 好 我们这里呢 把这个option是这个刚刚放进去

06:55.620 --> 07:01.620
它里边有一个属性option是可以配置它的选项啊 这个我怎么知道的通过阅读这个代码

07:02.260 --> 07:03.620
了解的啊option是

07:04.420 --> 07:09.540
好 咱们来看一下啊 那么现在来看你算是不是有两个了 而且还会自动选中

07:09.780 --> 07:11.300
还没 特别特别简单

07:12.100 --> 07:19.540
啊 那么如果有指菜单的话怎么办呢 如果还有指选项的话 那么我们来读这个代码 它指选项是不是用了一个属性了的qt

07:19.780 --> 07:26.180
你看 看一个属性名字就知道了 对吧 好 那么qt呢 它又是一个数组啊 比方说啊 我们这里

07:27.860 --> 07:35.380
qt 它又是一个数组 以后它就只选项了 每个又是个选项 每个又是个选项 是不是又是个对象 对吧 这几点关系就出来了

07:36.020 --> 07:39.700
啊value 四川有什么呢 有成都

07:41.460 --> 07:43.940
nabel 成都

07:45.060 --> 07:48.980
好 然后还有什么呢 我再来一个啊 value 这个是

07:51.620 --> 07:52.740
呃 广源

07:55.380 --> 07:57.460
nabel 广源

07:58.980 --> 08:00.820
好 保存 一个人一样

08:01.540 --> 08:08.740
说不出来 指选项了 对不对 就这么简单 如果说指选项 还有指选项了 又来呗 对吧

08:09.860 --> 08:16.260
指选项 还有指选项 企务局 又来一个数组啊 每个数组呢 又是个对象啊 成都里边有什么

08:16.820 --> 08:19.860
有那个value啊 value 叫做

08:20.740 --> 08:23.540
呃 景江区

08:25.720 --> 08:27.720
景 景江

08:28.840 --> 08:30.440
nabel

08:30.520 --> 08:33.560
景江区 好 再来一个啊

08:35.480 --> 08:37.480
再复制一下

08:38.120 --> 08:40.920
这里是啊 金流

08:43.220 --> 08:51.460
金流区啊 差不多了啊 就这么意思 好 那你们再看一下啊 四川成都里边是有三个选项 呃 两个选项了 对吧

08:51.860 --> 08:54.180
其他就这么简单啊 没有什么复杂的

08:55.300 --> 08:58.660
然后呢 我们来继续看啊 如果说

08:59.380 --> 09:05.540
这里呢 我们要 现在呢 我们能得到这个东西的 但是呢 我们没有发 没有办法获取它选中的结果

09:05.860 --> 09:11.140
我们只能看到它这里有选中 但是呢 我不知道它选中的到底是什么结果

09:11.540 --> 09:16.580
啊 比方说啊 我就例子 比方说呢 我这里下面呢 有个按钮啊 我导入一个按钮

09:18.260 --> 09:19.300
button

09:19.780 --> 09:23.540
啊 这个按钮呢 我要获取到啊 获取

09:24.180 --> 09:27.380
选中的值啊 我要获取到选中的值

09:27.540 --> 09:30.740
好 那我怎么获取呢 我给他注册时间啊 unclick

09:31.700 --> 09:35.860
我怎么来获取当前的这个 纪念选中荒

09:36.100 --> 09:38.820
他选择的值是什么呢 我怎么来获取呢

09:39.300 --> 09:46.020
好 那么你回忆一下啊 哎呀 这一个按钮对吧 一个按钮啊 我们这里再改一个颜色啊 type

09:46.580 --> 09:47.620
primary

09:49.220 --> 09:55.140
好 那么我们怎么来获取呢 那你可以回忆一下 以前的文本框的话 你点击按钮

09:55.300 --> 09:57.700
你点击按钮 怎么来获取文本框的值的

09:58.820 --> 10:04.180
怎么来获取的 是不是把它受空啊 对吧 让这个文本框受控跟我们的数据是关联的

10:04.580 --> 10:10.500
那么这个玩意能不能受空呢 这个玩意他也能受控 就说你 我现在没告诉你啊 比方说我现在没有告诉你

10:10.740 --> 10:12.660
他能不能受控 那你怎么来查呢

10:13.380 --> 10:16.020
你觉得他要受空的话 应该给他什么属性复制

10:17.140 --> 10:18.500
你给他什么属性复制啊

10:19.460 --> 10:25.940
是不是value啊 你看文本框的那一块 是不是有个value属性给他复制就受控了 而且呢 我们之前也见到

10:26.340 --> 10:29.620
nd里边的很多组件他要受控的话 也是给他value值

10:30.020 --> 10:37.380
那么这里呢也是一样啊 咱们看一下啊 看一下他下面有没有value这个属性呢 我们就找api了啊 你看这怎么查的

10:37.380 --> 10:44.020
你看 指定选中项 而且呢 是一个制服串的数组 他告诉你 他给他的是一个制服串的数组

10:44.740 --> 10:53.380
啥意思呢 比方说啊 我要默认选中 我要默认选中四川成都紧疆区 我会怎么给呢 那我们猜一下呗

10:53.780 --> 10:56.900
value他 他要选中紧疆区 那么

10:57.780 --> 11:00.340
是不是他紧疆区是一个级连菜单

11:00.900 --> 11:04.580
他的副级菜单 他的副级的副级的菜单是不是一起要给他

11:04.980 --> 11:10.980
对吧 而且他是一个制服串数组 他这里告诉你呢 他是一个制服串数组 是不是应该给他的是什么

11:11.220 --> 11:14.340
是value值 比方说我要让他选中这个

11:15.300 --> 11:19.140
是不是要给他的就是四川成都紧疆啊 不好意思啊

11:20.740 --> 11:22.260
好了来了啊 刚才一个电话

11:23.380 --> 11:28.180
讲哪了啊 就这啊 这个value呢 他就让我给他的一个数组

11:28.580 --> 11:32.260
那你想的道理啊 他为什么给数组呢 比方说我要选中紧疆区

11:33.300 --> 11:38.980
那你是不是把value整穿成一个数组啊 四川成都紧疆 对吧 是不是这个逻辑

11:39.220 --> 11:42.020
好 来吧 咱们比方说啊 在这里写上四川

11:43.620 --> 11:48.820
成都 他是个制服串数组啊 因为官方稳当里面说的是制服串数组紧疆啊 保存

11:49.700 --> 11:52.820
你看 是不是一开始选中这个了 对不对啊 就这么简单

11:53.220 --> 11:57.860
那么同样的道理 他当他改变之后 是不是会给你一个新的值

11:58.660 --> 12:01.380
对吧 我们以前做input的时候 是不是也是这样做的

12:02.340 --> 12:05.620
有一个value让他受空了 受空了之后呢 你再选择别的

12:06.580 --> 12:11.140
有用吗 是不是没用了 因为他受空了 那么你是不是要注册one千几时间 对吧

12:11.140 --> 12:14.180
一看你打右基本提示 他是不是告诉你one千几时间了

12:14.340 --> 12:17.780
那么one千几时间里边 我都不用去看稳当了 你猜都猜得到了

12:18.100 --> 12:24.020
你看他一定是会给你一个新的值 对吧 新的值 那咱们把这个新的值输出啊 留value

12:24.420 --> 12:29.140
好 保存啊 我们这里检查看一下啊 这边

12:30.500 --> 12:33.780
啊 我们这里选中一个新的值 你看是不是给了一个新的数组

12:34.100 --> 12:38.020
然后我们再选中一个金流区 你看是不是给了一个新的数组 对吧

12:38.420 --> 12:42.740
那你要做的事情 是不是要受空的话 是不是把那个选中的值啊

12:43.220 --> 12:48.100
选中的值把它写成一个状态 对吧 我们使用什么 useState

12:49.940 --> 12:55.700
好 这里 我们使用useState啊 就是选中啊 choose

12:56.820 --> 13:00.660
他默认的状态呢 我们给他一个空数组啊 默认的状态给他一个空数组

13:01.060 --> 13:05.140
然后呢 当他选中向发生变化的时候 是不是我们setsChoose

13:05.540 --> 13:08.900
把这新的数组呢给他就完事了 对吧 就这么简单

13:09.460 --> 13:13.780
好 保存啊 咱们再看 那么现在呢 就又可以选中了啊 因为

13:13.780 --> 13:17.140
而且呢 现在不仅可以选中 而且他受空了 受到我们的控制

13:17.460 --> 13:21.940
那么现在我们的数据这个VatChoose里边 是不是就记录了他选中的值

13:22.260 --> 13:25.300
如果说点击按钮 或者他选中的值的话 是不是用choose

13:25.700 --> 13:30.500
对吧 好 来吧 我们这里你看 现在我们点选中的值是个空数

13:30.820 --> 13:35.540
然后呢 我们这里点击这个 点击 是不是我们这个东西了 对啊 说获取到了

13:36.260 --> 13:40.580
就这么简单 好 这是这一块啊 让他变成受控的

13:41.860 --> 13:48.900
好 接下来我们继续看啊 如果说我要 但是很多时候呢 我们是要把它做成一个跟服务器之间联动的

13:49.140 --> 13:53.540
就是我一开始呢 我的数据呢 可能有很多数据 比方省市数据

13:53.860 --> 13:56.980
省市数据非常大的啊 非常大的 我这里还没有设计到国家

13:57.620 --> 14:02.740
如果说把国家在添加进去的话 它的数据库非常非常大 所以说呢 我们

14:03.700 --> 14:09.940
不太可能一开始就把数据全部加载出来 我们希望动态的加载 比方说一开始我只是加载省份

14:10.340 --> 14:15.540
当你点了某一个省份之后呢 我再去加载这个省份里边的东西

14:16.260 --> 14:18.180
啊 这就是让他变成把它变成受控

14:18.740 --> 14:23.780
好 来吧 嗯 这里要把它变成受控的话 我们需要一些API啊 这个API呢

14:24.500 --> 14:33.700
由于度音目前的那个啊 开发开发的平台里边是没有提供的啊 我没有找到啊 所以说我们 我这里呢给大家

14:34.020 --> 14:35.380
我自己写了一个API啊

14:36.500 --> 14:41.860
这个API呢 我目前用的是免费吧 我是读的别的服务器的API

14:42.740 --> 14:50.500
嗯 那个目前呢 用的是免费吧 嗯 将来呢 免费吧 它的请求数量有限 好像只有1000个请求数量

14:50.740 --> 14:54.900
所以说呢 我也不知道同学们看到这一块的时候 你们下来自己去做的时候呢

14:55.140 --> 14:59.300
你这个API能不能用 如果说不能用了啊 你给那个职业

14:59.780 --> 15:04.340
又说职业顾问去了 给那个就是学业顾问说一下啊 让他给我联系一下

15:04.740 --> 15:08.100
嗯 当然如果你有我的联系方式的话 你可以直接联系我

15:08.420 --> 15:13.300
嗯 我就把那个就是我去交点钱啊 这个也不贵啊 交点钱他把把这个接口呢

15:13.700 --> 15:17.940
数量扩充一点啊 目前呢我用的是免费的啊 目前先这样吧

15:18.900 --> 15:25.300
好 这里呢 我们就请求请求一下个地址试一下啊 这个地址非常非常简单 就是get请求啊 请求方法get

15:28.570 --> 15:34.650
呃get请求就完事了 呃 请求的话 然后给他一个参数啊 给地址拿一个参数parent id

15:34.970 --> 15:40.890
啊 如果说你不喘地的话 就表示获取所有的省份啊 比方说我们现在不喘地参数 直接把这个东西

15:41.450 --> 15:46.890
放在浏览器里边去访问一下啊 当然你可以用posed 卖来请求得到啊 你看是不是所有的

15:47.530 --> 15:50.970
省份的数据就全部拿到了啊 咱们的network里边看一下啊

15:51.850 --> 15:54.810
刷新一下 network里边preview

15:55.690 --> 15:57.450
好 再刷新

15:59.530 --> 16:01.530
呀

16:02.810 --> 16:08.280
他呃 还不给我显示呢

16:09.080 --> 16:18.600
再来 刷新 preview 对吧 对吧 那么你看每个省份是不拿到了啊 省份里边还蛮 还有蛮多数据的啊 什么

16:19.320 --> 16:27.000
arealereal code 就是地区编码啊 这是邮政编码吗 海边 这下面这个是邮政编码啊 下面这个是邮政编码

16:27.640 --> 16:30.040
呃 然后呢 arealereal name

16:30.440 --> 16:34.520
这是我们用到的其实不多啊 这是地区就区域名称浙江省

16:35.080 --> 16:40.360
然后呢 whole name全称中国浙江省 呃 然后呢拼音简称

16:40.840 --> 16:46.120
zg啊浙江 simple name 就是浙江两个字啊 还remarker这个就是备注啊

16:46.520 --> 16:47.720
好多都是空的

16:47.800 --> 16:56.440
呃 所属省份的id啊 浙江本来就是省份 那么他的id呢 就是这个 id 就是他本身的id啊 id 他本身本身的id 就拿到这个数据了对吧

16:57.160 --> 17:01.560
看呗啊 非常简单 那如果说你要拿到这个浙江里边的数据呢

17:02.040 --> 17:07.320
你要拿到这个浙江里边的数据怎么办呢 还是请求这个例子 然后呢给他一个参数

17:07.640 --> 17:12.280
叫做parent id 啊 id为大写啊 然后呢把这个id传过去

17:13.000 --> 17:15.560
你看 把这个id传过去 一回车

17:16.200 --> 17:21.960
你看现在我们就拿到了这个浙江下面的所有的城市啊 你看每个城市啊

17:22.440 --> 17:26.680
就地区边吧 对吧 呃 然后这是 这是金维度啊 long

17:27.800 --> 17:32.600
那天啊 the net 金维度啊 金维度 这好像是京都 这好像是维度啊

17:33.320 --> 17:37.400
呃 然后呢这是他本身的id 然后这是他所属省份的id

17:37.800 --> 17:41.480
看呗 这些区很多信息都可以拿到了 接下来我们再来啊

17:42.120 --> 17:46.920
比方说我要看这个什么渠州市的时候啊 这怎么读啊 这个玩意儿

17:47.240 --> 17:53.560
好 我们又把这个这个id传进去 看一下啊 怎么把这个id传进去 你看他又是不是读到这个

17:54.600 --> 18:01.000
里边的区对不对啊 这个这个就是城市里边的区啊 你看就读得到了读到了

18:02.040 --> 18:04.280
如果说你把这个区的id再传进去

18:05.000 --> 18:14.120
把这个区的id再传进去 你看一样 是不是得到这个区的街道对吧 他数据还蛮庞大的啊得到他的区里边的每个每个每个的街道

18:14.920 --> 18:19.800
看呗啊 当然再传就没了啊 再传就没了 我们再传 再传好像服务器都要爆错了啊

18:20.760 --> 18:24.280
啊 不行 服务器爆错了啊 没了啊 一共就四成啊 一共就四成

18:25.160 --> 18:28.840
没有这意思吗 啊 这就是关于这一块啊 关于这一块

18:29.480 --> 18:35.160
好 那么也就是说 我们现在呢 首先要搞定这个api接口 我们这里呢 写service里边写上一个

18:36.280 --> 18:38.280
local location吗 location

18:41.240 --> 18:42.280
location.js

18:43.240 --> 18:47.960
啊 就是导出一些函数 他能够帮我们实现啊 获取数据

18:50.520 --> 18:52.840
导出一个函数啊 get a real

18:53.720 --> 18:59.720
给我一个parent id啊 给我一个parent id 当然这个id呢你可以不传啊 你可以不传的

19:01.080 --> 19:06.200
好 给我这么一个东西啊 那么我们 这里呢 我们就把它就是

19:07.080 --> 19:13.560
进行请求啊 进行请求 我们要生成一个请求地址 那么这个地址呢 url地址啊

19:14.360 --> 19:21.720
什么地址 什么这个地址 我们刚才写看那个地址 对吧 就这个地址啊 当然呢 我们这里最好不要加域名啊 最好不要加域名

19:21.960 --> 19:25.320
因为我最好用配置配置那个代理的方式来搞定这个域名

19:26.040 --> 19:35.480
啊 当我们请求local啊 请求这个地址的时候 那么我们把它转发到这个地址啊 转发到这个地址

19:36.040 --> 19:38.040
没有意思吧啊 转发到这个地址就完成了

19:38.760 --> 19:39.560
好

19:40.520 --> 19:49.000
好 那么我们请求这个地址啊 如果说你给我了parent id 那么我就不给你加上啊 拼接上一个什么问号

19:49.720 --> 19:55.400
然后parent id 等于等于什么了 你传递的字啊 你传递的字 对吧

19:56.200 --> 20:02.600
啊 如果说你给我了parent id 那么我就把这个地址拼接进去 最终我们都是利用利用废起api

20:03.560 --> 20:08.360
请求这个地址啊 请求 url这个地址 那么拿到服系的响应结果

20:08.920 --> 20:11.240
然后呢 把服系的响应结果转换成节省格式

20:12.360 --> 20:18.600
好 这里呢 是不是可以等待了 等待服系的响应结果 好 最后呢 把服系的响应结果返回

20:19.080 --> 20:23.960
对吧 没问题吧 好 那么这个节式就写好了 来吧 测试一下啊 测试一下

20:24.280 --> 20:29.000
我们在这个还是这个页面吧 我们把导入进来测试一下 import

20:29.560 --> 20:38.280
导入这个location啊 就是getarea from services

20:38.840 --> 20:46.520
location啊 导入它 然后呢 我们试一下啊 getarea 传一个parent id 如果我们不传 看一下能不能达到结果啊

20:46.920 --> 20:50.840
我们这里直接输出 看一下能不能达到服系的结果

20:51.800 --> 20:58.040
好 这里呢 我们看一下是不是达到服系的结果了 对不对 就这么简单 好 这就把所有的省份达到了 对吧

20:58.920 --> 21:05.480
好 来吧 那有了这个东西之后呢 我们是不是可以在一开始就去拿所有的省份啊

21:05.880 --> 21:13.400
对不对 因为我们省份的都不是写实的 你看没 省份都不是写实的 我们一开始呢就可以要去拿所有的省份

21:14.120 --> 21:21.080
那我们怎么呢 一开始去做一些事呢 是不是要利用那个use effect 对吧 之前的姿势要用起来啊 use effect

21:21.720 --> 21:23.320
use effect

21:24.360 --> 21:30.520
啊 那么这里的依赖箱呢 就是空的 没有依赖箱 只在一开始运行啊 只在一开始运行 运行一次就完了

21:31.320 --> 21:39.880
好 那么这里干嘛呢 我们是不是要set choose 去拿服务器的啊 拿服务器那边给我们的啥呢 拿服务器那边给我们的就是那个

21:40.600 --> 21:44.280
呃 数据 好 我们通过get arrear

21:45.960 --> 21:53.800
拿到服务器的所有省份 然后如果拿到之后呢 把所有的省份是不是作为把它变成我们刚才的那种格式

21:54.600 --> 22:00.360
把它放到op 形式里边 对吧 好 拿到服务器的数据啊 拿到服务器的数据过后呢 干嘛

22:00.600 --> 22:07.480
是不是把这个服务器的数据生成op 形式 然后重新给op 形式复制 对吧 好 那么这里呢 我们生成一个new

22:07.960 --> 22:11.800
op 形式 或者叫做provinces

22:12.520 --> 22:18.360
provinces 好 接下来我们这里呢 把服务器的结果 我们刚才看到了服务器的结果 是这么一种结果

22:18.600 --> 22:24.520
但这种结果呢 跟我们这边的格式还不太一样 我们这边那个数据里边每个对象是不是有自己的格式

22:24.840 --> 22:29.880
所以我们这里怎么办呢 是不是映射一下啊 把你给把服务器返回来这个数据

22:30.520 --> 22:35.720
每一个对象把这种对象格式 映射成为op 形式 需要的格式是用map

22:36.680 --> 22:37.960
来进行映射

22:39.000 --> 22:46.600
那么新的对象对象的格式是什么呢 有一个什么value值 对吧 value值呢 我们肯定是用id 这个毫无疑问啊 肯定是用id

22:47.640 --> 22:51.320
value值 然后呢 它的什么label用什么呢

22:51.960 --> 22:57.080
你看看你自己了啊 你要用它的全称呢 就用全称 但是一般不用全称 用simple name就够了

22:57.480 --> 23:03.880
用simple name 好 我们这里呢 使用它的simple name作为它的label 所以放到这里边就完事了

23:04.360 --> 23:09.960
对吧 放到这里边就完事了 好 接下来呢 这个东西是不是形成一个新的数据 我们来看一下啊

23:11.640 --> 23:12.040
保存

23:14.040 --> 23:14.840
啊 这里刷新

23:16.360 --> 23:19.960
啊 我这里为什么 这上面还在还在数据啊 再来

23:20.920 --> 23:21.320
刷新

23:23.240 --> 23:30.520
啊 你看一下是不是形成了 形成了一个新的数据 他有value值 有label 那么我们把这个新的数据是不是set 利用set choose

23:31.480 --> 23:32.120
把他放到哪

23:33.480 --> 23:37.960
provinces 把他放到我们的状态里边 是不是完了啊 保存 你看一下啊

23:38.680 --> 23:42.520
那么这样子呢 加在完成之后呢 他就会去获取审视数据

23:43.320 --> 23:44.600
啊 会去获取

23:45.880 --> 23:46.920
我们的数据呢

23:48.920 --> 23:50.120
set choose 对了的呀

23:51.560 --> 23:54.920
对了的呀 我们再输出一下啊 再输出一下

23:56.600 --> 23:57.800
set choose

23:58.760 --> 23:59.240
明白了

23:59.960 --> 24:01.560
输出一下provinces

24:05.700 --> 24:09.540
这里获取到了啊 这里获取到了这个数据

24:10.660 --> 24:12.180
value label

24:12.740 --> 24:14.980
然后呢 我们去运行set choose

24:18.120 --> 24:18.520
嗯

24:20.200 --> 24:23.160
哦哦哦 这里写错了啊 这里不是set choose啊

24:24.200 --> 24:25.080
哎呦 数标呢

24:25.880 --> 24:32.840
啊 这里不是set choose 应该是set options 对吧 这个东西要变成受控的啊 这个变成要变成自然的一个状态

24:32.920 --> 24:34.680
use that options

24:36.600 --> 24:41.560
默认值是空的啊 默认值是空的 options 要变成一个状态啊 这样子

24:42.120 --> 24:49.160
好 那么我们这里呢 然后是要重进去set options 而不是set是选中的那个啊 要是它的可选项

24:49.480 --> 24:53.320
好 保存啊 咱们再看一下 那么现在那里看一下就出来了

24:53.800 --> 24:57.720
对吧 全部出来了 对不对 我们这的所有的程式全部出来了

24:58.440 --> 24:59.000
啊 省份

24:59.720 --> 25:04.040
但是现在的省份呢 你只能这样子选择 对吧 只能这样子选择 你不能

25:04.920 --> 25:08.280
几年的状态选择 那这个东西怎么办呢 好 我们来看一下

25:09.160 --> 25:10.280
他的代码是怎么写的

25:11.160 --> 25:16.680
啊 你看一下这里个动态加载项 它代码怎么写的呢 它是要求你在这个options里边呢

25:17.240 --> 25:21.320
因为你一开始是没有办法写切尔遵的 你这里的切尔遵是没法写的

25:21.320 --> 25:25.400
因为切尔遵呢 以后要动态加载 你选的时候呢 才会给你进行加载

25:25.640 --> 25:29.960
所以说一开始你是没法写的 但是呢 我又又必须要告诉这个

25:30.520 --> 25:36.680
告诉这个就是几年选择框 你这里呢 实际上它是有指现象的 实际上是有的

25:37.160 --> 25:41.560
因此怎么办呢 这一块 我要告诉他 他实际上是有的 他怎么办呢

25:42.120 --> 25:46.840
那我们这里是不是要给他加个child呢 不是的 不是要给他加一个child

25:47.160 --> 25:51.000
而是呢 他这里的 他这里的做法呢 是要加上这么一个属性 isleaf

25:51.560 --> 25:55.160
leaf什么意思 表示的是叶子啊 叶子 树叶

25:55.880 --> 26:00.760
我们在树形结构 你们之前应该听过常常那个常老师的课程啊

26:01.080 --> 26:08.040
常常社课有个双法课程里面 他讲了个树形结构啊 树形结构 树形结构的最终节点就是一个叶子节点

26:08.280 --> 26:11.240
啊 就最终没有没有再再没有指源数了 就是叶子

26:11.640 --> 26:16.040
啊 那么他问你这个节点是不是叶子节点的 后边还有没有东西 那就是这个意思

26:16.360 --> 26:21.800
啊 他是不是叶子 如果是叶子的话 后边就没有东西了 如果不是叶子 后边就还有东西

26:22.280 --> 26:26.520
那么我们省份 后边肯定还有东西 所以他不是叶子节点 把社为force

26:27.400 --> 26:29.720
好 保存啊 保存 那么我们现在再看

26:30.520 --> 26:35.800
再看这一块 是不是一看一个箭头了 表示他后边还可以 还有东西 对吧 还有东西 对不对

26:36.120 --> 26:41.880
但是那由于他 他实际上是没有东西的啊 实际上他 实际上他 这里没有给他促捲 没有东西的

26:42.120 --> 26:46.520
因此呢 我们选他的时候呢 仍然会有个选中状态啊 以仍然会把他直接选中

26:47.080 --> 26:49.640
那怎么办呢 我们看他 又看他的代码怎么设置的

26:50.200 --> 26:57.000
他是做了这么一件事 我们直接看他里边的啊 除了设置options 除了设置unclean之外呢 他还设置了一个loaddata

26:58.120 --> 27:05.320
啊 他还设置了这么一个东西 那么这个loaddata啥意思呢 我们往下找api 他这里没有说了 对吧 没有说了

27:05.560 --> 27:12.600
他loaddata什么意思呢 他表示的是用于 他专门来用于动态加载选项 他又没有具体说什么意思

27:12.920 --> 27:18.920
啊 他就说他用专门来用于动态加载选项 而且他告诉你这个loaddata他要设置成什么玩意呢

27:19.160 --> 27:21.320
设置成一个函数 你看 这个格式是不是函数

27:23.080 --> 27:32.520
看一下这loaddata格式是不是函数 他会给你传一个参数 你这个函数呢 不需要你返回任何东西 返回voy的 不需要返回任何东西 这个要会看啊

27:32.920 --> 27:34.200
这个东西的类型要会看

27:34.840 --> 27:40.920
好 那么这个loaddata我们需要一个函数 但是他们没有明说这个函数他什么时候调用 那我们来测试一下不完了嘛

27:41.400 --> 27:42.680
好 这里写上一个loaddata

27:44.120 --> 27:48.680
好 那么这里呢 有个函数啊 有这个有这么一个函数 好 那么就直接在这写吧

27:49.560 --> 27:57.080
这个函数呢 他会给你一个参数叫snegative options 当然你可以改一下名字 无所谓 我们输出一下这个snegative

27:57.960 --> 28:01.080
snegative options 输出一下这个玩意

28:02.360 --> 28:05.080
保存啊 保存啊 接下来我们来看啊

28:05.800 --> 28:08.200
我们这里前面就不用输出了啊 前面也没有输出了

28:09.080 --> 28:14.600
好 ok 我们来看 接下来我们点击浙江 你看现在是不是没有选中了 这里没有出现值的

28:15.080 --> 28:18.840
而是他出发了这个函数 看到没 当我们选中这个

28:19.400 --> 28:22.840
非业值节点的时候 是不是选中他出发了这个函数loaddata

28:23.240 --> 28:28.600
那么这个函数他给力到什么了 给力目前给力这个数组 就是目前选中的市场

28:29.080 --> 28:33.800
选中的市场 是不是浙江 对吧 他为什么给力这个数组呢 是因为这个原因

28:34.040 --> 28:38.200
因为他不知道你选中的是第几级的 比较容易选中的第1级的第2级的

28:38.200 --> 28:43.000
如果你选中的是第2级菜单 是不是要给你数组里面有两项 有个第1级的有个第2级的

28:43.160 --> 28:49.240
他是这么个意思 所以他给力了一个数组 那我们只需要把这个数组的最后一项取出来

28:50.760 --> 28:58.040
是不是就可以拿到他当前选中的这一个了 对吧 把这个数组的最后一次 最后一个取出来

28:58.440 --> 29:03.880
好 我们取出这个数组的最后一项 取出数组的最后一项

29:04.440 --> 29:06.600
这个很好取 对吧 怎么取

29:07.560 --> 29:11.800
啊 不行啊 再来一个题的 嗯啊 不行是

29:12.360 --> 29:16.520
怎么呢 最后一项 select option is nas-1 对吧

29:17.400 --> 29:20.200
是不是取出来最后一项obt好 看一下啊

29:21.080 --> 29:28.120
这样子的一来呢 我们就可以选中啊浙江 你看是不是拿到浙江那个配置的 对吧 就是在op型里边的配置 is live force

29:28.680 --> 29:34.200
nabel浙江 children对吧 拿到这个配置的 选中江西 是不是拿到江西这个配置的对吧

29:35.640 --> 29:40.120
看到没 是不是拿到这个东西的 那么拿到这个东西是不是可以拿到id 对不对 是不是可以拿到id

29:40.200 --> 29:45.320
好 来吧 我们是不是可以在这里拿到这个id啊 我们拿到这个

29:46.360 --> 29:50.840
parent id opt的什么 value 输出parent id

29:51.400 --> 29:57.480
啊 所以可以拿到id了 对吧 这个value数 属性不就是id吗 浙江你看id id是拿到了

29:58.120 --> 30:05.560
好 拿到id之后 我们是不是又可以进行请求了 对不对 又可以进行请求 你看看他这里怎么做的

30:06.520 --> 30:07.720
我这里放小一点啊

30:08.920 --> 30:14.120
好 看看他这里怎么做的 露得他他运行了这个函数啊 他自己的用了内组件啊 他做了这么一个函数

30:14.520 --> 30:18.440
这个函数里边他做了什么事情呢 他用了个生产贸者来模拟服务器的

30:19.080 --> 30:22.760
呃 有一个加载过程 那么他把他首先呢 把这个

30:23.480 --> 30:26.840
啊 不行 你看他是不是也是拿最后一个 对吧 拿最后一个选项

30:27.240 --> 30:31.880
然后呢 把它楼顶设为去 哎 我们现在知道了 哦 原来配置里边还有个楼顶

30:32.360 --> 30:35.320
也就是说如果说你把这里的楼顶设为去配置里边

30:35.880 --> 30:36.040
啊

30:37.320 --> 30:41.560
从这里的这些原代码的信息里边就可以提供给我们大量的信息这些东西

30:42.600 --> 30:47.800
啊 你看是不是一个转转圈圈 对吧 你只要把这个配置里边的楼顶设为去对吧 就完事了

30:48.120 --> 30:53.080
啊 他就表示个正在转圈圈正在夹载中 好 那么我们这里很简单把他楼顶设为去

30:53.800 --> 30:54.440
啊 设为去

30:55.560 --> 30:58.440
好 那么设为去之后呢 设为去之后呢

30:58.840 --> 31:04.120
然后是不是开始夹载数据了 是不是重新给他的切入准复质 对吧 给这个给这个这一块的

31:04.200 --> 31:06.440
给这个配置的切入准复质 对不对

31:07.160 --> 31:09.080
所以重新给他复质就完事了啊

31:10.440 --> 31:14.200
好 那么这里重新给他复质 给他楼顶把楼顶设为去

31:14.680 --> 31:21.640
然后重新给他切入准复质 因为他之前是没有切入准的 那么这里这个时候呢 把这个选项的切入准加进去

31:22.200 --> 31:25.880
切入准是不是要从服务器请求了啊 那么我们这里来啊

31:26.280 --> 31:30.280
从服务器请求get arrear 啊 这里parent id是不是传进去

31:30.760 --> 31:34.680
对吧 传进去啊 从服务器请求 是不是又拿到服务器的数据了

31:35.240 --> 31:38.600
又拿到服务器的数据 拿到服务器的数据过后 是不是又来一次

31:39.320 --> 31:41.640
对不对 是不是又来一次啊 来吧

31:42.920 --> 31:47.720
拿到服务器的数据过后 这里是不是又生成啊 又生成一些数据 对吧

31:48.280 --> 31:55.560
vidio等于 id啊 neighbor等于 symbol name is live force 是不是又生成一些数据 好 那么这些数据呢 把它作为什么 把它作为

31:56.280 --> 32:00.600
哎 这里 把它作为啥呢 把它作为opt的qt

32:00.840 --> 32:05.320
就这个选项的qt数据 然后呢 这里同时呢 把opt的loading

32:05.960 --> 32:09.400
设置为force 但是你要注意哦 这个东西能生销吗

32:10.040 --> 32:15.160
你直接改变对象里面的数据那些东西 那个能获得响应是吗 一面会不会重新渲染了

32:15.320 --> 32:21.720
它不会 你改的是对象 你没有调用这个 你没有重新改改变状态 对吧 你没有调用这个set options

32:22.120 --> 32:28.280
它是不会重新渲染的 你只是改了这个数组 改了这个option是数组里标对象里边的东西

32:28.520 --> 32:33.000
就是你是怎么改的呢 比方说这个数组啊 这是我们的option是 这是我们的状态

32:34.600 --> 32:39.240
然后这个状态里边呢 有有很多的对象对吧 我有bandio 有label啊 有很多的对象

32:39.720 --> 32:45.080
你只是改了其中一个对象的属性 并没有调用set options

32:45.320 --> 32:50.600
那么在react里面能重新渲染吗 是不是不能重新渲染 因此呢 你这样子呢是看不见效果

32:51.080 --> 32:55.000
不要我们这里点了 你看见效果吗 看不见啊 为什么还没有重新渲染

32:55.960 --> 33:04.040
因此呢 我们这里是不是要得啊 干嘛 是不是要重新set options一下啊 让它重新渲染啊 让它触发重新渲染

33:04.600 --> 33:09.480
主要起这么一个目的 所以说我们这里呢还要做一件事啊 就是set options

33:11.080 --> 33:16.440
那么option是怎么了 就直接重新给它一个新的数组啊 要避 要避免那个就是

33:17.160 --> 33:22.120
相同的引用 因为相同的引用我们知道在又是那个set的时候啊

33:22.840 --> 33:27.240
在后壳里边用相同的引用了它不会导致重新渲染 因为之前的数组是

33:27.480 --> 33:31.240
就说就说你这里不能这样子写 你不能再把之前的数组传给它

33:31.400 --> 33:35.720
因为之前的数组的地址呢 跟现在的地址是一样的 你必须要给它一个新的数组

33:36.120 --> 33:40.760
那么这个新的数组里边的东西是怎么了 跟之前的东西一样啊 跟之前的东西一样

33:41.400 --> 33:43.000
只是为了触发重新渲染

33:44.120 --> 33:50.200
触发react的重新渲染 这样子一来那么重新给它的这个数组里边

33:51.160 --> 33:53.960
由于这个option是里边 我们这里输出看一下吧

33:55.240 --> 33:59.640
option是啊 输出看一下啊 我们先把这句话去掉

34:01.160 --> 34:02.920
啊 你看一下输出option是

34:04.360 --> 34:10.440
点击浙江啊 你看浙江里边呢 你看是不是有求准啊 就已经有求准了 对吧

34:10.840 --> 34:14.920
但是呢 因为它没有重新渲染啊 有它没有重新渲染 界面上没有反映出来

34:15.240 --> 34:17.240
所以我们只是为了让它重新渲染而已

34:17.880 --> 34:20.760
啊 因为为什么有求准 因为我们之前拿到了这个配置对象

34:21.080 --> 34:22.600
就是我们拿到了这个这个对象

34:23.080 --> 34:24.520
这个对象在哪 是不是来自于这

34:24.920 --> 34:29.080
对吧 拿到这个对象把这个对象里边的属性手动改了 看得没

34:29.240 --> 34:32.280
就手动改了啊 改了之后呢 我们让

34:32.840 --> 34:37.000
那么这个option是里边的对象自然就改了 因为对象使用的是同一个地址

34:37.800 --> 34:39.960
但是呢 我们这里只是为了重新渲染一次

34:40.680 --> 34:41.800
好 来 我们看

34:44.340 --> 34:47.940
好 浙江 你看 是不是出来了 对吧 渠州

34:48.820 --> 34:52.020
你看 是不是出来了 柯城 是不是出来了 对吧

34:52.420 --> 34:58.100
哎 你的但是很难有一个问题啊 街道后面还有东西吧 是没有东西的啊 这个服务器就爆出来了啊

34:58.580 --> 35:03.140
啊 我看我哪天有空把修复一下吧啊 直接反馈一个空数主得了

35:03.540 --> 35:05.780
啊 总之呢 这里这一块后面是不是没东西了

35:06.020 --> 35:09.700
所以说只能有四个 对吧 只能有四个 那就说明什么呢

35:09.940 --> 35:13.380
如果说你数主已经大到了最后一项了

35:14.260 --> 35:18.100
如果说你的数主边 我们最后一次获取 是不是前面数主有三项

35:18.340 --> 35:22.020
选中的是什么浙江 渠州 柯城 对吧 是不是数主有三项

35:22.260 --> 35:25.060
数主如果是三项的情况下 那么

35:25.620 --> 35:28.500
那么这个isniff呢就变成了什么 变成了q

35:29.060 --> 35:30.900
啊 我们做这么一个处理 就是如果说

35:32.100 --> 35:35.300
synaptic的option是 就是你选中的那一项lens

35:36.100 --> 35:37.940
啊 如果说你等你

35:38.660 --> 35:40.580
大云了 怎么说

35:41.940 --> 35:47.620
如果说你等云了三啊 等云了三 前面都有三个了 那么isniff就为q

35:48.020 --> 35:51.140
如果说你不等云三的话就为force 咱们再看一下

35:54.020 --> 35:55.220
来吧 又来啊

35:56.580 --> 35:59.780
咱还找一个熟悉的啊 四川 成都 济江

36:00.260 --> 36:03.060
哎 你看后边 由于 到这最后一次获取的时候

36:03.060 --> 36:05.700
由于前面选中的有三项了啊 四川 成都 济江

36:05.860 --> 36:09.700
那么他就不会再把它变成叶子节链的 我们点击 是不是可以拿到数据了

36:10.500 --> 36:13.380
对不对 然后这里获取选动值

36:14.020 --> 36:16.100
你看 是不是id全部拿到了 对不对

36:16.820 --> 36:19.700
好 这就是这一块的操作啊 云蓝

36:25.300 --> 36:28.340
这里 这里应该是出问题了 这里重新来一次啊 重新来一次

36:28.340 --> 36:31.780
这个接口不是你 不是我这里的问题啊 是个接口没有写得很好

36:32.180 --> 36:35.780
有的时候呢 是那边 是那边服务器呢 有时候拿不到啊 拿不到数据

36:36.740 --> 36:41.140
都试几次 只是做一个测试啊 你们真实的公司里面开发的时候呢

36:41.140 --> 36:44.580
接口一定是给你写得很好的啊 因为我这里太仓促了

36:44.580 --> 36:48.740
我就两下把接口 几分钟的时间把写完 写完 扔出来给你们

36:49.540 --> 36:52.340
啊 这就是这么一个纪连选择的效果啊 我

36:53.060 --> 36:56.500
主要是因为这一块呢 涉及到跟服务器之间的交互啊

36:56.500 --> 36:59.540
我怕同学们呢 不是很看得懂他的元代嘛

37:00.180 --> 37:03.620
啊 因为这块元代嘛 他没有 说的没有怎么太详细啊

37:03.620 --> 37:05.700
所以说我给大家说一下 其他都没啥

37:05.780 --> 37:08.820
好吧 下来把他练一下啊 练一下

