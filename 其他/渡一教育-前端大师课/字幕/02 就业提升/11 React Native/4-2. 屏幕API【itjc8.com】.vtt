WEBVTT

00:00.560 --> 00:02.560
OK 欢迎回来

00:02.560 --> 00:06.560
这期的课的话我们来看一下这个屏幕相关的这个API

00:06.560 --> 00:08.560
这一小节的话内容不多

00:08.560 --> 00:10.560
这边就有两个

00:10.560 --> 00:12.560
一个是Demotions

00:12.560 --> 00:14.560
一个是PaxRatle

00:14.560 --> 00:17.190
OK

00:17.190 --> 00:20.190
首先的话我们来看第一个Demotions

00:20.190 --> 00:24.190
这段我们在前面学习那个学习组建的时候

00:24.190 --> 00:26.190
我们其实已经见过他好几次了

00:26.190 --> 00:27.190
对吧

00:27.190 --> 00:29.190
我们当时的话其实已经在用了

00:29.190 --> 00:33.190
那我们这里的话就正式的来介绍一下这个API

00:33.190 --> 00:37.190
这个API的话他主要是获取这个屏幕的这个宽高的

00:37.190 --> 00:39.190
使用起来的话也比较简单

00:39.190 --> 00:40.190
你只需要通过什么呢

00:40.190 --> 00:42.190
通过这个Gate方法

00:42.190 --> 00:45.190
Gate方法你就可以获取你整个这个屏幕

00:45.190 --> 00:50.190
它的宽度啊 高度啊 包括这个尺寸啊之类的

00:50.190 --> 00:52.190
一般用法的话就是这样子

00:52.190 --> 00:56.190
通过这个你这边可以就是Demotion.GateWindows

00:56.190 --> 00:58.190
那既然这个的话他拿到的是一个什么呢

00:58.190 --> 01:00.190
他拿到的是一个对象

01:00.190 --> 01:06.190
这个对象上面就会有Wise 有Hit 有这个Scale

01:06.190 --> 01:09.190
OK 那你可以可以这边直接点Wise

01:09.190 --> 01:11.190
拿到Wise 存到一个变量里面

01:11.190 --> 01:16.190
可以这边点Hit 拿到这个高度存到一个变量里面

01:16.190 --> 01:20.190
但我平时用的话我更喜欢的其实就是这边结构

01:20.190 --> 01:22.190
直接通过这个结构

01:22.190 --> 01:25.190
然后把这个WiseHitScale把它结构出来

01:25.190 --> 01:28.190
但这个无所谓啊 这个看你自己

01:28.190 --> 01:30.190
有些时候你比如你只获取这个Wise

01:30.190 --> 01:32.190
那你这边就直接点Wise

01:32.190 --> 01:33.190
也是ok的

01:33.190 --> 01:35.190
然后这边有一个这个视力啊

01:35.190 --> 01:37.190
这个视力很简单看到没有

01:37.190 --> 01:41.190
这边就是一个盒子盒子里面有三个Text

01:41.190 --> 01:44.190
三个Text那里面分别的是屏幕宽

01:44.190 --> 01:45.190
高

01:45.190 --> 01:47.190
然后这边Scale

01:47.190 --> 01:50.190
OK 然后这边的话这个WiseHitScale

01:50.190 --> 01:54.190
就是通过这个Demotion.Gate方法

01:54.190 --> 01:56.190
大家这边Windows 拿到的

01:56.190 --> 01:57.190
ok

01:57.190 --> 02:00.190
然后把这个粒子我们看一下啊

02:00.190 --> 02:04.190
把这个粒子拿到我们的这个代码这边

02:04.190 --> 02:10.870
这边是Demotions

02:10.870 --> 02:11.870
ok

02:11.870 --> 02:13.870
然后我们保存一下

02:13.870 --> 02:15.870
保存了之后然后接下来的话

02:15.870 --> 02:16.870
我投下屏啊

02:16.870 --> 02:21.230
稍等

02:21.230 --> 02:26.080
这边手机投下屏

02:26.080 --> 02:30.080
只要每次一投屏我的这个风扇就会转起来

02:30.080 --> 02:31.080
ok

02:31.080 --> 02:33.780
可以了

02:33.780 --> 02:35.780
好 这边啊大家可以看到啊

02:35.780 --> 02:39.780
这边关于我这个屏幕的宽高以及这个尺寸啊

02:39.780 --> 02:40.780
就出来了啊

02:40.780 --> 02:42.780
这屏幕宽有点奇怪啊

02:42.780 --> 02:46.780
这边的话是392.727272

02:46.780 --> 02:49.780
对吧那高度的话是698.181818

02:49.780 --> 02:53.780
然后下面的话是它的一个尺寸2.75

02:53.780 --> 02:54.780
ok

02:54.780 --> 02:56.780
就是关于这个Demotions

02:56.780 --> 02:58.780
你比如说这个什么时候会用到呢

02:58.780 --> 03:00.780
就有些时候我们一个盒子

03:00.780 --> 03:02.780
我们想要就是站满

03:02.780 --> 03:04.780
站满它这个整个这个宽度

03:04.780 --> 03:06.780
那你是不是就可以用这个

03:06.780 --> 03:08.780
对不对比如说我们这边我们写个例子嘛

03:08.780 --> 03:10.780
比如说我这边的话

03:10.780 --> 03:15.090
下面的话再写一个这个view

03:15.090 --> 03:19.170
再写一个这个view

03:19.170 --> 03:20.170
这边一个盒子

03:20.170 --> 03:22.170
好 大家这边这个style

03:22.170 --> 03:24.170
等于一个

03:24.170 --> 03:25.170
就直接在这写了啊

03:25.170 --> 03:27.170
这边的这个宽

03:28.170 --> 03:30.170
这个宽的话我这边的是不是

03:30.170 --> 03:32.170
可以直接demotions

03:32.170 --> 03:34.170
但是我这边是已经获取了

03:34.170 --> 03:36.170
所以我这边就可以直接

03:36.170 --> 03:37.170
对吧好

03:37.170 --> 03:38.170
然后高

03:38.170 --> 03:41.170
高的话我们这边给个200嘛

03:41.170 --> 03:42.170
ok

03:42.170 --> 03:44.170
然后给个这个背景颜色

03:44.170 --> 03:46.170
边光的conner

03:46.170 --> 03:47.170
给个

03:48.170 --> 03:49.170
red

03:49.170 --> 03:50.170
ok

03:50.170 --> 03:52.480
我们保存一下

03:52.480 --> 03:53.480
保存一下

03:53.480 --> 03:54.480
好 保存了之后

03:54.480 --> 03:55.480
然后接下来的话

03:55.480 --> 03:56.480
你在这边

03:56.480 --> 03:57.480
你就可以看到一个

03:57.480 --> 03:59.480
站满整个屏幕

03:59.480 --> 04:01.480
站满整个屏幕的这个盒子

04:01.480 --> 04:02.480
对吧

04:02.480 --> 04:04.480
那我们这边在设置这个宽度的时候

04:04.480 --> 04:05.480
这边的话就是

04:05.480 --> 04:07.480
通过demotion是

04:07.480 --> 04:08.480
是不是来获取到什么

04:08.480 --> 04:10.480
你整个屏幕的宽度

04:11.480 --> 04:12.480
对吧

04:12.480 --> 04:13.480
ok

04:13.480 --> 04:14.480
这是关于这个demotion

04:14.480 --> 04:16.480
获取屏幕宽高

04:16.480 --> 04:18.480
好 然后接下来的话下一个

04:18.480 --> 04:21.480
下一个的话是这个Pixel Retail

04:21.480 --> 04:22.480
这个是什么呢

04:22.480 --> 04:23.480
这个其实就是获取

04:23.480 --> 04:25.480
以前我们讲那个

04:27.480 --> 04:28.480
移动段开发

04:28.480 --> 04:30.480
就是讲那个那个

04:30.480 --> 04:33.920
那个什么来着

04:33.920 --> 04:35.920
讲那个微博APP

04:35.920 --> 04:36.920
讲微博APP的时候

04:36.920 --> 04:38.920
我们当时是不是提到了一个

04:38.920 --> 04:41.920
物理像素和CSS像素的比例

04:41.920 --> 04:42.920
对吧

04:42.920 --> 04:45.920
那当时它有个比例叫做DPR

04:45.920 --> 04:47.920
这个你如果不熟悉的话

04:47.920 --> 04:48.920
你把那个

04:48.920 --> 04:50.920
我们讲微博APP的那个课程

04:50.920 --> 04:51.920
你把它看一下

04:51.920 --> 04:53.920
那这边简单回顾一下

04:53.920 --> 04:54.920
就是我们这边的话

04:54.920 --> 04:58.920
假设你这个CSS像素和设备像素

04:58.920 --> 05:00.920
是1比1的关系

05:00.920 --> 05:02.920
那你这个DPR的话

05:02.920 --> 05:03.920
值就是什么呢

05:03.920 --> 05:04.920
就是1

05:04.920 --> 05:05.920
OK

05:05.920 --> 05:07.920
那如果的话你一个CSS像素

05:07.920 --> 05:09.920
对应两个设备像素

05:09.920 --> 05:12.920
那这个DPR值就是2

05:12.920 --> 05:13.920
那这边呢

05:13.920 --> 05:14.920
以这个iPhone4为例

05:14.920 --> 05:16.920
你的物理像素的话是640

05:16.920 --> 05:18.920
CSS像素的话是320

05:18.920 --> 05:20.920
那你640出一个320

05:20.920 --> 05:23.920
那它的这个Pixel Retail

05:23.920 --> 05:24.920
就应该是多少呢

05:24.920 --> 05:26.920
就应该是2

05:26.920 --> 05:27.920
它这边的话

05:27.920 --> 05:28.920
在2n里面

05:28.920 --> 05:30.920
你可以通过这个Pixel Retail

05:30.920 --> 05:31.920
它这边呢

05:31.920 --> 05:32.920
有一个静台方法

05:32.920 --> 05:33.920
Gate

05:33.920 --> 05:36.920
你可以获取到当前的这个DPR值

05:36.920 --> 05:37.920
那比如说我们这边

05:37.920 --> 05:38.920
把这个例子看一下

05:38.920 --> 05:48.090
然后把这个注射掉

05:48.090 --> 05:50.090
这边这边呢

05:50.090 --> 05:52.090
是Pixel Retail

05:52.090 --> 05:56.450
OK

05:56.450 --> 05:59.450
这边那就是有一个DPR

05:59.450 --> 06:00.450
对应的这边DPR

06:00.450 --> 06:01.450
DPR等于什么呢

06:01.450 --> 06:03.450
等于这边Pixel Retail

06:03.450 --> 06:04.450
点Gate

06:04.450 --> 06:05.450
好

06:05.450 --> 06:06.450
那我们这边

06:06.450 --> 06:07.450
我们来看一下

06:07.450 --> 06:08.450
保存

06:08.450 --> 06:09.450
保存之后

06:09.450 --> 06:10.450
然后接下来看一下

06:10.450 --> 06:12.450
这边是不是就获取到了

06:12.450 --> 06:13.450
对吧

06:13.450 --> 06:15.450
一个很奇怪的这个DPR值

06:15.450 --> 06:17.450
2.75

06:17.450 --> 06:19.450
一般来讲的话

06:19.450 --> 06:20.450
我们这边

06:20.450 --> 06:21.450
就是常见的这个

06:21.450 --> 06:22.450
设备的这个DPR值

06:22.450 --> 06:24.450
你这边可以看一下

06:24.450 --> 06:26.450
因为常见的有1

06:26.450 --> 06:27.450
1.5

06:27.450 --> 06:28.450
这边2

06:28.450 --> 06:29.450
3

06:29.450 --> 06:33.170
3.5

06:33.170 --> 06:34.170
这边的话

06:34.170 --> 06:35.170
你可以看到比如说

06:35.170 --> 06:36.170
这个iPhone 4

06:36.170 --> 06:38.170
包括这个iPhone 5s

06:38.170 --> 06:39.170
5C 5s

06:39.170 --> 06:41.170
然后iPhone 678

06:41.170 --> 06:43.170
它的话它的这个

06:43.170 --> 06:44.170
DPR

06:44.170 --> 06:46.170
一般的话是这个2

06:46.170 --> 06:48.170
2的话其实就已经是高清平了

06:48.170 --> 06:49.170
就是你的那个

06:49.170 --> 06:52.170
设备像素和这个CSS像素

06:52.170 --> 06:53.170
是1比2的关系

06:53.170 --> 06:54.170
就是

06:54.170 --> 06:55.170
一个CSS像素

06:55.170 --> 06:57.170
对应两个设备像素

06:57.170 --> 06:59.170
你这个按平方来算的话

06:59.170 --> 07:00.170
其实就是应该是4个

07:00.170 --> 07:01.170
应该是4个

07:01.170 --> 07:02.170
你这边是2

07:02.170 --> 07:03.170
2的话

07:03.170 --> 07:04.170
它其实就已经是高清了

07:04.170 --> 07:06.170
而且你如果能打到3

07:06.170 --> 07:07.170
打到3的话

07:07.170 --> 07:08.170
它就是什么呢

07:08.170 --> 07:10.170
它就是一个超高清

07:10.170 --> 07:11.170
超高清的屏幕

07:11.170 --> 07:14.170
那常见的有这个iPhone 6 Plus

07:14.170 --> 07:16.170
iPhone 7 Plus

07:16.170 --> 07:18.170
包括后面出了什么Max

07:18.170 --> 07:20.170
XS

07:20.170 --> 07:21.170
一般就是3

07:21.170 --> 07:23.170
苹果的话一般就倒3

07:23.170 --> 07:24.170
就差不多了

07:24.170 --> 07:26.170
因为苹果认为就是倒了3

07:26.170 --> 07:27.170
你超过3之后

07:27.170 --> 07:29.170
也没有太大的意义了

07:29.170 --> 07:31.170
倒3的话就已经非常清晰了

07:31.170 --> 07:32.170
你后面的话

07:32.170 --> 07:34.170
你再往里面加这个物理像素

07:34.170 --> 07:36.170
理论上可不可以呢

07:36.170 --> 07:37.170
理论上是可以的

07:37.170 --> 07:39.170
但是你这个就是没有太大意义

07:39.170 --> 07:41.170
苹果的设备的话一般就倒3

07:41.170 --> 07:42.170
但是近几年的话

07:42.170 --> 07:44.170
这个安卓这个设备

07:44.170 --> 07:47.170
安卓设备还推出了3.5

07:47.170 --> 07:48.170
3.5

07:48.170 --> 07:49.170
你可以看到我这边

07:49.170 --> 07:51.170
这个是2.75

07:51.170 --> 07:52.170
接近什么

07:52.170 --> 07:53.170
接近3

07:53.170 --> 07:55.170
接近于超高清

07:57.170 --> 07:58.170
还有一点

07:58.170 --> 07:59.170
还有点就是

07:59.170 --> 08:00.170
我们通过前面的学习

08:00.170 --> 08:01.170
我们知道

08:01.170 --> 08:04.170
RN里面所有的尺寸是没有单位的

08:04.170 --> 08:06.170
你看我们之前设置的这些

08:06.170 --> 08:07.170
这些

08:07.170 --> 08:09.170
包括这边

08:09.170 --> 08:10.170
比如说刚才吗

08:10.170 --> 08:11.170
刚才这边的话

08:11.170 --> 08:13.170
设置这个高度啊

08:13.170 --> 08:14.170
包括这边

08:14.170 --> 08:16.170
设置这个高度

08:16.170 --> 08:17.170
对吧

08:17.170 --> 08:18.170
它是没有这个单位的

08:18.170 --> 08:19.170
那在RN里面

08:19.170 --> 08:20.170
它的单位是什么呢

08:20.170 --> 08:22.170
RN里面它其实有一个

08:22.170 --> 08:23.170
统一的单位

08:23.170 --> 08:25.170
叫做DP

08:25.170 --> 08:27.170
它这个统一单位叫做DP

08:27.170 --> 08:28.170
它这个的话

08:28.170 --> 08:30.170
它其实也是一种抽象单位

08:30.170 --> 08:32.170
它是基于什么呢

08:32.170 --> 08:34.170
基于你这个屏幕密度的

08:34.170 --> 08:35.170
这个抽象单位

08:35.170 --> 08:36.170
OK

08:36.170 --> 08:38.740
然后这里的话

08:38.740 --> 08:41.740
我们可以通过这个Pixel Retail

08:41.740 --> 08:44.740
它提供了一些这个静态的方法

08:44.740 --> 08:46.740
然后我们可以让这个DP单位

08:46.740 --> 08:49.740
和这个真实的这个物理相处单位

08:49.740 --> 08:51.740
做一个这个转换

08:51.740 --> 08:52.740
一个叫做什么呢

08:52.740 --> 08:54.740
一个叫做GetPixelSize

08:54.740 --> 08:56.740
forLayoutSize

08:56.740 --> 08:58.740
这个名字很长啊

08:58.740 --> 08:59.740
它就是什么呢

08:59.740 --> 09:01.740
它就是获取一个部级元素

09:01.740 --> 09:03.740
真实的相处大小

09:03.740 --> 09:05.740
当然这里的相处大小的话

09:05.740 --> 09:07.740
指的就是这个物理相处

09:07.740 --> 09:08.740
OK

09:08.740 --> 09:11.740
返回的值是一个四手五入的这个整形

09:11.740 --> 09:14.740
然后这边的话是这个

09:14.740 --> 09:17.740
另外一个是RoundToLearEast

09:17.740 --> 09:18.740
Pixel

09:18.740 --> 09:21.740
它就是将真实的相处大小

09:21.740 --> 09:22.740
转为什么呢

09:22.740 --> 09:25.740
转为这个RN里面的这个DP的这个单位

09:25.740 --> 09:27.740
你看我这边的话写了一个

09:27.740 --> 09:28.740
写了两个方法

09:28.740 --> 09:31.740
一个是DP to这个PX

09:31.740 --> 09:32.740
然后这边的话

09:32.740 --> 09:34.740
接收一个DP值

09:34.740 --> 09:36.740
就你传入一个这个值

09:36.740 --> 09:38.740
那接下来我通过调用什么呢

09:38.740 --> 09:40.740
调用这个PixelRatio

09:40.740 --> 09:42.740
点GetPixelSize

09:42.740 --> 09:44.740
然后forLayoutSize

09:44.740 --> 09:46.740
把这个的话转成什么呢

09:46.740 --> 09:47.740
把这个

09:47.740 --> 09:49.740
转成这个真实的这个

09:49.740 --> 09:51.740
物理相处

09:51.740 --> 09:52.740
大家这个的话就是反则的

09:52.740 --> 09:53.740
这个的话调的是什么呢

09:53.740 --> 09:56.740
调的是这个RoundToLearEast

09:56.740 --> 09:57.740
Pixel

09:57.740 --> 09:58.740
OK

09:58.740 --> 10:03.500
这些课的话就给大家介绍

10:03.500 --> 10:04.500
这两个啊

10:04.500 --> 10:06.500
这两个屏幕相关的这个API

10:06.500 --> 10:07.500
一个是DemotionS

10:07.500 --> 10:09.500
一个是PixelRatio

10:09.500 --> 10:10.500
OK

10:10.500 --> 10:12.500
这个的话大家下来简单看一下

10:12.500 --> 10:13.500
就可以了

10:13.500 --> 10:14.500
这个你都不用敲带嘛

10:14.500 --> 10:15.500
因为这个一般平时的话

10:15.500 --> 10:17.500
就这个DemotionS

10:17.500 --> 10:19.500
这个用的要多一些

10:19.500 --> 10:22.500
然后这个PixelRatio

10:22.500 --> 10:24.500
这个的话在做适配的时候

10:24.500 --> 10:26.500
就我这个不同的这个图片啊

10:26.500 --> 10:28.500
或者这个盒子

10:28.500 --> 10:29.500
这边做适配的时候

10:29.500 --> 10:31.500
可能会用的

10:31.500 --> 10:32.500
OK

10:32.500 --> 10:34.500
这句课的话就先到这里

10:34.500 --> 10:35.500
再见

