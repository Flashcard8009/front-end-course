WEBVTT

00:00.750 --> 00:07.230
OK 欢迎回来 把咱们继续啊 上节课的话 咱们已经把这个查看更多

00:07.710 --> 00:15.270
就是上面这个部分啊 就上面的这个主键啊 这边这个电影 影院 这边可以正常的这个切换 对吧

00:15.830 --> 00:24.550
好 然后接下来的话 我们这节课的话 我们把这里 就是这边的话 正在热印和即将上映啊 这边的话所对应的这个内容

00:25.070 --> 00:30.870
我们把它就是写了啊 这一块的话 其实大家之前是写过的 我们来看一下

00:32.030 --> 00:36.510
嗯 在在这里 这里 然后

00:38.390 --> 00:39.150
我先看一下哈

00:40.110 --> 00:47.950
呃 更多 查看更多这里是吧 啊 这一块 这一块呢 是不是就是之前写的那个下拉刷新

00:48.710 --> 00:53.430
以及那个上拉夹仔 对不对 啊 其实就是那一块

00:53.990 --> 01:00.190
OK啊 所以我们这边的话 其实我们可以把之前的那个主键直接拿过来用啊 当然我这边让我再写一遍吧

01:00.710 --> 01:06.670
为了加深大家的印象 我这边再写一遍 但如果呢 这个这一块大家已经很熟了的话 那这一节课你可以跳过啊

01:07.110 --> 01:12.350
可以跳过 如果不熟悉的同学呢 可以跟着我再来写一遍 好吧 OK

01:13.350 --> 01:17.430
好 我们这边来看一下 嗯 这里的话首先是

01:18.310 --> 01:24.070
我们现在是什么样子了 啊 现在是这边是正在热印 然后即将上映啊 对应的是这两瓶

01:25.270 --> 01:30.670
对吧 对应的这两瓶 这两瓶的话 然后这两瓶其实本质上这这一块

01:31.550 --> 01:35.990
是一样的 对吧 无论是正在热印还是这个即将这个上映

01:36.750 --> 01:41.030
他这个整个是一样的啊 只是什么不一样 这不只是内容不一样

01:41.830 --> 01:45.110
对吧啊 所以说我们这边的话可以把整个这一块啊

01:45.750 --> 01:52.270
整个这一块啊 我们再单独的封装一个组件 那这个组件的话叫做这个啊 more movie

01:54.890 --> 01:56.890
more 然后movie

01:57.850 --> 02:02.450
铁接下啊 这个就是什么呢 这个就是我们的更多电影

02:04.130 --> 02:05.290
更多电影啊

02:06.050 --> 02:11.410
好 然后接下来的话 来到你这边 这边这个安秀这边 这边安秀这边的话是正在上映

02:11.730 --> 02:16.010
让我们这边的话 我们就干嘛呢 我们这边的话就引入

02:17.330 --> 02:20.050
import 这个more movie

02:22.580 --> 02:23.860
然后from

02:25.220 --> 02:29.220
这个上一集目录的views 下面的这个

02:30.380 --> 02:35.140
不是views 是这个components 下面的movie

02:36.020 --> 02:41.020
对吧 引入 引入了之后 然后接下来这边的话 返回这边的话 下面的样式就不要了

02:43.140 --> 02:47.700
这里 这里的话就是应该是movie 返回这个组件

02:48.300 --> 02:54.660
这边就直接一个单组件就可以了啊 然后接下来 这边呢 给他传一个什么过去呢 给他传一个这个type

02:55.500 --> 03:02.500
过去 这边代表什么呢 代表你现在你跳过去 你这一瓶的话显示的是正在这个上映

03:03.140 --> 03:08.580
啊 所以我这边传一个type 等于一个安秀啊 这些的话也就都不要了

03:09.580 --> 03:12.540
ok 好 然后如果是那个

03:13.740 --> 03:17.340
comming soon 就是即将上映啊 那这边的话也是

03:18.740 --> 03:25.620
直接就这个样子 然后接下来这边的话是等一下把那个复制过来 这边的是comming soon

03:27.740 --> 03:33.740
ok 好 然后接下来的话这里 这里的话 然后这边你就是一个comming

03:34.740 --> 03:42.540
comming soon 啊 给他不同的这个type 值 那回头的话 我在这个movie里面 我根据你这个不同的这个type 值

03:42.980 --> 03:45.180
我是不是就知道渲染这个不同的内容

03:46.140 --> 03:51.340
对不对 ok 好 然后接下来我们这边呢 首先把要用到的组件

03:52.140 --> 03:57.020
我们先把他引进来啊 这边的话view 然后flatter

03:58.940 --> 04:00.940
list 然后

04:01.940 --> 04:02.940
emotions

04:03.940 --> 04:09.740
然后还有一个text 然后style sheet 啊 大家还有一个这个

04:12.060 --> 04:14.260
够了哈 就这些 然后from

04:15.140 --> 04:15.460
这个

04:16.580 --> 04:25.230
react let it ok 好 然后我们还需要引入引入这个制定一组件

04:26.630 --> 04:30.990
我们一会会用到什么呢 就那个夹载 夹载那个条那个时候肯定得用到

04:31.710 --> 04:33.470
对吧 所以我们这边的话 import

04:34.190 --> 04:43.630
import 一个这个loading con 把这个引入 然后引入完了之后 然后接下来的话 这边 获取一下这个屏幕的宽度

04:45.110 --> 04:50.230
获取屏幕的宽度 然后这边呢 就是const

04:51.430 --> 05:00.550
这边呢 这个wise 等于一个emotions 点get window 结构 把这个宽度拿到

05:01.230 --> 05:03.550
好 然后接下来的话 这边 import

05:04.870 --> 05:05.710
default

05:06.590 --> 05:13.800
function 然后movey 啊 这边有一个pops 对吧

05:14.560 --> 05:16.960
啊 我从这个pops里面 我们要结构 把什么拿出来

05:17.680 --> 05:24.000
就把那个type 拿出来 对吧 回头我知道他究竟是哪一瓶是正在热饮 还是即将上瓶

05:24.640 --> 05:28.240
啊 这边从pops 把这个type 把它拿到

05:28.880 --> 05:33.920
好 拿到之后 然后接下来的话 这边 我们就可以返回一段接下

05:34.760 --> 05:35.280
return

05:36.760 --> 05:37.680
返回一段接下

05:38.360 --> 05:46.280
ok 好 这边的话 我们还是先把那个样式 把拿过来 样式的话movey 我看这边 样式不多啊

05:47.560 --> 05:48.360
好 把拿过来

05:50.400 --> 05:54.280
拿过来之后 然后接下来话 我们这边还需要就是 我们这边得用到那个

05:55.240 --> 05:59.200
状态 对吧 这个组件里面会有状态 拿来存储那个电影

05:59.800 --> 06:01.520
啊 说说我们这边的话 import

06:02.320 --> 06:03.320
一个user

06:04.240 --> 06:08.560
state 以及 以及这个包括这个user effect

06:09.600 --> 06:10.440
然后from

06:11.480 --> 06:11.800
rat

06:12.920 --> 06:16.920
对吧 把这个拿出来 拿出来之后 然后接下来的话 这边 组件

06:18.880 --> 06:23.280
维护 自身的状态 那这边的话const

06:23.760 --> 06:24.520
我们这边有什么

06:25.640 --> 06:30.040
首先的话 你得有一个拿来存放电影的吧 我们这边就叫做movie

06:31.080 --> 06:38.160
movie list 啊 这边的一个set movie list

06:39.040 --> 06:41.600
等于一个啊 一开始的话是一个

06:42.800 --> 06:43.240
空速主

06:44.400 --> 06:47.920
ok 好 然后接下来的话 还有一个什么呢 还有一个就是这个loaded

06:49.080 --> 06:49.560
const

06:50.360 --> 06:50.640
一个

06:51.520 --> 06:54.240
loaded 这个写了很多次了啊 set

06:55.080 --> 06:55.760
这个loaded

06:56.920 --> 06:58.640
这个是什么 就是内容是否夹仔

06:59.640 --> 07:00.400
user state

07:02.560 --> 07:06.640
啊 一开始的话是一个force 对吧 这个是内容

07:08.080 --> 07:09.320
内容是否夹仔好

07:10.840 --> 07:12.520
是否夹仔

07:13.520 --> 07:20.000
完毕啊 这个是什么呢 这个是存储电影内容

07:20.960 --> 07:28.480
ok 好 然后完事之后 然后应该通过什么呢 通过那个use effect 是不是来获取数据

07:29.800 --> 07:30.400
通过

07:31.600 --> 07:40.200
这个use effect来获取数据啊 说说我们这边use effect

07:42.350 --> 07:44.870
好 方形这是我们要做的事情

07:45.470 --> 07:49.550
好 然后接下来里面里面的话 然后一个空速主代表什么都不依赖

07:50.110 --> 07:55.750
好 这边这边的话 然后我们这里的话就是 这边有一个api啊 在这里

07:57.030 --> 08:00.750
在这边service 有一个api叫做这个query

08:02.470 --> 08:09.830
嗯 在这边上面啊分页查询这个电影 这边的话接受一个就是当前的页码

08:10.350 --> 08:13.070
以及就是这个每一页显示多少条

08:13.870 --> 08:21.230
可能没有啊 默认的话 这边有个默认值一十啊 大家这边的话就是给你返回对应页码的这个电影

08:21.830 --> 08:24.070
好 然后由于我们这边的话是有两瓶

08:24.870 --> 08:34.350
对不对 有一个这个正在热应 有一个这个即将上映 但本质上的话 无论是正在热应还是这个即将上映

08:34.910 --> 08:39.590
他们其实就是怎么样 是不是其实就是显示这个对应的这个电影内容

08:40.550 --> 08:42.790
对不对 显示不同的这个电影内容而已

08:43.670 --> 08:48.790
那我这边作为模拟的话 我这边就这样子 热应的话就显示这个第一页

08:50.030 --> 08:53.870
第一页 然后前十条啊 就是从第一条到第十条

08:54.390 --> 08:57.990
好 大家这个即将上映 即将上映的话 我们就把这个页码稍微改一下

08:58.590 --> 09:00.190
模拟这么一个效果

09:00.990 --> 09:06.110
好不好 OK 好 说说我们这边来到这上面 上面的话 我们这边

09:07.070 --> 09:07.790
定义一个

09:08.790 --> 09:13.870
net 一个 current page

09:14.790 --> 09:19.310
等于一个这个1 啊 这个呢 代表什么呢 代表当前一

09:20.990 --> 09:24.830
啊 然后还有一个什么呢 我这边的话 还需要知道一个总页数

09:26.110 --> 09:33.110
呃 总页数一会再来吧 我这边先在这写啊 好 这里 这里的话 然后我这边就进行一个判断了

09:33.710 --> 09:34.390
一副

09:36.190 --> 09:43.030
一副什么呢 一副这个菜谱全等于一个安秀 那说明什么

09:44.430 --> 09:48.870
说明是什么 是不是正在热营

09:49.750 --> 09:54.110
对吧 那我这边的这个current page 我就让他从这个1开始

09:55.070 --> 09:55.910
好否则的话

09:58.500 --> 10:02.820
否则的话这个current page 我让他等于一个

10:03.820 --> 10:12.580
等于个10啊 啊 这边那是说明是这个即将上营

10:13.820 --> 10:20.940
OK 啊 但是你现在就是真实开发中的话 那你这边的话 肯定是根据你究竟是要热营 还是这个上营

10:21.460 --> 10:27.140
请求这个对应的内容 啊 这边说一下啊 免得有同学误解 就是真实开发中

10:28.140 --> 10:46.140
真实开发中啊 肯定 肯定是根据不同的这个太阔值啊 然后请求对应的内容啊 但是我们这里只是什么呢

10:47.140 --> 10:53.580
指涉模拟这个获取不同不同

10:55.740 --> 10:59.060
内容的效果啊 因此

11:00.180 --> 11:08.660
因此简单 然后简单的这个设置一下不同的这个当前页码数

11:09.660 --> 11:12.460
当前页码数

11:14.060 --> 11:18.940
啊 然后从而获取到不同的内容

11:19.980 --> 11:24.940
OK 我把这个的话要给大家说清楚啊 这正常你开发的话 那你肯定是就是

11:25.860 --> 11:32.740
你比如说进这个安修了 那我这边的话 就是应该是去请求这个安秀啊 对应的是这个安秀类别的这个电影

11:33.260 --> 11:35.780
这边的话 就是应该是请求对应的这个康明数

11:36.500 --> 11:37.380
类别的这个电影

11:38.180 --> 11:43.740
对不对啊 但我们这边呢 我没有服务器 我们这边整个的这个都是本地的数据

11:44.260 --> 11:52.180
对吧 那我这边呢 就通过把这个current page 稍微设置成不同的啊 然后从而就是获取到这个不同的数据啊

11:53.260 --> 12:00.740
好 然后接下来的话 这边这边把这个current page 设置完了之后好 然后接下来这个query 我还没引进来是吧

12:01.300 --> 12:13.920
好 我们这边把那个api 引入一下 啊 这边 引入 引入 api 啊 这边const

12:14.640 --> 12:18.760
这边的话就是一个query movie

12:20.120 --> 12:22.960
然后 api 然后等于

12:25.120 --> 12:30.720
const off from 这边的话

12:32.880 --> 12:35.480
啊 这边 import啊 sorry

12:36.320 --> 12:46.240
这边 import 然后 from 啊 上一集目录的 api 下面的service 对吧 把这个 api 把它引进来

12:46.800 --> 12:49.760
好 引进来了之后 然后接下来这边了就可以使用这个 api了

12:50.000 --> 12:54.640
query movies api 啊 把什么呢 把这个current page

12:55.600 --> 13:02.720
把他传过去啊 这个第二个参数你其实可以不用传 因为第二个参数默论这个配级赛子就是10条

13:03.760 --> 13:08.880
对吧 默论就是10条啊 那我这边这边就不传了哈 这边就写个current page

13:09.520 --> 13:14.800
好 然后接下来的话 这里这里的话 然后他是会返回一个promise 所以我们这边点认

13:16.400 --> 13:20.960
二es 啊 拿到拿到之后 然后接下来的话 这边set

13:21.760 --> 13:22.880
这个mov list

13:23.760 --> 13:27.840
res 是不给他 给他之后 然后接下来这个loaded

13:28.720 --> 13:32.080
loaded 然后接下来的话 这边把它设置为什么 设置为去啊

13:33.120 --> 13:35.280
set loaded

13:37.200 --> 13:38.960
啊 把它设置为去

13:40.320 --> 13:43.440
ok 那整个这一块呢 是不是就是把数据就拿到了

13:44.080 --> 13:48.320
好 数据拿到了之后 然后接下来下面 下面return这一块

13:49.120 --> 13:52.400
啊 这一块的话呢 我们这里的话就是首先看一下

13:54.080 --> 13:59.840
你的loaded 是否等于force 如果等于force的话 那我们这边就显示这个loading count

14:00.560 --> 14:04.720
显示这个组件 对吧 好否则的话 我们这边就返回个什么呢

14:06.000 --> 14:09.040
我们这边的话就返回这里的话 就是应该是通过什么

14:09.600 --> 14:11.200
就通过flat list

14:12.240 --> 14:15.920
通过flat list 对吧 啊 渲染不同的组件

14:16.720 --> 14:18.560
flat list

14:22.220 --> 14:27.260
ok flat list 接受几个参数还记不记得 首先的话有一个data

14:27.900 --> 14:32.620
一个数据 数据的话我们对应的是什么 是movie item

14:35.650 --> 14:37.650
啊 不是movie item movie list

14:38.770 --> 14:43.010
对吧 对呢 movie list 好 然后接下来的话会有一个什么

14:43.570 --> 14:46.770
会有一个这个key instructor

14:47.570 --> 14:51.090
key instructor 那我们这边的话就通过什么来设置key呢

14:51.490 --> 14:54.450
我们这边的话接受到每一个item

14:55.650 --> 14:58.450
然后返回我们就用什么来作为key

14:59.490 --> 15:02.690
就用这个item它上面有个什么呀

15:03.330 --> 15:07.250
它有一个这个id 对吧 我们就用这个id来作为key

15:07.250 --> 15:09.330
所以这边的返回item.id

15:09.890 --> 15:13.650
这个的话来作为key 好 然后接下来的话还有一个非常重要的

15:14.130 --> 15:16.690
什么东西呢 就是render item

15:18.130 --> 15:23.890
对吧 这render item render item的话 那我这边的话对应的就应该是一个函数

15:25.810 --> 15:30.850
啊 对应个函数 函数里面返回一个什么 这返回一个这样的组件

15:31.490 --> 15:34.050
我们这边上是不是还需要有这么一个组件啊

15:35.330 --> 15:39.250
对不对 有这么一个组件啊 然后这个组件的话

15:39.810 --> 15:42.290
我这边写的是叫做这个

15:44.750 --> 15:49.070
叫做这个movie sale 先写在这哈 我马上回头就写这个组件

15:49.630 --> 15:52.910
叫做movie sale 每一个这个单元

15:54.030 --> 15:57.230
好movie sale 然后接下来这边的话你需要传一些东西给他

15:57.790 --> 16:00.350
传什么呢 首先就是你movie的这个信息

16:00.910 --> 16:04.030
对吧movie 当你这边的movie的信息来源于哪里

16:04.030 --> 16:06.030
所以这边的话就是应该是解构

16:06.910 --> 16:08.910
拿到每一条电影数据

16:09.550 --> 16:13.550
就是你这边每一条这个电影数据啊每一条电影数据

16:13.950 --> 16:17.950
是吧 通过这个item拿到拿到了之后 然后下原封不动的干嘛

16:18.270 --> 16:22.990
是传给这个movie sale对不对传递给他啊

16:23.470 --> 16:26.990
好 那接下来的话我们这边的话我们新建一本

16:29.440 --> 16:34.560
新建一个movie sale 点接下啊 这边你要引一下哈

16:35.520 --> 16:40.800
这边引入 import movie sale from

16:41.600 --> 16:43.040
当前目录下

16:44.000 --> 16:49.840
然后movie sale啊这个这个也是应该是当前目录

16:51.600 --> 16:54.240
当前目录下面啊loading count

16:55.040 --> 16:58.320
ok 好 然后接下来来看一下这个movie sale

16:58.320 --> 17:00.000
movie sale之前是不是也是写过的

17:01.040 --> 17:02.320
这个这块是不是也是写过的

17:02.960 --> 17:06.400
对吧好 这边我们就直接把拿过来吧

17:06.800 --> 17:08.880
这movie sale 这个movie sale没什么好写的

17:09.600 --> 17:11.680
这边就是左边一个这个图片

17:12.240 --> 17:16.800
右边的话这个标题上映时间 评分 然后接下来这些之类的这个

17:17.760 --> 17:21.680
信息这个之前的话也写过一遍的我就直接拿过来了好吗

17:22.240 --> 17:23.440
啊 这个我就不写了啊

17:24.080 --> 17:27.520
然后把这个movie sale在这边啊

17:27.920 --> 17:28.720
直接把人拿过来

17:29.280 --> 17:33.360
ok 都是都是一些很常见的对吧 就是一个一个把它炫出来就可以了

17:33.920 --> 17:37.360
把他拿过来放过来啊

17:38.000 --> 17:43.360
好 然后接下来的话回到回到这边啊 我们接下来来继续来写我们的这个

17:44.080 --> 17:48.720
嗯 这边的flatter list 然后把每一个这个movie sale把它炫出来

17:49.200 --> 17:52.160
基本差不多了是吧好 来我们来保存一下

17:53.040 --> 17:54.240
保存一下我们来看一下

17:56.160 --> 18:00.720
啊 这边呢首先第一个就是wise找不到啊 这边写错了啊

18:01.440 --> 18:08.240
wise ok 再来啊一点一点来看有没有什么错误

18:09.440 --> 18:12.160
是不是出来了 这边是不是出来了

18:13.280 --> 18:18.160
对不对 出来了 ok 那这边呢这个是啊一到十

18:18.640 --> 18:24.720
然后接下来这边这边的话是那个就是从我们的十页是吧那就是一百

18:25.280 --> 18:29.600
那一百到一百一 ok 然后就是反正就是两边效果不一样

18:30.560 --> 18:36.800
ok 好 然后接下来的话这里你注意这里的话比如说我点击这个查看更多

18:37.360 --> 18:43.280
啊 这边的话啊这个这个loading 是不是有效果啊 这边大家看不到啊啊 这边loading 是不是有效果

18:43.680 --> 18:52.000
ok 那这一块就搞定了 这一块搞定了之后 然后接下来的话就是什么呀 是下拉刷新啊

18:53.680 --> 18:56.960
对不对 下拉刷新好来回顾一下下拉刷新该怎么做

18:57.360 --> 19:02.320
这边下来刷新的话 关于这个下来刷新我看这能不能写注射

19:03.200 --> 19:11.360
下拉刷新啊 可以写注射啊 这边这边的话他会有一个什么呢 会有一个这个叫做refreshing

19:12.880 --> 19:20.240
refreshing 对吧 你这个是2s force 那我们这边的话会通过一个状态去控制

19:20.800 --> 19:22.960
啊 说说我们这边的话 const

19:23.600 --> 19:26.480
一个这个header 这个fresh

19:27.680 --> 19:31.040
refresh

19:31.520 --> 19:36.590
那加这边set header refresh

19:37.470 --> 19:41.630
啊 默认的话一开始的话应该是什么 一开始的话是不是应该是force

19:42.990 --> 19:45.950
对吧 啊 这边force 这个是头部

19:46.270 --> 19:50.030
头部是否下拉

19:51.070 --> 19:51.390
刷新

19:52.110 --> 19:56.430
好 然后接下来的话 这边一开始的话就是这边对应的值就是应该是header

19:57.550 --> 19:58.110
refresh

19:58.830 --> 20:00.670
啊 除此以外的话他还会有一个什么

20:01.470 --> 20:03.790
说还会有一个这个unrefresh

20:06.430 --> 20:15.660
un这个refresh啊 那我们这边就叫做refresh handle handle

20:16.780 --> 20:20.300
ok 那他对应的就是应该是一个什么 应该是对应一个喊数

20:21.340 --> 20:23.820
对吧 好 所以这边的话就是function

20:24.940 --> 20:26.460
refresh handle

20:27.660 --> 20:32.220
啊 这里面应该做什么 这里面的话是不是应该是从服务器去获取新的数据

20:34.940 --> 20:41.660
从服务器获取新的数据啊 然后接下来的话更新什么

20:42.540 --> 20:45.260
更新这个本地

20:46.860 --> 20:51.900
本地的数据 ok 好这个的话这个接口我们这边也是有的 就这里

20:52.460 --> 20:56.060
随机刷新两步 对吧 我们直接把这个接口把拿过来

20:57.580 --> 21:06.000
那把它放到这里 放到这里 好 然后接下来完事之后我们这边呢就是应该是

21:07.040 --> 21:10.000
请求 发这个请求啊 首先的话把那个

21:10.560 --> 21:14.800
这边的话首先把这个setheaderrefresh把它设置为处

21:15.760 --> 21:20.720
让他那个圈圈啊出来 是吧 出来之后然后接下来这边请求

21:21.200 --> 21:25.760
请求了之后 然后加这边点认 然后拿到返回的数据

21:26.560 --> 21:30.000
拿到之后 然后接下来的话 这边const一个ar

21:30.640 --> 21:36.160
等于一个 什么呢 点点点 首先把这个新的电影放在前面

21:36.880 --> 21:39.040
对吧 然后接下来再把这个旧的电影

21:41.070 --> 21:47.310
旧的电影放在后面 放在后面之后 然后加这边重新set movie list

21:47.790 --> 21:51.630
哎呀啊 对吧 好 大家这边再setheader

21:52.990 --> 21:57.230
headerrefresh把它设置为什么 设置为force

21:58.430 --> 22:02.350
对吧 整个这个的话就是这么写的 好 我们这边保存一下

22:04.820 --> 22:09.140
保存 保存了之后 然后接下来这边来看一下啊 看一下好不好使

22:10.500 --> 22:15.460
啊 这边出来了啊 大家我这边下了啊 出来啦啊 这边开始转

22:17.140 --> 22:18.020
啊 这边的话就

22:19.220 --> 22:24.420
出来是出来了 这边那报了一个错啊 倒不是错 这边那是一个警告

22:24.900 --> 22:26.740
他说就是必须要就是

22:27.780 --> 22:33.620
那个key啊key有可能重复 因为我们这边用了什么来当做key啊 是不是item的id

22:34.420 --> 22:39.460
item的id这里就会存在一个问题 就是什么呢 因为我这边的话是随机刷新两波

22:39.860 --> 22:44.340
就从你整个接生文件里面随机找两个 是不是有可能找到重复的

22:45.140 --> 22:48.420
对不对啊 所以我们这个id的话 我们把它再处理一下

22:48.980 --> 22:52.180
好吧 那这个处理的话 你就是加上一个

22:53.380 --> 22:56.100
加上一个时间戳嘛 new debt

22:57.780 --> 23:00.820
new debt 然后点get time

23:02.340 --> 23:06.420
对吧 你如果还不放心的话 你再加一个什么 再加一个随机刷

23:07.780 --> 23:10.100
mass flow 然后mass

23:10.980 --> 23:12.500
点rounder mode

23:13.300 --> 23:16.420
啊 我们这边呈一个999

23:17.380 --> 23:21.780
ok 那这样子的话 那就一定不会重复啊 好 来 我们保存一下

23:22.500 --> 23:25.860
保存了 这样我们这边我们来看一下啊 放心

23:32.050 --> 23:34.290
这边再来啊 看一下

23:36.540 --> 23:37.020
哎

23:38.140 --> 23:40.460
这边怎么回事啊 从重新进来呢

23:44.130 --> 23:45.970
ok啊 大家这边刷新

23:49.180 --> 23:53.420
啊 对了吗 是吧 ok啊 刷新

23:54.620 --> 23:58.300
ok 没问题 对吧 这个就是这个下了刷新啊

23:59.020 --> 24:04.460
好 下了刷新你这边还可以再摸你 就是我们现在的话每次下呢 是不是他都一定就是

24:05.100 --> 24:10.620
有这个新的数据 随机给你返回两票啊 但是你这个在实际开发力的时候

24:11.100 --> 24:15.020
是不是他有的时候就是那个后台更新了 有些时候后台没更新

24:15.580 --> 24:18.940
对吧 就是你不停的刷新 他后台就那么的数据 他就没更新

24:19.340 --> 24:23.260
啊 所以你这边的话 你其实还可以再写个什么呢 这边你再写个概率

24:24.140 --> 24:26.780
可不可以啊 就可以啊 所以再写个概率

24:27.180 --> 24:34.060
这个概率啊 比如说你这边就写个随机数 大家如果0.5以上 我就执行这个后面的代码

24:34.460 --> 24:37.500
否则的话我这边就停止啊 这就自己下去加了啊

24:38.140 --> 24:41.660
这些都是 因为都是模拟啊 我觉得没有太大意思

24:42.300 --> 24:45.580
ok 啊 这是关于下了刷新

24:46.060 --> 24:50.700
那除了下了刷新以外 大家还有一个什么 这还有一个上拉加载

24:52.700 --> 24:53.580
上拉

24:54.140 --> 25:03.020
加载 对吧 这个其实其实就是以前的什么 这分页啊 对不对 这种我之前讲过的啊

25:03.820 --> 25:04.940
就是之前的分页

25:05.500 --> 25:10.060
好 说说我们这边的话 这边同样是需要维护一个这个状态

25:10.860 --> 25:11.420
counter

25:12.220 --> 25:16.850
这边呢 是一个footer footer refresh

25:18.450 --> 25:19.410
呃f

25:20.930 --> 25:24.530
好 然后再这边设置 footer refresh

25:27.660 --> 25:31.660
ok 等于一个 user state force

25:32.220 --> 25:33.660
这个是底部

25:35.180 --> 25:38.060
底部是否上拉

25:40.060 --> 25:40.540
加载

25:41.420 --> 25:43.740
ok 一开始的话也是force啊

25:44.220 --> 25:46.060
好 然后接下来来到这边

25:47.260 --> 25:48.460
这边他会有一个什么

25:49.020 --> 25:50.540
这会有一个叫做

25:52.380 --> 25:53.340
under-riched

25:54.300 --> 25:54.940
对吧

25:55.100 --> 25:58.380
好 在这边 这边呢 我们就是要写一个这个

25:59.260 --> 26:00.060
under

26:01.180 --> 26:02.300
under-rich

26:04.220 --> 26:05.660
under-rich handle

26:06.940 --> 26:08.780
这边就会对应有一个

26:10.540 --> 26:11.180
方形

26:12.220 --> 26:13.580
under-rich handle

26:15.020 --> 26:18.620
对吧 执行这一块 他还有一个什么 这还有个法子呀

26:19.180 --> 26:20.060
对吧 就这个

26:21.020 --> 26:25.660
啊 这个法子 这个法子的话 你把它设置一下 我这边呢 设置的是0.1

26:27.340 --> 26:31.020
好 然后接下来的话 这边 这边 当他到达底部之后

26:31.500 --> 26:34.700
那这里的话 就是啊 其实基本上和上面是一样的

26:35.500 --> 26:39.020
是基本上和上面是一样的啊 这边呢 就是首先把这个

26:41.260 --> 26:41.820
设置为

26:43.660 --> 26:44.460
设置为处

26:45.340 --> 26:49.340
啊 把这个设置为处 设置为处之后 然后接下来的话 这边

26:49.820 --> 26:52.060
这边呢 你要判断 就是当前页

26:52.540 --> 26:55.660
那必须要什么呢 必须要小于这个总页数

26:56.060 --> 26:59.740
啊 那这边呢 你需要就是有一个这个总页数的这个计算

27:00.460 --> 27:00.780
ok

27:01.500 --> 27:04.540
啊 这边这个总页数 那我这边的话就直接

27:06.220 --> 27:07.740
呃 我记得是多少页来着

27:09.180 --> 27:12.540
啊 这边这个样子啊 我也难得在这来引出那个

27:13.500 --> 27:17.820
movie接生了啊 我照理说的话 我在这个文件可以引这个movie接生

27:17.900 --> 27:21.260
那接下算他们这个论识 是吧 但我这边的话 我觉得比较浪费

27:21.580 --> 27:26.140
我就在哪里呢 我就在这个service.js里面 这边是不是引入了这个

27:26.940 --> 27:29.180
呃movie data的 好 在这个位置

27:29.740 --> 27:31.980
这个位置的话 我这边导出

27:33.980 --> 27:35.580
导出总页码数

27:39.920 --> 27:40.400
页码

27:41.600 --> 27:42.320
页码数

27:43.040 --> 27:46.000
啊 好了 接下来这边呢 就是export

27:46.960 --> 27:48.560
然后const

27:49.360 --> 27:52.160
一个什么呢 这边呢 就是应该是total

27:52.800 --> 27:53.600
pegging

27:54.160 --> 27:58.160
它应该等于什么 这就等于你的这个movie data

27:59.040 --> 28:01.120
然后它的什么 它的这个论识

28:02.000 --> 28:04.180
它的论识

28:04.660 --> 28:10.100
那出一个什么 说出一个每页的这个页数啊 每一个页数我们这边规定就是10

28:10.500 --> 28:14.180
啊 好 然后接下来这边的话再干嘛 是不是在向上取载

28:15.140 --> 28:17.220
mask.sale

28:18.180 --> 28:19.540
啊 在向上取载

28:20.100 --> 28:20.820
ok

28:20.820 --> 28:23.860
好 我们这边呢 把这个totalpegging 我把它引入进来

28:24.820 --> 28:27.460
从从从从这里啊 这里

28:28.020 --> 28:28.980
把引入进来

28:29.460 --> 28:33.140
好 引入进来之后 然后接下来的话 这边这边是不是就做一个判断

28:33.860 --> 28:34.660
if

28:35.140 --> 28:37.060
你的这个current page

28:37.540 --> 28:39.540
它必须要什么 说不能超过呀

28:40.180 --> 28:43.700
对吧 所以它必须的是小于一个totalpegging

28:44.900 --> 28:50.500
在小于totalpegging的情况下 那我们这边的话可以干嘛呢 首先的话这个current page

28:51.220 --> 28:51.700
加加

28:52.820 --> 28:55.780
加加之后 然后接下来的话 这边query

28:56.580 --> 28:57.300
这个api

28:59.060 --> 29:00.580
那接下来这边点认

29:02.340 --> 29:03.460
然后res

29:04.820 --> 29:07.940
对吧 好 大家这边const一个ar

29:08.580 --> 29:12.020
它就应该是什么 它是不是就是应该是放在你原来数据的后面

29:12.740 --> 29:15.540
对不对 说这边的话应该是先点点点

29:16.340 --> 29:20.980
这个movie list 然后再点点点res

29:22.020 --> 29:24.900
好 完成之后 然后接下来的话 这边set

29:25.540 --> 29:26.260
movie list

29:27.060 --> 29:29.540
啊啊 然后就在这边set

29:30.180 --> 29:33.780
你的这个footer refresh等于一个force

29:35.140 --> 29:38.020
对不对 ok 好来我们这边 我来看一下

29:39.220 --> 29:40.020
全部保存

29:40.900 --> 29:43.060
保存到之后 让我们这边来看一下啊

29:44.740 --> 29:50.980
这边你看一条两条 三条四条 五条六条 七条八条 注意快要出底了

29:51.540 --> 29:52.580
九条十条

29:53.700 --> 29:54.020
啊

29:54.980 --> 29:55.700
这边怎么没

29:56.820 --> 29:57.700
啊 可以了

29:58.260 --> 29:59.860
就出来了 对不对

30:00.500 --> 30:02.180
哎 出来是出来了 这边怎么

30:02.980 --> 30:04.420
夜码数没有加加呢

30:05.700 --> 30:07.140
这边照理说的话 这边怎么

30:08.100 --> 30:11.060
怎么感觉又请求了这一页

30:12.020 --> 30:13.060
又请求了这一页

30:14.180 --> 30:17.700
对不对啊 而且这边就是啊 我们这边少一个东西啊

30:18.340 --> 30:20.820
少一个东西啊 这里有点问题 我们来看一下

30:21.940 --> 30:23.860
这边的话 current

30:24.820 --> 30:28.340
啊 这边肯定是进来了的对吧 进来了之后啊 我们这边

30:29.540 --> 30:31.700
这个没传过去 是不是

30:32.180 --> 30:35.940
这没传过去吧 传过去 好 然后我们这边还少一个东西啊

30:36.580 --> 30:37.700
少一个那个就是

30:39.220 --> 30:39.940
渲染那个

30:40.740 --> 30:42.100
渲染那个底部的

30:42.820 --> 30:44.500
啊 我们这边呢 就是我们来写一个嘛

30:45.220 --> 30:48.020
这边放心 然后 render

30:48.900 --> 30:50.100
render footer

30:52.850 --> 30:59.570
ok 它的话完全就是反回一段 cs 它 但是呢 它是在什么情况下呢 再就是你的这个

31:00.690 --> 31:04.450
你的这个footer refresh 它v2的时候

31:05.970 --> 31:07.650
啊 如果它v2的时候

31:08.050 --> 31:10.930
啊 我们这边呢 反回一段 cs

31:12.370 --> 31:17.090
ok 啊 反回到这段 cs 我就直接写了啊 这边呢 就是view

31:20.480 --> 31:23.680
view啊 这边style等于一个

31:24.400 --> 31:28.080
我们要是拿过来的 是吧啊 等于一个这个styles

31:29.520 --> 31:33.360
styles 点啊 就这个footer style

31:35.440 --> 31:39.520
ter style好 然后接下来里面 里面的话会有一个

31:40.480 --> 31:43.200
activity indicator 我们email

31:44.400 --> 31:47.280
往下没有影 是吧 把这个把这个影一下

31:48.400 --> 31:53.460
会用到这个 好 然后这边

31:54.020 --> 31:57.860
这边啊 它就是一个单主键啊 这边这个size

31:58.580 --> 32:01.620
size 是一个small 然后接下来这个conner

32:04.240 --> 32:05.760
conner的话 这边请好

32:06.800 --> 32:09.840
268 然后dcd

32:10.480 --> 32:13.040
好 然后接下来这边呢 会有一个text

32:15.040 --> 32:17.680
text 这边呢 就是一个努力加载中

32:19.120 --> 32:22.720
努力加载中啊 这边呢 把这个样式设置一下

32:23.360 --> 32:29.520
这边style啊 直接在这设置的啊 这边conner对应了紧号666

32:30.400 --> 32:32.320
啊 然后接下来这边 给了一个piling

32:33.200 --> 32:35.600
piling left 给了一个10

32:36.240 --> 32:41.280
ok 而这边呢 是写了一个function function这个render footer 对吧

32:41.360 --> 32:47.280
然后根据你的这个footer refresh的这个状态啊 这边是否渲染这一段gsta

32:47.920 --> 32:51.520
好 然后接下来把这个就放在哪里呢 把这个的话你就

32:53.600 --> 33:05.070
放在这后面 我看一下啊 这里的话我们这样子啊 我这边外层再包一个这个view

33:06.510 --> 33:10.430
这边再包一个view啊 包一个view 然后接下来的话把这一块

33:11.230 --> 33:12.430
把它放过来

33:13.710 --> 33:15.870
好 放过来之后 然后接下这里面

33:16.670 --> 33:19.870
对吧 好 然后在这边调用这个 render footer

33:21.710 --> 33:26.830
render footer ok 好 来我们来看一下好不好啊 格式画一下

33:27.870 --> 33:32.750
好 然后在这边的话全部保存 保存了之后 然后接下这边来看一下

33:34.270 --> 33:40.350
嗯 走 走 嗯 这里怎么没出来呢

33:41.310 --> 33:47.500
啊 这边这个渲染倒是渲染 是吧 渲染倒是渲染了 但是

33:48.140 --> 33:51.420
这边让它没出来啊 我们来看一下

33:52.860 --> 33:54.780
这里的话它是位置

33:56.060 --> 34:02.380
位置没对吗 我这边还有一个 flex 看一下这个 flex

34:03.180 --> 34:09.710
啊 flex 我看一下这边 这边的话mo movie

34:11.310 --> 34:16.750
这里的话是这外层挂了一个好不好 我把这个加上了 它是不是那个位置没对

34:19.700 --> 34:24.640
好 我保存一下啊 然后接下我们这边我们再来看一下

34:25.520 --> 34:34.670
重新来再来看一下啊 往下走啊 有了

34:35.310 --> 34:40.830
看到没有 有了刚才的话是这个位置没对啊 这边是不是有了 对不对 走

34:41.790 --> 34:47.630
你看努力加在中 是不是 ok 了 对不对 整个就ok了啊

34:48.270 --> 34:53.630
好 ok 之后 然后接下这边还有个问题就是怎么了 就是这个就每一个这个他是可以点击的

34:54.030 --> 34:59.950
对不对 他可以点击点击了之后应该是跳转到什么 这跳转到电影详情啊

35:00.590 --> 35:04.910
好 那这边的话其实就是在什么呢 这里的这个movie sale 这边

35:05.790 --> 35:08.510
movie sale 而这边的话他会有一个这个

35:09.790 --> 35:12.110
on price on price对应的是 props

35:12.910 --> 35:17.390
拿到这个这个on price 那也就说我们在这边mo movie 这边

35:17.950 --> 35:20.590
mo movie 这边的话我们是需要有一个这个

35:20.910 --> 35:23.550
给他传递一个这个price

35:24.590 --> 35:27.390
price的这个处理事件过去了 对不对

35:29.230 --> 35:37.150
也就是说在这里啊 在这个mo movie 这边 这边我们是不是在under item啊 对不对 大家他上面的话我们需要给他传一个什么

35:37.470 --> 35:39.710
就传一个这个on price

35:41.150 --> 35:46.750
啊 然后等于啊 然后这边呢这个很简单我就直接写在这了啊 这边的话

35:47.710 --> 35:51.150
这里就应该干嘛 这里的话是不是就是应该是啊 navigation

35:52.510 --> 35:54.110
navigation 点

35:55.070 --> 35:55.710
navigate

35:56.990 --> 36:01.230
好 然后就在这边导航到什么呢 导航到这个movie detail

36:03.070 --> 36:05.710
然后把什么传过去啊 是把你的这个id

36:06.990 --> 36:10.030
这边对应的是啊 item 点id

36:10.910 --> 36:16.270
对吧 我这边给他绑定一个on price 然后接下来在你这边 这边的话我是不是就拿到

36:16.830 --> 36:21.470
对了 通过这个props 要拿到这个on price啊

36:22.110 --> 36:27.870
啊 然后这里其他就没啥了 我们这边我们来看一下保存

36:30.560 --> 36:35.650
保存了之后 然后现在我们这边我们来看一下 我这边返回

36:37.330 --> 36:38.290
然后这边

36:39.490 --> 36:40.130
查看更多

36:42.290 --> 36:42.850
啊 点击

36:43.810 --> 36:44.930
啊 这边报处了啊

36:45.970 --> 36:49.170
navigation 找不到啊navigation的话 这边的话是需要

36:49.970 --> 36:50.930
传过来的啊

36:51.650 --> 36:54.690
这边呢 是需要传递过来的 所以我们这边的话

36:56.370 --> 36:56.850
这边

36:57.810 --> 37:01.810
navigation啊 从这儿拿一下 那这儿又是从哪儿传过来的

37:02.370 --> 37:07.090
这儿的话是不是就是应该是你这边康明顺这边 这边呢 你需要给他传递一个

37:07.810 --> 37:09.890
navigation 等于一个

37:11.170 --> 37:11.890
navigation

37:12.530 --> 37:13.890
对吧啊 包括这边

37:14.850 --> 37:15.730
要他从哪儿来

37:16.370 --> 37:18.930
他的话是不是就是应该是结构能够拿得到

37:20.690 --> 37:24.210
navigation 对不对 为什么 因为你这边在这儿配置了的

37:25.010 --> 37:26.290
就是在这儿配置了的

37:26.290 --> 37:30.690
I'm sure coming screen 对不对啊 这边就coming screen

37:31.250 --> 37:36.130
啊 这边你配置了的 配置的话他这边的话就通过结构能够拿得到

37:37.490 --> 37:41.570
啊 说说我们这边的话这个这边结构拿到 然后传过去

37:41.970 --> 37:44.850
包括这边也是一样 这边呢 首先结构

37:46.930 --> 37:55.570
结构拿到navigation 啊 这边的话navigation 等于一个navigation 把传递过去 传递过去之后 然后下这边

37:56.210 --> 38:00.530
这边的话 把它从pops里面拿到啊 拿到之后这边就可以跳转了

38:00.530 --> 38:01.890
好了 我们这边我们保存一下

38:04.180 --> 38:06.740
保存了 大家我们这边我们来看一下 走

38:08.960 --> 38:09.600
是ok的

38:10.800 --> 38:12.080
对吧 ok

38:15.340 --> 38:18.300
啊 这里就ok了啊 整个上拉

38:19.180 --> 38:22.300
上拉加载啊 下拉刷新这些都ok了

38:23.020 --> 38:33.700
对吧 ok 啊 这边下拉刷新啊 出来了啊 这边出来了

38:34.900 --> 38:40.510
啊 ok 啊 都是ok的

38:43.680 --> 38:47.200
好 然后这边这边也是ok的

38:47.920 --> 38:52.720
对吧啊 就不掩饰了啊 这一块的话我们就把这个更多电影

38:53.120 --> 38:57.600
这一块就把它做完了啊 当我们这边呢 由于这个服务器的限制啊

38:57.920 --> 39:04.000
没有这个服务器 都是在本地加载的数据啊 说很多东西都是做的这个模拟的这个效果

39:04.320 --> 39:11.200
啊 但是你真实开发情况的话 其实也是一样的啊 只不过就是把你的那个请求地址换成这个真实的接口就可以

39:12.080 --> 39:15.520
对不对 你看我们这边呢 其实都是封装了一个一个的这个

39:16.080 --> 39:20.240
api 你只不过在这一块 这一块的话你就发送真实的请求

39:20.960 --> 39:27.920
是不是就ok了 对吧啊 大家下来的话把整个这一块啊 就是更多电影这一块

39:28.640 --> 39:33.280
把它写一写 好不好啊 这一刻就先到这里啊 再见

