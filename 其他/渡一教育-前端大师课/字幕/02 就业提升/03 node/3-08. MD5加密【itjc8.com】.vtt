WEBVTT

00:01.260 --> 00:06.640
然后我们接着来讲 其实sacrifice本身我们就已经讲完了

00:06.640 --> 00:14.840
然后我们就顺便说一说 其他的时候我们跟三层架构里边的服务层有关系的一些东西

00:14.840 --> 00:20.700
这一节课咱们讲MD5加密 这是什么玩意儿 给它决例子

00:20.700 --> 00:27.640
都是跟整密码相关的 我记得在我刚刚出来工作的时候

00:28.100 --> 00:31.540
当时发生了 我这样子是不是又暴露联名了

00:32.260 --> 00:36.460
出来工作了两三年过后 它是发生了这么一件事

00:36.460 --> 00:41.260
就是有很多的网站数据库被泄漏了 什么要泄漏了

00:41.260 --> 00:48.020
就是数据库里边的内容被可能是内部的一些人员

00:48.020 --> 00:53.860
考被走了 或者是他的数据库的读取权限被别人拿到了

00:53.920 --> 00:59.120
就别人可以看他的数据库内容了 那看数据库内容有什么样的危险呢

00:59.120 --> 01:04.160
其实很多时候危险倒没有特别特别大 其实最大的危险就是

01:04.160 --> 01:08.960
他可以看到数据库里边的帐号密码 这是最危险的

01:08.960 --> 01:15.560
你看 看到帐号密码了 这看到帐号密码比方说像QQ数据库

01:15.560 --> 01:20.760
如果说他的数据库被泄漏出来了 那么你是不是可以看到所有的QQ用户的帐号密码

01:20.820 --> 01:25.940
当时我觉得网上还有还付费啊 就是给多少钱 我就把这个哪个网站的数据库给你

01:25.940 --> 01:31.700
或者帐号密码全部给你 他们是按照100兆多少钱100兆多少钱

01:31.700 --> 01:37.340
100兆的数据是非常非常大的 他们就通过倒号啊 就是一个大规模的倒号

01:37.340 --> 01:41.420
然后通过帐号密码去进入系统 然后去到到去用户的信息

01:41.420 --> 01:45.740
或甚至呢去到去用户的财产 非常危险

01:45.800 --> 01:51.400
所以说我们数据 当时呢也爆出来过后呢 也是受到了很多人对这些网站的谴责

01:51.400 --> 01:57.640
倒是不是说他们的数据库泄露出来被谴责 而是他们用明文来存储密码被谴责

01:58.440 --> 02:03.080
就是什么叫明文存储密码了 现在就是明文存储的 就是密码是什么 你一眼就看得见了

02:03.480 --> 02:08.040
就看得见这个密码是什么 而这这不是一个很好的做法 更好的做法是什么呢

02:08.040 --> 02:10.280
就哪怕你密码给你看了 你都看不懂

02:11.060 --> 02:12.580
就是我们要对密码进行加密

02:13.500 --> 02:20.340
那么怎么来加密呢 这个最安全的加密方式就是MD5单向加密 什么叫单向加密

02:20.340 --> 02:23.180
就是这个解不开的 实际上没有任何人可以解开

02:24.020 --> 02:28.580
任何人都解不开这个密码 那么我们来看一下MD5它其实是一种哈希算法

02:28.980 --> 02:33.380
那么什么是哈希算法的 就是一种算法 我不想解释太多了 这东西呢有点深

02:33.980 --> 02:39.380
有兴趣的话可以去往上去收一下哈希加密算法 MD5是其中一种

02:39.840 --> 02:47.280
它都是叫做单向加密算法 它可以把一个任何长度的制服串 加密成一个固定长度的制服串

02:48.040 --> 02:50.680
哪怕你这个制服串有一个制服

02:51.800 --> 02:54.840
它给你加密成只有长度为16的一个制服串

02:55.720 --> 03:00.280
就这么个意思啊 就这么个意思 那么我们如何来使用MD5加密呢

03:01.120 --> 03:06.720
这以后呢 我们首先来看一看 不着急啊 我们 有些人说这个加密过后怎么来解密呢 那用户怎么办了

03:06.740 --> 03:13.500
对吧 不着急啊 咱们来先来看一下MD5加密 它到底是一个什么样的东西 我们这里呢 需要去安装一个库啊

03:14.820 --> 03:23.260
叫做NPMMD5这个库 这个库呢 可以用一个非常简单的函数 它就提供了一个函数 然后让你去对它进行加对一个制服串进行加密

03:23.620 --> 03:28.500
好 咱们来看一下吧 这个库 我们这里有个链接啊 打开进去看一下

03:29.740 --> 03:36.300
你看这个库特别特别简单 就是可以提供了一个函数MD5 你把你的内容放进去 它就返回一个加密过后的内容

03:36.520 --> 03:40.520
对吧 你看 它加密成这个样子的 你看吧 咱们来

03:41.400 --> 03:46.920
到英德克社里边去啊 然后我把这些东西就删掉了啊 像这些东西 因为这上节盒的啊 上节盒啊 删掉

03:47.840 --> 03:48.680
这个玩意儿给他

03:49.920 --> 03:55.120
给他干掉 好 接下来呢 我们安装好了啊 然后导入这个MD5

03:55.960 --> 03:57.880
require 啊 Md5

03:58.600 --> 04:05.080
好 导入之后呢 我们现在呢 就直接使用Md5里边 随便的写个字五刷 哪怕是你是一个空字五刷 你看一样

04:05.700 --> 04:09.420
呃 result 加密过后的输出 result

04:11.260 --> 04:22.140
好 接下来我们运行一下啊 运行 你看 哪怕是一个空字五刷 是不是加密出来也是这样子 对不对 这就是Md5加密 那如果说你的字五刷内容很多呢

04:23.460 --> 04:27.020
很多 非常非常多 哪怕你一个字符

04:27.780 --> 04:32.980
我怎么刚才我怎么时间不落了啊 我们随便来吧

04:36.420 --> 04:46.140
啊 有很多很多的字符 然后呢 我们在这里看一下 音出来 他长度还是这么多 对吧 他是一个固定长度的字符券 所以说我们这里记录一笔啊 Md5加密的特点

04:47.340 --> 04:51.780
Md5加密的特点 那么首先呢 他是哈希

04:52.620 --> 04:53.620
加密算法

04:54.940 --> 05:00.820
的一种 其中一种 还加密算法还是有蛮多的啊 他其实他是其中一种 也是最常见的一种

05:01.560 --> 05:06.520
特别是我们加密密码的时候呢 一般就用Md5 第二呢 他是可以将

05:07.560 --> 05:09.160
任何一个字符券

05:10.000 --> 05:11.000
加密成为

05:12.280 --> 05:16.120
加密成一个固定长度的字符券

05:17.800 --> 05:24.120
哪怕你有一个字符 加密出来就这么多 那你想一想 他有没有可能被解密 他绝不可能被解密的

05:24.520 --> 05:28.840
如果说他能够被解密的话 他是全世界最好的压缩算法

05:29.820 --> 05:33.260
一想是不是这个道理 你几个G的文件 我给你加密成

05:34.660 --> 05:41.620
用Md5以运算 算出来只有那么固定长度 只有16个长度 或者是24个长度 或者是64个长度的字符券

05:42.340 --> 05:50.420
那么这样子还不到1kb 对吧 两个G的文件加密出 就是通过Md5过后还不到1kb 如果说你能解密的话 是不是不得了

05:51.580 --> 05:56.740
这不可能能解密的 他解不了密 所以Md5的哈希算法 加密的方法都是这样子啊

05:57.400 --> 05:58.400
叫做单向加密

06:00.760 --> 06:02.320
只能加密 无法解密

06:03.680 --> 06:05.160
加密 无法解密

06:06.360 --> 06:13.080
也就是你加密了过后别人看到了 他找不到解密办法的 实际上也还有 还是有解密办法 我以后给大家说一下

06:14.640 --> 06:16.520
但是那种的 我们一会再说吧

06:17.200 --> 06:20.000
然后我们再来看一下还有什么特点 然后我们再重新运行一次

06:20.480 --> 06:25.160
因为看到同样的字符出来 加密出来的结果是不是一样的 所以说他还有这么一个特点

06:25.580 --> 06:26.220
同样的

06:27.060 --> 06:27.260
圆

06:29.690 --> 06:30.330
哎 圆了

06:31.770 --> 06:31.970
圆

06:33.290 --> 06:35.610
圆圆圆字符券

06:37.450 --> 06:44.290
加密后得到的结果 固定 这就是他为什么可以解密 他他的解密方式就是暴力破解

06:45.010 --> 06:49.090
把一些常见的字符券他的Md5加密的 我们用一个数据户来记录

06:49.730 --> 06:55.970
如果说你给我一个Md5加密过后了 我看一下一个数据户里面有没有啊 有没有 有的话我直接把圆码给你的

06:56.270 --> 07:02.790
对吧 就有个对应关系 所以说了 为什么很多网站要求你输入密码的时候了 不要用一些常见的

07:02.990 --> 07:09.630
纯数字啊 什么纯字5啊 让你多写一些什么大小写啊 符号啊 对吧 就是让你去写一些不常见的东西

07:10.110 --> 07:16.710
那么这样子他就很难破解的啊 有一个好像之前一个搞数学的就是算了一下啊

07:17.470 --> 07:22.150
就是如果说目前现有的计算机配置 一个顶级配置的计算机要简密一个

07:22.610 --> 07:28.890
要简密就是用暴力破解 从第一个字符开始一然后看一一然后看一二 这样子暴力去破解

07:29.210 --> 07:33.010
然后这个Md5加密的结果大概需要几百万年

07:34.090 --> 07:39.810
基本上可以认为他是不能简密的了啊 只要你的字符券不是一种常见的 简单的密码

07:40.530 --> 07:42.250
加密过后是很难是没法简密的

07:43.170 --> 07:48.370
这是关于他的加密特点啊 同样的字符两字得到结果是固定的

07:49.350 --> 07:56.710
那么由于他这样的一个特点 我们就可以用他来对密码进行加密 我们在数据库里面存密码的时候呢 全部使用

07:57.670 --> 08:04.570
Md5加密过后的密码 好 咱们来看一下啊 比方说我们这里呢

08:05.170 --> 08:10.130
把这个去掉 然后我们到升位室里边把我们的耳朵命升位室改造一下 之前不是有那个

08:10.930 --> 08:14.370
添加一个管理员吗 对不对 我们把这些东西就去掉了啊

08:15.350 --> 08:18.270
删除啊 这些注射 乱七八糟的注射就去掉了

08:19.630 --> 08:27.710
好 比方说我们这里有一个添加一个管理员 添加管理员的时候 我们就要对他的密码呢 要单独来进行处理 怎么处理呢 就是要加密

08:28.670 --> 08:29.150
Md5

08:29.950 --> 08:35.070
require md5 好 我把数据库的那些乱七八糟的东西删了啊 把这些

08:36.230 --> 08:37.630
把这些那个删掉

08:39.070 --> 08:42.750
这些都是明文存储密码 在真实的系统里面是绝对不能这样子的

08:43.730 --> 08:50.330
然后呢 在这边啊 我们添加一个 添加一个管理员的时候 我们干嘛呢 我们就 add 耳朵命

08:51.410 --> 08:58.650
对不对 耳朵命obj 耳朵命obj 然后呢 这一个logging password的 重新给他复制 怎么复制呢 给他加一次密

08:59.250 --> 09:01.850
对他写的字不错呢 加一次密logging password

09:03.010 --> 09:07.690
对他进行加密 好 然后来看一下啊 这里呢 我们导入

09:08.550 --> 09:10.590
耳朵命serverequire

09:15.520 --> 09:16.160
什么的mode

09:17.960 --> 09:26.160
services 耳朵命service 耳朵命serve 然后呢 调用这个add耳朵命 不知道传的对象吗logging id 啊 比方说abc

09:26.800 --> 09:27.640
logging password 的

09:28.840 --> 09:33.720
123 123啊 记住这个密码啊 以后不要登录的 好 咱们来试一下啊

09:33.780 --> 09:36.300
运行

09:37.420 --> 09:41.700
好 运行完了 运行完了 过后呢 我们来看一下咱们的数据库里边存的东西

09:42.660 --> 09:43.300
右键刷新

09:44.180 --> 09:51.420
你看 存的密码是不是加密过后的 你拿这个密码有什么用啊 但我这个密码比较简单哈 你还可以包里破解的 你在百度里边去收一下啊

09:51.860 --> 09:56.820
叫做那个md5破解 它是能够把一些常见的的经营破解 咱们来试一下

09:58.380 --> 09:59.020
咱们来试一下

09:59.800 --> 10:06.360
比方说 咱们收说一个md5解密 他就是暴力破解的

10:07.480 --> 10:09.720
他是把一些常见的知识券啊 然后呢

10:10.600 --> 10:19.520
查询123 123对吧 好像是可以破解对吧 那咱我们来写一个另外再写一个啊 bcd 这个用户 好 我们这里随便写这样子写

10:21.240 --> 10:23.040
abcd

10:24.020 --> 10:29.300
大写的 y ui 然后呢 一个底 一个数字七八

10:30.420 --> 10:32.900
好 咱们来看一下这个东西 它能破解吗

10:34.780 --> 10:40.100
它能破解 它就它就有故意了 它就好 咱们来看一下啊 我们这里右键刷新

10:41.300 --> 10:48.270
来吧 我们来看一下这个东西能破解吗 三天 查询

10:48.570 --> 11:04.490
它说什么 要加入了本战后台解密 请等待最多五天啊 如果解密失败 然后什么 它破解不了了 对吧 它是把一常用的那个 它就是一靠一个数据库的对应关系来破解的啊

11:05.050 --> 11:07.210
如果说一个不常见的密码的话 就是那种

11:07.770 --> 11:14.810
一个强度比较高的密码的话 很难破解的 这这这就是为什么网站上 它是希望让你输入一个叫强的密码

11:15.030 --> 11:22.350
就是这个原因啊 这样加密过来很难破解 哪怕这个数据库泄漏了 首先数据库不泄漏 它肯定你根本得不到密码 就算数据库泄漏了

11:22.870 --> 11:25.990
你看到这个密码的也是只能发呆啊 你没办法的

11:26.830 --> 11:28.230
好 这是这个

11:31.310 --> 11:36.030
MD5加密啊 然后呢 我们添加用户添加管理员是这样子做的 那么修那个

11:36.790 --> 11:42.630
修外管理员的是不是应该也是一样 对不对 修外管理员的时候 那么你要给我传一个就是

11:43.090 --> 11:46.410
额德密OBG 额德密OBA里面 我们判断一下啊 有没有写密码

11:47.210 --> 11:55.370
如果说login password的你写了过后了 我们是不是还要做同样的事情啊 你修改密码的话 我也要做同样的事情 对吧 我们把login password重新复制一下

11:56.170 --> 12:03.050
login password等于MD5把它的耳点密OBGlogin password 重新复制一下

12:03.530 --> 12:07.050
来吧 我们来试一下啊 我们现在来把这个调用一下修改

12:07.450 --> 12:11.650
update 额德密 然后呢 修改的ID ID是几呢

12:12.550 --> 12:13.150
ID是7

12:14.150 --> 12:19.910
修改的ID是7 然后呢 修改的帐号不用修改 密码了 我把修改一下 修改成123

12:21.310 --> 12:21.710
123

12:23.470 --> 12:24.670
保存 现在我们运行

12:26.470 --> 12:33.710
好了 我们在这边看一下 放心 你看 是不是 对123进行加密了 保存 总之我们数据库一定要保存加密过后的结果

12:34.350 --> 12:38.550
那么现在问题来了 怎么登录 怎么登录 登录怎么登录呢

12:39.530 --> 12:45.410
登录要这样子登录啊 现在又不是 就不是用这种方式来判断了啊 登录要怎么登录 要这样子

12:47.650 --> 12:53.810
现在就不存在什么大小写了啊 其实不用去管大小写了啊 最多对账号处理一下大小写 密码不用判断了啊 因为

12:54.050 --> 13:01.410
加大写和大写的加密 大写的字母加密过后和小写的字母加密过后是不一样的啊 所以说他本身加密过后就区分大小写了

13:01.930 --> 13:07.930
那么怎么来做呢 你给了我一个账号 给了我一个密码 账号无所谓 账号我们去匹配就行了 密码我怎么匹配呢

13:08.110 --> 13:14.230
我对这个密码再来一次 密码加密 因为同样的制服串 加密过后是不是完全一样的

13:14.870 --> 13:19.350
对吧 同样的制服串加密过后是完全一样的 所以说我们重新给他加密一次

13:20.230 --> 13:29.510
对不对 就拿给他说的加密一次 然后用这个东西去匹配 对吧 我对用户输入的密码 然后再用密码加密 然后跟数据库里边加密的结果去匹配 如果说匹配上了

13:29.510 --> 13:34.030
那原式的内容一定是一样的 对吧 是不是这个道理啊 这里呢 我们就

13:34.570 --> 13:37.770
写好了 那么这里我们来登录试一下 看能不能登录成功呢

13:39.330 --> 13:43.810
好 这里呢 我们使用OdemySoNokin 账号呢是

13:44.490 --> 13:44.970
张卓尔

13:46.170 --> 13:51.810
bcd 密码是123啊 然后再R 输出R

13:52.810 --> 13:53.690
看一下能不能登录成功

13:56.460 --> 13:56.740
clear

13:59.800 --> 14:05.400
好 这里呢 是不是登录成功了 对吧 但是返回的结果里边啊 大家注意一下啊 以后返回结果的时候呢 把这个

14:05.660 --> 14:13.420
login password的啊 就真是项目里边要给它删掉 不要啊 就是我们查讯的时候 或者在对象里边用delete 对吧 把个属性删掉 不要把密码发过去了

14:13.940 --> 14:15.940
密码一般是不会发送出去的

14:16.980 --> 14:19.580
是不是可以登录成功了 对不对 就是就这么简单

14:20.220 --> 14:28.180
那就说那如果说忘记密码怎么办呢 忘记密码就是通过你注册时候用的手机号 然后给你发送一条手机短信

14:28.400 --> 14:39.840
又要问了 怎么来发送手机短信的 那是另外一面课程啊 那个可能我们之前规划的是叫做那个调用第三方接口 什么微信登录啊qq登录啊发送短信啊这些东西啊

14:40.240 --> 14:50.680
我们单独做一个课程 也其实并不复杂 就是调用第三方接口 要给钱的啊 要给钱的 可能到时候找一找吧 有没有免费的 或者是比较便宜的 把它可以去测试一下

14:52.120 --> 14:57.840
那么如果说忘记密码的话 他一般会给你发送消息 对吧 你不要去问 打电话问管理员 他也不知道你能密码是啥

14:57.980 --> 15:03.220
他拿到这个数据库 他也看不懂你这个密码 解不了密的 知道吧 所以说现在我们网站上

15:04.580 --> 15:07.540
从从制密码是怎么从制的流程 对吧 他给你发送一个短信

15:08.100 --> 15:13.260
确保你是你本人在操作 然后给了你一个链接 让你重新输入新密码

15:14.100 --> 15:18.940
对不对 他是不是让你重新输入新密码 他不会给你发送一封邮件 告诉你原密码是啥

15:19.340 --> 15:25.420
如果说他真的给你发送一封邮件 告诉你原密码是啥的话 那这个网上一定会很危险的 他是用名文存出的

15:25.920 --> 15:30.920
对吧 全世界 如果说他使用了md5加密的话 全世界除了你

15:31.520 --> 15:35.360
没有任何人知道你的密码是啥 都不知道的 他看到数据库也只能发呆

15:36.000 --> 15:42.360
所以是md5加密的方式 另外再说一点 其实呢 严格来说 按照数学上的关系来说

15:43.200 --> 15:44.000
md5啊

15:44.880 --> 15:48.920
他是有可能会重复的 什么意思 就是有可能会出现两个制服串

15:49.880 --> 15:52.760
他有可能会出现这种场景 就是制服串1

15:52.980 --> 15:58.540
制服串1加密过后 通过md5加密过后 得到一个

15:59.660 --> 16:03.980
比方说 一个这个东西 然后呢 制服串2

16:05.260 --> 16:05.860
md5

16:07.980 --> 16:13.300
他也有可能会得到这个东西 理论上是存在的啊 不过这个几率已经小的非常非常小了啊

16:13.460 --> 16:16.980
他这个特殊的 算法的特殊性 导致这个几率非常非常小 所以大家不用担心

16:18.260 --> 16:21.380
嗯 为什么会出现那种情况呢 因为你想一个道理啊

16:21.840 --> 16:26.560
他这个长度固定的 他只有那么点长度 他那是所有的情况 他的数量是不是有限的

16:26.960 --> 16:30.760
对不对 而我们实际现实人物中的制不出来 情况是不是无限的

16:31.080 --> 16:34.640
往无限的往有限的集合里面投影 是不是一定会有重复的出现

16:35.000 --> 16:41.640
对吧 这是毫无疑问的 但是呢 实际上我们现实生活 在真正的系统里面呢 是很难很难遇得到的 你不用完全不用担心这个问题啊

16:42.600 --> 16:48.200
好 这是如果说你对md5宣法有兴趣的话 可以去查一下啊 我记得我刚刚当时刚刚毕业的时候呢

16:48.700 --> 16:49.200
嗯

16:50.580 --> 16:57.220
去做这个md5宣法 我去熟悉了个md5宣法 哪自当时是往我鞋产了的 是有点复杂的啊 有点复杂的

16:57.620 --> 17:02.020
大家可以网上去看一下 百度百克就有 那你可以按照他的流程 你自己去试一试

17:02.660 --> 17:08.980
好吧 那么这是md5加密啊 之后呢 如果说你要自己做系统的话 遇到那个服 遇到那个就是

17:11.740 --> 17:16.420
用户的数据数据数据表 那么你要一定要对他进行md5加密

17:16.420 --> 17:17.600
其他都没啥了

